var requirejs,require,define;!function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function T(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function t(e,t){return fa.call(e,t)}function m(e,i){return t(e,i)&&e[i]}function B(e,i){for(var n in e)if(t(e,n)&&i(e[n],n))break}function U(e,i,n,s){return i&&B(i,function(i,r){(n||!t(e,r))&&(!s||"object"!=typeof i||!i||H(i)||G(i)||i instanceof RegExp?e[r]=i:(e[r]||(e[r]={}),U(e[r],i,n,s)))}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,i,n){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=n,i&&(t.originalError=i),t}function ga(e){function i(e,t,i){var n,s,r,a,o,l,d,u,t=t&&t.split("/"),c=D.map,g=c&&c["*"];if(e){for(e=e.split("/"),s=e.length-1,D.nodeIdCompat&&Q.test(e[s])&&(e[s]=e[s].replace(Q,"")),"."===e[0].charAt(0)&&t&&(s=t.slice(0,t.length-1),e=s.concat(e)),s=e,r=0;r<s.length;r++)a=s[r],"."===a?(s.splice(r,1),r-=1):".."===a&&0!==r&&(1!=r||".."!==s[2])&&".."!==s[r-1]&&r>0&&(s.splice(r-1,2),r-=2);e=e.join("/")}if(i&&c&&(t||g)){s=e.split("/"),r=s.length;e:for(;r>0;r-=1){if(o=s.slice(0,r).join("/"),t)for(a=t.length;a>0;a-=1)if((i=m(c,t.slice(0,a).join("/")))&&(i=m(i,o))){n=i,l=r;break e}!d&&g&&m(g,o)&&(d=m(g,o),u=r)}!n&&d&&(n=d,l=u),n&&(s.splice(0,l,n),e=s.join("/"))}return(n=m(D.pkgs,e))?n:e}function n(e){z&&v(document.getElementsByTagName("script"),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function s(e){var t=m(D.paths,e);return t&&H(t)&&1<t.length?(t.shift(),w.require.undef(e),w.makeRequire(null,{skipMap:!0})([e]),!0):void 0}function r(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function a(e,t,n,s){var a,o,l=null,d=t?t.name:null,u=e,c=!0,g="";return e||(c=!1,e="_@r"+(F+=1)),e=r(e),l=e[0],e=e[1],l&&(l=i(l,d,s),o=m(k,l)),e&&(l?g=o&&o.normalize?o.normalize(e,function(e){return i(e,d,s)}):-1===e.indexOf("!")?i(e,d,s):e:(g=i(e,d,s),e=r(g),l=e[0],g=e[1],n=!0,a=w.nameToUrl(g))),n=!l||o||n?"":"_unnormalized"+(j+=1),{prefix:l,name:g,parentMap:t,unnormalized:!!n,url:a,originalName:u,isDefine:c,id:(l?l+"!"+g:g)+n}}function o(e){var t=e.id,i=m(_,t);return i||(i=_[t]=new w.Module(e)),i}function l(e,i,n){var s=e.id,r=m(_,s);!t(k,s)||r&&!r.defineEmitComplete?(r=o(e),r.error&&"error"===i?n(r.error):r.on(i,n)):"defined"===i&&n(k[s])}function d(e,t){var i=e.requireModules,n=!1;t?t(e):(v(i,function(t){(t=m(_,t))&&(t.error=e,t.events.error&&(n=!0,t.emit("error",e)))}),n||g.onError(e))}function c(){R.length&&(ha.apply(O,[O.length,0].concat(R)),R=[])}function h(e){delete _[e],delete L[e]}function p(e,t,i){var n=e.map.id;e.error?e.emit("error",e.error):(t[n]=!0,v(e.depMaps,function(n,s){var r=n.id,a=m(_,r);a&&!e.depMatched[s]&&!i[r]&&(m(t,r)?(e.defineDep(s,k[r]),e.check()):p(a,t,i))}),i[n]=!0)}function f(){var e,t,i=(e=1e3*D.waitSeconds)&&w.startTime+e<(new Date).getTime(),r=[],a=[],o=!1,l=!0;if(!x){if(x=!0,B(L,function(e){var d=e.map,u=d.id;if(e.enabled&&(d.isDefine||a.push(e),!e.error))if(!e.inited&&i)s(u)?o=t=!0:(r.push(u),n(u));else if(!e.inited&&e.fetched&&d.isDefine&&(o=!0,!d.prefix))return l=!1}),i&&r.length)return e=C("timeout","Load timeout for modules: "+r,null,r),e.contextName=w.contextName,d(e);l&&v(a,function(e){p(e,{},{})}),i&&!t||!o||!z&&!ea||A||(A=setTimeout(function(){A=0,f()},50)),x=!1}}function b(e){t(k,e[0])||o(a(e[0],null,!0)).init(e[1],e[2])}function y(e){var e=e.currentTarget||e.srcElement,t=w.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=w.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function E(){var e;for(c();O.length;){if(e=O.shift(),null===e[0])return d(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));b(e)}}var x,I,w,S,A,D={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},_={},L={},P={},O=[],k={},V={},W={},F=1,j=1;return S={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?k[e.map.id]=e.exports:e.exports=k[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(D.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},I=function(e){this.events=m(P,e.id)||{},this.map=e,this.shim=m(D.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},I.prototype={init:function(e,t,i,n){n=n||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=n.ignore,n.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;V[e]||(V[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id;t=this.depExports;var n=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(G(s)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{n=w.execCb(i,s,t,n)}catch(r){e=r}else n=w.execCb(i,s,t,n);if(this.map.isDefine&&void 0===n&&((t=this.module)?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",d(this.error=e)}else n=s;this.exports=n,this.map.isDefine&&!this.ignore&&(k[i]=n,g.onResourceLoad)&&g.onResourceLoad(w,this.map,this.depMaps),h(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,s=a(e.prefix);this.depMaps.push(s),l(s,"defined",u(this,function(s){var r,c;c=m(W,this.map.id);var p=this.map.name,f=this.map.parentMap?this.map.parentMap.name:null,v=w.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(s.normalize&&(p=s.normalize(p,function(e){return i(e,f,!0)})||""),s=a(e.prefix+"!"+p,this.map.parentMap),l(s,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),(c=m(_,s.id))&&(this.depMaps.push(s),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable())):c?(this.map.url=w.nameToUrl(c),this.load()):(r=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),r.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],B(_,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&h(e.map.id)}),d(e)}),r.fromText=u(this,function(i,s){var l=e.name,u=a(l),c=M;s&&(i=s),c&&(M=!1),o(u),t(D.config,n)&&(D.config[l]=D.config[n]);try{g.exec(i)}catch(h){return d(C("fromtexteval","fromText eval for "+n+" failed: "+h,h,[n]))}c&&(M=!0),this.depMaps.push(u),w.completeLoad(l),v([l],r)}),s.load(e.name,v,r,D))})),w.enable(s,this),this.pluginMaps[s.id]=s},enable:function(){L[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,i){var n,s;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=e,n=m(S,e.id))return this.depExports[i]=n(this),void 0;this.depCount+=1,l(e,"defined",u(this,function(e){this.defineDep(i,e),this.check()})),this.errback&&l(e,"error",u(this,this.errback))}n=e.id,s=_[n],!t(S,n)&&s&&!s.enabled&&w.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(_,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:D,contextName:e,registry:_,defined:k,urlFetched:V,defQueue:O,Module:I,makeModuleMap:a,nextTick:g.nextTick,onError:d,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=D.shim,i={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){i[t]?(D[t]||(D[t]={}),U(D[t],e,!0,!0)):D[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(W[e]=t)})}),e.shim&&(B(e.shim,function(e,i){H(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),t[i]=e}),D.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(D.paths[t]=e.location),D.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(_,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=a(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(s,r){function l(i,n,u){var c,h;return r.enableBuildCallback&&n&&G(n)&&(n.__requireJsBuild=!0),"string"==typeof i?G(n)?d(C("requireargs","Invalid require call"),u):s&&t(S,i)?S[i](_[s.id]):g.get?g.get(w,i,s,l):(c=a(i,s,!1,!0),c=c.id,t(k,c)?k[c]:d(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(s?"":". Use require([])")))):(E(),w.nextTick(function(){E(),h=o(a(null,s)),h.skipMap=r.skipMap,h.init(i,n,u,{enabled:!0}),f()}),l)}return r=r||{},U(l,{isBrowser:z,toUrl:function(e){var t,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&("."!==r&&".."!==r||n>1)&&(t=e.substring(n,e.length),e=e.substring(0,n)),w.nameToUrl(i(e,s&&s.id,!0),t,!0)},defined:function(e){return t(k,a(e,s,!1,!0).id)},specified:function(e){return e=a(e,s,!1,!0).id,t(k,e)||t(_,e)}}),s||(l.undef=function(e){c();var t=a(e,s,!0),i=m(_,e);n(e),delete k[e],delete V[t.url],delete P[e],T(O,function(t,i){t[0]===e&&O.splice(i,1)}),i&&(i.events.defined&&(P[e]=i.events),h(e))}),l},enable:function(e){m(_,e.id)&&o(e).enable()},completeLoad:function(e){var i,n,r=m(D.shim,e)||{},a=r.exports;for(c();O.length;){if(n=O.shift(),null===n[0]){if(n[0]=e,i)break;i=!0}else n[0]===e&&(i=!0);b(n)}if(n=m(_,e),!i&&!t(k,e)&&n&&!n.inited){if(D.enforceDefine&&(!a||!da(a)))return s(e)?void 0:d(C("nodefine","No define call for "+e,null,[e]));b([e,r.deps||[],r.exportsFn])}f()},nameToUrl:function(e,t,i){var n,s,r;if((n=m(D.pkgs,e))&&(e=n),n=m(W,e))return w.nameToUrl(n,t,i);if(g.jsExtRegExp.test(e))n=e+(t||"");else{for(n=D.paths,e=e.split("/"),s=e.length;s>0;s-=1)if(r=e.slice(0,s).join("/"),r=m(n,r)){H(r)&&(r=r[0]),e.splice(0,s,r);break}n=e.join("/"),n+=t||(/^data\:|\?/.test(n)||i?"":".js"),n=("/"===n.charAt(0)||n.match(/^[\w\+\.\-]+:/)?"":D.baseUrl)+n}return D.urlArgs?n+((-1===n.indexOf("?")?"?":"&")+D.urlArgs):n},load:function(e,t){g.load(w,e,t)},execCb:function(e,t,i,n){return t.apply(n,i)},onScriptLoad:function(e){("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))&&(N=null,e=y(e),w.completeLoad(e.id))},onScriptError:function(e){var t=y(e);return s(t.id)?void 0:d(C("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,i,n){var s,r="_";return!H(e)&&"string"!=typeof e&&(s=e,H(t)?(e=t,t=i,i=n):e=[]),s&&s.context&&(r=s.context),(n=m(F,r))||(n=F[r]=g.s.newContext(r)),s&&n.configure(s),n.require(e,t,i)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.15",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,i){var n=e&&e.config||{};if(z)return n=g.createNode(n,t,i),n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&0>n.attachEvent.toString().indexOf("[native code")||Y?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(M=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,J=n,D?y.insertBefore(n,D):y.appendChild(n),J=null,n;if(ea)try{importScripts(i),e.completeLoad(t)}catch(s){e.onError(C("importscripts","importScripts failed for "+t+" at "+i,s,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){return y||(y=e.parentNode),(I=e.getAttribute("data-main"))?(s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0):void 0}),define=function(e,t,i){var n,s;"string"!=typeof e&&(i=t,t=e,e=null),H(t)||(i=t,t=null),!t&&G(i)&&(t=[],i.length&&(i.toString().replace(ka,"").replace(la,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),M&&((n=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){return"interactive"===e.readyState?N=e:void 0}),n=N),n&&(e||(e=n.getAttribute("data-requiremodule")),s=F[n.getAttribute("data-requirecontext")])),(s?s.defQueue:R).push([e,t,i])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}}(this),define("requireLib",function(){}),define("brease/config",{font:"Arial, Helvetica, sans-serif",undefinedTextReturnValue:"undefined key",visu:{activityCount:!1},ContentCaching:{preserveOldValues:!0},themeFolder:"release/"}),define("brease/core/Utils",[],function(){"use strict";var Utils={};Utils.defineProperty=function(e,t,i,n,s,r){var config={enumerable:void 0!==n?n:!0,configurable:void 0!==s?s:!1,writable:void 0!==r?r:!1,value:i};Object.defineProperty(e,t,config)},Utils.deepCopy=function(e){return s(e)},Utils.extendDeepToNew=function(e,t){return r(s(e),t)},Utils.toArray=function(e,t){var i;if(e){var n=e.length;if(i=[],t=void 0!==t?t:0,n>t)for(var s=t;n>s;s+=1)i.push(e[s])}return i},Utils.parseTemplate=function(e){if(-1!==e.indexOf('data-template="true"')){var t=document.createDocumentFragment();return $(t).append($(e)),Utils.parseTemplates(t),t}return e},Utils.parseTemplates=function(e){for(var t=e.querySelectorAll('[data-template="true"]'),i=t.length,n,s=0;i>s;s+=1)for(n=t[s],n.content=document.createDocumentFragment();n.childNodes[0];)n.content.appendChild(n.childNodes[0])},Utils.prependChild=function(e,t){if(e instanceof Node==!1)throw new SyntaxError("first argument has to be of type Node");if(t instanceof Node==!1)throw new SyntaxError("second argument has to be of type Node");null!==e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},Utils.elemContains=function(e,t){return $.contains(e,t)},Utils.parseElementData=function(e,t){var i="data-"+t,n=e.getAttribute(i),s;try{s=null!==n&&""!==n?JSON.parse(n.replace(/\'/g,'"')):{}}catch(r){console.iatWarn("Illegal data in attribute "+i+" for widget "+e.id+", widget will have default values!"),s={}}return s},Utils.setDate=function(e,t,i,n,s){return void 0!==e&&("function"!=typeof e.setHours||isNaN(t)||e.setHours(t),"function"!=typeof e.setMinutes||isNaN(i)||e.setMinutes(i),"function"!=typeof e.setSeconds||isNaN(n)||e.setSeconds(n),"function"!=typeof e.setMilliseconds||isNaN(s)||e.setMilliseconds(s)),e};var e=1,t="abcdefghijklmnopqrstuvwxyz";Utils.uniqueID=function(i){var n=i||t[Math.ceil(25*Math.random())];return e+=1,n+"_"+e},Utils.radToDeg=function(e){return 180/Math.PI*e},Utils.degToRad=function(e){return e/180*Math.PI},Utils.isString=function(e){return"string"==typeof e||e instanceof String},Utils.isBlank=function(e){return!e||/^\s*$/.test(e)},Utils.isWidget=function(e){return e&&"function"==typeof e._bind&&void 0!==e.settings&&void 0!==e.settings.className&&-1!==e.settings.className.indexOf("widgets")},Utils.isObject=function(e){return e instanceof Object},Utils.isFunction=function(e){return"function"==typeof e},Utils.isNumeric=function(e){return!isNaN(e)&&""!==e&&e!==!0&&e!==!1&&null!==e},Utils.getter=function(e){return n("get",e)},Utils.setter=function(e){return n("set",e)},Utils.permission=function(e,t){var i=!1,n;if(!Array.isArray(e)||0===e.length)return i;if(!Array.isArray(t)||0===t.length)return i;if(e.length<t.length){for(n=0;n<e.length;n+=1)if(-1!==t.indexOf(e[n])){i=!0;break}}else for(n=0;n<t.length;n+=1)if(-1!==e.indexOf(t[n])){i=!0;break}return i},Utils.getScaleFactor=function(e){var t=1;if(e instanceof Element&&"function"==typeof e.getBoundingClientRect){var i=$(e).outerWidth();i>0&&(t=e.getBoundingClientRect().width/i)}return t},Utils.closestWidgetElem=function(e){if(Utils.hasClass(e,"breaseWidget"))return e;for(var t=e,i;t!==document.body&&!Utils.hasClass(t,"breaseWidget")&&(i=t.parentNode,i);)t=i;return t},Utils.getChromeScale=function(e){var t=navigator.userAgent,i=navigator.userAgent.toLowerCase().indexOf("chrome"),n=-1!==i,s=0;return n&&(s=parseInt(t.substring(i+7),10)),n&&s>=58?1:Utils.getScaleFactor(e)},Utils.objToLogText=function(e){var t="";if(void 0===e)return"";if("object"==typeof e)for(var i in e)t+=e[i]&&"[object Object]"===e[i].toString()?(""!==t?",":"")+i+"={"+Utils.objToLogText(e[i])+"}":(""!==t?",":"")+i+"="+e[i];else t=e.toString();return t},Utils.logError=function(e){e.stack?console.log("%c"+e.stack,"color:red;"):e.name&&e.message?console.log("%c"+e.name+": "+e.message,"color:red;"):e.message?console.log("%cError: "+e.message,"color:red;"):console.log("%cError in try/catch; log trace for more info","color:red;")},Utils.getStylesheetByHref=function(e){var t;if(""!==e)for(var i=0;i<document.styleSheets.length;i+=1)if(document.styleSheets[i].href&&-1!==document.styleSheets[i].href.indexOf(e)){t=document.styleSheets[i];break}return t};var i=/\(([\s\S]*?)\)/;Utils.getFunctionArguments=function o(e){if("function"!=typeof e)throw new SyntaxError("argument has to be of type function");var t=i.exec(e),n=[];return t&&""!==t[1]&&(n=t[1].replace(/ /g,"").split(",")),n},Utils.getOriginalEvent=function(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e},Utils.getPointerId=function(e){var t;if(e.detail&&void 0!==e.detail.pointerId)t=e.detail.pointerId;else{var i=Utils.getOriginalEvent(e);void 0!==i.pointerId?t=i.pointerId:i.changedTouches&&i.changedTouches.length>0&&(t=i.changedTouches[0].identifier)}return t},Utils.getOffsetOfEvent=function(e){var t=Utils.getOriginalEvent(e),i={x:0,y:0};return t.changedTouches&&t.changedTouches.length>0?(i.x=t.changedTouches[0].pageX,i.y=t.changedTouches[0].pageY):void 0!==t.pageX&&(i.x=t.pageX,i.y=t.pageY),i},Utils.hasClass=function(e,t){return null!==e&&void 0!==e&&(void 0!==e.className&&"function"==typeof e.className.indexOf&&-1!==e.className.indexOf(t)||void 0!==e.classList&&void 0!==e.classList.value&&-1!==e.classList.value.indexOf(t))},Utils.addClass=function(e,t){var i="";if(e&&"function"==typeof e.getAttribute&&"function"==typeof e.setAttribute&&Utils.isString(t)){var n=e.getAttribute("class");n&&(i=""+n),""!==i?-1===i.split(" ").indexOf(t)&&e.setAttribute("class",i+" "+t):e.setAttribute("class",t)}},Utils.removeClass=function(e,t){var i="";if(e&&"function"==typeof e.getAttribute&&"function"==typeof e.setAttribute&&Utils.isString(t)){var n=e.getAttribute("class");if(n&&(i=""+n),""!==i)if(-1!==i.indexOf(" ")){for(var s=(""+i).split(" "),r=s.indexOf(t);-1!==r;)s.splice(r,1),r=s.indexOf(t);e.setAttribute("class",s.join(" "))}else i===t&&e.setAttribute("class","")}},Utils.arrayToObject=function(e,t){if(!Array.isArray(e))throw new SyntaxError("first argument has to be of type Array");if(void 0!==t&&!Utils.isString(t))throw new SyntaxError("second argument has to be of type String");for(var i={},n,s,r=0,a=e.length;a>r;r+=1)n=e[r],s=void 0!==t&&void 0!==n[t]?n[t]:""+r,i[s]=n;return i},Utils.transferProperties=function(e,t,i){if(!Utils.isObject(e))throw new SyntaxError("first argument has to be of type Object");if(!Utils.isObject(t))throw new SyntaxError("second argument has to be of type Object");if(!Array.isArray(i))throw new SyntaxError("third argument has to be of type Array");for(var n=0,s=i.length;s>n;n+=1)t[i[n]]=e[i[n]]},Utils.ensureVisuId=function(e){return Utils.isString(e)?e.toLowerCase():e};function n(e,t){return e+t.substring(0,1).toUpperCase()+t.substring(1)}function s(e){var t;if("object"!=typeof e)return e;if(!e)return e;if(Array.isArray(e)){t=[];for(var i=0,n=e.length;n>i;i+=1)t[i]=s(e[i]);return t}t={};for(var r in e)t[r]=s(e[r]);return t}function r(e,t){if(void 0!==e&&null!==e){var i,n;for(i in t)n=t[i],void 0!==n&&("object"!=typeof n||null===n?e[i]=n:Array.isArray(n)?Array.isArray(e[i])?a(e[i],n):e[i]=s(n):void 0===e[i]?e[i]=s(n):e[i]=r(e[i],n));return e}return void 0!==t?t:e}function a(e,t){for(var i=0,n=t.length;n>i;i+=1)void 0!==t[i]&&("object"!=typeof t[i]||null===t[i]?e[i]=t[i]:e[i]=r(e[i],t[i]))}return Utils}),define("brease/settings",["brease/core/Utils"],function(Utils){"use strict";var e={},t=window.devicePixelRatio>1?window.devicePixelRatio:1;return Utils.defineProperty(e,"noKeyValue",""),Utils.defineProperty(e,"noValueString","XX"),Utils.defineProperty(e,"globalContent","0global"),Utils.defineProperty(e,"swipe",{}),e.swipe.maxFingerDistance=120*t,e.swipe.moveThreshold=150*t,e.swipe.velocity=1.3,e}),define("brease/events/DummyEvent",[],function(){"use strict";var DummyEvent=function(e,t){this.type=e,this.target=t,this.defaultPrevented=!1};return DummyEvent.prototype.preventDefault=function(){this.originalEvent&&this.defaultPrevented!==!0&&"function"==typeof this.originalEvent.preventDefault&&(this.defaultPrevented=!0,this.originalEvent.preventDefault())},DummyEvent.prototype.stopPropagation=function(){},DummyEvent.prototype.stopImmediatePropagation=function(){},DummyEvent.prototype.isDefaultPrevented=function(){return this.defaultPrevented},DummyEvent.prototype.isImmediatePropagationStopped=function(){return!1},DummyEvent.prototype.isPropagationStopped=function(){return!1},DummyEvent}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){var i=[],n=e.document,s=i.slice,r=i.concat,a=i.push,o=i.indexOf,l={},d=l.toString,u=l.hasOwnProperty,c={},g="2.2.3",h=function(e,t){return new h.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,f=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};h.fn=h.prototype={jquery:g,constructor:h,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=h.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return h.each(this,e)},map:function(e){return this.pushStack(h.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:i.sort,splice:i.splice},h.extend=h.fn.extend=function(){var e,t,i,n,s,r,a=arguments[0]||{},o=1,l=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[o]||{},o++),"object"==typeof a||h.isFunction(a)||(a={}),o===l&&(a=this,o--);l>o;o++)if(null!=(e=arguments[o]))for(t in e)i=a[t],n=e[t],a!==n&&(d&&n&&(h.isPlainObject(n)||(s=h.isArray(n)))?(s?(s=!1,r=i&&h.isArray(i)?i:[]):r=i&&h.isPlainObject(i)?i:{},a[t]=h.extend(d,r,n)):void 0!==n&&(a[t]=n));return a},h.extend({expando:"jQuery"+(g+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===h.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!h.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==h.type(e)||e.nodeType||h.isWindow(e))return!1;if(e.constructor&&!u.call(e,"constructor")&&!u.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||u.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[d.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=h.trim(e),e&&(1===e.indexOf("use strict")?(t=n.createElement("script"),t.text=e,n.head.appendChild(t).parentNode.removeChild(t)):i(e))},camelCase:function(e){return e.replace(m,"ms-").replace(f,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(b(e))for(i=e.length;i>n&&t.call(e[n],n,e[n])!==!1;n++);else for(n in e)if(t.call(e[n],n,e[n])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(b(Object(e))?h.merge(i,"string"==typeof e?[e]:e):a.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:o.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,s=e.length;i>n;n++)e[s++]=t[n];return e.length=s,e},grep:function(e,t,i){for(var n,s=[],r=0,a=e.length,o=!i;a>r;r++)n=!t(e[r],r),n!==o&&s.push(e[r]);return s},map:function(e,t,i){var n,s,a=0,o=[];if(b(e))for(n=e.length;n>a;a++)s=t(e[a],a,i),null!=s&&o.push(s);else for(a in e)s=t(e[a],a,i),null!=s&&o.push(s);return r.apply([],o)},guid:1,proxy:function(e,t){var i,n,r;return"string"==typeof t&&(i=e[t],t=e,e=i),h.isFunction(e)?(n=s.call(arguments,2),r=function(){return e.apply(t||this,n.concat(s.call(arguments)))},r.guid=e.guid=e.guid||h.guid++,r):void 0},now:Date.now,support:c}),"function"==typeof Symbol&&(h.fn[Symbol.iterator]=i[Symbol.iterator]),h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function b(e){var t=!!e&&"length"in e&&e.length,i=h.type(e);return"function"===i||h.isWindow(e)?!1:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}var y=function(e){var t,i,n,s,r,a,o,l,d,u,c,g,h,p,m,f,v,b,y,E="sizzle"+1*new Date,x=e.document,I=0,w=0,C=ae(),S=ae(),T=ae(),A=function(e,t){return e===t&&(c=!0),0},D=1<<31,_={}.hasOwnProperty,L=[],N=L.pop,P=L.push,O=L.push,B=L.slice,k=function(e,t){for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",H="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",V="\\["+R+"*("+H+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+H+"))|)"+R+"*\\]",W=":("+H+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",U=new RegExp(R+"+","g"),F=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),G=new RegExp("^"+R+"*,"+R+"*"),z=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),j=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),q=new RegExp(W),K=new RegExp("^"+H+"$"),Y={ID:new RegExp("^#("+H+")"),CLASS:new RegExp("^\\.("+H+")"),TAG:new RegExp("^("+H+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ne=function(){g()};try{O.apply(L=B.call(x.childNodes),x.childNodes),L[x.childNodes.length].nodeType}catch(se){O={apply:L.length?function(e,t){P.apply(e,B.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function re(e,t,n,s){var r,o,d,u,c,p,v,b,I=t&&t.ownerDocument,w=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return n;if(!s&&((t?t.ownerDocument||t:x)!==h&&g(t),t=t||h,m)){if(11!==w&&(p=Z.exec(e)))if(r=p[1]){if(9===w){if(!(d=t.getElementById(r)))return n;if(d.id===r)return n.push(d),n}else if(I&&(d=I.getElementById(r))&&y(t,d)&&d.id===r)return n.push(d),n}else{if(p[2])return O.apply(n,t.getElementsByTagName(e)),n;if((r=p[3])&&i.getElementsByClassName&&t.getElementsByClassName)return O.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&!T[e+" "]&&(!f||!f.test(e))){if(1!==w)I=t,b=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(ee,"\\$&"):t.setAttribute("id",u=E),v=a(e),o=v.length,c=K.test(u)?"#"+u:"[id='"+u+"']";o--;)v[o]=c+" "+fe(v[o]);b=v.join(","),I=J.test(e)&&pe(t.parentNode)||t}if(b)try{return O.apply(n,I.querySelectorAll(b)),n}catch(C){}finally{u===E&&t.removeAttribute("id")}}}return l(e.replace(F,"$1"),t,n,s)}function ae(){var e=[];function t(i,s){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=s}return t}function oe(e){return e[E]=!0,e}function le(e){var t=h.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var i=e.split("|"),s=i.length;s--;)n.attrHandle[i[s]]=t}function ue(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ce(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function ge(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function he(e){return oe(function(t){return t=+t,oe(function(i,n){for(var s,r=e([],i.length,t),a=r.length;a--;)i[s=r[a]]&&(i[s]=!(n[s]=i[s]))})})}function pe(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}i=re.support={},r=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},g=re.setDocument=function(e){var t,s,a=e?e.ownerDocument||e:x;return a!==h&&9===a.nodeType&&a.documentElement?(h=a,p=h.documentElement,m=!r(h),(s=h.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",ne,!1):s.attachEvent&&s.attachEvent("onunload",ne)),
i.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=le(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=Q.test(h.getElementsByClassName),i.getById=le(function(e){return p.appendChild(e).id=E,!h.getElementsByName||!h.getElementsByName(E).length}),i.getById?(n.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&m){var i=t.getElementById(e);return i?[i]:[]}},n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}}):(delete n.find.ID,n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),n.find.TAG=i.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&m?t.getElementsByClassName(e):void 0},v=[],f=[],(i.qsa=Q.test(h.querySelectorAll))&&(le(function(e){p.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+R+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+E+"-]").length||f.push("~="),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||f.push(".#.+[+~]")}),le(function(e){var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+R+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(i.matchesSelector=Q.test(b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le(function(e){i.disconnectedMatch=b.call(e,"div"),b.call(e,"[s!='']:x"),v.push("!=",W)}),f=f.length&&new RegExp(f.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(p.compareDocumentPosition),y=t||Q.test(p.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return c=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!i.sortDetached&&t.compareDocumentPosition(e)===n?e===h||e.ownerDocument===x&&y(x,e)?-1:t===h||t.ownerDocument===x&&y(x,t)?1:u?k(u,e)-k(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return c=!0,0;var i,n=0,s=e.parentNode,r=t.parentNode,a=[e],o=[t];if(!s||!r)return e===h?-1:t===h?1:s?-1:r?1:u?k(u,e)-k(u,t):0;if(s===r)return ue(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)o.unshift(i);for(;a[n]===o[n];)n++;return n?ue(a[n],o[n]):a[n]===x?-1:o[n]===x?1:0},h):h},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&g(e),t=t.replace(j,"='$1']"),i.matchesSelector&&m&&!T[t+" "]&&(!v||!v.test(t))&&(!f||!f.test(t)))try{var n=b.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(s){}return re(t,h,null,[e]).length>0},re.contains=function(e,t){return(e.ownerDocument||e)!==h&&g(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==h&&g(e);var s=n.attrHandle[t.toLowerCase()],r=s&&_.call(n.attrHandle,t.toLowerCase())?s(e,t,!m):void 0;return void 0!==r?r:i.attributes||!m?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],s=0,r=0;if(c=!i.detectDuplicates,u=!i.sortStable&&e.slice(0),e.sort(A),c){for(;t=e[r++];)t===e[r]&&(s=n.push(r));for(;s--;)e.splice(n[s],1)}return u=null,e},s=re.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=s(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=s(t);return i},n=re.selectors={cacheLength:50,createPseudo:oe,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&q.test(i)&&(t=a(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&C(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var s=re.attr(n,e);return null==s?"!="===t:t?(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&s.indexOf(i)>-1:"$="===t?i&&s.slice(-i.length)===i:"~="===t?(" "+s.replace(U," ")+" ").indexOf(i)>-1:"|="===t?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,i,n,s){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===s?function(e){return!!e.parentNode}:function(t,i,l){var d,u,c,g,h,p,m=r!==a?"nextSibling":"previousSibling",f=t.parentNode,v=o&&t.nodeName.toLowerCase(),b=!l&&!o,y=!1;if(f){if(r){for(;m;){for(g=t;g=g[m];)if(o?g.nodeName.toLowerCase()===v:1===g.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?f.firstChild:f.lastChild],a&&b){for(g=f,c=g[E]||(g[E]={}),u=c[g.uniqueID]||(c[g.uniqueID]={}),d=u[e]||[],h=d[0]===I&&d[1],y=h&&d[2],g=h&&f.childNodes[h];g=++h&&g&&g[m]||(y=h=0)||p.pop();)if(1===g.nodeType&&++y&&g===t){u[e]=[I,h,y];break}}else if(b&&(g=t,c=g[E]||(g[E]={}),u=c[g.uniqueID]||(c[g.uniqueID]={}),d=u[e]||[],h=d[0]===I&&d[1],y=h),y===!1)for(;(g=++h&&g&&g[m]||(y=h=0)||p.pop())&&((o?g.nodeName.toLowerCase()!==v:1!==g.nodeType)||!++y||(b&&(c=g[E]||(g[E]={}),u=c[g.uniqueID]||(c[g.uniqueID]={}),u[e]=[I,y]),g!==t)););return y-=s,y===n||y%n===0&&y/n>=0}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return s[E]?s(t):s.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,i){for(var n,r=s(e,t),a=r.length;a--;)n=k(e,r[a]),e[n]=!(i[n]=r[a])}):function(e){return s(e,0,i)}):s}},pseudos:{not:oe(function(e){var t=[],i=[],n=o(e.replace(F,"$1"));return n[E]?oe(function(e,t,i,s){for(var r,a=n(e,null,s,[]),o=e.length;o--;)(r=a[o])&&(e[o]=!(t[o]=r))}):function(e,s,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}}),has:oe(function(e){return function(t){return re(e,t).length>0}}),contains:oe(function(e){return e=e.replace(te,ie),function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:oe(function(e){return K.test(e||"")||re.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return $.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:he(function(){return[0]}),last:he(function(e,t){return[t-1]}),eq:he(function(e,t,i){return[0>i?i+t:i]}),even:he(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:he(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:he(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:he(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},n.pseudos.nth=n.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=ce(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=ge(t);function me(){}me.prototype=n.filters=n.pseudos,n.setFilters=new me,a=re.tokenize=function(e,t){var i,s,r,a,o,l,d,u=S[e+" "];if(u)return t?0:u.slice(0);for(o=e,l=[],d=n.preFilter;o;){(!i||(s=G.exec(o)))&&(s&&(o=o.slice(s[0].length)||o),l.push(r=[])),i=!1,(s=z.exec(o))&&(i=s.shift(),r.push({value:i,type:s[0].replace(F," ")}),o=o.slice(i.length));for(a in n.filter)!(s=Y[a].exec(o))||d[a]&&!(s=d[a](s))||(i=s.shift(),r.push({value:i,type:a,matches:s}),o=o.slice(i.length));if(!i)break}return t?o.length:o?re.error(e):S(e,l).slice(0)};function fe(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function ve(e,t,i){var n=t.dir,s=i&&"parentNode"===n,r=w++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||s)return e(t,i,r)}:function(t,i,a){var o,l,d,u=[I,r];if(a){for(;t=t[n];)if((1===t.nodeType||s)&&e(t,i,a))return!0}else for(;t=t[n];)if(1===t.nodeType||s){if(d=t[E]||(t[E]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),(o=l[n])&&o[0]===I&&o[1]===r)return u[2]=o[2];if(l[n]=u,u[2]=e(t,i,a))return!0}}}function be(e){return e.length>1?function(t,i,n){for(var s=e.length;s--;)if(!e[s](t,i,n))return!1;return!0}:e[0]}function ye(e,t,i){for(var n=0,s=t.length;s>n;n++)re(e,t[n],i);return i}function Ee(e,t,i,n,s){for(var r,a=[],o=0,l=e.length,d=null!=t;l>o;o++)(r=e[o])&&(!i||i(r,n,s))&&(a.push(r),d&&t.push(o));return a}function xe(e,t,i,n,s,r){return n&&!n[E]&&(n=xe(n)),s&&!s[E]&&(s=xe(s,r)),oe(function(r,a,o,l){var d,u,c,g=[],h=[],p=a.length,m=r||ye(t||"*",o.nodeType?[o]:o,[]),f=!e||!r&&t?m:Ee(m,g,e,o,l),v=i?s||(r?e:p||n)?[]:a:f;if(i&&i(f,v,o,l),n)for(d=Ee(v,h),n(d,[],o,l),u=d.length;u--;)(c=d[u])&&(v[h[u]]=!(f[h[u]]=c));if(r){if(s||e){if(s){for(d=[],u=v.length;u--;)(c=v[u])&&d.push(f[u]=c);s(null,v=[],d,l)}for(u=v.length;u--;)(c=v[u])&&(d=s?k(r,c):g[u])>-1&&(r[d]=!(a[d]=c))}}else v=Ee(v===a?v.splice(p,v.length):v),s?s(null,a,v,l):O.apply(a,v)})}function Ie(e){for(var t,i,s,r=e.length,a=n.relative[e[0].type],o=a||n.relative[" "],l=a?1:0,u=ve(function(e){return e===t},o,!0),c=ve(function(e){return k(t,e)>-1},o,!0),g=[function(e,i,n){var s=!a&&(n||i!==d)||((t=i).nodeType?u(e,i,n):c(e,i,n));return t=null,s}];r>l;l++)if(i=n.relative[e[l].type])g=[ve(be(g),i)];else{if(i=n.filter[e[l].type].apply(null,e[l].matches),i[E]){for(s=++l;r>s&&!n.relative[e[s].type];s++);return xe(l>1&&be(g),l>1&&fe(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(F,"$1"),i,s>l&&Ie(e.slice(l,s)),r>s&&Ie(e=e.slice(s)),r>s&&fe(e))}g.push(i)}return be(g)}function we(e,t){var i=t.length>0,s=e.length>0,r=function(r,a,o,l,u){var c,p,f,v=0,b="0",y=r&&[],E=[],x=d,w=r||s&&n.find.TAG("*",u),C=I+=null==x?1:Math.random()||.1,S=w.length;for(u&&(d=a===h||a||u);b!==S&&null!=(c=w[b]);b++){if(s&&c){for(p=0,a||c.ownerDocument===h||(g(c),o=!m);f=e[p++];)if(f(c,a||h,o)){l.push(c);break}u&&(I=C)}i&&((c=!f&&c)&&v--,r&&y.push(c))}if(v+=b,i&&b!==v){for(p=0;f=t[p++];)f(y,E,a,o);if(r){if(v>0)for(;b--;)y[b]||E[b]||(E[b]=N.call(l));E=Ee(E)}O.apply(l,E),u&&!r&&E.length>0&&v+t.length>1&&re.uniqueSort(l)}return u&&(I=C,d=x),y};return i?oe(r):r}return o=re.compile=function(e,t){var i,n=[],s=[],r=T[e+" "];if(!r){for(t||(t=a(e)),i=t.length;i--;)r=Ie(t[i]),r[E]?n.push(r):s.push(r);r=T(e,we(s,n)),r.selector=e}return r},l=re.select=function(e,t,s,r){var l,d,u,c,g,h="function"==typeof e&&e,p=!r&&a(e=h.selector||e);if(s=s||[],1===p.length){if(d=p[0]=p[0].slice(0),d.length>2&&"ID"===(u=d[0]).type&&i.getById&&9===t.nodeType&&m&&n.relative[d[1].type]){if(t=(n.find.ID(u.matches[0].replace(te,ie),t)||[])[0],!t)return s;h&&(t=t.parentNode),e=e.slice(d.shift().value.length)}for(l=Y.needsContext.test(e)?0:d.length;l--&&(u=d[l],!n.relative[c=u.type]);)if((g=n.find[c])&&(r=g(u.matches[0].replace(te,ie),J.test(d[0].type)&&pe(t.parentNode)||t))){if(d.splice(l,1),e=r.length&&fe(d),!e)return O.apply(s,r),s;break}}return(h||o(e,p))(r,t,!m,s,!t||J.test(e)&&pe(t.parentNode)||t),s},i.sortStable=E.split("").sort(A).join("")===E,i.detectDuplicates=!!c,g(),i.sortDetached=le(function(e){return 1&e.compareDocumentPosition(h.createElement("div"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||de("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||de("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||de(M,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),re}(e);h.find=y,h.expr=y.selectors,h.expr[":"]=h.expr.pseudos,h.uniqueSort=h.unique=y.uniqueSort,h.text=y.getText,h.isXMLDoc=y.isXML,h.contains=y.contains;var E=function(e,t,i){for(var n=[],s=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(s&&h(e).is(i))break;n.push(e)}return n},x=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},I=h.expr.match.needsContext,w=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,C=/^.[^:#\[\.,]*$/;function S(e,t,i){if(h.isFunction(t))return h.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return h.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(C.test(t))return h.filter(t,e,i);t=h.filter(t,e)}return h.grep(e,function(e){return o.call(t,e)>-1!==i})}h.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?h.find.matchesSelector(n,e)?[n]:[]:h.find.matches(e,h.grep(t,function(e){return 1===e.nodeType}))},h.fn.extend({find:function(e){var t,i=this.length,n=[],s=this;if("string"!=typeof e)return this.pushStack(h(e).filter(function(){for(t=0;i>t;t++)if(h.contains(s[t],this))return!0}));for(t=0;i>t;t++)h.find(e,s[t],n);return n=this.pushStack(i>1?h.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&I.test(e)?h(e):e||[],!1).length}});var T,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,D=h.fn.init=function(e,t,i){var s,r;if(!e)return this;if(i=i||T,"string"==typeof e){if(s="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:A.exec(e),!s||!s[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(s[1]){if(t=t instanceof h?t[0]:t,h.merge(this,h.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:n,!0)),w.test(s[1])&&h.isPlainObject(t))for(s in t)h.isFunction(this[s])?this[s](t[s]):this.attr(s,t[s]);return this}return r=n.getElementById(s[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=n,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):h.isFunction(e)?void 0!==i.ready?i.ready(e):e(h):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),h.makeArray(e,this))};D.prototype=h.fn,T=h(n);var _=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};h.fn.extend({has:function(e){var t=h(e,this),i=t.length;return this.filter(function(){for(var e=0;i>e;e++)if(h.contains(this,t[e]))return!0})},closest:function(e,t){for(var i,n=0,s=this.length,r=[],a=I.test(e)||"string"!=typeof e?h(e,t||this.context):0;s>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&h.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?h.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?o.call(h(e),this[0]):o.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(h.uniqueSort(h.merge(this.get(),h(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}});function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}h.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,i){return E(e,"parentNode",i)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,i){return E(e,"nextSibling",i)},prevUntil:function(e,t,i){return E(e,"previousSibling",i)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return e.contentDocument||h.merge([],e.childNodes)}},function(e,t){h.fn[e]=function(i,n){var s=h.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=h.filter(n,s)),this.length>1&&(L[e]||h.uniqueSort(s),_.test(e)&&s.reverse()),this.pushStack(s)}});var P=/\S+/g;function O(e){var t={};return h.each(e.match(P)||[],function(e,i){t[i]=!0}),t}h.Callbacks=function(e){e="string"==typeof e?O(e):h.extend({},e);var t,i,n,s,r=[],a=[],o=-1,l=function(){for(s=e.once,n=t=!0;a.length;o=-1)for(i=a.shift();++o<r.length;)r[o].apply(i[0],i[1])===!1&&e.stopOnFalse&&(o=r.length,i=!1);e.memory||(i=!1),t=!1,s&&(r=i?[]:"")},d={add:function(){return r&&(i&&!t&&(o=r.length-1,a.push(i)),function n(t){h.each(t,function(t,i){h.isFunction(i)?e.unique&&d.has(i)||r.push(i):i&&i.length&&"string"!==h.type(i)&&n(i)})}(arguments),i&&!t&&l()),this},remove:function(){return h.each(arguments,function(e,t){for(var i;(i=h.inArray(t,r,i))>-1;)r.splice(i,1),o>=i&&o--}),this},has:function(e){return e?h.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=a=[],r=i="",this},disabled:function(){return!r},lock:function(){return s=a=[],i||(r=i=""),this},locked:function(){return!!s},fireWith:function(e,i){return s||(i=i||[],i=[e,i.slice?i.slice():i],a.push(i),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},h.extend({Deferred:function(e){var t=[["resolve","done",h.Callbacks("once memory"),"resolved"],["reject","fail",h.Callbacks("once memory"),"rejected"],["notify","progress",h.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return h.Deferred(function(i){h.each(t,function(t,r){var a=h.isFunction(e[t])&&e[t];s[r[1]](function(){var e=a&&a.apply(this,arguments);e&&h.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this===n?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?h.extend(e,n):n}},s={};return n.pipe=n.then,h.each(t,function(e,r){var a=r[2],o=r[3];n[r[1]]=a.add,o&&a.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?n:this,arguments),this},s[r[0]+"With"]=a.fireWith}),n.promise(s),e&&e.call(s,s),s},when:function(e){var t=0,i=s.call(arguments),n=i.length,r=1!==n||e&&h.isFunction(e.promise)?n:0,a=1===r?e:h.Deferred(),o=function(e,t,i){return function(n){t[e]=this,i[e]=arguments.length>1?s.call(arguments):n,i===l?a.notifyWith(t,i):--r||a.resolveWith(t,i)}},l,d,u;if(n>1)for(l=new Array(n),d=new Array(n),u=new Array(n);n>t;t++)i[t]&&h.isFunction(i[t].promise)?i[t].promise().progress(o(t,d,l)).done(o(t,u,i)).fail(a.reject):--r;return r||a.resolveWith(u,i),a.promise()}});var B;h.fn.ready=function(e){return h.ready.promise().done(e),this},h.extend({isReady:!1,readyWait:1,holdReady:function(e){e?h.readyWait++:h.ready(!0)},ready:function(e){(e===!0?--h.readyWait:h.isReady)||(h.isReady=!0,e!==!0&&--h.readyWait>0||(B.resolveWith(n,[h]),h.fn.triggerHandler&&(h(n).triggerHandler("ready"),h(n).off("ready"))))}});function k(){n.removeEventListener("DOMContentLoaded",k),e.removeEventListener("load",k),h.ready()}h.ready.promise=function(t){return B||(B=h.Deferred(),"complete"===n.readyState||"loading"!==n.readyState&&!n.documentElement.doScroll?e.setTimeout(h.ready):(n.addEventListener("DOMContentLoaded",k),e.addEventListener("load",k))),B.promise(t)},h.ready.promise();var M=function(e,t,i,n,s,r,a){var o=0,l=e.length,d=null==i;if("object"===h.type(i)){s=!0;for(o in i)M(e,t,o,i[o],!0,r,a)}else if(void 0!==n&&(s=!0,h.isFunction(n)||(a=!0),d&&(a?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(h(e),i)})),t))for(;l>o;o++)t(e[o],i,a?n:n.call(e[o],o,t(e[o],i)));return s?e:d?t.call(e):l?t(e[0],i):r},R=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function H(){this.expando=h.expando+H.uid++}H.uid=1,H.prototype={register:function(e,t){var i=t||{};return e.nodeType?e[this.expando]=i:Object.defineProperty(e,this.expando,{value:i,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!R(e))return{};var t=e[this.expando];return t||(t={},R(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,s=this.cache(e);if("string"==typeof t)s[t]=i;else for(n in t)s[n]=t[n];return s},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;return void 0===t||t&&"string"==typeof t&&void 0===i?(n=this.get(e,t),void 0!==n?n:this.get(e,h.camelCase(t))):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n,s,r=e[this.expando];if(void 0!==r){if(void 0===t)this.register(e);else{h.isArray(t)?n=t.concat(t.map(h.camelCase)):(s=h.camelCase(t),t in r?n=[t,s]:(n=s,n=n in r?[n]:n.match(P)||[])),i=n.length;for(;i--;)delete r[n[i]]}(void 0===t||h.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!h.isEmptyObject(t)}};var V=new H,W=new H,U=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,F=/[A-Z]/g;function G(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(F,"-$&").toLowerCase(),i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:U.test(i)?h.parseJSON(i):i}catch(s){}W.set(e,t,i)}else i=void 0;return i}h.extend({hasData:function(e){return W.hasData(e)||V.hasData(e)},data:function(e,t,i){return W.access(e,t,i)},removeData:function(e,t){W.remove(e,t)},_data:function(e,t,i){return V.access(e,t,i)},_removeData:function(e,t){V.remove(e,t)}}),h.fn.extend({data:function(e,t){var i,n,s,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(s=W.get(r),1===r.nodeType&&!V.get(r,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&(n=a[i].name,0===n.indexOf("data-")&&(n=h.camelCase(n.slice(5)),G(r,n,s[n])));V.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof e?this.each(function(){W.set(this,e)}):M(this,function(t){var i,n;if(r&&void 0===t){if(i=W.get(r,e)||W.get(r,e.replace(F,"-$&").toLowerCase()),void 0!==i)return i;if(n=h.camelCase(e),i=W.get(r,n),void 0!==i)return i;if(i=G(r,n,void 0),void 0!==i)return i}else n=h.camelCase(e),this.each(function(){var i=W.get(this,n);W.set(this,n,t),e.indexOf("-")>-1&&void 0!==i&&W.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){W.remove(this,e)})}}),h.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=V.get(e,t),i&&(!n||h.isArray(i)?n=V.access(e,t,h.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=h.queue(e,t),n=i.length,s=i.shift(),r=h._queueHooks(e,t),a=function(){h.dequeue(e,t)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===t&&i.unshift("inprogress"),delete r.stop,s.call(e,a,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return V.get(e,i)||V.access(e,i,{empty:h.Callbacks("once memory").add(function(){V.remove(e,[t+"queue",i])})})}}),h.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?h.queue(this[0],e):void 0===t?this:this.each(function(){var i=h.queue(this,e,t);h._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&h.dequeue(this,e)})},dequeue:function(e){return this.each(function(){h.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=h.Deferred(),r=this,a=this.length,o=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)i=V.get(r[a],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(o));return o(),s.promise(t)}});var z=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,j=new RegExp("^(?:([+-])=|)("+z+")([a-z%]*)$","i"),q=["Top","Right","Bottom","Left"],K=function(e,t){return e=t||e,"none"===h.css(e,"display")||!h.contains(e.ownerDocument,e)};function Y(e,t,i,n){var s,r=1,a=20,o=n?function(){return n.cur()}:function(){return h.css(e,t,"")},l=o(),d=i&&i[3]||(h.cssNumber[t]?"":"px"),u=(h.cssNumber[t]||"px"!==d&&+l)&&j.exec(h.css(e,t));if(u&&u[3]!==d){d=d||u[3],i=i||[],u=+l||1;do r=r||".5",u/=r,h.style(e,t,u+d);while(r!==(r=o()/l)&&1!==r&&--a)}return i&&(u=+u||+l||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=u,n.end=s)),s}var X=/^(?:checkbox|radio)$/i,$=/<([\w:-]+)/,Q=/^$|\/(?:java|ecma)script/i,Z={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Z.optgroup=Z.option,Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead,Z.th=Z.td;function J(e,t){var i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&h.nodeName(e,t)?h.merge([e],i):i}function ee(e,t){for(var i=0,n=e.length;n>i;i++)V.set(e[i],"globalEval",!t||V.get(t[i],"globalEval"))}var te=/<|&#?\w+;/;function ie(e,t,i,n,s){for(var r,a,o,l,d,u,c=t.createDocumentFragment(),g=[],p=0,m=e.length;m>p;p++)if(r=e[p],r||0===r)if("object"===h.type(r))h.merge(g,r.nodeType?[r]:r);else if(te.test(r)){for(a=a||c.appendChild(t.createElement("div")),o=($.exec(r)||["",""])[1].toLowerCase(),l=Z[o]||Z._default,a.innerHTML=l[1]+h.htmlPrefilter(r)+l[2],u=l[0];u--;)a=a.lastChild;h.merge(g,a.childNodes),a=c.firstChild,a.textContent=""}else g.push(t.createTextNode(r));for(c.textContent="",p=0;r=g[p++];)if(n&&h.inArray(r,n)>-1)s&&s.push(r);else if(d=h.contains(r.ownerDocument,r),a=J(c.appendChild(r),"script"),d&&ee(a),i)for(u=0;r=a[u++];)Q.test(r.type||"")&&i.push(r);return c}!function(){var e=n.createDocumentFragment(),t=e.appendChild(n.createElement("div")),i=n.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),t.appendChild(i),c.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ne=/^key/,se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,re=/^([^.]*)(?:\.(.+)|)/;function ae(){return!0}function oe(){return!1}function le(){try{return n.activeElement}catch(e){}}function de(e,t,i,n,s,r){var a,o;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(o in t)de(e,o,i,n,t[o],r);return e}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),s===!1)s=oe;else if(!s)return e;return 1===r&&(a=s,s=function(e){return h().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=h.guid++)),e.each(function(){h.event.add(this,t,s,n,i)})}h.event={global:{},add:function(e,t,i,n,s){var r,a,o,l,d,u,c,g,p,m,f,v=V.get(e);if(v)for(i.handler&&(r=i,i=r.handler,s=r.selector),i.guid||(i.guid=h.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return"undefined"!=typeof h&&h.event.triggered!==t.type?h.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(P)||[""],d=t.length;d--;)o=re.exec(t[d])||[],p=f=o[1],m=(o[2]||"").split(".").sort(),p&&(c=h.event.special[p]||{},p=(s?c.delegateType:c.bindType)||p,c=h.event.special[p]||{},u=h.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&h.expr.match.needsContext.test(s),namespace:m.join(".")},r),(g=l[p])||(g=l[p]=[],g.delegateCount=0,c.setup&&c.setup.call(e,n,m,a)!==!1||e.addEventListener&&e.addEventListener(p,a)),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=i.guid)),s?g.splice(g.delegateCount++,0,u):g.push(u),h.event.global[p]=!0)},remove:function(e,t,i,n,s){var r,a,o,l,d,u,c,g,p,m,f,v=V.hasData(e)&&V.get(e);if(v&&(l=v.events)){for(t=(t||"").match(P)||[""],d=t.length;d--;)if(o=re.exec(t[d])||[],p=f=o[1],m=(o[2]||"").split(".").sort(),p){for(c=h.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,g=l[p]||[],o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=g.length;r--;)u=g[r],!s&&f!==u.origType||i&&i.guid!==u.guid||o&&!o.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(g.splice(r,1),u.selector&&g.delegateCount--,c.remove&&c.remove.call(e,u));a&&!g.length&&(c.teardown&&c.teardown.call(e,m,v.handle)!==!1||h.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)h.event.remove(e,p+t[d],i,n,!0);h.isEmptyObject(l)&&V.remove(e,"handle events")}},dispatch:function(e){e=h.event.fix(e);var t,i,n,r,a,o=[],l=s.call(arguments),d=(V.get(this,"events")||{})[e.type]||[],u=h.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(o=h.event.handlers.call(this,e,d),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,i=0;(a=r.handlers[i++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(a.namespace))&&(e.handleObj=a,e.data=a.data,n=((h.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,s,r,a=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(n=[],i=0;o>i;i++)r=t[i],s=r.selector+" ",void 0===n[s]&&(n[s]=r.needsContext?h(s,this).index(l)>-1:h.find(s,this,null,[l]).length),n[s]&&n.push(r);n.length&&a.push({elem:l,handlers:n})}return o<t.length&&a.push({elem:this,handlers:t.slice(o)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(e,t){var i,s,r,a=t.button;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||n,s=i.documentElement,r=i.body,e.pageX=t.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[h.expando])return e;var t,i,s,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=se.test(r)?this.mouseHooks:ne.test(r)?this.keyHooks:{}),s=o.props?this.props.concat(o.props):this.props,e=new h.Event(a),t=s.length;t--;)i=s[t],e[i]=a[i];return e.target||(e.target=n),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==le()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===le()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&h.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return h.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},h.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},h.Event=function(e,t){return this instanceof h.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?ae:oe):this.type=e,t&&h.extend(this,t),this.timeStamp=e&&e.timeStamp||h.now(),this[h.expando]=!0,void 0):new h.Event(e,t)},h.Event.prototype={constructor:h.Event,isDefaultPrevented:oe,isPropagationStopped:oe,isImmediatePropagationStopped:oe,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ae,e&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ae,e&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ae,e&&e.stopImmediatePropagation(),this.stopPropagation()}},h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){h.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;return(!s||s!==n&&!h.contains(n,s))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),h.fn.extend({on:function(e,t,i,n){return de(this,e,t,i,n)},one:function(e,t,i,n){return de(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,h(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(s in e)this.off(s,t,e[s]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=oe),this.each(function(){h.event.remove(this,e,i,t)})}});var ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ce=/<script|<style|<link/i,ge=/checked\s*(?:[^=]|=\s*.checked.)/i,he=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function me(e,t){return h.nodeName(e,"table")&&h.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function fe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ve(e){var t=he.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function be(e,t){var i,n,s,r,a,o,l,d;if(1===t.nodeType){if(V.hasData(e)&&(r=V.access(e),a=V.set(t,r),d=r.events,d)){delete a.handle,a.events={};for(s in d)for(i=0,n=d[s].length;n>i;i++)h.event.add(t,s,d[s][i])}W.hasData(e)&&(o=W.access(e),l=h.extend({},o),W.set(t,l))}}function ye(e,t){var i=t.nodeName.toLowerCase();"input"===i&&X.test(e.type)?t.checked=e.checked:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}function Ee(e,t,i,n){t=r.apply([],t);var s,a,o,l,d,u,g=0,p=e.length,m=p-1,f=t[0],v=h.isFunction(f);if(v||p>1&&"string"==typeof f&&!c.checkClone&&ge.test(f))return e.each(function(s){var r=e.eq(s);v&&(t[0]=f.call(this,s,r.html())),Ee(r,t,i,n)});if(p&&(s=ie(t,e[0].ownerDocument,!1,e,n),a=s.firstChild,1===s.childNodes.length&&(s=a),a||n)){for(o=h.map(J(s,"script"),fe),l=o.length;p>g;g++)d=s,g!==m&&(d=h.clone(d,!0,!0),l&&h.merge(o,J(d,"script"))),i.call(e[g],d,g);if(l)for(u=o[o.length-1].ownerDocument,h.map(o,ve),g=0;l>g;g++)d=o[g],Q.test(d.type||"")&&!V.access(d,"globalEval")&&h.contains(u,d)&&(d.src?h._evalUrl&&h._evalUrl(d.src):h.globalEval(d.textContent.replace(pe,"")))}return e}function xe(e,t,i){for(var n,s=t?h.filter(t,e):e,r=0;null!=(n=s[r]);r++)i||1!==n.nodeType||h.cleanData(J(n)),n.parentNode&&(i&&h.contains(n.ownerDocument,n)&&ee(J(n,"script")),n.parentNode.removeChild(n));return e}h.extend({htmlPrefilter:function(e){return e.replace(ue,"<$1></$2>")},clone:function(e,t,i){var n,s,r,a,o=e.cloneNode(!0),l=h.contains(e.ownerDocument,e);if(!(c.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||h.isXMLDoc(e)))for(a=J(o),r=J(e),n=0,s=r.length;s>n;n++)ye(r[n],a[n]);if(t)if(i)for(r=r||J(e),a=a||J(o),n=0,s=r.length;s>n;n++)be(r[n],a[n]);else be(e,o);return a=J(o,"script"),a.length>0&&ee(a,!l&&J(e,"script")),o},cleanData:function(e){for(var t,i,n,s=h.event.special,r=0;void 0!==(i=e[r]);r++)if(R(i)){if(t=i[V.expando]){if(t.events)for(n in t.events)s[n]?h.event.remove(i,n):h.removeEvent(i,n,t.handle);i[V.expando]=void 0}i[W.expando]&&(i[W.expando]=void 0)}}}),h.fn.extend({domManip:Ee,detach:function(e){return xe(this,e,!0)},remove:function(e){return xe(this,e)},text:function(e){return M(this,function(e){return void 0===e?h.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ee(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=me(this,e);t.appendChild(e)}})},prepend:function(){return Ee(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ee(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(h.cleanData(J(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return h.clone(this,e,t)})},html:function(e){return M(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ce.test(e)&&!Z[($.exec(e)||["",""])[1].toLowerCase()]){e=h.htmlPrefilter(e);try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(h.cleanData(J(t,!1)),t.innerHTML=e);t=0}catch(s){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ee(this,arguments,function(t){var i=this.parentNode;h.inArray(this,e)<0&&(h.cleanData(J(this)),i&&i.replaceChild(t,this))},e)}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){h.fn[e]=function(e){for(var i,n=[],s=h(e),r=s.length-1,o=0;r>=o;o++)i=o===r?this:this.clone(!0),h(s[o])[t](i),a.apply(n,i.get());return this.pushStack(n)}});var Ie,we={HTML:"block",BODY:"block"};function Ce(e,t){var i=h(t.createElement(e)).appendTo(t.body),n=h.css(i[0],"display");return i.detach(),n}function Se(e){var t=n,i=we[e];return i||(i=Ce(e,t),"none"!==i&&i||(Ie=(Ie||h("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ie[0].contentDocument,t.write(),t.close(),i=Ce(e,t),Ie.detach()),we[e]=i),i}var Te=/^margin/,Ae=new RegExp("^("+z+")(?!px)[a-z%]+$","i"),De=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},_e=function(e,t,i,n){var s,r,a={};for(r in t)a[r]=e.style[r],e.style[r]=t[r];s=i.apply(e,n||[]);for(r in t)e.style[r]=a[r];return s},Le=n.documentElement;!function(){var t,i,s,r,a=n.createElement("div"),o=n.createElement("div");if(o.style){o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(o);function l(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",o.innerHTML="",Le.appendChild(a);var n=e.getComputedStyle(o);t="1%"!==n.top,r="2px"===n.marginLeft,i="4px"===n.width,o.style.marginRight="50%",s="4px"===n.marginRight,Le.removeChild(a)}h.extend(c,{pixelPosition:function(){return l(),t},boxSizingReliable:function(){return null==i&&l(),i},pixelMarginRight:function(){return null==i&&l(),s},reliableMarginLeft:function(){return null==i&&l(),r},reliableMarginRight:function(){var t,i=o.appendChild(n.createElement("div"));return i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",o.style.width="1px",Le.appendChild(a),t=!parseFloat(e.getComputedStyle(i).marginRight),Le.removeChild(a),o.removeChild(i),t}})}}();function Ne(e,t,i){var n,s,r,a,o=e.style;return i=i||De(e),a=i?i.getPropertyValue(t)||i[t]:void 0,""!==a&&void 0!==a||h.contains(e.ownerDocument,e)||(a=h.style(e,t)),i&&!c.pixelMarginRight()&&Ae.test(a)&&Te.test(t)&&(n=o.width,s=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=i.width,o.width=n,o.minWidth=s,o.maxWidth=r),void 0!==a?a+"":a}function Pe(e,t){return{get:function(){return e()?(delete this.get,void 0):(this.get=t).apply(this,arguments)}}}var Oe=/^(none|table(?!-c[ea]).+)/,Be={position:"absolute",visibility:"hidden",display:"block"},ke={letterSpacing:"0",fontWeight:"400"},Me=["Webkit","O","Moz","ms"],Re=n.createElement("div").style;function He(e){if(e in Re)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=Me.length;i--;)if(e=Me[i]+t,e in Re)return e}function Ve(e,t,i){var n=j.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function We(e,t,i,n,s){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,a=0;4>r;r+=2)"margin"===i&&(a+=h.css(e,i+q[r],!0,s)),n?("content"===i&&(a-=h.css(e,"padding"+q[r],!0,s)),"margin"!==i&&(a-=h.css(e,"border"+q[r]+"Width",!0,s))):(a+=h.css(e,"padding"+q[r],!0,s),"padding"!==i&&(a+=h.css(e,"border"+q[r]+"Width",!0,s)));return a}function Ue(t,i,s){var r=!0,a="width"===i?t.offsetWidth:t.offsetHeight,o=De(t),l="border-box"===h.css(t,"boxSizing",!1,o);if(n.msFullscreenElement&&e.top!==e&&t.getClientRects().length&&(a=Math.round(100*t.getBoundingClientRect()[i])),0>=a||null==a){if(a=Ne(t,i,o),(0>a||null==a)&&(a=t.style[i]),Ae.test(a))return a;r=l&&(c.boxSizingReliable()||a===t.style[i]),a=parseFloat(a)||0}return a+We(t,i,s||(l?"border":"content"),r,o)+"px"}function Fe(e,t){for(var i,n,s,r=[],a=0,o=e.length;o>a;a++)n=e[a],n.style&&(r[a]=V.get(n,"olddisplay"),i=n.style.display,t?(r[a]||"none"!==i||(n.style.display=""),""===n.style.display&&K(n)&&(r[a]=V.access(n,"olddisplay",Se(n.nodeName)))):(s=K(n),"none"===i&&s||V.set(n,"olddisplay",s?i:h.css(n,"display"))));for(a=0;o>a;a++)n=e[a],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[a]||"":"none"));return e}h.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ne(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,a,o=h.camelCase(t),l=e.style;return t=h.cssProps[o]||(h.cssProps[o]=He(o)||o),a=h.cssHooks[t]||h.cssHooks[o],void 0===i?a&&"get"in a&&void 0!==(s=a.get(e,!1,n))?s:l[t]:(r=typeof i,"string"===r&&(s=j.exec(i))&&s[1]&&(i=Y(e,t,s),r="number"),null!=i&&i===i&&("number"===r&&(i+=s&&s[3]||(h.cssNumber[o]?"":"px")),c.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l[t]=i)),void 0)}},css:function(e,t,i,n){var s,r,a,o=h.camelCase(t);return t=h.cssProps[o]||(h.cssProps[o]=He(o)||o),a=h.cssHooks[t]||h.cssHooks[o],a&&"get"in a&&(s=a.get(e,!0,i)),void 0===s&&(s=Ne(e,t,n)),"normal"===s&&t in ke&&(s=ke[t]),""===i||i?(r=parseFloat(s),i===!0||isFinite(r)?r||0:s):s}}),h.each(["height","width"],function(e,t){h.cssHooks[t]={get:function(e,i,n){return i?Oe.test(h.css(e,"display"))&&0===e.offsetWidth?_e(e,Be,function(){return Ue(e,t,n)}):Ue(e,t,n):void 0},set:function(e,i,n){var s,r=n&&De(e),a=n&&We(e,t,n,"border-box"===h.css(e,"boxSizing",!1,r),r);return a&&(s=j.exec(i))&&"px"!==(s[3]||"px")&&(e.style[t]=i,i=h.css(e,t)),Ve(e,i,a)}}}),h.cssHooks.marginLeft=Pe(c.reliableMarginLeft,function(e,t){return t?(parseFloat(Ne(e,"marginLeft"))||e.getBoundingClientRect().left-_e(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),h.cssHooks.marginRight=Pe(c.reliableMarginRight,function(e,t){return t?_e(e,{display:"inline-block"},Ne,[e,"marginRight"]):void 0}),h.each({margin:"",padding:"",border:"Width"},function(e,t){h.cssHooks[e+t]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];4>n;n++)s[e+q[n]+t]=r[n]||r[n-2]||r[0];return s}},Te.test(e)||(h.cssHooks[e+t].set=Ve)}),h.fn.extend({css:function(e,t){return M(this,function(e,t,i){var n,s,r={},a=0;if(h.isArray(t)){for(n=De(e),s=t.length;s>a;a++)r[t[a]]=h.css(e,t[a],!1,n);return r}return void 0!==i?h.style(e,t,i):h.css(e,t)},e,t,arguments.length>1)},show:function(){return Fe(this,!0)},hide:function(){return Fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){K(this)?h(this).show():h(this).hide()})}});function Ge(e,t,i,n,s){return new Ge.prototype.init(e,t,i,n,s)}h.Tween=Ge,Ge.prototype={constructor:Ge,init:function(e,t,i,n,s,r){this.elem=e,this.prop=i,this.easing=s||h.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(h.cssNumber[i]?"":"px")},cur:function(){var e=Ge.propHooks[this.prop];return e&&e.get?e.get(this):Ge.propHooks._default.get(this)},run:function(e){var t,i=Ge.propHooks[this.prop];return this.options.duration?this.pos=t=h.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Ge.propHooks._default.set(this),this}},Ge.prototype.init.prototype=Ge.prototype,Ge.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=h.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){h.fx.step[e.prop]?h.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[h.cssProps[e.prop]]&&!h.cssHooks[e.prop]?e.elem[e.prop]=e.now:h.style(e.elem,e.prop,e.now+e.unit)}}},Ge.propHooks.scrollTop=Ge.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},h.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},h.fx=Ge.prototype.init,h.fx.step={};var ze,je,qe=/^(?:toggle|show|hide)$/,Ke=/queueHooks$/;function Ye(){return e.setTimeout(function(){ze=void 0}),ze=h.now()}function Xe(e,t){var i,n=0,s={height:e};for(t=t?1:0;4>n;n+=2-t)i=q[n],s["margin"+i]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function $e(e,t,i){for(var n,s=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),r=0,a=s.length;a>r;r++)if(n=s[r].call(i,t,e))return n}function Qe(e,t,i){var n,s,r,a,o,l,d,u,c=this,g={},p=e.style,m=e.nodeType&&K(e),f=V.get(e,"fxshow");i.queue||(o=h._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,h.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],d=h.css(e,"display"),u="none"===d?V.get(e,"olddisplay")||Se(e.nodeName):d,"inline"===u&&"none"===h.css(e,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(s=t[n],qe.exec(s)){if(delete t[n],r=r||"toggle"===s,s===(m?"hide":"show")){if("show"!==s||!f||void 0===f[n])continue;m=!0}g[n]=f&&f[n]||h.style(e,n)}else d=void 0;if(h.isEmptyObject(g))"inline"===("none"===d?Se(e.nodeName):d)&&(p.display=d);else{f?"hidden"in f&&(m=f.hidden):f=V.access(e,"fxshow",{}),r&&(f.hidden=!m),m?h(e).show():c.done(function(){h(e).hide()}),c.done(function(){var t;V.remove(e,"fxshow");for(t in g)h.style(e,t,g[t])});for(n in g)a=$e(m?f[n]:0,n,c),n in f||(f[n]=a.start,m&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))}}function Ze(e,t){var i,n,s,r,a;for(i in e)if(n=h.camelCase(i),s=t[n],r=e[i],h.isArray(r)&&(s=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),a=h.cssHooks[n],a&&"expand"in a){r=a.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=s)}else t[n]=s}function Je(e,t,i){var n,s,r=0,a=Je.prefilters.length,o=h.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=ze||Ye(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,r=1-n,a=0,l=d.tweens.length;l>a;a++)d.tweens[a].run(r);return o.notifyWith(e,[d,r,i]),1>r&&l?i:(o.resolveWith(e,[d]),!1)},d=o.promise({elem:e,props:h.extend({},t),opts:h.extend(!0,{specialEasing:{},easing:h.easing._default},i),originalProperties:t,originalOptions:i,startTime:ze||Ye(),duration:i.duration,tweens:[],createTween:function(t,i){var n=h.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)d.tweens[i].run(1);return t?(o.notifyWith(e,[d,1,0]),o.resolveWith(e,[d,t])):o.rejectWith(e,[d,t]),this}}),u=d.props;for(Ze(u,d.opts.specialEasing);a>r;r++)if(n=Je.prefilters[r].call(d,e,u,d.opts),n)return h.isFunction(n.stop)&&(h._queueHooks(d.elem,d.opts.queue).stop=h.proxy(n.stop,n)),n;return h.map(u,$e,d),h.isFunction(d.opts.start)&&d.opts.start.call(e,d),h.fx.timer(h.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}h.Animation=h.extend(Je,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return Y(i.elem,e,j.exec(t),i),i}]},tweener:function(e,t){h.isFunction(e)?(t=e,e=["*"]):e=e.match(P);for(var i,n=0,s=e.length;s>n;n++)i=e[n],Je.tweeners[i]=Je.tweeners[i]||[],Je.tweeners[i].unshift(t)},prefilters:[Qe],prefilter:function(e,t){t?Je.prefilters.unshift(e):Je.prefilters.push(e)}}),h.speed=function(e,t,i){var n=e&&"object"==typeof e?h.extend({},e):{complete:i||!i&&t||h.isFunction(e)&&e,duration:e,easing:i&&t||t&&!h.isFunction(t)&&t};return n.duration=h.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in h.fx.speeds?h.fx.speeds[n.duration]:h.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){h.isFunction(n.old)&&n.old.call(this),n.queue&&h.dequeue(this,n.queue)},n},h.fn.extend({fadeTo:function(e,t,i,n){return this.filter(K).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=h.isEmptyObject(e),r=h.speed(t,i,n),a=function(){var t=Je(this,h.extend({},e),r);(s||V.get(this,"finish"))&&t.stop(!0)};return a.finish=a,s||r.queue===!1?this.each(a):this.queue(r.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,s=null!=e&&e+"queueHooks",r=h.timers,a=V.get(this);if(s)a[s]&&a[s].stop&&n(a[s]);else for(s in a)a[s]&&a[s].stop&&Ke.test(s)&&n(a[s]);for(s=r.length;s--;)r[s].elem!==this||null!=e&&r[s].queue!==e||(r[s].anim.stop(i),t=!1,r.splice(s,1));(t||!i)&&h.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=V.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=h.timers,a=n?n.length:0;for(i.finish=!0,h.queue(this,e,[]),s&&s.stop&&s.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;a>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),h.each(["toggle","show","hide"],function(e,t){var i=h.fn[t];h.fn[t]=function(e,n,s){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(Xe(t,!0),e,n,s)}}),h.each({slideDown:Xe("show"),slideUp:Xe("hide"),slideToggle:Xe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){h.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),h.timers=[],h.fx.tick=function(){var e,t=0,i=h.timers;for(ze=h.now();t<i.length;t++)e=i[t],e()||i[t]!==e||i.splice(t--,1);i.length||h.fx.stop(),ze=void 0},h.fx.timer=function(e){h.timers.push(e),e()?h.fx.start():h.timers.pop()},h.fx.interval=13,h.fx.start=function(){je||(je=e.setInterval(h.fx.tick,h.fx.interval))},h.fx.stop=function(){e.clearInterval(je),je=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(t,i){return t=h.fx?h.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var s=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(s)}})},function(){var e=n.createElement("input"),t=n.createElement("select"),i=t.appendChild(n.createElement("option"));e.type="checkbox",c.checkOn=""!==e.value,c.optSelected=i.selected,t.disabled=!0,c.optDisabled=!i.disabled,e=n.createElement("input"),e.value="t",e.type="radio",c.radioValue="t"===e.value}();var et,tt=h.expr.attrHandle;h.fn.extend({attr:function(e,t){return M(this,h.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){h.removeAttr(this,e)})}}),h.extend({attr:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return"undefined"==typeof e.getAttribute?h.prop(e,t,i):(1===r&&h.isXMLDoc(e)||(t=t.toLowerCase(),s=h.attrHooks[t]||(h.expr.match.bool.test(t)?et:void 0)),void 0!==i?null===i?(h.removeAttr(e,t),void 0):s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:(e.setAttribute(t,i+""),i):s&&"get"in s&&null!==(n=s.get(e,t))?n:(n=h.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&"radio"===t&&h.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n,s=0,r=t&&t.match(P);if(r&&1===e.nodeType)for(;i=r[s++];)n=h.propFix[i]||i,h.expr.match.bool.test(i)&&(e[n]=!1),e.removeAttribute(i)}}),et={set:function(e,t,i){return t===!1?h.removeAttr(e,i):e.setAttribute(i,i),i}},h.each(h.expr.match.bool.source.match(/\w+/g),function(e,t){var i=tt[t]||h.find.attr;tt[t]=function(e,t,n){var s,r;return n||(r=tt[t],tt[t]=s,s=null!=i(e,t,n)?t.toLowerCase():null,tt[t]=r),s}});var it=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;h.fn.extend({prop:function(e,t){return M(this,h.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[h.propFix[e]||e]})}}),h.extend({prop:function(e,t,i){var n,s,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&h.isXMLDoc(e)||(t=h.propFix[t]||t,s=h.propHooks[t]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(e,i,t))?n:e[t]=i:s&&"get"in s&&null!==(n=s.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=h.find.attr(e,"tabindex");return t?parseInt(t,10):it.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),c.optSelected||(h.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;function rt(e){return e.getAttribute&&e.getAttribute("class")||""}h.fn.extend({addClass:function(e){var t,i,n,s,r,a,o,l=0;if(h.isFunction(e))return this.each(function(t){h(this).addClass(e.call(this,t,rt(this)))});if("string"==typeof e&&e)for(t=e.match(P)||[];i=this[l++];)if(s=rt(i),n=1===i.nodeType&&(" "+s+" ").replace(st," "),n){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=h.trim(n),s!==o&&i.setAttribute("class",o)}return this},removeClass:function(e){var t,i,n,s,r,a,o,l=0;if(h.isFunction(e))return this.each(function(t){h(this).removeClass(e.call(this,t,rt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(P)||[];i=this[l++];)if(s=rt(i),n=1===i.nodeType&&(" "+s+" ").replace(st," "),n){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o=h.trim(n),s!==o&&i.setAttribute("class",o)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):h.isFunction(e)?this.each(function(i){h(this).toggleClass(e.call(this,i,rt(this),t),t)}):this.each(function(){var t,n,s,r;if("string"===i)for(n=0,s=h(this),r=e.match(P)||[];t=r[n++];)s.hasClass(t)?s.removeClass(t):s.addClass(t);else(void 0===e||"boolean"===i)&&(t=rt(this),t&&V.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":V.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+rt(i)+" ").replace(st," ").indexOf(t)>-1)return!0;return!1}});var at=/\r/g,ot=/[\x20\t\r\n\f]+/g;h.fn.extend({val:function(e){var t,i,n,s=this[0];{if(arguments.length)return n=h.isFunction(e),this.each(function(i){var s;1===this.nodeType&&(s=n?e.call(this,i,h(this).val()):e,null==s?s="":"number"==typeof s?s+="":h.isArray(s)&&(s=h.map(s,function(e){return null==e?"":e+""})),t=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,s,"value")||(this.value=s))});if(s)return t=h.valHooks[s.type]||h.valHooks[s.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(at,""):null==i?"":i)}}}),h.extend({valHooks:{option:{get:function(e){var t=h.find.attr(e,"value");return null!=t?t:h.trim(h.text(e)).replace(ot," ")}},select:{get:function(e){for(var t,i,n=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,a=r?null:[],o=r?s+1:n.length,l=0>s?o:r?s:0;o>l;l++)if(i=n[l],(i.selected||l===s)&&(c.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!h.nodeName(i.parentNode,"optgroup"))){if(t=h(i).val(),r)return t;a.push(t)}return a},set:function(e,t){for(var i,n,s=e.options,r=h.makeArray(t),a=s.length;a--;)n=s[a],(n.selected=h.inArray(h.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(e,t){return h.isArray(t)?e.checked=h.inArray(h(e).val(),t)>-1:void 0}},c.checkOn||(h.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var lt=/^(?:focusinfocus|focusoutblur)$/;h.extend(h.event,{trigger:function(t,i,s,r){var a,o,l,d,c,g,p,m=[s||n],f=u.call(t,"type")?t.type:t,v=u.call(t,"namespace")?t.namespace.split("."):[];if(o=l=s=s||n,3!==s.nodeType&&8!==s.nodeType&&!lt.test(f+h.event.triggered)&&(f.indexOf(".")>-1&&(v=f.split("."),f=v.shift(),v.sort()),c=f.indexOf(":")<0&&"on"+f,t=t[h.expando]?t:new h.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=s),i=null==i?[t]:h.makeArray(i,[t]),p=h.event.special[f]||{},r||!p.trigger||p.trigger.apply(s,i)!==!1)){if(!r&&!p.noBubble&&!h.isWindow(s)){for(d=p.delegateType||f,lt.test(d+f)||(o=o.parentNode);o;o=o.parentNode)m.push(o),l=o;l===(s.ownerDocument||n)&&m.push(l.defaultView||l.parentWindow||e)}for(a=0;(o=m[a++])&&!t.isPropagationStopped();)t.type=a>1?d:p.bindType||f,g=(V.get(o,"events")||{})[t.type]&&V.get(o,"handle"),g&&g.apply(o,i),g=c&&o[c],g&&g.apply&&R(o)&&(t.result=g.apply(o,i),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||p._default&&p._default.apply(m.pop(),i)!==!1||!R(s)||c&&h.isFunction(s[f])&&!h.isWindow(s)&&(l=s[c],l&&(s[c]=null),h.event.triggered=f,s[f](),h.event.triggered=void 0,l&&(s[c]=l)),t.result}},simulate:function(e,t,i){var n=h.extend(new h.Event,i,{type:e,isSimulated:!0});h.event.trigger(n,null,t),n.isDefaultPrevented()&&i.preventDefault()}}),h.fn.extend({trigger:function(e,t){return this.each(function(){h.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?h.event.trigger(e,t,i,!0):void 0}}),h.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){h.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),h.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),c.focusin="onfocusin"in e,c.focusin||h.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){h.event.simulate(t,e.target,h.event.fix(e))};h.event.special[t]={setup:function(){var n=this.ownerDocument||this,s=V.access(n,t);s||n.addEventListener(e,i,!0),V.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=V.access(n,t)-1;s?V.access(n,t,s):(n.removeEventListener(e,i,!0),V.remove(n,t))}}});var dt=e.location,ut=h.now(),ct=/\?/;h.parseJSON=function(e){return JSON.parse(e+"")},h.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(n){i=void 0}return(!i||i.getElementsByTagName("parsererror").length)&&h.error("Invalid XML: "+t),i};var gt=/#.*$/,ht=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ft=/^(?:GET|HEAD)$/,vt=/^\/\//,bt={},yt={},Et="*/".concat("*"),xt=n.createElement("a");xt.href=dt.href;function It(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,s=0,r=t.toLowerCase().match(P)||[];if(h.isFunction(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function wt(e,t,i,n){var s={},r=e===yt;function a(o){var l;return s[o]=!0,h.each(e[o]||[],function(e,o){var d=o(t,i,n);return"string"!=typeof d||r||s[d]?r?!(l=d):void 0:(t.dataTypes.unshift(d),a(d),!1)}),l}return a(t.dataTypes[0])||!s["*"]&&a("*")}function Ct(e,t){var i,n,s=h.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((s[i]?e:n||(n={}))[i]=t[i]);return n&&h.extend(!0,e,n),e}function St(e,t,i){for(var n,s,r,a,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in o)if(o[s]&&o[s].test(n)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}a||(a=s)}r=r||a}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function Tt(e,t,i,n){var s,r,a,o,l,d={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(r=u.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=u.shift(),r)if("*"===r)r=l;else if("*"!==l&&l!==r){if(a=d[l+" "+r]||d["* "+r],!a)for(s in d)if(o=s.split(" "),o[1]===r&&(a=d[l+" "+o[0]]||d["* "+o[0]],a)){a===!0?a=d[s]:d[s]!==!0&&(r=o[0],u.unshift(o[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:dt.href,type:"GET",
isLocal:mt.test(dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Et,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":h.parseJSON,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ct(Ct(e,h.ajaxSettings),t):Ct(h.ajaxSettings,e)},ajaxPrefilter:It(bt),ajaxTransport:It(yt),ajax:function(t,i){"object"==typeof t&&(i=t,t=void 0),i=i||{};var s,r,a,o,l,d,u,c,g=h.ajaxSetup({},i),p=g.context||g,m=g.context&&(p.nodeType||p.jquery)?h(p):h.event,f=h.Deferred(),v=h.Callbacks("once memory"),b=g.statusCode||{},y={},E={},x=0,I="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!o)for(o={};t=pt.exec(a);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return x||(e=E[i]=E[i]||e,y[e]=t),this},overrideMimeType:function(e){return x||(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)b[t]=[b[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||I;return s&&s.abort(t),S(0,t),this}};if(f.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,g.url=((t||g.url||dt.href)+"").replace(gt,"").replace(vt,dt.protocol+"//"),g.type=i.method||i.type||g.method||g.type,g.dataTypes=h.trim(g.dataType||"*").toLowerCase().match(P)||[""],null==g.crossDomain){d=n.createElement("a");try{d.href=g.url,d.href=d.href,g.crossDomain=xt.protocol+"//"+xt.host!=d.protocol+"//"+d.host}catch(C){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=h.param(g.data,g.traditional)),wt(bt,g,i,w),2===x)return w;u=h.event&&g.global,u&&0===h.active++&&h.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!ft.test(g.type),r=g.url,g.hasContent||(g.data&&(r=g.url+=(ct.test(r)?"&":"?")+g.data,delete g.data),g.cache===!1&&(g.url=ht.test(r)?r.replace(ht,"$1_="+ut++):r+(ct.test(r)?"&":"?")+"_="+ut++)),g.ifModified&&(h.lastModified[r]&&w.setRequestHeader("If-Modified-Since",h.lastModified[r]),h.etag[r]&&w.setRequestHeader("If-None-Match",h.etag[r])),(g.data&&g.hasContent&&g.contentType!==!1||i.contentType)&&w.setRequestHeader("Content-Type",g.contentType),w.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Et+"; q=0.01":""):g.accepts["*"]);for(c in g.headers)w.setRequestHeader(c,g.headers[c]);if(g.beforeSend&&(g.beforeSend.call(p,w,g)===!1||2===x))return w.abort();I="abort";for(c in{success:1,error:1,complete:1})w[c](g[c]);if(s=wt(yt,g,i,w),s){if(w.readyState=1,u&&m.trigger("ajaxSend",[w,g]),2===x)return w;g.async&&g.timeout>0&&(l=e.setTimeout(function(){w.abort("timeout")},g.timeout));try{x=1,s.send(y,S)}catch(C){if(!(2>x))throw C;S(-1,C)}}else S(-1,"No Transport");function S(t,i,n,o){var d,c,y,E,I,C=i;2!==x&&(x=2,l&&e.clearTimeout(l),s=void 0,a=o||"",w.readyState=t>0?4:0,d=t>=200&&300>t||304===t,n&&(E=St(g,w,n)),E=Tt(g,E,w,d),d?(g.ifModified&&(I=w.getResponseHeader("Last-Modified"),I&&(h.lastModified[r]=I),I=w.getResponseHeader("etag"),I&&(h.etag[r]=I)),204===t||"HEAD"===g.type?C="nocontent":304===t?C="notmodified":(C=E.state,c=E.data,y=E.error,d=!y)):(y=C,(t||!C)&&(C="error",0>t&&(t=0))),w.status=t,w.statusText=(i||C)+"",d?f.resolveWith(p,[c,C,w]):f.rejectWith(p,[w,C,y]),w.statusCode(b),b=void 0,u&&m.trigger(d?"ajaxSuccess":"ajaxError",[w,g,d?c:y]),v.fireWith(p,[w,C]),u&&(m.trigger("ajaxComplete",[w,g]),--h.active||h.event.trigger("ajaxStop")))}return w},getJSON:function(e,t,i){return h.get(e,t,i,"json")},getScript:function(e,t){return h.get(e,void 0,t,"script")}}),h.each(["get","post"],function(e,t){h[t]=function(e,i,n,s){return h.isFunction(i)&&(s=s||n,n=i,i=void 0),h.ajax(h.extend({url:e,type:t,dataType:s,data:i,success:n},h.isPlainObject(e)&&e))}}),h._evalUrl=function(e){return h.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},h.fn.extend({wrapAll:function(e){var t;return h.isFunction(e)?this.each(function(t){h(this).wrapAll(e.call(this,t))}):(this[0]&&(t=h(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return h.isFunction(e)?this.each(function(t){h(this).wrapInner(e.call(this,t))}):this.each(function(){var t=h(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=h.isFunction(e);return this.each(function(i){h(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){h.nodeName(this,"body")||h(this).replaceWith(this.childNodes)}).end()}}),h.expr.filters.hidden=function(e){return!h.expr.filters.visible(e)},h.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var At=/%20/g,Dt=/\[\]$/,_t=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,i,n){var s;if(h.isArray(t))h.each(t,function(t,s){i||Dt.test(e)?n(e,s):Pt(e+"["+("object"==typeof s&&null!=s?t:"")+"]",s,i,n)});else if(i||"object"!==h.type(t))n(e,t);else for(s in t)Pt(e+"["+s+"]",t[s],i,n)}h.param=function(e,t){var i,n=[],s=function(e,t){t=h.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=h.ajaxSettings&&h.ajaxSettings.traditional),h.isArray(e)||e.jquery&&!h.isPlainObject(e))h.each(e,function(){s(this.name,this.value)});else for(i in e)Pt(i,e[i],t,s);return n.join("&").replace(At,"+")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=h.prop(this,"elements");return e?h.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!h(this).is(":disabled")&&Nt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var i=h(this).val();return null==i?null:h.isArray(i)?h.map(i,function(e){return{name:t.name,value:e.replace(_t,"\r\n")}}):{name:t.name,value:i.replace(_t,"\r\n")}}).get()}}),h.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Ot={0:200,1223:204},Bt=h.ajaxSettings.xhr();c.cors=!!Bt&&"withCredentials"in Bt,c.ajax=Bt=!!Bt,h.ajaxTransport(function(t){var i,n;return c.cors||Bt&&!t.crossDomain?{send:function(s,r){var a,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)o[a]=t.xhrFields[a];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");for(a in s)o.setRequestHeader(a,s[a]);i=function(e){return function(){i&&(i=n=o.onload=o.onerror=o.onabort=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?r(0,"error"):r(o.status,o.statusText):r(Ot[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=i(),n=o.onerror=i("error"),void 0!==o.onabort?o.onabort=n:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{o.send(t.hasContent&&t.data||null)}catch(l){if(i)throw l}},abort:function(){i&&i()}}:void 0}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return h.globalEval(e),e}}}),h.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),h.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(s,r){t=h("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),n.head.appendChild(t[0])},abort:function(){i&&i()}}}});var kt=[],Mt=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=kt.pop()||h.expando+"_"+ut++;return this[e]=!0,e}}),h.ajaxPrefilter("json jsonp",function(t,i,n){var s,r,a,o=t.jsonp!==!1&&(Mt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(s=t.jsonpCallback=h.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Mt,"$1"+s):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return a||h.error(s+" was not called"),a[0]},t.dataTypes[0]="json",r=e[s],e[s]=function(){a=arguments},n.always(function(){void 0===r?h(e).removeProp(s):e[s]=r,t[s]&&(t.jsonpCallback=i.jsonpCallback,kt.push(s)),a&&h.isFunction(r)&&r(a[0]),a=r=void 0}),"script"):void 0}),h.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||n;var s=w.exec(e),r=!i&&[];return s?[t.createElement(s[1])]:(s=ie([e],t,r),r&&r.length&&h(r).remove(),h.merge([],s.childNodes))};var Rt=h.fn.load;h.fn.load=function(e,t,i){if("string"!=typeof e&&Rt)return Rt.apply(this,arguments);var n,s,r,a=this,o=e.indexOf(" ");return o>-1&&(n=h.trim(e.slice(o)),e=e.slice(0,o)),h.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(s="POST"),a.length>0&&h.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(n?h("<div>").append(h.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){h.fn[t]=function(e){return this.on(t,e)}}),h.expr.filters.animated=function(e){return h.grep(h.timers,function(t){return e===t.elem}).length};function Ht(e){return h.isWindow(e)?e:9===e.nodeType&&e.defaultView}h.offset={setOffset:function(e,t,i){var n,s,r,a,o,l,d,u=h.css(e,"position"),c=h(e),g={};"static"===u&&(e.style.position="relative"),o=c.offset(),r=h.css(e,"top"),l=h.css(e,"left"),d=("absolute"===u||"fixed"===u)&&(r+l).indexOf("auto")>-1,d?(n=c.position(),a=n.top,s=n.left):(a=parseFloat(r)||0,s=parseFloat(l)||0),h.isFunction(t)&&(t=t.call(e,i,h.extend({},o))),null!=t.top&&(g.top=t.top-o.top+a),null!=t.left&&(g.left=t.left-o.left+s),"using"in t?t.using.call(e,g):c.css(g)}},h.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){h.offset.setOffset(this,e,t)});var t,i,n=this[0],s={top:0,left:0},r=n&&n.ownerDocument;if(r)return t=r.documentElement,h.contains(t,n)?(s=n.getBoundingClientRect(),i=Ht(r),{top:s.top+i.pageYOffset-t.clientTop,left:s.left+i.pageXOffset-t.clientLeft}):s},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===h.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),h.nodeName(e[0],"html")||(n=e.offset()),n.top+=h.css(e[0],"borderTopWidth",!0),n.left+=h.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-h.css(i,"marginTop",!0),left:t.left-n.left-h.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===h.css(e,"position");)e=e.offsetParent;return e||Le})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;h.fn[e]=function(n){return M(this,function(e,n,s){var r=Ht(e);return void 0===s?r?r[t]:e[n]:(r?r.scrollTo(i?r.pageXOffset:s,i?s:r.pageYOffset):e[n]=s,void 0)},e,n,arguments.length)}}),h.each(["top","left"],function(e,t){h.cssHooks[t]=Pe(c.pixelPosition,function(e,i){return i?(i=Ne(e,t),Ae.test(i)?h(e).position()[t]+"px":i):void 0})}),h.each({Height:"height",Width:"width"},function(e,t){h.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){h.fn[n]=function(n,s){var r=arguments.length&&(i||"boolean"!=typeof n),a=i||(n===!0||s===!0?"margin":"border");return M(this,function(t,i,n){var s;return h.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===n?h.css(t,i,a):h.style(t,i,n,a)},t,r?n:void 0,r,null)}})}),h.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}}),h.fn.andSelf=h.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return h});var Vt=e.jQuery,Wt=e.$;return h.noConflict=function(t){return e.$===h&&(e.$=Wt),t&&e.jQuery===h&&(e.jQuery=Vt),h},t||(e.jQuery=e.$=h),h}),define("brease/events/VirtualEvents",["brease/core/Utils","brease/events/DummyEvent","jquery"],function(Utils,DummyEvent){"use strict";var VirtualEvents={init:function(){for(var i in e)document.addEventListener(i,g,!0);c.on("click mousedown mouseup",function(e){void 0!==e.isTrigger&&A(e.target,"v"+e.type,e,{pointerId:0})});for(var s=0;s<n.length;s+=1)$.event.special[n[s]]=E(n[s]);return t.init(),window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},delete VirtualEvents.init,this},reset:function(){t.reset(),u=!0},getPointerId:function(e){return x(e)},triggerVirtualEvent:function(e,t,i,n){A(e,t,i,n)}},e={mousedown:{vtype:"vmousedown",device:"mouse",phase:"start"},touchstart:{vtype:"vmousedown",device:"touch",phase:"start"},mouseup:{vtype:"vmouseup",device:"mouse",phase:"end"},touchend:{vtype:"vmouseup",device:"touch",phase:"end"},mousemove:{vtype:"vmousemove",device:"mouse",phase:"move"},touchmove:{vtype:"vmousemove",device:"touch",phase:"move"}},t={blocked:"",block:function(e){this.blocked=e},isBlocked:function(e){return this.blocked===e},startReset:function(){this.stopReset(),this.timer=window.setTimeout(this.boundReset,1e3)},stopReset:function(){window.clearTimeout(this.timer)},reset:function(){this.stopReset(),this.blocked=""},init:function(){this.boundReset=this.reset.bind(this)}},i=["clientX","clientY","pageX","pageY","screenX","screenY"],n=["vmousedown","vmousemove","vmouseup","vclick"],s=window.devicePixelRatio>1?window.devicePixelRatio:1,r=20*s,a=2,o={},l={},d={},u=!0,c=$(document);Utils.defineProperty(VirtualEvents,"SCROLL_THRESHOLD",a),Utils.defineProperty(VirtualEvents,"MOVE_THRESHOLD",r);function g(t){var i=t.type,n=t.target,s=e[i],r=x(t),a=D(t);VirtualEvents.touchLength=a;var o=h(s,t,n,r,a);o===!0&&d[r]===!0&&("vmouseup"===s.vtype&&(l.el=T(n),l.ev=Utils.getOffsetOfEvent(t)),A(n,s.vtype,t,{pointerId:r}),p(s,t,n,r))}function h(e,i,n,s,r){var a=!1;switch(e.phase){case"start":"touch"===e.device?(t.stopReset(),t.block("mouse"),a=!0):a=!t.isBlocked("mouse"),r>1?d[s]=S(n):d[s]=!0,u=!1;break;case"move":a="touch"===e.device?!u:!t.isBlocked("mouse")&&!u;break;case"end":a="touch"===e.device?!0:!t.isBlocked("mouse"),0===r&&(u=!0),0===r&&"touch"===e.device&&t.startReset()}return a}function p(e,t,i,n){"vmouseup"===e.vtype&&f(t,i,n),"end"===e.phase&&b(n),"start"===e.phase&&m(t,i,n)}function m(e,t,i){o[i]={el:T(t),ev:Utils.getOffsetOfEvent(e),target:t}}function f(t,i,n){if(void 0!==o[n]){var s=Math.abs(l.el.x-o[n].el.x),d=Math.abs(l.el.y-o[n].el.y),u=Math.abs(l.ev.x-o[n].ev.x),c=Math.abs(l.ev.y-o[n].ev.y);if(a>=s&&a>=d&&r>u&&r>c)v(t,n);else if(3>u&&3>c&&o[n].target!==i)v(t,n);else if("mouse"===e[t.type].device&&Utils.closestWidgetElem(o[n].target)===Utils.closestWidgetElem(i)){var g=T(o[n].target);Math.abs(g.x-o[n].el.x)<a&&Math.abs(g.y-o[n].el.y)<a&&v(t,n)}}}function v(e,t){A(e.target,"vclick",e,{pointerId:t})}function b(e){o[e]=void 0}function y(){}function E(e){var t=e.substr(1);return{setup:function(){$(this).on(t,y)},teardown:function(){$(this).off(t,y)}}}function x(e){return void 0!==e.pointerId?e.pointerId:e.changedTouches?e.changedTouches[0].identifier:0}function I(e,t,n){var s=$.event.fix(e);return s=w(s,e,n.pointerId),s.type=t,s.detail=n,void 0===s.which&&(s.which=1),"vclick"===t&&(s.originalEvent=new DummyEvent("click",e.target),Utils.transferProperties(e,s.originalEvent,i),s.originalEvent.originalEvent=e),s}function w(e,t,n){if(-1!==t.type.indexOf("touch")){var s=C(t,n);s&&Utils.transferProperties(s,e,i)}return e}function C(e,t){var i,n,s=e.touches,r=e.changedTouches;if(r&&r.length>0){for(n=0;n<r.length;n+=1)if(r[n].identifier===t){i=r[n];break}}else if(s&&s.length>0)for(n=0;n<s.length;n+=1)if(s[n].identifier===t){i=s[n];break}return i}function S(e){if(null!==e.getAttribute("data-multitouch"))return!0;var t=$(e).parents("[data-multitouch]");return t.length>0?!0:!1}function T(e){if(e&&"function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect();return{x:void 0!==t.left?t.left:0,y:void 0!==t.top?t.top:0}}return{x:0,y:0}}function A(e,t,i,n){var s=I(i,t,n);$(e).trigger(s)}function D(e){var t=0;return e&&e.touches&&(t=e.touches.length),t}return VirtualEvents.init()}),define("libs/polyfill",[],function(){"use strict";window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}window.CustomEvent&&(e.prototype=window.CustomEvent.prototype),window.CustomEvent=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,n=function(){},s=function(){return i.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on a non-object");var t=[],i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}),!console||!console.log||"debug"in console||(console.debug=function(){console.log.apply(console,arguments)}),!console||!console.log||"warn"in console||(console.warn=function(){console.log.apply(console,arguments)}),!console||!console.log||"info"in console||(console.info=function(){console.log.apply(console,arguments)}),void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=/function\s([^(]{1,})\(/,t=e.exec(this.toString());return t&&t.length>1?t[1].trim():""},set:function(){}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null===this||void 0===this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var s=0|t,r=Math.max(s>=0?s:n-Math.abs(s),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;n>r;){if(a(i[r],e))return!0;r+=1}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),t+e.length>this.length?!1:-1!==this.indexOf(e,t)}),document.baseURI||Object.defineProperty(document,"baseURI",{get:function(){var e=document.getElementsByTagName("base"),t=e.length>0?e[0].href:document.URL;return t}}),window.Map||(window.Map=function(){this.items={};var e=this;Object.defineProperty(e,"size",{get:function(){return Object.keys(e.items).length}})},Map.prototype.set=function(e,t){return this.items[e]=t,this},Map.prototype.get=function(e){return this.items[e]},Map.prototype["delete"]=function(e){var t=!1;return this.items[e]&&(delete this.items[e],t=!0),t},Map.prototype.forEach=function(e){for(var t in this.items)e(this.items[t],t)})}),define("brease/core/libs/jquery.extensions",["jquery","brease/events/VirtualEvents"],function(e,VirtualEvents){"use strict";return e.fn.showByFlag=function(e){return 0!==e?this.show():this.hide()},e.containsOrEquals=function(t,i){return t===i||e.contains(t,i)},e.event.special.dblclick={name:"dblclick",namespace:".dblclick",setup:function(){e(this).on("vmouseup"+e.event.special.dblclick.namespace,e.event.special.dblclick.handler)},handler:function(t){var i=t.target,n=e(i),s=n.data("lastTouch")||0,r=(new Date).getTime(),a=r-s;a>20&&500>a?(n.data("lastTouch",0),VirtualEvents.triggerVirtualEvent(i,e.event.special.dblclick.name,t,{pointerId:VirtualEvents.getPointerId(t)})):n.data("lastTouch",r)},teardown:function(){e(this).off("vmouseup"+e.event.special.dblclick.namespace)}},e.event.special.taphold={threshold:750,name:"taphold",namespace:".taphold",setup:function(){e(this).on("vmousedown"+e.event.special.taphold.namespace,e.event.special.taphold.handler)},handler:function(t){if(t.which&&1!==t.which)return!1;var i,n=t.target,s=e(n);function r(){window.clearTimeout(i)}function a(){r(),s.off("vmouseup"+e.event.special.taphold.namespace,r),s.off("vclick"+e.event.special.taphold.namespace,a)}s.on("vmouseup"+e.event.special.taphold.namespace,r),s.on("vclick"+e.event.special.taphold.namespace,a),i=window.setTimeout(function(){VirtualEvents.triggerVirtualEvent(n,e.event.special.taphold.name,t,{pointerId:VirtualEvents.getPointerId(t)})},e.event.special.taphold.threshold)},teardown:function(){e(this).off("vmousedown"+e.event.special.taphold.namespace).off("vclick"+e.event.special.taphold.namespace).off("vmouseup"+e.event.special.taphold.namespace)}},null}),define("brease/application",["brease/config","brease/settings","brease/core/Utils","brease/events/VirtualEvents","jquery","libs/lodash","libs/polyfill","brease/core/libs/jquery.extensions"],function(config,e,Utils){"use strict";function t(t,i,n){var s=document.getElementById("appContainer").getAttribute("data-mocked"),r=null!==s,a=r?"brease/helper/stubs/ServiceBridge":"brease/services/ServiceBridge",o=r?"brease/helper/stubs/WebSocket":"brease/services/WebSocket";void 0!==n&&$.extend(!0,config,n),Utils.defineProperty(config,"debug",0===$('script[src="release/brease.js"]').length),Utils.defineProperty(config,"mocked",r),Utils.defineProperty(config,"mockType",s);var l=document.getElementById("appContainer");window.brease={config:config,settings:e,appElem:l,appView:$(l)},require([a,o,"brease/services/RuntimeService","brease/core/libs/Extensions","brease/events/BreaseEvent"],function(e,n,s,Extensions,BreaseEvent){if(BreaseEvent.init(brease.config.editMode),Extensions.console.init(config),s.init(e,n),brease.config.debug===!0){var a=new Date;console.iatInfo("application start: "+a.toLocaleDateString()+", "+a.toLocaleTimeString()),r&&console.iatInfo("server communication mocked: true")}var o=["brease/core/BaseWidget"];brease.config.editMode===!0&&o.push("brease/core/designer/BaseWidget/ClassExtension"),require(o,function(BaseWidget,e){e&&e.extend(BaseWidget),require(["brease/controller/BindingController","brease/controller/ConnectionController","brease/controller/InfoController","brease/controller/ActionController","brease/controller/PageController","brease/controller/OverlayController","brease/controller/UIController","brease/helper/NumberFormatter","brease/controller/EventController","brease/controller/WidgetController","brease/model/VisuModel"],function(e,n,r,a,l,d,u,NumberFormatter,c,g,h){require(["brease/services/MeasurementSystem","brease/services/Language","brease/services/Culture","brease/services/User","brease/services/TextFormatter","brease/services/Logger","brease/services/Configuration","brease/services/Opcua"],function(p,m,f,v,b,y,E,x){o=["brease/brease"],brease.config.editMode===!0&&o.push("brease/core/designer/Brease/ClassExtension"),require(o,function(brease,o){o&&o.extend(brease),brease.init(s,{measurementSystem:p,language:m,culture:f,user:v,textFormatter:b,loggerService:y,configuration:E,opcua:x},{bindingController:e,connectionController:n,infoController:r,action:a,visuData:h,pageController:l,overlayController:d,uiController:u,widgetsController:g,formatter:new NumberFormatter,eventController:c}),brease[t].call(brease,i)})})})})})}return{start:function(e,i){t("startContent",e,i)},startVisu:function(e,i){t("startVisu",e,i)}}}),define("brease/controller/objects/Client",[],function(){"use strict";var Client={init:function(i){i&&"function"==typeof i.setClientInformation&&(t=i),e=void 0},setValid:function(i){e!==!0&&i===!0&&void 0!==t&&t.setClientInformation('{"isValid": true}'),e=i},setId:function(e){i=e}},e,t,i;return Object.defineProperty(Client,"isValid",{get:function(){return e},enumerable:!0,configurable:!0}),Object.defineProperty(Client,"id",{get:function(){return i},enumerable:!0,configurable:!0}),Client}),define("brease/events/BreaseEvent",[],function(){"use strict";var e={enumerable:!0,configurable:!1,writable:!1},t=function(t,i,n){e.value=n,Object.defineProperty(t,i,e)},i={};t(i,"CLICK","vclick"),t(i,"MOUSE_DOWN","vmousedown"),t(i,"MOUSE_UP","vmouseup"),t(i,"MOUSE_MOVE","vmousemove"),t(i,"DBL_CLICK","dblclick");var BreaseEvent=function(){this.EDIT={}},n=BreaseEvent.prototype;t(n,"eventNames",i),t(n,"support",{}),n.init=function(e){this.setEditMode(e);try{document.createElement("div").addEventListener("test",function(){},{get capture(){return s.support.options=!0,!1}})}catch(t){s.support.options=!1}delete n.init},n.setEditMode=function(e){for(var t in this.eventNames)this.EDIT[t]=e===!0?this.eventNames[t]:"notAvailable",this[t]=e===!0?"notAvailable":this.eventNames[t]};var s=new BreaseEvent;return t(s,"APP_READY","app_ready"),t(s,"APP_RESIZE","app_resize"),t(s,"UI_READY","ui_ready"),t(s,"BINDING_LOADED","binding_loaded"),t(s,"EVENTBINDING_LOADED","eventbinding_loaded"),t(s,"CONTENT_ACTIVATED","ContentActivated"),t(s,"VISU_ACTIVATED","VisuActivated"),t(s,"VISU_DEACTIVATED","VisuDeactivated"),t(s,"CONNECTION_STATE_CHANGED","ConnectionStateChanged"),t(s,"RESOURCES_LOADED","resources_loaded"),t(s,"LANGUAGE_LOADED","language_loaded"),t(s,"LANGUAGE_CHANGED","language_changed"),t(s,"CULTURE_LOADED","culture_loaded"),t(s,"CULTURE_CHANGED","culture_changed"),t(s,"MEASUREMENT_SYSTEM_LOADED","measurementSystem_loaded"),t(s,"MEASUREMENT_SYSTEM_CHANGED","measurementSystem_changed"),t(s,"USER_CHANGED","user_changed"),t(s,"USER_LOADED","user_loaded"),t(s,"ROLES_CHANGED","roles_changed"),t(s,"SCROLL_START","scrollStart"),t(s,"SCROLL_END","scrollEnd"),t(s,"VISIBILITY_CHANGED","visibility_changed"),t(s,"LOG_MESSAGE","log_message"),t(s,"CONTENT_PARSED","content_parsed"),t(s,"CONTENT_READY","content_ready"),t(s,"PROPERTY_CHANGED","property_changed"),t(s,"INITIAL_VALUE_CHANGE_FINISHED","PropertyValueChangedFinished"),t(s,"WIDGET_READY","widget_ready"),t(s,"WIDGET_INITIALIZED","widget_initialized"),t(s,"WIDGET_DISPOSE","widget_dispose"),t(s,"WIDGET_UPDATED","widget_updated"),t(s,"WIDGET_ADDED","widget_added"),t(s,"WIDGET_REMOVED","widget_removed"),t(s,"PLUGIN_LOADED","plugin_loaded"),t(s,"CLOSED","window_closed"),t(s,"WINDOW_SHOW","window_show"),t(s,"SORT_COMPLETED","sort_completed"),t(s,"ROW_SELECTED","row_selected"),t(s,"FRAGMENT_LOADED","fragment_loaded"),t(s,"FRAGMENT_SHOW","fragment_show"),t(s,"FRAGMENT_HIDE","fragment_hide"),t(s,"BEFORE_HIDE","fragment_before_hide"),t(s,"BEFORE_UNLOAD","fragment_before_unload"),t(s,"PAGE_CHANGE","pageChange"),t(s,"PAGE_LOADED","pageLoaded"),t(s,"THEME_CHANGED","theme_changed"),t(s,"NAVIGATION_DISPOSE","navDispose"),t(s,"LOAD_ERROR","load_error"),t(s,"UPDATE_CURSOR_INTERSECTION","update_cursor_intersection"),t(s,"UPDATE_CURSOR","update_ursor"),t(s,"REMOVE_CURSOR","remove_cursor"),t(s,"VIEWPORT_CHANGE","viewport_changed"),t(s,"CURVE_CHANGE","curve_changed"),t(s,"SUBMIT","value_submit"),t(s,"CHANGE","change"),t(s,"ATTRIBUTE_CHANGE","attribute_change"),t(s,"NODE_ATTRIBUTE_CHANGE","node_attribute_change"),t(s,"NUMBERFORMAT_CHANGE","numberFormat_change"),t(s,"GROUP_CHANGE","group_change"),t(s,"TICK","tick"),t(s,"ALERT","alert"),t(s,"TAP_HOLD","taphold"),s}),define("brease/events/ServerEvent",["brease/core/Utils"],function(Utils){"use strict";var ServerEvent={};return Utils.defineProperty(ServerEvent,"CONTENT_ACTIVATED","ContentActivated"),Utils.defineProperty(ServerEvent,"CONTENT_DEACTIVATED","ContentDeactivated"),Utils.defineProperty(ServerEvent,"SESSION_ACTIVATED","SessionActivated"),Utils.defineProperty(ServerEvent,"VISU_ACTIVATED","VisuActivated"),Utils.defineProperty(ServerEvent,"PROPERTY_VALUE_CHANGED","PropertyValueChanged"),Utils.defineProperty(ServerEvent,"USER_CHANGED","UserChanged"),Utils.defineProperty(ServerEvent,"TRANSFER_START","TransferStart"),Utils.defineProperty(ServerEvent,"TRANSFER_FINISH","TransferFinish"),ServerEvent}),define("brease/enum/IAT_Enum",[],function(){"use strict";var IAT_Enum=function IAT_Enum(e){for(var t in e){if(IAT_Enum.prototype[t])throw new SyntaxError("reserved key '"+t+"'");Object.defineProperty(this,t,{enumerable:!0,configurable:!1,writable:!1,value:e[t]})}};return Object.defineProperty(IAT_Enum.prototype,"hasMember",{value:function(e){return-1!==this.getMembers().indexOf(e)},enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(IAT_Enum.prototype,"getMembers",{value:function(){var e=[];for(var t in this)this.propertyIsEnumerable(t)&&"function"!=typeof this[t]&&e.push(this[t]);return e},enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(IAT_Enum.prototype,"getKeyForValue",{value:function(e){var t;for(var i in this)if(this[i]===e){t=i;break}return t},enumerable:!1,configurable:!1,writable:!1}),IAT_Enum}),define("brease/enum/Enum",["brease/enum/IAT_Enum"],function(IAT_Enum){"use strict";var Enum={};function e(e,t){Object.defineProperty(Enum,e,{enumerable:!0,configurable:!1,writable:!1,value:new IAT_Enum(t)})}return e("TextAlign",{center:"center",left:"left",right:"right"}),e("Floating",{left:"left",right:"right"}),e("Orientation",{RTL:"RightToLeft",LTR:"LeftToRight",BTT:"BottomToTop",TTB:"TopToBottom"}),e("Direction",{horizontal:"horizontal",vertical:"vertical"}),e("LabelPosition",{inside:"inside",outside:"outside"}),e("WidgetState",{ABORTED:-3,FAILED:-2,NON_EXISTENT:-1,IN_QUEUE:0,IN_PARSE_QUEUE:.5,INITIALIZED:1,READY:2,SUSPENDED:3}),e("Dependency",{INACTIVE:-1,SUSPENDED:0,ACTIVE:1}),e("MessageBoxIcon",{ASTERISK:"Asterisk",ERROR:"Error",EXCLAMATION:"Exclamation",HAND:"Hand",INFORMATION:"Information",NONE:"None",QUESTION:"Question",STOP:"Stop",WARNING:"Warning"}),e("MessageBoxState",{YES:1,NO:2,OK:4,CANCEL:8,ABORT:16,RETRY:32,IGNORE:64}),e("MessageBoxType",{AbortRetryIgnore:"AbortRetryIgnore",OK:"OK",OKCancel:"OKCancel",RetryCancel:"RetryCancel",YesNo:"YesNo",YesNoCancel:"YesNoCancel"}),e("DialogMode",{MODAL:"modal",MODELESS:"modeless"}),e("NoSelectionPolicy",{selectFirst:"selectFirst",showPrompt:"showPrompt"}),e("LimitViolationPolicy",{NO_SUBMIT:"noSubmit",NO_SUBMIT_AND_CLOSE:"noSubmitAndClose",SUBMIT_ALL:"submitAll",SET_TO_LIMIT:"setToLimit",SET_TO_LIMIT_AND_SUBMIT:"setToLimitAndSubmit"}),e("SortDirection",{ASC:"ascending",DESC:"descending"}),e("SortFunction",{STRING:"string",STRING_INS:"string-ins",NUMBER:"number",INT:"int",DATE:"date"}),e("ImageAlign",{left:"left",right:"right",top:"top",bottom:"bottom"}),e("TabPosition",{left:"left",right:"right",top:"top",bottom:"bottom"}),e("ImagePosition",{left:"left",right:"right"}),e("BackgroundPosition",{left_top:"left top",left_center:"left center",left_bottom:"left bottom",center_top:"center top",center_center:"center center",center_bottom:"center bottom",right_top:"right top",right_center:"right center",right_bottom:"right bottom"}),e("TextAlignmentAll",{left_top:"left top",left_center:"left",left_bottom:"left bottom",center_top:"center top",center_center:"center",center_bottom:"center bottom",right_top:"right top",right_center:"right",right_bottom:"right bottom"}),e("InterpolationType",{NONE:"none",STEP:"step",
LINEAR:"linear"}),e("Position",{left:"left",center:"center",right:"right",top:"top",middle:"middle",bottom:"bottom"}),e("PointOfOrigin",{APP:"application",CONTAINER:"container",ELEMENT:"element"}),e("PromptType",{image:"image",text:"text",all:"all"}),e("ChildPositioning",{absolute:"absolute",relative:"relative"}),e("LoadPolicy",{ONDEMAND:"onDemand",IMMEDIATE:"immediate"}),e("InputType",{text:"text",password:"password"}),e("CachePolicy",{CACHE:"cache",NO_CACHE:"noCache"}),e("SelectMode",{STANDARD:"standard",ADVANCED:"advanced",QUICK:"quick"}),e("SizeMode",{COVER:"cover",CONTAIN:"contain",FILL:"fill"}),Object.defineProperty(Enum.SizeMode,"convertToCSS",{value:function(e){var t="contain";return e===Enum.SizeMode.CONTAIN?t="contain":e===Enum.SizeMode.COVER?t="cover":e===Enum.SizeMode.FILL&&(t="100% 100%"),t},enumerable:!1,configurable:!1,writable:!1}),e("TickStyle",{NONE:"none",TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",TOPBOTTOM:"topbottom"}),e("ChartType",{LINE_CHART:"linechart",BAR_CHART:"barchart",PIE_CHART:"piechart"}),e("VerticalAlign",{top:"top",bottom:"bottom"}),e("HorizontalAlign",{left:"left",right:"right"}),e("MeasurementSystem",{METRIC:"metric",IMPERIAL:"imperial",IMPERIAL_US:"imperial-us"}),e("HorizontalPosition",{left:"left",center:"center",right:"right"}),e("VerticalPosition",{top:"top",middle:"middle",bottom:"bottom"}),e("ShowData",{percentage:"percentage",value:"value",none:"none"}),e("AlarmListItemType",{ad1:"additionalInfo1",ad2:"additionalInfo2",cod:"code",ins:"instanceId",mes:"message",nam:"name",sco:"scope",sev:"severity",sta:"state",tim:"timestamp"}),e("AlarmHistoryItemType",{ad1:"additionalInfo1",ad2:"additionalInfo2",cod:"code",ins:"instanceId",mes:"message",nam:"name",sco:"scope",sev:"severity",stn:"new state",sto:"old state",tim:"timestamp"}),e("CropToParent",{none:"none",height:"height",width:"width",both:"both"}),e("VideoPlayerPreload",{auto:"auto",metadata:"metadata",none:"none"}),e("DropDownDisplaySettings",{"default":"default",image:"image",text:"text",imageAndText:"imageAndText"}),e("AuditListItemType",{idx:"id",opn:"operator name",tex:"text",tim:"timestamp",typ:"type"}),e("ChartZoomType",{none:"none",x:"x",y:"y",xy:"xy"}),e("ChartInterpolationType",{linear:"linear",stepBefore:"step-before",stepAfter:"step-after",cardinal:"cardinal",monotone:"monotone"}),e("EventLoggerFacility",{IAT:193}),e("EventLoggerId",{CLIENT_START_OK:32e3,CLIENT_START_FAIL:32001,NO_FURTHER_SESSION:32003,MAX_CLIENTS:32004,NOT_ENOUGH_LICENSES:32005,NO_LICENSE:32006,CLIENT_SCRIPT_FAIL:32010,CLIENT_MODULELOADER_FAIL:32011,CLIENT_PARSE_ERROR:32012,CLIENT_BINDING_ATTACH_OK:32020,CLIENT_BINDING_ATTACH_FAIL:32021,CLIENT_BINDING_ID_NOTFOUND:32022,CLIENT_BINDING_DETACH_OK:32030,CLIENT_BINDING_DETACH_FAIL:32031,CLIENT_USER_AUTHENTICATE_OK:32040,CLIENT_USER_AUTHENTICATE_FAIL:32041,CLIENT_USER_SETUSER_OK:32050,CLIENT_USER_SETUSER_FAIL:32051,CLIENT_USER_USERCHANGE:32052,CLIENT_VISU_NOT_FOUND:32060,CLIENT_INCORRECT_VISU:32061,CLIENT_NO_PAGES_FOUND:32062,CLIENT_NO_LAYOUTS_FOUND:32063,CLIENT_PAGE_NOT_FOUND:32064,CLIENT_CONTENT_NOT_FOUND:32065,CLIENT_LAYOUT_NOT_FOUND:32066,CLIENT_DIALOG_NOT_FOUND:32067,CLIENT_AREA_NOT_FOUND:32068,CLIENT_THEME_NOT_FOUND:32069,CLIENT_PAGE_NOT_CURRENT:32070,CLIENT_CONTENT_IS_ACTIVE:32071}),e("EventLoggerVerboseLevel",{OFF:0,LOW:1,HIGH:2,ALL:255}),e("EventLoggerSeverity",{SUCCESS:0,INFORMATIONAL:1,WARNING:2,ERROR:3}),e("EventLoggerCustomer",{CUSTOMER:1,BUR:0}),Enum}),define("brease/controller/libs/LogCode",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";var LogCode=function(){};LogCode.prototype.getConfig=function(e){return t[e]};var e=new LogCode;Utils.defineProperty(e,"PAGE_NOT_FOUND","PAGE_NOT_FOUND"),Utils.defineProperty(e,"PAGE_IS_CURRENT","PAGE_IS_CURRENT"),Utils.defineProperty(e,"PAGE_NOT_CURRENT","PAGE_NOT_CURRENT"),Utils.defineProperty(e,"CONTAINER_NOT_FOUND","CONTAINER_NOT_FOUND"),Utils.defineProperty(e,"DIALOG_NOT_FOUND","DIALOG_NOT_FOUND"),Utils.defineProperty(e,"NO_PAGES_FOUND","NO_PAGES_FOUND"),Utils.defineProperty(e,"NO_LAYOUTS_FOUND","NO_LAYOUTS_FOUND"),Utils.defineProperty(e,"LAYOUT_NOT_FOUND","LAYOUT_NOT_FOUND"),Utils.defineProperty(e,"CONTENT_NOT_FOUND","CONTENT_NOT_FOUND"),Utils.defineProperty(e,"CONTENT_IS_ACTIVE","CONTENT_IS_ACTIVE"),Utils.defineProperty(e,"AREA_NOT_FOUND","AREA_NOT_FOUND"),Utils.defineProperty(e,"NO_VISUDATA_FOUND","NO_VISUDATA_FOUND"),Utils.defineProperty(e,"THEME_NOT_FOUND","THEME_NOT_FOUND"),Utils.defineProperty(e,"VISU_MALFORMED","VISU_MALFORMED"),Utils.defineProperty(e,"VISU_NOT_FOUND","VISU_NOT_FOUND"),Utils.defineProperty(e,"VISU_ACTIVATE_FAILED","VISU_ACTIVATE_FAILED");var t={PAGE_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_PAGE_NOT_FOUND,messageKey:"brease.error.STARTPAGE_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},CONTAINER_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_PAGE_NOT_FOUND,messageKey:"brease.error.STARTPAGE_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},DIALOG_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_DIALOG_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},NO_PAGES_FOUND:{code:Enum.EventLoggerId.CLIENT_NO_PAGES_FOUND,messageKey:"brease.error.NO_PAGES_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},NO_LAYOUTS_FOUND:{code:Enum.EventLoggerId.CLIENT_NO_LAYOUTS_FOUND,messageKey:"brease.error.NO_LAYOUTS_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},VISU_MALFORMED:{code:Enum.EventLoggerId.CLIENT_INCORRECT_VISU,messageKey:"brease.error.INCORRECT_VISU",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},VISU_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_VISU_NOT_FOUND,messageKey:"brease.error.VISU_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},LAYOUT_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_LAYOUT_NOT_FOUND,messageKey:"brease.error.LAYOUT_NOT_FOUND",severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},CONTENT_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_CONTENT_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},CONTENT_IS_ACTIVE:{code:Enum.EventLoggerId.CLIENT_CONTENT_IS_ACTIVE,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},AREA_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_AREA_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.OFF},PAGE_NOT_CURRENT:{code:Enum.EventLoggerId.CLIENT_PAGE_NOT_CURRENT,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},THEME_NOT_FOUND:{code:Enum.EventLoggerId.CLIENT_THEME_NOT_FOUND,severity:Enum.EventLoggerSeverity.WARNING,verboseLevel:Enum.EventLoggerVerboseLevel.LOW},VISU_ACTIVATE_FAILED:{messageKey:"brease.error.ACTIVATE_VISU_FAILED"}};return e}),define("brease/helper/Scroller",["libs/iscroll-probe","brease/core/Utils","brease/events/BreaseEvent"],function(e,Utils,BreaseEvent){"use strict";var Scroller={init:function(t){void 0!==t&&"function"==typeof t.update&&(i=t),e.prototype.breaseUpdateZoomFactor=function(){this.zoomFactor=Utils.getScaleFactor(this.wrapper)}},addScrollbars:function(t,n,l){var d="string"==typeof t?document.querySelector(t):t,c;return null!==d?(c=new e(d,s(n)),c.zoomFactor=Utils.getScaleFactor(d),c.on("beforeScrollStart",function(){r(this)}),c.on("scrollEnd",function(){a()}),c.on("scrollCancel",function(){a()}),c.on("destroy",function(){document.body.removeEventListener(BreaseEvent.APP_RESIZE,this.boundUpdateZoomFactor)}),c.boundUpdateZoomFactor=c.breaseUpdateZoomFactor.bind(c),document.body.addEventListener(BreaseEvent.APP_RESIZE,c.boundUpdateZoomFactor),i.update(),l!==!0&&o(d,c)):c={on:function(){u(t)},off:function(){},refresh:function(){},scrollToElement:function(){},scrollTo:function(){},scrollBy:function(){},destroy:function(){},enable:function(){},disable:function(){},wrapper:{}},c}},t={scroller:{}},i={update:function(){}},n={};Utils.defineProperty(n,"bounce",!1),Utils.defineProperty(n,"fadeScrollbars",!1),Utils.defineProperty(n,"momentum",!0),Utils.defineProperty(n,"mouseWheel",!1),Utils.defineProperty(n,"resizeScrollbars",!0),Utils.defineProperty(n,"scrollbars","custom"),Utils.defineProperty(n,"disableTouch",!1),Utils.defineProperty(n,"disableMouse",!1),Utils.defineProperty(n,"disablePointer",!0),Utils.defineProperty(n,"HWCompositing",!1),Utils.defineProperty(Scroller,"defaults",n);function s(e){var t=$.extend({},Scroller.defaults,e);return t.disableTouch=!1,t.disableMouse=!1,t.disablePointer=!0,t.HWCompositing=!1,t}function r(e){var i=$(e.wrapper).closest("[id]")[0].id;t.scroller[i]=e;for(var n in t.scroller)if(t.scroller[n]!==e&&$.contains(e.wrapper,t.scroller[n].wrapper)){e.disable();break}}function a(){t.stopped!==!0&&(t.stopped=!0,window.setTimeout(function(){for(var e in t.scroller){var i=t.scroller[e];i.enabled||(i.initiated=0,i.enable())}t.scroller={},t.stopped=!1},0))}function o(e,t){if("function"==typeof MutationObserver){var i=new MutationObserver(d);i.debouncedRefresh=_.debounce(l.bind(null,t,i),300),i.observe(e,{childList:!0,subtree:!0})}}function l(e,t){e.wrapper&&e.wrapper.ownerDocument===document&&e.refresh(),t.disconnect(),t.debouncedRefresh=null}function d(e,t){var i=!1;e.forEach(function(e){e.addedNodes.length>0&&(i=!0)}),i&&t.debouncedRefresh()}function u(e){console.iatWarn("trying to add a scroller to a null object:"+e)}return Scroller}),define("brease/controller/PopUpManager",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var PopUpManager={init:function(){r(),a(),document.body.addEventListener(BreaseEvent.APP_RESIZE,_.debounce(a,200)),$(window).on("resize",_.debounce(a,200))},addWindow:function(e,n){t[e]||(t[e]={id:e,type:n,index:i+=1})},getNumberOfWindowsOfType:function(e){var i=0;for(var n in t)t[n]&&t[n].type===e&&(i+=1);return i},removeWindow:function(e){delete t[e]},overlays:function(e){var i=[],n=0;if(t[e]){n=t[e].index;for(var s in t)t[s]&&t[s].index>n&&i.push(t[s].id)}return i},getHighestZindex:function(){return r(),e+=1,e},update:function(){r(),a()},getDimensions:function(){return{winWidth:s.winWidth,winHeight:s.winHeight,appWidth:s.appWidth,appHeight:s.appHeight}}},e=-1,t={},i=0,n=!1,s={};function r(){n||(n=!0,window.setTimeout(o,0))}function a(){s={winWidth:window.innerWidth,winHeight:window.innerHeight,appWidth:brease.appView.innerWidth(),appHeight:brease.appView.innerHeight()}}function o(){n=!1;for(var t=document.querySelectorAll("body > [class],body > [style],body > [id]"),i=0,s=0,r=t.length,a=r-1;a>=0;a-=1)s=parseFloat(l(t[a],"z-index")),s>i&&(i=s);e=i}function l(e,t){return window.getComputedStyle(e).getPropertyValue(t)}return PopUpManager.init(),PopUpManager}),define("brease/controller/libs/ErrorCode",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";var ErrorCode={};Utils.defineProperty(ErrorCode,"getMessageByCode",function(t,i){if(t=""+t,void 0!==e[t]){var n=e[t].message;if(Array.isArray(i))for(var s=0;s<i.length;s+=1)n=n.replace(new RegExp("\\{"+s+"\\}","g"),i[s]);return n}return e.GENERIC_CONNECTION_FAILED.message},!1,!1,!1),Utils.defineProperty(ErrorCode,"getLogIdByCode",function(t){return t=""+t,void 0!==e[t]?e[t].logId:e.GENERIC_CONNECTION_FAILED.logId},!1,!1,!1),Utils.defineProperty(ErrorCode,"NO_FURTHER_SESSION","2148073484"),Utils.defineProperty(ErrorCode,"MAX_CLIENTS","2148139020"),Utils.defineProperty(ErrorCode,"NOT_ENOUGH_LICENSES","2148204556"),Utils.defineProperty(ErrorCode,"NO_LICENSE","2148270092"),Utils.defineProperty(ErrorCode,"GENERIC_CONNECTION_FAILED","GENERIC_CONNECTION_FAILED");var e={2148073484:{message:"Visualization already open on this client, no further sessions allowed",logId:Enum.EventLoggerId.NO_FURTHER_SESSION},2148139020:{message:"Maximum number of clients reached!",logId:Enum.EventLoggerId.MAX_CLIENTS},2148204556:{message:"No more clients allowed, no client license available",logId:Enum.EventLoggerId.NOT_ENOUGH_LICENSES},2148270092:{message:'Not allowed, license not available for visualization (id="{0}")!',logId:Enum.EventLoggerId.NO_LICENSE},GENERIC_CONNECTION_FAILED:{message:"server connection (register client) error",logId:Enum.EventLoggerId.CLIENT_START_FAIL}};return ErrorCode}),define("brease/helper/Messenger",["brease/events/BreaseEvent","brease/enum/Enum","brease/controller/libs/ErrorCode"],function(BreaseEvent,Enum,ErrorCode){"use strict";var Messenger=function(e){this.systemMessage=e},e=Messenger.prototype;return e.announce=function(e,t){switch(e){case"START_CONTENT":console.log("start with content:"+t.contentId);break;case"START_VISU":console.log("start with visualization:"+t.visuId);break;case"VISU_NOT_FOUND":console.log("visualization (visuId="+t.visuId+") not found");break;case"VISU_NOT_ACTIVATED":console.log("visualization (visuId="+t.visuId+") not activated"),this.systemMessage.showMessage("visualization (visuId="+t.visuId+") not activated");break;case"CONFIGURATION_LOAD_ERROR":console.iatWarn("configuration not found; take default values");break;case"START_SERVICES_SUCCESS":brease.loggerService.log(Enum.EventLoggerId.CLIENT_START_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.SUCCESS,[t.clientId]);break;case"START_SERVICES_FAILED":console.log("XHR error:"+t.message),this.systemMessage.showMessage("server connection (services) error"),brease.loggerService.log(Enum.EventLoggerId.CLIENT_START_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR,[],"XHR error:"+t.message);break;case"REGISTER_CLIENT_SUCCESS":console.log("registered client with id = "+t.response.ClientId);break;case"REGISTER_CLIENT_FAILED":var i=ErrorCode.getMessageByCode(ErrorCode.GENERIC_CONNECTION_FAILED),n=ErrorCode.getLogIdByCode(ErrorCode.GENERIC_CONNECTION_FAILED);void 0!==t.response.status&&void 0!==t.response.status.code&&(i=ErrorCode.getMessageByCode(t.response.status.code,[t.visuId]),n=ErrorCode.getLogIdByCode(t.response.status.code)),brease.loggerService.log(n,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR,[],i),this.systemMessage.showMessage(i),console.log(i);break;case"SERVER_CONNECTION_START":this.systemMessage.deferMessage("try to establish server connection...",2e3),console.log("try to establish server connection..");break;case"SERVER_CONNECTION_SUCCESS":this.systemMessage.clear();break;case"SERVER_CONNECTION_ERROR":this.systemMessage.showMessage("server connection error");break;case"TEXT_LOAD_START":this.systemMessage.deferMessage("loading texts...",2e3),console.log("loading texts...");break;case"TEXT_LOAD_SUCCESS":this.systemMessage.clear();break;case"TEXT_LOAD_ERROR":this.systemMessage.showMessage("error on loading texts");break;case"WIDGET_LOAD_ERROR":this.systemMessage.showMessage("error on loading system widgets")}},Messenger}),define("brease/helper/SystemMessage",["brease/controller/PopUpManager"],function(e){"use strict";var SystemMessage={deferMessage:function(e,i){t=window.setTimeout(function(){SystemMessage.showMessage(e)},i)},showMessage:function(e){t&&window.clearTimeout(t),r(e)},clear:function(){t&&window.clearTimeout(t),s()}},t,i,n;function s(){i&&i.length>0&&i.hide().off()}function r(t){i=i||$("#systemMessageBox"),0===i.length&&(i=$('<div id="systemMessageBox" style="z-index:1;position:fixed; padding:0px;margin:0px; background-color:rgba(0,0,0,0.18); top:0; left:0;width:100%;height:100%;"><div style="position:absolute; padding:20px; width:400px; margin-left:-220px;color:red; background-color:white;font-size:20px;left:50%;top:50%;text-align:center;"></div></div>').appendTo(document.body),n=i.find("div")),n.text(t),i.css("z-index",e.getHighestZindex()+1).show().on("click vclick mousedown mouseup pointerup pointerdown",function(e){e.stopImmediatePropagation(),e.preventDefault()})}return SystemMessage}),define("brease/brease",["brease/controller/objects/Client","brease/core/Utils","brease/events/BreaseEvent","brease/events/ServerEvent","brease/controller/libs/LogCode","brease/helper/Scroller","brease/controller/PopUpManager","brease/helper/Messenger","brease/helper/SystemMessage","brease/config","brease/settings"],function(Client,Utils,BreaseEvent,ServerEvent,LogCode,Scroller,e,Messenger,t,config,i){"use strict";var n,s={},r={},Brease=function Brease(){Utils.defineProperty(this,"config",config),Utils.defineProperty(this,"services",{}),this.messenger=new Messenger(t),l.call(this),u.call(this),d.call(this)},a=Brease.prototype;Utils.defineProperty(a,"callWidget",function D(){return brease.uiController.callWidget.apply(brease.uiController,arguments)}),Utils.defineProperty(a,"setOptions",function _(e,t){return brease.uiController.setOptions(e,t)}),a.init=function(e,i,s){n=e,Client.init(e),h.call(this,i),c.call(this,s),m.call(this,e),p.call(this,e,this.settings,t)},a.startVisu=function(e){this.messenger.announce("START_VISU",{visuId:e}),config.visuId=e,config.contentId=void 0,this.appView.html(""),o.call(this)},a.startContent=function(e){this.messenger.announce("START_CONTENT",{contentId:e}),config.contentId=e,config.visuId=void 0,o.call(this)},a.getClientId=function(){return Client.id},a.dispatchResize=function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.APP_RESIZE))};function o(){Scroller.init(e),window.performanceMonitor.profile("registerClient",0),n.registerClient(config.visuId,f)}function l(){Utils.defineProperty(this,"appElem",document.getElementById("appContainer")),Utils.defineProperty(this,"appView",$(this.appElem)),Utils.defineProperty(this,"bodyEl",$(document.body)),Utils.defineProperty(this,"docEl",$(document))}function d(){this.bodyEl.hasClass("system_brease_Scrollbar_style_default")||this.bodyEl.addClass("system_brease_Scrollbar_style_default"),this.bodyEl.hasClass("system_brease_Body_style_default")||this.bodyEl.addClass("system_brease_Body_style_default")}function u(){Utils.defineProperty(this,"settings",i)}function c(e){for(var t in e)r[t]=e[t];g(this,"formatter",r),g(this,"action",r),g(this,"dialogController",r,"overlayController"),g(this,"overlayController",r),g(this,"pageController",r),g(this,"uiController",r)}function g(e,t,i,n){Object.defineProperty(e,t,{get:function(){return i[n||t]},set:function(){},enumerable:!0,configurable:!0})}function h(e){for(var t in e)s[t]=e[t];g(this,"measurementSystem",s),g(this.services,"measurementSystem",s),g(this,"language",s),g(this.services,"language",s),g(this,"user",s),g(this.services,"user",s),g(this,"culture",s),g(this.services,"culture",s),g(this,"textFormatter",s),g(this,"loggerService",s),g(this.services,"opcua",s)}function p(e,t,i){r.bindingController.init(e),r.connectionController.init(e,i),r.infoController.init(e),r.eventController.init(e,r.bindingController),this.action.init(e),this.pageController.init(e),this.uiController.init(r.bindingController,r.widgetsController)}function m(e){this.measurementSystem.init(e),this.language.init(e),this.culture.init(),this.user.init(e),this.textFormatter.init(e),this.loggerService.init(e),s.configuration.init(e)}function f(e){window.performanceMonitor.profile("registerClient",1),void 0!==e&&void 0!==e.status&&0===e.status.code?(brease.messenger.announce("REGISTER_CLIENT_SUCCESS",{response:e,clientId:e.ClientId}),Client.setId(e.ClientId),v()):(void 0===Client.isValid&&(Client.setValid(!1),brease.messenger.announce("REGISTER_CLIENT_FAILED",{response:e,visuId:config.visuId})),window.setTimeout(function(){n.registerClient(config.visuId,f)},1e3))}function v(){$.when(brease.language.isReady(),brease.measurementSystem.isReady(),brease.user.isReady(),brease.textFormatter.isReady()).then(function(){b()},function(e){brease.messenger.announce("START_SERVICES_FAILED",{message:e})})}function b(){brease.culture.isReady().then(function(){brease.messenger.announce("START_SERVICES_SUCCESS",{clientId:Client.id}),y()},function(e){brease.messenger.announce("START_SERVICES_FAILED",{message:e})})}function y(){config.visuId?r.visuData.loadVisuData(brease.config.visuId,brease.appElem.id).then(function(e){E(e)},function(e){brease.messenger.announce(LogCode.VISU_NOT_FOUND,{visuId:e}),E()}):E()}function E(e){s.configuration.loadConfigurations(e).then(x,function(){brease.messenger.announce("CONFIGURATION_LOAD_ERROR"),x()})}function x(){window.performanceMonitor.profile("socketConnection",0),brease.messenger.announce("SERVER_CONNECTION_START"),n.addEventListener(ServerEvent.SESSION_ACTIVATED,I),$.when(n.socketIsReady()).then(function(){window.performanceMonitor.profile("socketConnection",1)},function(){brease.messenger.announce("SERVER_CONNECTION_ERROR")})}function I(){brease.messenger.announce("SERVER_CONNECTION_SUCCESS"),r.bindingController.startListen(),w()}function w(){brease.messenger.announce("TEXT_LOAD_START"),window.performanceMonitor.profile("textLoad",0),$.when(brease.language.allTextsLoaded()).then(function(){window.performanceMonitor.profile("textLoad",1),brease.messenger.announce("TEXT_LOAD_SUCCESS"),C()},function(){brease.messenger.announce("TEXT_LOAD_ERROR")})}function C(){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.RESOURCES_LOADED)),$.when(S(),brease.overlayController.init()).then(function(){void 0!==config.contentId?(brease.appElem.addEventListener(BreaseEvent.CONTENT_PARSED,T),brease.uiController.parse(brease.appElem,!1)):A()})}function S(){if(void 0!==config.contentId)return Client.setValid(!0),r.bindingController.activateContent(config.contentId);var e=$.Deferred();return e.resolve(),e.promise()}function T(){brease.appElem.removeEventListener(BreaseEvent.CONTENT_PARSED,T),r.bindingController.sendInitialValues(config.contentId,A)}function A(){r.infoController.start(config.visu.activityCount),void 0!==config.visuId&&brease.pageController.start(config.visuId,brease.appElem,config.ContentCaching),brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.APP_READY,{bubbles:!0})),window.performanceMonitor.profile(BreaseEvent.APP_READY),n.startHeartbeat(),$("#splashscreen").remove(),console.log("app ready")}var brease=new Brease;return Utils.defineProperty(window,"brease",brease),brease}),define("brease/config/NumberFormat",["require"],function(e){"use strict";var NumberFormat=function(e,n,s){e=isNaN(e)?1:e,n=isNaN(n)?1:n,this.decimalPlaces=Math.min(i.decimalPlaces,Math.max(t.decimalPlaces,e)),this.minimumIntegerDigits=Math.max(t.minimumIntegerDigits,n),s>=t.maximumIntegerDigits&&(this.maximumIntegerDigits=parseInt(s,10))},t={decimalPlaces:0,minimumIntegerDigits:1,maximumIntegerDigits:1},i={decimalPlaces:20};return NumberFormat.getFormat=function(e,n){var s=e["default"]||NumberFormat.defaults,r=e[n]||s,a,o;void 0!==r.decimalPlaces?(r.decimalPlaces<t.decimalPlaces&&console.iatWarn("decimalPlaces has to be >= "+t.decimalPlaces),r.decimalPlaces>i.decimalPlaces&&console.iatWarn("decimalPlaces has to be <= "+i.decimalPlaces),a=Math.min(i.decimalPlaces,Math.max(t.decimalPlaces,r.decimalPlaces))):a=s.decimalPlaces,void 0!==r.minimumIntegerDigits?(r.minimumIntegerDigits<t.minimumIntegerDigits&&console.iatWarn("minimumIntegerDigits has to be >= "+t.minimumIntegerDigits),o=Math.max(t.minimumIntegerDigits,r.minimumIntegerDigits)):o=s.minimumIntegerDigits;var l={decimalPlaces:a,minimumIntegerDigits:o};return r.maximumIntegerDigits>=t.maximumIntegerDigits&&(l.maximumIntegerDigits=parseInt(r.maximumIntegerDigits,10)),l},NumberFormat.defaults={decimalPlaces:1,minimumIntegerDigits:1},NumberFormat.minima={decimalPlaces:t.decimalPlaces,minimumIntegerDigits:t.minimumIntegerDigits,maximumIntegerDigits:t.maximumIntegerDigits},NumberFormat.maxima={decimalPlaces:i.decimalPlaces},NumberFormat}),define("brease/config/SortFunctions",["require"],function(e){"use strict";var SortFunctions={"int":function(e,t){return parseInt(e,10)-parseInt(t,10)},number:function(e,t){return parseFloat(e)-parseFloat(t)},date:function(e,t){return Date.parse(e)-Date.parse(t)},string:function(e,t){return t>e?-1:e>t?1:0},"string-ins":function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),t>e?-1:e>t?1:0}};return SortFunctions}),define("brease/core/Types",[],function(){"use strict";var Types={parseValue:function(s,o,l){var d=s;switch(o){case"Enum":d=e(s,l);break;case"Integer":d=t(s,l);break;case"Number":d=i(s,l);break;case"Boolean":d=n(s,l);break;case"Color":d=r(s);break;case"String":d=a(s)}return d},objectTypes:["Object","Array","ItemCollection","GraphicCollection","RoleCollection","brease.config.MeasurementSystemUnit","brease.config.MeasurementSystemFormat","brease.datatype.Notification","brease.datatype.Node","brease.datatype.ArrayNode"]};function e(e,t){var i=e;return t.IAT_Enum.hasMember(e)!==!0&&(i=t["default"]),i}function t(e,t){var i=parseInt(e,10);return isNaN(i)&&(i=void 0===t||isNaN(t["default"])?0:parseInt(t["default"],10)),void 0!==t&&void 0!==t.min&&(i=Math.max(i,t.min)),void 0!==t&&void 0!==t.max&&(i=Math.min(i,t.max)),i}function i(e,t){var i=parseFloat(e);return isNaN(i)&&(i=void 0===t||isNaN(t["default"])?0:parseFloat(t["default"])),void 0!==t&&void 0!==t.min&&(i=Math.max(i,t.min)),void 0!==t&&void 0!==t.max&&(i=Math.min(i,t.max)),i}function n(e,t){var i=e;return e===!0||e===!1||!t||t["default"]!==!0&&t["default"]!==!1||(i=t["default"]),i=i===!0||1===i?!0:!1,i}var s=/(^#[0-9A-Fa-f]{6}$)|(^#[0-9A-Fa-f]{3}$)|(transparent)|(^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$)|(^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$)/;function r(e){var t=""+e;return s.test(t)||(t="#000000"),t}function a(e){return""+e}return Types}),define("brease/controller/ActionController",["brease/controller/objects/Client","brease/events/BreaseEvent","brease/core/Utils","brease/core/Types","brease/enum/Enum"],function(Client,BreaseEvent,Utils,Types,Enum){"use strict";var ActionController=function ActionController(){},e=ActionController.prototype,t;e.init=function(e){void 0!==t&&t.removeEventListener("action",i),t=e,t.addEventListener("action",i)};function i(e){var t=e.detail,i=n(t);try{switch(i){case"widget":a(t);break;case"clientSystem":s(t);break;default:y({},t.actionId,!1)}}catch(r){E(r,t.action),y(!1,t.actionId,!1)}}function n(e){return-1!==e.action.indexOf("widgets.")?"widget":0===e.action.indexOf("clientSystem.")?"clientSystem":(console.warn("Target:",e.action,"notAvailable"),void 0)}function s(e){switch(e.action){case"clientSystem.Action.ShowMessageBox":d(e);break;case"clientSystem.Action.OpenDialog":Client.isValid===!0?u(e):(y({},e.actionId,!1),console.warn("client not valid -> action 'OpenDialog' rejected"));break;case"clientSystem.Action.CloseDialog":Client.isValid===!0?c(e):(y({},e.actionId,!1),console.warn("client not valid -> action 'CloseDialog' rejected"));break;case"clientSystem.Action.Navigate":Client.isValid===!0?h(e):(y({},e.actionId,!1),console.warn("client not valid -> action 'Navigate' rejected"));break;case"clientSystem.Action.LoadContentInArea":Client.isValid===!0?g(e):(y({},e.actionId,!1),console.warn("client not valid -> action 'LoadContentInArea' rejected"));break;case"clientSystem.Action.Logout":m(e);break;case"clientSystem.Action.Login":p(e);break;case"clientSystem.Action.ChangeTheme":Client.isValid===!0?f(e):(y({},e.actionId,!1),console.warn("client not valid -> action 'ChangeTheme' rejected"));break;case"clientSystem.Action.SetLanguage":v(e);break;case"clientSystem.Action.SetMeasurementSystem":b(e);break;default:console.warn("Action:",e.action,"notAvailable"),y({},e.actionId,!1)}}function r(e,t,i){if(e.meta&&e.meta.actions){var n=[];for(var s in e.meta.actions[t].parameter)n[e.meta.actions[t].parameter[s].index]=s;return n}return Utils.getFunctionArguments(i)}function a(e){var t=e.target.refId,i=brease.callWidget(t,"widget");if(null===i)y(null,e.actionId,!1);else if(i.state<Enum.WidgetState.INITIALIZED||i.state>Enum.WidgetState.READY)console.iatWarn("widget action for "+e.target.refId+": widget in unavailable state"),y(null,e.actionId,!1);else{var n=e.action.split(".").pop(),s=n.substring(0,1).toLowerCase()+n.substring(1),r=i[s],a=i.constructor;if(void 0===r)console.iatWarn("Action '"+n+"' not available on type "+a.defaults.className),y(null,e.actionId,!1);else{var l=o(r,n,e.actionArgs,a);if($.when(r.apply(i,l)).then(function(t){y(t,e.actionId,null!==t)}),0===s.indexOf("set")){var d=s.substring(3).replace(/^[A-Z]/g,function(e){return e.toLowerCase()}),u=brease.uiController.getSubscriptionsForElement(t);if(u&&u[d]){var c={};c[d]=l[0],document.getElementById(t).dispatchEvent(new CustomEvent(BreaseEvent.ATTRIBUTE_CHANGE,{detail:c,bubbles:!0}))}}}}}function o(e,t,i,n){var s=[],a=Object.keys(i);if(a.length>1){var o=r(n,t,e);o&&(a=o)}for(var d=0;d<a.length;d+=1)s.push(l(i[a[d]],a[d],n,t));return s}function l(e,t,i,n){if(!Utils.isString(e))return e;if(void 0===i.meta||void 0===i.meta.actions||void 0===i.meta.actions[n])return e;var s=i.meta.actions[n].parameter[t];if(!s||-1===Types.objectTypes.indexOf(s.type))return e;try{e=JSON.parse(e.replace(/\'/g,'"'))}catch(r){console.iatWarn("illegal data in attribute "+t+" for action "+n)}return e}function d(e){var t=e.actionArgs;$.when(brease.overlayController.showMessageBox(t.type,t.header,t.message,t.icon,t.buttonText,t.style)).then(function(t){y(t,e.actionId,!0)})}function u(e){var t=e.actionArgs;$.when(brease.overlayController.openDialog(t.dialogId,t.mode,t.horizontalPos,t.verticalPos,void 0,t.headerText,t.autoClose)).then(function(t,i){y(t,e.actionId,i)})}function c(e){var t=e.actionArgs;$.when(brease.overlayController.closeDialog(t.dialogId)).then(function(t){y(t,e.actionId,!0)})}function g(e){var t=e.actionArgs;$.when(brease.pageController.loadContentInArea(t.contentId,t.areaId,t.pageId)).then(function(t){y(t,e.actionId,!0)})}function h(e){var t=e.actionArgs,i,n;i=brease.pageController.getVisuById(brease.pageController.getVisu4Page(t.pageId)),void 0!==i?(n=document.getElementById(i.containerId),$.when(brease.pageController.loadPage(t.pageId,n,!0)).then(function(){y({},e.actionId,!0)})):y({},e.actionId,!1)}function p(e){var t=e.actionArgs;$.when(brease.user.loginAction(t.userName,t.password)).then(function(t){y(t.success,e.actionId,!0)})}function m(e){$.when(brease.user.setDefaultUser()).then(function(){y({},e.actionId,!0)})}function f(e){var t=e.actionArgs;$.when(brease.pageController.setTheme(t.theme)).then(function(){y({},e.actionId,!0)})}function v(e){var t=e.actionArgs;$.when(brease.language.switchLanguage(t.value)).then(function(t){y({},e.actionId,t.success)})}function b(e){var t=e.actionArgs;$.when(brease.measurementSystem.switchMeasurementSystem(t.value)).then(function(){y({},e.actionId,!0)})}function y(e,i,n){var s={actionId:i,actionResult:{result:e,success:n}};t.actionResponse(s)}function E(e,t){var i="Error in "+t;i+=e.stack?"\n"+e.stack:e.message?"\n"+e.message:"\n"+e.toString(),console.log(i)}return new ActionController}),define("brease/objects/Subscription",[],function(){"use strict";var e=function(e,t,i){this.elemId=e,this.attribute=t,this.contentId=i};return e.fromServerData=function(t,i){var n=new e(t.refId,t.attribute,i);return void 0!==t.dynamic&&(n.dynamic=t.dynamic?!0:!1),void 0!==t.active&&(n.active=t.active?!0:!1),void 0!==t.count&&(n.count=parseInt(t.count,10)),n},e.toServerData=function(e,t){return{refId:e.elemId,data:[{attribute:e.attribute,value:t}]}},e}),define("brease/model/BindingModel",["brease/objects/Subscription"],function(e){"use strict";var t={session:{_client:[]},contents:new Map,elements:new Map},i={contents:new Map,elements:new Map},n={contents:new Map,elements:new Map},s={addSubscription:function(e){var t=e.elemId,n=e.contentId;void 0===i.elements.get(t)&&i.elements.set(t,{}),void 0===i.elements.get(t)[e.attribute]?i.elements.get(t)[e.attribute]=e:i.elements.get(t)[e.attribute].dynamic===!0&&(i.elements.get(t)[e.attribute].count+=1),void 0===i.contents.get(n)&&i.contents.set(n,new Map),i.contents.get(n).set(t,i.elements.get(t))},deleteSubscription:function(e,t){var n=i.elements.get(e);
void 0!==n&&delete n[t]},addDynamicBinding:function(e,t){var i=a(e.target);e.contentId=t,n.elements.set(i,e),void 0===n.contents.get(t)&&n.contents.set(t,new Map),n.contents.get(t).set(i,e)},getDynamicBinding:function(e){return n.elements.get(a(e))},removeDynamicBinding:function(e){var t=a(e),i=n.elements.get(t);i&&(r(e.refId,e.attribute),"brease"===i.source.type&&r(i.source.refId,i.source.attribute),n.elements["delete"](t),n.contents.get(i.contentId)["delete"](t))},addDynamicSubscription:function(t,i,n){var r=e.fromServerData({attribute:i,refId:t,dynamic:!0,count:1,active:!0},n);return s.addSubscription(r),r},removeDynamicBindings:function(e){var t=n.contents.get(e);if(t&&t.size>0){var i=[];t.forEach(function(t,n){t.contentId===e&&(i.push(n),r(t.target.refId,t.target.attribute),"brease"===t.source.type&&r(t.source.refId,t.source.attribute))});for(var s=0;s<i.length;s+=1)n.elements["delete"](i[s]),n.contents.get(e)["delete"](i[s])}},getSubscriptionsForElement:function(e,t){var n=i.elements.get(e);return void 0!==n?void 0!==t?n[t]:n:void 0},getSubscriptionsForContent:function(e){return i.contents.get(e)},contentHasSubscriptions:function(e){var t=i.contents.get(e);return void 0!==t&&t.size>0},deactivateSubscriptions:function(e){var t=i.contents.get(e);t&&t.forEach(function(e){for(var t in e)e[t].active=!1})},addEventSubscription:function(e){var i=e.elemId,n=e.event,s=t.elements.get(i);void 0===s&&(t.elements.set(i,{}),s=t.elements.get(i)),void 0===s[n]&&(s[n]={}),s[n]=e,t.contents.set(e.scopeId,!0)},getEventsForElement:function(e,i){var n=t.elements.get(e);return void 0!==n?void 0!==i?n[i]:n:void 0},addSessionEventSubscription:function(e,i){void 0===t.session[i]&&(t.session[i]=[]),-1===t.session[i].indexOf(e.event)&&t.session[i].push(e.event)},getSessionEvents:function(){return t.session}};function r(e,t){var i=s.getSubscriptionsForElement(e,t);i&&(i.dynamic===!0&&(i.count-=1),0===i.count&&s.deleteSubscription(e,t))}function a(e){return e.type+"||"+e.refId+"||"+e.attribute}return s}),define("brease/controller/objects/ContentStatus",["brease/core/Utils"],function(Utils){"use strict";var ContentStatus={};return Utils.defineProperty(ContentStatus,"notExistent",-2),Utils.defineProperty(ContentStatus,"deactivated",-1),Utils.defineProperty(ContentStatus,"initialized",0),Utils.defineProperty(ContentStatus,"activatePending",1),Utils.defineProperty(ContentStatus,"active",2),ContentStatus}),define("brease/controller/BindingLoader",["brease/events/BreaseEvent","brease/enum/Enum","brease/objects/Subscription","brease/controller/objects/ContentStatus"],function(BreaseEvent,Enum,e,ContentStatus){"use strict";var BindingLoader={init:function(e,s,r){t=e,i=s,n=r},startListen:function(){document.body.addEventListener(BreaseEvent.VISU_ACTIVATED,u),document.body.addEventListener(BreaseEvent.VISU_DEACTIVATED,u)},loadSubscriptions:function(e,t){var i=n.setLatestRequest(e,"loadSubscriptions");return i?n.isBindingLoaded(e)!==!0?$.when(s(e,i.latestRequest),r(e,i.latestRequest)).then(function(){n.getActiveState(e)>ContentStatus.initialized&&(n.setBindingLoadState(e,!0),window.performanceMonitor.profile("activateContent - "+e,1),t.resolve(e))}):(window.performanceMonitor.profile("activateContent - "+e,1),t.resolve(e)):t.resolve(e),t.promise()}},t,i,n;function s(e,i){var s=$.Deferred(),r=n.getContent(e);return r?(window.performanceMonitor.profile("loadBindingSubscriptions - "+e,0),t.getSubscription(e,r.visuId,a,{requestId:i,contentId:e,deferred:s})):s.resolve(e),s.promise()}function r(e,i){var s=$.Deferred(),r=n.getContent(e);return r?(window.performanceMonitor.profile("loadEventBindingSubscriptions - "+e,0),t.getEventSubscription(e,r.visuId,o,{requestId:i,contentId:e,deferred:s})):s.resolve(e),s.promise()}function a(t,s){if(s.requestId===n.getLatestRequest(s.contentId)){if(t.success===!0&&Array.isArray(t.subscriptions))for(var r=0,a=t.subscriptions.length;a>r;r+=1)i.addSubscription(e.fromServerData(t.subscriptions[r],s.contentId));else console.iatInfo('no subscription for content "'+s.contentId+'" available!'),brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_ID_NOTFOUND,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[s.contentId]);document.body.dispatchEvent(new CustomEvent(BreaseEvent.BINDING_LOADED,{detail:{contentId:s.contentId}})),window.performanceMonitor.profile("loadSubscriptions - "+s.contentId,1),s.deferred.resolve()}else console.iatWarn('loadSubscriptions for content "'+s.contentId+'" aborted!')}function o(e,t){t.requestId===n.getLatestRequest(t.contentId)?(e.success===!0&&Array.isArray(e.eventSubscriptions)?l(t.contentId,e.eventSubscriptions):console.iatInfo('no event subscription for content "'+t.contentId+'" available!'),document.body.dispatchEvent(new CustomEvent(BreaseEvent.EVENTBINDING_LOADED,{detail:{contentId:t.contentId}})),window.performanceMonitor.profile("loadEventBindingSubscriptions - "+t.contentId,1),t.deferred.resolve()):console.iatWarn('loadEventSubscription for content "'+t.contentId+'" aborted!')}function l(e,t){var n=t.length,s;if(n>0)for(var r=0;n>r;r+=1)s=t[r],void 0!==s.refId?i.addEventSubscription({scopeId:e,elemId:s.refId,eventId:s.refId,event:s.event}):i.addSessionEventSubscription({scopeId:e,event:s.event},e)}function d(e){if(e.success===!0&&Array.isArray(e.eventSubscriptions))for(var t=0;t<e.eventSubscriptions.length;t+=1)i.addSessionEventSubscription(e.eventSubscriptions[t],"_client");else console.iatInfo("no event subscription for session available!")}function u(){t.getSessionEventSubscription(d)}return BindingLoader}),define("brease/datatype/Notification",["require"],function(e){"use strict";var Notification=function(e,t){this.action=e,this.row=t},t=Notification.prototype;return t.setAction=function(e){this.action=e},t.getAction=function(){return this.action},t.setRow=function(e){this.row=e},t.getRow=function(){return this.row},Notification}),define("brease/controller/objects/PageTypes",["brease/core/Utils"],function(Utils){"use strict";var Types={};return Utils.defineProperty(Types,"PAGE","Page"),Utils.defineProperty(Types,"DIALOG","Dialog"),Types}),define("brease/controller/objects/AssignTypes",["brease/core/Utils"],function(Utils){"use strict";var Types={};return Utils.defineProperty(Types,"CONTENT","Content"),Utils.defineProperty(Types,"PAGE","Page"),Utils.defineProperty(Types,"VISU","Visu"),Types}),define("brease/controller/objects/VisuStatus",["brease/core/Utils"],function(Utils){"use strict";var VisuStatus={};return Utils.defineProperty(VisuStatus,"LOADED","LOADED"),Utils.defineProperty(VisuStatus,"MALFORMED","MALFORMED"),Utils.defineProperty(VisuStatus,"NOT_FOUND","NOT_FOUND"),Utils.defineProperty(VisuStatus,"ACTIVATE_FAILED","ACTIVATE_FAILED"),VisuStatus}),define("brease/model/VisuModel",["brease/events/BreaseEvent","brease/events/ServerEvent","brease/core/Utils","brease/controller/objects/PageTypes","brease/controller/objects/AssignTypes","brease/controller/objects/VisuStatus","brease/controller/libs/LogCode"],function(BreaseEvent,ServerEvent,Utils,PageTypes,AssignTypes,VisuStatus,LogCode){"use strict";var e={init:function(e,t){return t&&(i=t),e&&(n=e,n.addEventListener(ServerEvent.VISU_ACTIVATED,h)),a(),r.reset(),this},activateVisu:function(e,t){e=Utils.ensureVisuId(e),t.visuId&&(t.visuId=Utils.ensureVisuId(t.visuId));var i=s.visus[e],a=$.Deferred();return void 0===i||i.status!==VisuStatus.LOADED?a.reject(void 0!==i?i.status:VisuStatus.NOT_FOUND,void 0,t):i.active!==!0?(i.activateDeferred=a,i.callbackInfo=t,n.activateVisu(e,p,t),r.push(e)):a.resolve(t),a.promise()},deactivateVisu:function(e){e=Utils.ensureVisuId(e),s.visus[e]&&(n.deactivateVisu(e),s.visus[e].active=!1,document.body.dispatchEvent(new CustomEvent(BreaseEvent.VISU_DEACTIVATED,{detail:{visuId:e}})))},loadVisuData:function(e,t){var s=$.Deferred();return e=Utils.ensureVisuId(e),void 0===e?(i.log(LogCode.VISU_NOT_FOUND,{visuId:e,container:brease.appElem}),s.reject(e)):n.loadVisuData(e,d,{visuId:e,deferred:s,isRoot:!0,rootContainerId:t}),s.promise()},getPageById:function(e){return s.pages[e]},getNavById:function(e){return s.navigations[e]},getVisuById:function(e){return s.visus[Utils.ensureVisuId(e)]},getVisuByStartpage:function(e){var t;for(var i in s.visus)if(s.visus[i].startPage===e){t=s.visus[i];break}return t},getDialogById:function(e){return s.dialogs[e]},getContentById:function(e){return t(e)},isValidContent:function(e){return void 0!==t(e)},getLayoutById:function(e){return s.layouts[e]},getThemes:function(){return s.themes},pageHasArea:function(e,t){var i=!1,n=this.getLayoutById(t.layout);return n&&n.areas&&(i=void 0!==n.areas[e]),i},findAssignment:function(e,t){return e.assignments[t]},findNav4page:function(e){var t;for(var i in s.navigations)if(void 0!==s.navigations[i].pages[e]){t=s.navigations[i];break}return t},parseVisuData:function(e,t){return g(e,t)},allActivated:function(){for(var e=!1,t,i=0;i<r.length();i+=1)if(t=s.visus[r.get(i)],e=void 0!==t&&void 0!==t.active,e===!1)return!1;return r.reset(),!0},addContent:function(e,t){void 0===s.contents[e]&&(s.contents[e]=t)}};function t(e){var t=s.contents[e];return t&&(t.id=e),t}Object.defineProperty(e,"startPageId",{get:function(){return s.startPageId},enumerable:!0,configurable:!1}),Object.defineProperty(e,"startThemeId",{get:function(){return s.startThemeId},enumerable:!0,configurable:!1}),Object.defineProperty(e,"startVisuId",{get:function(){return s.startVisuId},enumerable:!0,configurable:!1});var i,n,s,r={stack:[],reset:function(){this.stack.length=0},length:function(){return this.stack.length},get:function(e){return this.stack[e]},push:function(e){this.stack.push(e)}};function a(e,t){s={pages:{},dialogs:{},layouts:{},contents:{},navigations:{},visus:{},themes:[]},e&&(s.startPageId=e.startPage,s.startVisuId=t,s.startThemeId=e.startTheme,s.configurations=e.configurations)}function o(e){var t;for(var i in e.assignments){var n=e.assignments[i];if(n.type===AssignTypes.VISU&&void 0===s.visus[n.contentId]){t=n.contentId=Utils.ensureVisuId(n.contentId);break}}return t}function l(){var e;for(var t in s.pages)if(e=o(s.pages[t]),e)break;if(void 0===e)for(var i in s.dialogs)if(e=o(s.dialogs[i]),e)break;return e}function d(e,t){e.success===!0&&e.visuData?(Utils.isObject(e.visuData.layouts)&&0!==Object.keys(e.visuData.layouts).length||i.log(LogCode.NO_LAYOUTS_FOUND,{visuId:t.visuId}),Utils.isObject(e.visuData.pages)&&0!==Object.keys(e.visuData.pages).length||i.log(LogCode.NO_PAGES_FOUND,{visuId:t.visuId}),t.isRoot===!0?(a(e.visuData,t.visuId),s.visus[t.visuId]=new f(t.visuId,e.visuData.startPage,t.rootContainerId),u(e.visuData,t.visuId,!0)):(s.visus[t.visuId]=new f(t.visuId,e.visuData.startPage),u(e.visuData,t.visuId))):s.visus[t.visuId]={status:"parsererror"===e.status?VisuStatus.MALFORMED:VisuStatus.NOT_FOUND};var r=l();void 0!==r?n.loadVisuData(r,d,{visuId:r,deferred:t.deferred,isRoot:!1}):t.deferred.resolve(s.configurations)}function u(e,t){c(e.themes),e=g(e,t),$.extend(!0,s,e)}function c(e){if(Array.isArray(e))for(var t=0;t<e.length;t+=1)-1===s.themes.indexOf(e[t])&&s.themes.push(e[t])}function g(e,t){var i=Utils.deepCopy(e);delete i.startPage,delete i.startTheme,delete i.configurations,delete i.themes;for(var n in i.pages){var s=i.pages[n];s.visuId=t,s.id=n,s.type=PageTypes.PAGE,s.assignments=Utils.arrayToObject(s.assignments,"areaId")}for(var r in i.dialogs){var a=i.dialogs[r];a.visuId=t,a.id=r,a.type=PageTypes.DIALOG,a.assignments=Utils.arrayToObject(a.assignments,"areaId")}for(var o in i.layouts){var l=i.layouts[o];for(var d in l.areas)l.areas[d].id=d}for(var u in i.contents){var c=i.contents[u];c.id=u,c.visuId=t}for(var g in i.navigations)i.navigations[g]=m(g,i);return i}function h(e){var t=e.detail.visuId,i=s.visus[t];if(i){var n=i.activateDeferred,r=i.callbackInfo;i.active=!0,window.clearTimeout(i.timeout),delete i.callbackInfo,delete i.timeout,document.body.dispatchEvent(new CustomEvent(BreaseEvent.VISU_ACTIVATED,{detail:{visuId:t,active:i.active}})),n&&n.resolve(r)}}function p(e,t){var i=s.visus[t.visuId];if(i){var n=i.activateDeferred,r=void 0!==e&&void 0!==e.status?e.status.code:void 0;0!==r?n.reject(VisuStatus.ACTIVATE_FAILED,r,t):i.active!==!0&&(i.timeout=window.setTimeout(function(){brease.messenger.announce("VISU_NOT_ACTIVATED",{visuId:t.visuId})},3e4))}}function m(e,t){var n=t.navigations[e],s=new v(e);for(var r in n.pages){if(t.pages&&void 0!==t.pages[r]?s.addPage(n.pages[r],t.pages?t.pages[r]:{id:r},r):i.log(LogCode.PAGE_NOT_FOUND,{pageId:r,isStartPage:t&&t.startPage===r}),n.pages[r].targets)for(var a=0;a<n.pages[r].targets.length;a+=1){var o=n.pages[r].targets[a];t.pages&&void 0!==t.pages[o]?(void 0===s.pages[o]&&s.addPage(n.pages[o],t.pages?t.pages[o]:{id:o},o),s.pages[o].addSource(r)):i.log("PAGE_NOT_FOUND",{pageId:o,isStartPage:t&&t.startPage===o})}s.swipes[r]=n.pages[r].swipe}return s}function f(e,t,i){this.id=e,this.startPage=t,this.status=VisuStatus.LOADED,this.containerId=i}function v(e){this.id=e,this.pages={},this.swipes={}}v.prototype.addPage=function(e,t,i){void 0===this.pages[i]&&(this.pages[i]=new b(i,e?e.targets:void 0,t.displayName,t.image))};function b(e,t,i,n){this.id=e,void 0!==n&&(this.image=n),void 0!==i&&(this.displayName=i),this.targets=t||[],this.reachableFrom=[]}return b.prototype.addSource=function(e){this.reachableFrom.push(e)},e.init()}),define("brease/controller/ContentManager",["brease/events/BreaseEvent","brease/events/ServerEvent","brease/core/Utils","brease/model/VisuModel","brease/controller/objects/ContentStatus"],function(BreaseEvent,ServerEvent,Utils,e,ContentStatus){"use strict";var t={init:function(e){e.addEventListener(ServerEvent.CONTENT_ACTIVATED,i),e.addEventListener(ServerEvent.CONTENT_DEACTIVATED,n)},getContent:function(e){return s(e)},setBindingLoadState:function(e,t){s(e).bindingsLoaded=t},isBindingLoaded:function(e){var t=s(e);return void 0!==t&&t.bindingsLoaded===!0},setActiveState:function(e,t){var i=s(e);i&&(i.activeState=t)},getActiveState:function(e){var t=s(e);return t?s(e).activeState:ContentStatus.notExistent},isContentActive:function(e){var t=s(e);return void 0!==t&&t.activeState===ContentStatus.active},allActive:function(e){for(var t=!0,i=0;i<e.length;i+=1)t=t&&this.isContentActive(e[i]);return t},setLatestRequest:function(e,t){var i=s(e);return i&&("activate"===t&&(i.count+=1),i.latestRequest=e+"["+i.count+"]"+t),i},getLatestRequest:function(e){var t=s(e);return t?s(e).latestRequest:void 0},setActivateDeferred:function(e,t){s(e).activateDeferred=t},setDeactivateDeferred:function(e,t){s(e).deactivateDeferred=t},addVirtualContent:function(t,i){if(void 0===s(t)){var n={id:t,virtual:!0,visuId:i};r(n),e.addContent(t,n)}}};function i(e){var i=s(e.detail.contentId);i&&i.activeState>ContentStatus.initialized&&(t.setActiveState(e.detail.contentId,ContentStatus.active),void 0!==i.activateDeferred&&(i.activateDeferred.resolve(i.id),i.activateDeferred=void 0),document.body.dispatchEvent(new CustomEvent(BreaseEvent.INITIAL_VALUE_CHANGE_FINISHED,{detail:{contentId:i.id}})),document.body.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_ACTIVATED,{detail:{contentId:i.id}})))}function n(e){var t=s(e.detail.contentId);t&&t.activeState<ContentStatus.initialized&&void 0!==t.deactivateDeferred&&(t.deactivateDeferred.resolve(t.id),t.deactivateDeferred=void 0)}function s(t){var i=e.getContentById(t);return void 0!==i&&void 0===i.state&&r(i),i}function r(e){e.state=ContentStatus.initialized,e.count=0}return t}),define("brease/controller/BindingController",["brease/model/BindingModel","brease/controller/BindingLoader","brease/config","brease/events/BreaseEvent","brease/events/ServerEvent","brease/enum/Enum","brease/core/Utils","brease/datatype/Notification","brease/objects/Subscription","brease/controller/ContentManager","brease/core/Types","brease/controller/objects/ContentStatus"],function(e,t,config,BreaseEvent,ServerEvent,Enum,Utils,i,n,s,Types,ContentStatus){"use strict";var r={init:function(i){a=i,i.addEventListener(ServerEvent.PROPERTY_VALUE_CHANGED,h),document.body.addEventListener(BreaseEvent.ATTRIBUTE_CHANGE,f),document.body.addEventListener(BreaseEvent.NODE_ATTRIBUTE_CHANGE,v),s.init(i),t.init(i,e,s)},startListen:function(){t.startListen()},activateVirtualContent:function(e,t){return s.addVirtualContent(e,t),r.activateContent(e)},activateContent:function(e){var t=$.Deferred(),i=s.setLatestRequest(e,"activate");return i?(s.setActiveState(e,ContentStatus.activatePending),window.performanceMonitor.profile("activateContent - "+e,0),a.activateContent(e,i.visuId,d,{requestId:i.latestRequest,contentId:e,deferred:t})):t.resolve(e),t.promise()},isBindingLoaded:function(e){return s.isBindingLoaded(e)},isContentActive:function(e){return s.isContentActive(e)},sendInitialValues:function(t,i){var n=[],r=$.Deferred(),a=s.setLatestRequest(t,"attach");a?(e.contentHasSubscriptions(t)?(e.getSubscriptionsForContent(t).forEach(function(e,t){for(var i in e){var s=e[i];void 0!==s&&n.push(c(s,t,i))}}),s.setActivateDeferred(t,r),b(n)):r.resolve(t),r.done(function(e){"function"==typeof i&&i(e)})):"function"==typeof i&&i(t)},deactivateContent:function(t,i){var n=$.Deferred(),r=s.setLatestRequest(t,"detach");r?(s.setActiveState(t,ContentStatus.deactivated),window.performanceMonitor.profile("deactivateContent - "+t,0),s.setDeactivateDeferred(t,n),a.deactivateContent(t,r.visuId,u,{requestId:r.latestRequest,contentId:t}),e.removeDynamicBindings(t),e.deactivateSubscriptions(t),n.done(function(e){"function"==typeof i&&i(e)})):"function"==typeof i&&i(t)},getSubscriptionsForElement:function(t,i){return e.getSubscriptionsForElement(t,i)},getEventsForElement:function(t,i){return e.getEventsForElement(t,i)},isActiveSessionEvent:function(t){var i=e.getSessionEvents(),n=!1;for(var r in i)if(("_client"===r||s.isContentActive(r))&&-1!==i[r].indexOf(t)){n=!0;break}return n},allActive:function(e){return s.allActive(e)},createBindings:function(e,t,i){var n=$.Deferred();return a.createBindings(e,t,i,l,{contentId:e,bindings:i,deferred:n}),n.promise()},deleteBindings:function(e,t,i){var n=$.Deferred();return a.deleteBindings(e,t,i,o,{contentId:e,targets:i,deferred:n}),n.promise()}},a;function o(t,i){if(0===t.status.code){for(var n=0;n<i.targets.length;n+=1)0===t.bindingsStatus[n].code&&e.removeDynamicBinding(i.targets[n]);i.deferred.resolve(t.bindingsStatus)}else i.deferred.reject(t.status)}function l(t,i){var n,s,r=[];if(0===t.status.code){for(var a=0;a<i.bindings.length;a+=1)n=i.bindings[a],0===t.bindingsStatus[a].code&&(e.addDynamicBinding(n,i.contentId),s=e.addDynamicSubscription(n.target.refId,n.target.attribute,i.contentId),r.push(c(s,n.target.refId,n.target.attribute)),"brease"===n.source.type&&(s=e.addDynamicSubscription(n.source.refId,n.source.attribute,i.contentId),r.push(c(s,n.source.refId,n.source.attribute))));i.deferred.resolve(t.bindingsStatus),r.length>0&&b(r)}else i.deferred.reject(t.status)}function d(e,i){i.requestId===s.getLatestRequest(i.contentId)&&s.getActiveState(i.contentId)>ContentStatus.initialized?e.success===!0?(t.loadSubscriptions(i.contentId,i.deferred),brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_ATTACH_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.SUCCESS,[i.contentId])):(console.iatWarn('activateContent for content "'+i.contentId+'" failed, possibly no binding defined!'),i.deferred.resolve(i.contentId),brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_ATTACH_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[i.contentId])):console.iatWarn('activateContent for content "'+i.contentId+'" aborted!')}function u(e,t){window.performanceMonitor.profile("deactivateContent - "+t.contentId,1),e.success===!0?brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_DETACH_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.SUCCESS,[t.contentId]):brease.loggerService.log(Enum.EventLoggerId.CLIENT_BINDING_DETACH_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[t.contentId])}function c(e,t,n){var s=brease.uiController.getWidgetState(t);if(s<=Enum.WidgetState.NON_EXISTENT)return g(e,'subscription: widget does not exist (widgetId:"'+t+'", attribute:"'+n+'")');var r=-1!==n.indexOf("::")?n.split("::")[0]:n,a=brease.uiController.callWidget(t,Utils.getter(r),r);return void 0===a?g(e,'subscription: undefined value (widgetId:"'+t+'", attribute:"'+n+'")'):null===a?g(e,'subscription: getter returns null (widgetId:"'+t+'", attribute:"'+n+'")'):i.prototype.isPrototypeOf(a)?{subscription:e,data:[],type:"notification"}:{subscription:e,data:a}}function g(e,t){return console.iatWarn(t),{subscription:e,data:null}}function h(t){var i=t.detail,n=i.length;if(n>0)for(var s=0;n>s;s+=1)for(var r=i[s].refId,a=i[s].data,o=0,l=a.length;l>o;o+=1)try{var d=e.getSubscriptionsForElement(r,a[o].attribute);d?p(r,a[o].attribute,a[o].value,d):console.iatWarn('no subscription for attribute "'+a[o].attribute+", widgetId="+r)}catch(u){console.warn("error processing property",u)}}function p(e,t,i,n){if(void 0===t)console.iatWarn("binding for widget["+e+"]: no binding attribute given");else{var s=brease.callWidget(e,"widget");if(null!==s&&(s.state===Enum.WidgetState.INITIALIZED||s.state===Enum.WidgetState.READY)){var r={origin:"server"};if(-1!==t.indexOf("::")){var a=t.split("::");r.attribute=a[0],r.refAttribute=a[1]}else r.attribute=t;var o=Utils.setter(r.attribute);void 0!==s[o]?(r.value=m(i,s.constructor,o,r.attribute,e),n.active=!0,s[o].call(s,r.value,r),s.dispatchEvent(new CustomEvent(BreaseEvent.PROPERTY_CHANGED,{detail:{attribute:r.attribute,value:r.value}}))):console.iatWarn("binding for widget["+e+']: unknown binding method "'+o+'"')}}}function m(e,t,i,n,s){if(!Utils.isString(e))return e;var r=i.substring(0,1).toUpperCase()+i.substring(1);if(void 0===t.meta||void 0===t.meta.actions||void 0===t.meta.actions[r]&&void 0===t.meta.actions[i])return e;var a=t.meta.actions[r]?t.meta.actions[r]:t.meta.actions[i],o=a.parameter,l=o[Object.keys(o)[0]];if(!l||-1===Types.objectTypes.indexOf(l.type))return e;try{e=JSON.parse(e.replace(/\'/g,'"'))}catch(d){console.iatWarn("illegal data in binding: attribute: "+n+", widgetId:"+s)}return e}function f(t){var i=t.target.id,n=e.getSubscriptionsForElement(i);if(void 0!==n)for(var r in n)if(t.detail.hasOwnProperty(r)){var a=n[r];void 0!==a&&(s.isContentActive(a.contentId)||a.active)&&y(a,t.detail[r])}}function v(t){var i=t.target.id,n=e.getSubscriptionsForElement(i);if(void 0!==n)for(var r in n)if(t.detail.attribute===r){var a=n[r];void 0!==a&&(s.isContentActive(a.contentId)||a.active)&&E(a,t.detail.nodeAttribute,t.detail.value)}}function b(e){for(var t={event:ServerEvent.PROPERTY_VALUE_CHANGED,eventArgs:[]},i,n=0;n<e.length;n+=1)i=void 0!==e[n].type?[{attribute:e[n].subscription.attribute,value:e[n].data,type:e[n].type}]:[{attribute:e[n].subscription.attribute,value:e[n].data}],t.eventArgs.push({refId:e[n].subscription.elemId,data:i});a.sendUpdate([t])}function y(e,t){a.sendUpdate([{event:ServerEvent.PROPERTY_VALUE_CHANGED,eventArgs:[n.toServerData(e,t)]}])}function E(e,t,i){var n={refId:e.elemId,data:[{attribute:e.attribute}]},s={eventArgs:[n]};"unit"===t&&(s.event="PropertyUnitChanged",n.data[0][t]=i,a.sendUpdate([s]))}return r}),define("brease/controller/ConnectionController",["brease/events/ServerEvent","brease/events/BreaseEvent"],function(ServerEvent,BreaseEvent){"use strict";var ConnectionController={init:function(e,a,o,l){void 0!==o&&(t=o),void 0!==l&&(i=l),e.addEventListener(BreaseEvent.CONNECTION_STATE_CHANGED,n.bind(this,a)),e.addEventListener(ServerEvent.TRANSFER_START,s.bind(this,a)),e.addEventListener(ServerEvent.TRANSFER_FINISH,r.bind(this,a))}},e=!1,t=function(){window.location.reload()},i=function(){window.location.reload()};function n(i,n){n.detail.state===!0?(i.clear(),t()):e!==!0&&(document.body.dispatchEvent(new CustomEvent(BreaseEvent.CONNECTION_STATE_CHANGED,{detail:{state:n.detail.state}})),i.showMessage(brease.language.getSystemTextByKey("BR/IAT/brease.common.connectionError.text")))}function s(t){e=!0,t.showMessage(brease.language.getSystemTextByKey("BR/IAT/brease.common.transferStart"))}function r(t){e=!1,t.clear(),i()}return ConnectionController}),define("brease/events/EventHandler",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var e,t,EventHandler=function(e,t,i,s,r){this.data={event:i,source:{type:e,refId:t},eventArgs:s||{}},this.elem=r,this.isSubscribed=n(t,e,i),this.boundRevalidate=this.reValidate.bind(this),document.body.addEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundRevalidate)},i=EventHandler.prototype;EventHandler.init=function(i,n){e=i,t=n},i.dispose=function(){document.body.removeEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundRevalidate)},i.setEventArgs=function(e){this.data.eventArgs=e||{}},i.getEventArgs=function(){return this.data.eventArgs},i.dispatch=function(t){this.isSubscribed&&e.sendEvent(this.data),t!==!1&&void 0!==this.elem&&this.elem.dispatchEvent(new CustomEvent(this.data.event,{detail:this.data.eventArgs,bubbles:!0}))},i.reValidate=function(){this.isSubscribed=n(this.data.source.refId,this.data.source.type,this.data.event)};function n(e,i,n){var s,r=!1;return 0===i.indexOf("widgets.")?(s=t.getEventsForElement(e,n),s&&(r=!0)):0===i.indexOf("clientSystem.")&&(r=t.isActiveSessionEvent(n)),r}return EventHandler}),define("brease/events/ClientSystemEvent",["brease/core/Utils"],function(Utils){"use strict";var ClientSystemEvent={};return Utils.defineProperty(ClientSystemEvent,"CONTENT_LOADED","ContentLoaded"),Utils.defineProperty(ClientSystemEvent,"SYSTEM_SWIPE","SystemSwipe"),Utils.defineProperty(ClientSystemEvent,"KEY_DOWN","KeyDown"),Utils.defineProperty(ClientSystemEvent,"KEY_PRESS","KeyPress"),Utils.defineProperty(ClientSystemEvent,"KEY_UP","KeyUp"),Utils.defineProperty(ClientSystemEvent,"LOGIN_SUCCESS","LoginSuccess"),Utils.defineProperty(ClientSystemEvent,"LOGIN_FAILED","LoginFailed"),ClientSystemEvent}),define("brease/events/Swipe",["brease/core/Utils","hammer"],function(Utils,e){"use strict";var t={TwoFingerSwipe:"TwoFingerSwipe"},Swipe={EVENTS:t,init:function(){return void 0===i[t.TwoFingerSwipe]&&(i[t.TwoFingerSwipe]={swipe:new e.Manager(document.body),recognizer:new e.Swipe({event:"swipe2",direction:e.DIRECTION_ALL,pointers:2,threshold:brease.settings.swipe.moveThreshold,velocity:brease.settings.swipe.velocity})},i[t.TwoFingerSwipe].swipe.add([i[t.TwoFingerSwipe].recognizer]),i[t.TwoFingerSwipe].swipe.on("swipe2",function(e){var i="";switch(e.direction){case 2:i="fromRight";break;case 4:i="fromLeft";break;case 8:i="fromBottom";break;case 16:i="fromTop"}for(var n=0,r=[],l=[],u=0;u<e.pointers.length;u+=1)r.push(e.pointers[u].pageX),l.push(e.pointers[u].pageY);if(r.length>1){var c=Math.abs(r[0]-r[1]),g=Math.abs(l[0]-l[1]);n=2===e.direction||4===e.direction?parseInt(g,10):parseInt(c,10)}if(""!==i&&s===!1&&(0===n||n<=brease.settings.swipe.maxFingerDistance)){s=!0;var h={type:t.TwoFingerSwipe,target:e.target,detail:{direction:i}};Utils.transferProperties(e.changedPointers[0],h,a),d(h),o()}})),Swipe},on:function(e,t){n[e]||(n[e]=[]),n[e].push(t)}},i={},n={},s=!1,r,a=["clientX","clientY","pageX","pageY","screenX","screenY"];function o(){r&&clearTimeout(r),r=window.setTimeout(l,300)}function l(){s=!1}function d(e){for(var t=0;t<n[e.type].length;t+=1)n[e.type][t].call(null,e)}return Swipe.init()}),define("brease/controller/EventController",["brease/events/EventHandler","brease/events/ClientSystemEvent","brease/events/BreaseEvent","brease/events/ServerEvent","brease/events/Swipe","brease/core/Utils","brease/events/VirtualEvents","brease/controller/objects/ContentStatus","brease/model/VisuModel"],function(EventHandler,ClientSystemEvent,BreaseEvent,ServerEvent,Swipe,Utils,VirtualEvents,ContentStatus,e){"use strict";var EventController={init:function(t,i,n){return n&&(e=n),EventHandler.init(t,i),s(),r(),a(t),document.body.addEventListener(BreaseEvent.EVENTBINDING_LOADED,y),this}},t=[],i=[],n={};function s(){document.addEventListener("keypress",m),document.addEventListener("keyup",f),document.addEventListener("keydown",p)}function r(){Swipe.on(Swipe.EVENTS.TwoFingerSwipe,function(e){Utils.hasClass(e.target,"breaseModalDimmer")===!1&&(n.direction=e.detail.direction,VirtualEvents.touchLength<=1?u(e):brease.bodyEl.on(BreaseEvent.MOUSE_UP,d))}),brease.bodyEl.on(BreaseEvent.MOUSE_DOWN,o)}function a(e){document.body.addEventListener(BreaseEvent.FRAGMENT_SHOW,c),e.addEventListener(ServerEvent.CONTENT_ACTIVATED,h)}function o(e){n.startPoint={left:e.clientX,top:e.clientY}}function l(e){var t=brease.pageController.getCurrentPage("appContainer"),i=brease.pageController.getPageById(t),n=brease.pageController.getLayoutById(i.layout),s=[];for(var r in i.assignments){var a=n.areas[r];a.left<=e.left&&e.left<=a.left+a.width&&a.top<=e.top&&e.top<=a.top+a.height&&s.push(a)}return s.length>1&&s.sort(function(e,t){return t.zIndex-e.zIndex}),s.length>0?s[0].id:void 0}function d(e){VirtualEvents.touchLength<=1&&(brease.bodyEl.off(BreaseEvent.MOUSE_UP,d),u(e))}function u(e){n.startArea=l(n.startPoint),n.endArea=l({left:e.clientX,top:e.clientY}),window.setTimeout(function(){brease.pageController.swipeNavigation(n.direction)||b(ClientSystemEvent.SYSTEM_SWIPE,{direction:n.direction,areaId:void 0!==n.startArea&&n.startArea===n.endArea?n.startArea:""})},10)}function c(t){v[ClientSystemEvent.CONTENT_LOADED]&&v[ClientSystemEvent.CONTENT_LOADED].reValidate();var i=t.detail.contentId,n=e.getContentById(i);void 0!==n&&(n.activeState===ContentStatus.active?b(ClientSystemEvent.CONTENT_LOADED,{contentId:i,visuId:n.visuId}):g.add(i))}var g={queue:new Map,add:function(e){this.queue.set(e,e)},contains:function(e){return void 0!==this.queue.get(e)},remove:function(e){this.queue["delete"](e)}};function h(t){v[ClientSystemEvent.CONTENT_LOADED]&&v[ClientSystemEvent.CONTENT_LOADED].reValidate();var i=t.detail.contentId;if(g.contains(i)){g.remove(i);var n=e.getContentById(i);void 0!==n&&b(ClientSystemEvent.CONTENT_LOADED,{contentId:i,visuId:n.visuId})}}function p(e){if(void 0!==e.key&&-1===t.indexOf(e.key)){var i=x(e);void 0!==i&&(t.push(e.key),b(ClientSystemEvent.KEY_DOWN,{key:e.key,keyASCII:i}))}}function m(e){if(void 0!==e.key&&-1===i.indexOf(e.key)){var t=x(e);void 0!==t&&(i.push(e.key),b(ClientSystemEvent.KEY_PRESS,{key:e.key,keyASCII:t}))}}function f(e){if(void 0!==e.key){E(t,e.key),E(i,e.key);var n=x(e);void 0!==n&&b(ClientSystemEvent.KEY_UP,{key:e.key,keyASCII:n})}}var v={};function b(e,t){void 0!==v[e]?v[e].setEventArgs(t):v[e]=new EventHandler("clientSystem.Event",null,e,t,brease.appElem),v[e].dispatch()}function y(){for(var e in v)v[e].reValidate()}function E(e,t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)}function x(e){return void 0!==e.key&&1===e.key.length?e.key.charCodeAt(0):void 0!==e.which?e.which:e.keyCode}return EventController}),define("brease/core/libs/Deferred",[],function(){"use strict";var Deferred=function(e,t){this.type=e,this.loopParams=t,this._done=[],this._fail=[]};return Deferred.prototype={execute:function(e,t){for(var i=e.length-1;i>=0;)e[i].apply(null,t),i-=1;"singleShot"===this.type&&e.length>0&&this.terminate(),this._done=null,this._fail=null},resolve:function(){if(void 0===this.state){this.state=1,Array.isArray(this.loopParams)?this.doneData=this.loopParams:this.doneData=[];for(var e=arguments.length-1;e>=0;e-=1)this.doneData.unshift(arguments[e]);this.loopParams=null,this.execute(this._done,this.doneData)}},reject:function(){if(void 0===this.state){this.state=-1,Array.isArray(this.loopParams)?this.failData=this.loopParams:this.failData=[];for(var e=arguments.length-1;e>=0;e-=1)this.failData.unshift(arguments[e]);this.loopParams=null,this.execute(this._fail,this.failData)}},done:function(e){return"function"==typeof e&&(this.doneData?(e.apply(null,this.doneData),"singleShot"===this.type&&this.terminate()):this._done&&this._done.push(e)),this},fail:function(e){return"function"==typeof e&&(this.failData?(e.apply(null,this.failData),
"singleShot"===this.type&&this.terminate()):this._fail&&this._fail.push(e)),this},terminate:function(){this.doneData=null,this.failData=null,this.loopParams=null}},Deferred}),define("brease/controller/FileManager",["brease/core/Utils","brease/core/libs/Deferred"],function(Utils,Deferred){"use strict";var e={getPathByType:function(e,t){return b(e,t)},getPathByClass:function(e,t){if(t)return E(e,t);if(void 0!==p[e])return p[e];if(Utils.isString(e)){var i=x(e);return p[e]=p[i["class"]]=i,p[p[e].type]=i,p[e]}},loadJSFiles:function(e,s){if(e&&e.path&&e["class"]){var r=[e.path],a=e["class"];return s===!0&&r.push(a+"/designer/ClassInfo"),void 0===n[a]&&(n[a]=new Deferred,require(r,t.bind(null,a),i.bind(null,a))),n[a]}var o=new Deferred;return o.reject("undefined widget path"),o},loadWidgetMeta:function(t){var i=t["class"];if(void 0===n[i])return e.loadJSFiles(t,!0);var s=new Deferred,r=[i+"/designer/ClassInfo"];return require(r,function(e){var t=e.meta.className,i=b(t,"class");n[i].doneData[0].meta=e.meta,s.resolve()},function(e){console.debug(e.message),s.reject()}),s},loadOverlays:function(e){var t=new Deferred("singleShot");return require(e,function i(){t.resolve.apply(t,arguments)},function n(){t.reject("script error")}),t},loadHTMLFiles:function(e,t,i){var n=new Deferred("singleShot",i),r=h.call(this,e);return r.length>0?s.call(this,r,t).done(function(){n.resolve()}):n.resolve(),n},getHTMLByType:function(e){return o[e]}};function t(e,t,i){t?(i&&void 0===t.meta&&(t.meta=i.meta),t.defaults.className=e,n[e].resolve(t)):n[e].reject("script error")}function i(e,t){n[e].reject(t.message)}var n={};function s(e,t){for(var i="",n=[],s=r(t),o=0;o<e.length;o+=1)i=e[o],s.types.push(i),-1===l.indexOf(i)&&(l.push(i),n.push(i));a();for(var d=0;d<n.length;d+=1)u(n[d]).done(function(){a()}).fail(function(){a()});return s.def}function r(e){for(var t,i=d.length-1;i>=0;i-=1)d[i].queueId===e&&(t=d[i]);return t||(t={def:new Deferred("singleShot"),types:[],queueId:e},d.push(t)),t}function a(){for(var e=d.length-1;e>=0;e-=1){var t=d[e];if(t){t.success=!0;for(var i=0;i<t.types.length;i+=1)if(void 0===o[t.types[i]]){t.success=!1;break}t.success===!0&&(d.splice(e,1),t.def.resolve())}}}var o={},l=[],d=[];function u(e){var t=new Deferred("singleShot",[e]);return c(t,b(e,"path"),e),t}function c(e,t,i){require(["text!"+t+".html"],function n(t){if(-1!==t.indexOf('data-instruction-inherit="true"')){var n=g(t);c(e,b(n,"path"),i)}else o[i]=t.trim(),e.resolve()},function s(t){o[i]=!1,e.reject(t.message)})}function g(e){var t='data-instruction-superClass="',i=e.substring(e.indexOf(t)+t.length);return i.substring(0,i.indexOf('"'))}function h(e){for(var t=[],i=0;i<e.length;i+=1)e[i].className&&(e[i].className=b(e[i].className,"type"),-1===t.indexOf(e[i].className)&&t.push(e[i].className));return t}var p={},m=new RegExp("[..]","g"),f=new RegExp("[/.]","g"),v=["class","style","type","path"];function b(e,t){if(Utils.isString(e)){if(-1!==e.indexOf("/"))throw new SyntaxError("wrong widgetType:"+e+"; use dot-notation instead!");if(void 0===p[e]){var i=y(e);p[e]=p[i.type]=i,p[p[e]["class"]]=i}return-1===v.indexOf(t)&&(t=v[0]),p[e][t]}}function y(e){e=-1!==e.indexOf(".")?e:"widgets.brease."+e;var t={style:e.replace(m,"_"),type:e,"class":e.replace(m,"/")};return t.path=t["class"]+t["class"].substring(t["class"].lastIndexOf("/")),t}function E(e,t){if(void 0!==p[e])return p[e][t];if(Utils.isString(e)){var i=x(e);return p[e]=p[i["class"]]=i,p[p[e].type]=i,p[e][t]}}function x(e){e=-1!==e.indexOf("/")?e:"widgets/brease/"+e;var t={style:e.replace(f,"_"),type:e.replace(f,"."),"class":e};return t.path=t["class"]+t["class"].substring(t["class"].lastIndexOf("/")),t}return e}),define("brease/controller/InfoController",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var InfoController={init:function(e){s=e},start:function(r,c){n=0,window.setTimeout(function(){s.setClientInformation(JSON.stringify(l()))},0),e&&window.clearInterval(e),i=isNaN(c)?t:c,r===!0?(e=window.setInterval(a,i),d()):u(),brease.appElem.addEventListener(BreaseEvent.PAGE_LOADED,o)}},e,t=1e3,i=1e3,n=0,s;function r(){n+=1}function a(){s.setClientInformation('{"activityCount":'+n+"}")}function o(e){e.detail.containerId===brease.appElem.id&&s.setClientInformation('{"currentPageId":"'+e.detail.pageId+'"}')}function l(){return{userAgent:navigator.userAgent,screenResolution:screen.width+"x"+screen.height,browserResolution:window.innerWidth+"x"+window.innerHeight,languages:(Array.isArray(navigator.languages)?navigator.languages.join(","):navigator.language)+"",activityCount:n,cookieEnabled:navigator.cookieEnabled,isMultiTouch:navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1}}function d(){document.body.addEventListener("click",r),document.body.addEventListener("mousedown",r),document.body.addEventListener("mouseup",r),document.body.addEventListener("touchstart",r),document.body.addEventListener("touchend",r),document.body.addEventListener("touchmove",r)}function u(){document.body.removeEventListener("click",r),document.body.removeEventListener("mousedown",r),document.body.removeEventListener("mouseup",r),document.body.removeEventListener("touchstart",r),document.body.removeEventListener("touchend",r),document.body.removeEventListener("touchmove",r)}return InfoController}),define("brease/controller/libs/Areas",["brease/enum/Enum","brease/controller/objects/PageTypes"],function(Enum,PageTypes){"use strict";var e=function(e,t){this.id=e,this.init(t)},t=new RegExp(".*_style_.*"),i=!0;e.prototype.init=function(e){this.div=s(this.id,e),i&&(this.innerBox=r(this.id,e),this.div.appendChild(this.innerBox),this.$innerBox=$(this.innerBox)),this.$div=$(this.div),this.obj=e},Object.defineProperty(e.prototype,"contentContainer",{get:function(){return i?this.innerBox:this.div}}),Object.defineProperty(e.prototype,"$contentContainer",{get:function(){return i?this.$innerBox:this.$div}}),e.prototype.setStyle=function(e){var i="system_brease_Area_style_"+e,n=this.div.classList;if(n.contains(i)===!1){for(var s in n)t.test(n[s])&&this.$div.removeClass(n[s]);this.$div.addClass(i)}},e.prototype.show=function(){this.$div.css("display","block")},e.prototype.hide=function(){this.$div.css("display","none")},e.prototype.dispose=function(){o.scrollManager.remove(this.id),this.div=null,this.$div=null,i&&(this.innerBox=null,this.$innerBox=null),this.obj=null},e.prototype.addScrollbars=function(e,t){var n=e&&e.width*t>this.obj.width,s=e&&e.height*t>this.obj.height;i&&this.$innerBox.css({width:e.width*t,height:e.height*t}),(n||s)&&o.scrollManager.hasScroller(this.div)===!1?o.scrollManager.add(this.div):o.scrollManager.refresh(this.div.id)},e.prototype.setProperties=function(e,t,i,s){var r={};void 0!==t.areaId&&(r["background-color"]=t.backColor?t.backColor:"",r=n(r,t)),this.$div.css(r),this.addScrollbars(e,i),s!==!1&&(o.scrollManager.hasScroller(this.div)?(o.scrollManager.refresh(this.id),o.scrollManager.scrollTo(this.id,0,0)):this.$div.scrollLeft(0).scrollTop(0))};function n(e,t){return t.backGround||t.backGroundGradient?(e["background-image"]="",t.backGroundGradient&&(e["background-image"]+=t.backGroundGradient),t.backGround&&(e["background-image"]+=(""!==e["background-image"]?", ":"")+"url("+t.backGround+")",e["background-repeat"]="no-repeat")):e["background-image"]="",t.sizeMode&&(e["background-size"]=Enum.SizeMode.convertToCSS(t.sizeMode)),e}function s(e,t){var i=document.createElement("div");return i.setAttribute("id",e),i.setAttribute("style","position:absolute;"+(void 0!==t.zIndex?"z-index:"+t.zIndex+";":"")+"overflow:hidden; top:"+t.top+"px; left:"+t.left+"px; width:"+t.width+"px; height:"+t.height+"px; box-sizing: border-box;display:block;"),i.setAttribute("class","LayoutArea"),i.setAttribute("data-brease-areaId",t.id),i}function r(e,t){var i=document.createElement("div");return i.setAttribute("id",a(e)),i.setAttribute("class","ScrollBox"),i.setAttribute("style","position:absolute;top:0px; left:0px; width:"+t.width+"px; height:"+t.height+"px; box-sizing: border-box;display:block;"),i}function a(e){return e+(i?"_box":"")}var o={init:function(e,t){this.scrollManager=e,this.rootContainerId=t},add:function(t,i,n,s){var r=this.getAreaDivId(t,i,n.id,s),a=l[r];return void 0===a?l[r]=a=new e(r,n):a.init(n),a},get:function(e){return l[e]},getArea:function(e,t,i,n){return l[this.getAreaDivId(e,t,i,n)]},getAreaDivId:function(e,t,i,n){return e=e===this.rootContainerId?"root":n===PageTypes.DIALOG?e:a(e),e+"_"+t+"_"+i}},l={};return o}),define("brease/controller/libs/Containers",["brease/events/BreaseEvent"],function(BreaseEvent){"use strict";var e={getCurrentPage:function(e){return i(e).currentPage},setCurrentPage:function(e,t){var n=i(e);n.currentPage=t},setLatestRequest:function(e,t){var n=i(e);n.latestRequest=t,n.status="active"},getLatestRequest:function(e){return i(e).latestRequest},dispose:function(e){void 0!==t[e]&&(t[e].status="disposed")},getContainerForPage:function(e){var i;for(var n in t)if(t[n].currentPage===e){i=n;break}return i},resetCurrentPage:function(e){void 0!==t[e]&&(t[e].currentPage=void 0)},resetCurrentPages:function(t){for(var i=$("#"+t).find(".LayoutArea"),n=0,s=i.length;s>n;n+=1)e.resetCurrentPage(i[n].id);$("#"+t).hasClass("LayoutArea")&&e.resetCurrentPage(t)},initPageLoadEvent:function(e,t,s,r){new n(i(e),t,s,r)}},t={};function i(e){return void 0===t[e]&&(t[e]={id:e,status:"active"}),t[e]}var n=function(e,t,i,n){this.container=e,this.pageId=t,this.contentsToLoad=s(i),this.embedded=n,this.boundListener=this.activatedListener.bind(this),document.body.addEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundListener),this.check()};n.prototype.activatedListener=function(e){var t=this.contentsToLoad.indexOf(e.detail.contentId);t>-1&&this.contentsToLoad.length>0&&this.contentsToLoad.splice(t,1),this.check()},n.prototype.check=function(){if(this.container&&"active"===this.container.status&&this.pageId===e.getLatestRequest(this.container.id)){if(0===this.contentsToLoad.length){if(r(this.pageId,this.container.id),Array.isArray(this.embedded))for(var t=0;t<this.embedded.length;t+=1)r(this.embedded[t].pageId,this.embedded[t].containerId);this.dispose()}}else this.dispose()},n.prototype.dispose=function(){this.container=null,this.contentsToLoad=null,this.embedded=null,document.body.removeEventListener(BreaseEvent.CONTENT_ACTIVATED,this.boundListener)};function s(e){for(var t=[],i=0;i<e.length;i+=1)brease.uiController.bindingController.isContentActive(e[i])!==!0&&t.push(e[i]);return t}function r(e,t){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.PAGE_LOADED,{bubbles:!0,cancelable:!0,detail:{pageId:e,containerId:t}}))}return e}),define("brease/controller/libs/FactoryUtils",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";return{wrapper:document.createElement("div"),createNode:function(e,t,i,n,s,r){var a=!1,o=-1!==e.indexOf(">CONTENT<");this.wrapper.innerHTML=e;var l=this.wrapper.firstChild;if(l.id=t,l.setAttribute("data-brease-widget",n),s)for(var d in s)l.setAttribute(d,s[d]);var u=l.getAttribute("data-instruction-addStyleClass"),c=l.getAttribute("data-instruction-useDOM");return"true"===u&&void 0!==i.style&&(Utils.addClass(l,n.replace(/\//g,"_")+"_style_"+i.style),i.styleClassAdded=!0),"true"===c||o||(l.innerHTML="",a=!0),null!==c&&l.removeAttribute("data-instruction-useDOM"),null!==u&&l.removeAttribute("data-instruction-addStyleClass"),o&&this.setInitialContent(l,r,a),l},setInitialContent:function(e,t,i){void 0!==t?void 0!==t.text?e.textContent=t.text+"":void 0!==t.html?e.innerHTML=t.html+"":i!==!0&&(e.innerHTML=""):i!==!0&&(e.innerHTML="")},getElem:function(e){return void 0!==e&&null!==e?void 0!==e.jquery?e=e.length>0?e[0]:null:"function"!=typeof e.querySelectorAll&&(e=null):e=null,e},ensureContentId:function(e,t,i){if(Utils.isString(e)&&""!==e)return e;if(i>Enum.WidgetState.NON_EXISTENT){var n=brease.callWidget(t.id,"getSettings");if(n&&void 0!==n.parentContentId)return n.parentContentId}if(e=t.attributes["data-brease-contentid"],void 0!==e)return e.value;var s=$(t).closest("[data-brease-contentid]");return e=s.length>0?s.attr("data-brease-contentid"):brease.settings.globalContent,e},ensureElemId:function(e){return e||(e=Utils.uniqueID("generatedWidgetId")),e}}}),define("brease/controller/libs/LoadCycle",[],function(){"use strict";var LoadCycle=function(){this.isOpen=!0,this.stack=[]};LoadCycle.prototype.start=function(t,i,n){if(this.isOpen===!0){if(this.isOpen=!1,this.callback=t,this.callbackInfo=n,this.stack=[],Array.isArray(i))for(var s=0;s<i.length;s+=1)-1===this.stack.indexOf(i[s])&&this.stack.push(i[s]);0===this.stack.length&&e.call(this)}else void 0===this.callbackInfo.embedded&&(this.callbackInfo.embedded=[]),this.callbackInfo.embedded.push({containerId:n.containerId,pageId:n.pageId})},LoadCycle.prototype.remove=function(t,i){var n=this.stack.indexOf(t);-1!==n&&this.stack.splice(n,1),i===!0&&Array.isArray(this.callbackInfo.contentsToLoad)&&(n=this.callbackInfo.contentsToLoad.indexOf(t),-1!==n&&this.callbackInfo.contentsToLoad.splice(n,1)),0===this.stack.length&&this.isOpen===!1&&e.call(this)},Object.defineProperty(LoadCycle.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!0,configurable:!1}),Object.defineProperty(LoadCycle.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!1});function e(){this.isOpen=!0,"function"==typeof this.callback&&(this.callback(this.callbackInfo),this.callback=null,this.callbackInfo=null)}return LoadCycle}),define("brease/controller/libs/Queue",["brease/core/Utils"],function(Utils){"use strict";var Queue=function Queue(e,i){(void 0===e.id||""===e.id)&&e.setAttribute("id",Utils.uniqueID(i+"_queue")),this.id=e.id,this.queue=[],this.idQueue=[],this.runningQueue=[],this.processLength=0,this.task=i,this.isRunning=!1,this.elem=e,void 0===t[this.task]&&(t[this.task]=new Map),t[this.task].set(this.id,this)},e=Queue.prototype;e.add=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t+=1)e[t].id&&-1===this.idQueue.indexOf(e[t].id)&&(this.queue.push(e[t]),this.idQueue.push(e[t].id),this.processLength+=1);else e.id&&-1===this.idQueue.indexOf(e.id)&&(this.queue.unshift(e),this.idQueue.push(e.id),this.processLength+=1)},e.start=function(e,t){this.isRunning!==!0&&(this.deferred=$.Deferred(),this.isRunning=!0,0===this.queue.length&&(this.stop(),this.finish()),Array.isArray(t)?e.apply(null,[this].concat(t)):e(this))},e.run=function(e){if(this.runMethod=e,this.queue.length>0)for(;this.queue.length>0;){var t=this.queue.pop();this.runningQueue.push(t),e(t,this)}else this.stop(),this.finish();return this.deferred.promise()},e.isFinished=function(){return this.deferred.promise()},e.finish=function(){this.queue=[],this.idQueue=[],this.runningQueue=[],this.processLength=0,this.runMethod=null,this.deferred&&this.deferred.resolve(this.elem),this.elem=null,t[this.task]["delete"](this.id)},e.finishItem=function(){this.isRunning===!0&&(this.processLength-=1,0===this.processLength&&(this.isRunning=!1,this.finish()),this.queue.length>0&&this.run(this.runMethod))},e.stop=function(){this.processLength=0,this.isRunning=!1,this.pending=!1};var t={};return Queue.getQueue=function(e,i,n){var s;return void 0!==e.id&&void 0!==t[i]&&(s=t[i].get(e.id),void 0!==s&&(s.elem=e)),n===!0&&void 0===s&&(s=new Queue(e,i)),s},Queue}),define("brease/model/WidgetModel",["brease/core/Utils","brease/enum/Enum"],function(Utils,Enum){"use strict";function e(){this.initialState=Enum.WidgetState.IN_QUEUE,this.items=new Map,this.contents={}}return e.prototype.add=function(e){return e&&Utils.isString(e)!==!1?(this.items.set(e,{state:this.initialState}),this.items.get(e)):void 0},e.prototype.getWidget=function(e){return e&&Utils.isString(e)!==!1?this.items.get(e):void 0},e.prototype.getOrCreate=function(e){return e&&Utils.isString(e)!==!1?(void 0===this.items.get(e)&&this.add(e),this.items.get(e)):{}},e.prototype.deleteWidget=function(e){var t=this.items.get(e);if(t){var i=this.contents[t.contentId];i&&i["delete"](e),this.items["delete"](e)}},e.prototype.addToContent=function(e,t){var i=this.items.get(e);i&&(i.contentId=t,void 0===this.contents[t]&&(this.contents[t]=new Map),this.contents[t].set(e,i))},e.prototype.getContent=function(e){return this.contents[e]},e}),define("brease/controller/WidgetController",["brease/core/Utils","brease/controller/libs/FactoryUtils","brease/enum/Enum","brease/events/BreaseEvent","brease/controller/libs/Queue","brease/model/WidgetModel"],function(Utils,e,Enum,BreaseEvent,Queue,t){"use strict";var i=new t,n={init:function(){document.body.addEventListener(BreaseEvent.WIDGET_READY,d),document.body.addEventListener(BreaseEvent.WIDGET_DISPOSE,u)},getOptions:function(e,t){var n=i.getWidget(e);if(void 0!==n){var s=n.options;return t&&(n.options=void 0),s}},setOptions:function(e,t,n,s){var r=i.getOrCreate(e);r.options?n===!0?s===!0?r.options=Utils.deepCopy(t):r.options=t:r.options=Utils.extendDeepToNew(r.options,t):s===!0?r.options=Utils.deepCopy(t):r.options=t,t&&void 0!==t.parentContentId&&i.addToContent(e,t.parentContentId)},optionsExist:function(e){var t=i.getWidget(e);return void 0!==t&&void 0!==t.options},addOption:function(e,t,n){var s=i.getOrCreate(e);void 0===s.options&&(s.options={}),s.options[t]=n},setState:function(e,t){var n=i.getOrCreate(e);n.state=t,n.widget&&(n.widget.state=t)},getState:function(e){if(!e)return Enum.WidgetState.NON_EXISTENT;var t=i.getWidget(e);return void 0!==t?t.state:Enum.WidgetState.NON_EXISTENT},setSuspendedState:function(e,t){var n=i.getOrCreate(e);n.suspendedState=t},getSuspendedState:function(e){var t=i.getWidget(e);return void 0!==t?t.suspendedState:Enum.WidgetState.NON_EXISTENT},allPreviouslyReady:function(e){var t=!0,i,s=l(e);if(0===s.length)return!1;for(var r=0;r<s.length;r+=1)if(i=n.getSuspendedState(s[r]),i!==Enum.WidgetState.READY){t=!1;break}return t},addWidget:function(e){var t=i.getOrCreate(e.elem.id);t.widget=e,t.state=Enum.WidgetState.INITIALIZED,t.widget.state=Enum.WidgetState.INITIALIZED,e.settings&&e.settings.parentContentId&&i.addToContent(e.elem.id,e.settings.parentContentId)},getWidget:function(e){return i.getWidget(e)},deleteWidget:function(e){i.deleteWidget(e)},getWidgetsOfContent:function(e,t){return l(e,t)},dispose:function c(t,i,r,a){t=e.getElem(t),null!==t?(s(t),n.walkWidgets(t,i,"dispose",[a]),"function"==typeof r&&r()):o("dispose")},disposeInContent:function g(t,i,r){if(t=e.getElem(t),null!==t){s(t);for(var a=n.getWidgetsOfContent(i,Enum.WidgetState.ABORTED),l,d,u=0,c=a.length;c>u;u+=1)l=n.getState(a[u]),d=n.getSuspendedState(a[u]),l>Enum.WidgetState.IN_QUEUE&&(l<Enum.WidgetState.SUSPENDED||d>Enum.WidgetState.IN_QUEUE)&&n.callWidget(a[u],"dispose"),n.deleteWidget(a[u]);"function"==typeof r&&r()}else o("dispose")},suspend:function h(t,i,r,a){t=e.getElem(t),null!==t?(s(t),n.walkWidgets(t,i,"suspend",a),"function"==typeof r&&r()):o("suspend")},suspendInContent:function p(t,i,r){t=e.getElem(t),null!==t&&s(t);var a=n.getWidgetsOfContent(i,Enum.WidgetState.IN_QUEUE),o=a.length,l=0;for(l=0;o>l;l+=1)n.callWidget(a[l],"suspend");for(l=0;o>l;l+=1)n.setSuspendedState(a[l],n.getState(a[l])),n.setState(a[l],Enum.WidgetState.SUSPENDED);"function"==typeof r&&r()},wake:function m(t,i,s){if(t=e.getElem(t),null!==t){var r=new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:brease.language.getCurrentLanguage()}}),a=new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:brease.measurementSystem.getCurrentMeasurementSystem()}}),l=new CustomEvent(BreaseEvent.USER_CHANGED,{detail:brease.user.getCurrentUser()}),d=new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:brease.culture.getCurrentCulture().key});n.walkWidgets(t,i,"wake",[{language:r,mms:a,user:l,culture:d}]),"function"==typeof s&&s()}else o("wake")},wakeInContent:function f(e,t){var i=new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:brease.language.getCurrentLanguage()}}),s=new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:brease.measurementSystem.getCurrentMeasurementSystem()}}),r=new CustomEvent(BreaseEvent.USER_CHANGED,{detail:brease.user.getCurrentUser()}),a=new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:brease.culture.getCurrentCulture().key}),o=n.getWidgetsOfContent(e,Enum.WidgetState.IN_QUEUE),l=0,d=o.length;for(l=0;d>l;l+=1)n.setState(o[l],Enum.WidgetState.READY);for(l=0;d>l;l+=1){var u=[o[l],"wake",{language:i,mms:s,user:r,culture:a}],c=brease.uiController.bindingController.getSubscriptionsForElement(o[l]);u=c?u.concat([brease.config.ContentCaching.preserveOldValues,c]):u.concat([brease.config.ContentCaching.preserveOldValues]),n.callWidget.apply(null,u)}"function"==typeof t&&t()},walkWidgets:function v(e,t,i,s){var r=n.findWidgets(e,t);if(r.length>0)for(var a=0,o=r.length;o>a;a+=1)if("suspend"===i&&(n.setSuspendedState(r[a],n.getState(r[a])),n.setState(r[a],Enum.WidgetState.SUSPENDED)),"wake"===i){n.setState(r[a],Enum.WidgetState.READY);var l=brease.uiController.bindingController.getSubscriptionsForElement(r[a]);n.callWidget.apply(null,s?[r[a],i].concat(s,l?[brease.config.ContentCaching.preserveOldValues,l]:[brease.config.ContentCaching.preserveOldValues]):[r[a],i])}else n.callWidget.apply(null,s?[r[a],i].concat(s):[r[a],i])},callWidget:function b(e,t){var i=n.getWidget(e);if(void 0!==i&&void 0!==i.widget){var s=i.widget;return void 0!==s[t]?i.state===Enum.WidgetState.READY||i.state===Enum.WidgetState.INITIALIZED||i.state===Enum.WidgetState.SUSPENDED&&("dispose"===t||"getSettings"===t)?s[t].apply(s,Utils.toArray(arguments,2)):(console.iatInfo("[callWidget:"+t+"] widget "+s.el.attr("data-brease-widget")+" with id '"+e+"' in unavailable state"),null):"widget"===t?s:(console.iatWarn("[callWidget] no method '"+t+"' for widget "+s.el.attr("data-brease-widget")+" with id '"+e+"'"),null)}return console.iatWarn('[callWidget] no widget with id "'+e+'" (method call "'+t+'")'),null},findWidgets:function y(t,i,s){var r=[],a,l;if(s=void 0!==s?s:Enum.WidgetState.INITIALIZED,t=e.getElem(t),null!==t){if(a=t.querySelectorAll("[data-brease-widget]"),i===!0&&null!==t.getAttribute("data-brease-widget")&&n.getState(t.id)>=s&&r.push(t.id),a.length>0)for(var d=a.length-1;d>=0;d-=1)l=a[d],n.getState(l.id)>=s&&r.push(a[d].id)}else o("findWidgets");return r}};function s(e){var t=Queue.getQueue(e,"parse"),i=Queue.getQueue(e,"create"),n=0;if(void 0!==i&&(i.isRunning===!0||i.pending===!0)){for(i.stop(),n=0;n<i.runningQueue.length;n+=1)r(i.runningQueue[n]);i.finish()}if(void 0!==t&&t.isRunning===!0){for(t.stop(),n=0;n<t.runningQueue.length;n+=1)r(t.runningQueue[n]);for(n=0;n<t.runningQueue.length;n+=1)a(e,t.runningQueue[n]);t.finish()}}function r(e){e.state<Enum.WidgetState.INITIALIZED&&(e.state=Enum.WidgetState.ABORTED)}function a(e,t){try{(t.state===Enum.WidgetState.ABORTED||t.state===Enum.WidgetState.FAILED)&&void 0!==e.children[t.elem.id]&&e.removeChild(t.elem)}catch(i){console.log("%c"+i.message,"color:red;")}}function o(e,t){var i=t||"["+e+"] target of wrong type";console.iatWarn(i),brease.loggerService.log(Enum.EventLoggerId.CLIENT_PARSE_ERROR,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[],i)}function l(e,t){var n=[],s=i.getContent(e);return t=void 0!==t?t:Enum.WidgetState.INITIALIZED,void 0!==s&&s.forEach(function(i,s){void 0!==i&&i.contentId===e&&i.state>=t&&n.push(s)}),n}function d(e){n.setState(e.target.id,Enum.WidgetState.READY)}function u(e){n.deleteWidget(e.detail.id)}return n}),define("brease/controller/libs/LoaderPool",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/libs/Deferred","brease/core/Utils","brease/controller/WidgetController"],function(BreaseEvent,Enum,Deferred,Utils,e){"use strict";var LoaderPool=function(e){this.slots=0,this.maxSlots=void 0!==e?Math.max(0,parseInt(e,10)):i,this.maxSlots=Math.min(this.maxSlots,t),console.iatDebugLog("LoaderPool.maxSlots="+this.maxSlots),this.locker=document.createDocumentFragment(),this.pool={},this.createPool=new Map,this.contentCount={}},t=200,i=25,n=0;LoaderPool.prototype.loadContent=function(t,i,n){var r=i.find(".systemContentLoader"),a=r.length,o;if(t&&void 0!==t.path){l.call(this,t);var u=!1;if(a>0){var c=r[0],g=c.id;e.callWidget(g,"getUrl")===t.path?(n.resolve(g,!1),window.performanceMonitor.profile("loadContent - "+t.id,1),u=!0):s.call(this,c)}else o=this.createPool.get(i[0].id),o&&s.call(this,{id:o.loaderId});u||d.call(this,t,i[0],n)}else a>0?s.call(this,r[0]):(o=this.createPool.get(i[0].id),o&&s.call(this,{id:o.loaderId})),n.reject("CONTENT_NOT_FOUND",i[0])};function s(t){var i=e.getState(t.id);if(i<Enum.WidgetState.INITIALIZED){e.setOptions(t.id,{url:"",contentId:""});var n=this.createPool.get(t.id);n&&(n.contentId="")}else this.suspendLoader(t)}LoaderPool.prototype.isContentActive=function(t){var i=!1,n=this.pool;for(var s in n)if(n[s].active===!0&&t===e.callWidget(s,"getContentId")){i=!0;break}return i},LoaderPool.prototype.suspendLoader=function(t){if(this.tagMode===!0){var i=e.callWidget(t.id,"getContentId"),n=r.call(this,i),s=this.pool[t.id];s&&(n?s.tag="parked":(s.tag="suspend",e.callWidget(t.id,"deactivateContent")),this.locker.appendChild(t))}else a.call(this,t)},LoaderPool.prototype.flushLoader=function(t){if(this.tagMode===!0){var i=e.callWidget(t.id,"getContentId"),n=r.call(this,i),s=this.pool[t.id];s&&(n?s.tag="parked":(s.tag="flush",e.callWidget(t.id,"deactivateContent")),this.locker.appendChild(t))}else o.call(this,t)};function r(e){return-1!==this.contentsToLoad.indexOf(e)}LoaderPool.prototype.startTagMode=function(e){if(this.tagMode!==!0){for(var t in this.pool)this.pool[t].tag="";this.tagMode=!0,this.contentsToLoad=e}},LoaderPool.prototype.endTagMode=function(){this.tagMode=!1;for(var e in this.pool)"suspend"===this.pool[e].tag&&(0===this.maxSlots?this.flushLoader(this.locker.querySelector("#"+e)):this.suspendLoader(this.locker.querySelector("#"+e))),"flush"===this.pool[e].tag&&this.flushLoader(this.locker.querySelector("#"+e))};function a(t){var i=this.pool[t.id];if(void 0!==i)try{e.callWidget(t.id,"suspend")}catch(n){Utils.logError(n)}finally{i.tag="",i.active=!1,this.locker.appendChild(t)}else console.iatWarn("no loader with id="+t.id+" found!")}function o(t){var i=this.pool[t.id];if(void 0!==i)try{e.callWidget(t.id,"flush")}catch(n){Utils.logError(n)}finally{i.tag="",i.active=!1,i.contentId="",this.locker.appendChild(t)}else console.iatWarn("no loader with id="+t.id+" found!")}function l(e){void 0===this.contentCount[e.id]&&(this.contentCount[e.id]=0),this.contentCount[e.id]+=1}function d(t,i,n){var s=g.call(this,t.path);if(s){Utils.prependChild(i,this.locker.querySelector("#"+s.id));try{"parked"!==s.tag&&(e.allPreviouslyReady(t.id)?e.callWidget(s.id,"wake"):e.callWidget(s.id,"load",t.path,t.id,!0))}catch(r){Utils.logError(r)}finally{s.tag="",s.active=!0,s.contentId=t.id,n.resolve(s.id,!0)}}else u.call(this,i,t,n)}function u(e,t,i){if(this.slots<this.maxSlots)p.call(this,e,t,i);else{var n=c.call(this,t.id);void 0!==n?h.call(this,n,e,t,i):p.call(this,e,t,i)}}function c(t){var i,n,s,r=Number.POSITIVE_INFINITY,a=this.pool;for(var o in a)if(a[o].active!==!0||"suspend"===a[o].tag||"flush"===a[o].tag){if(s=this.contentCount[a[o].contentId],t===e.callWidget(o,"getContentId")){n=o;break}r>s&&(r=s,n=o)}return n&&(i=a[n]),i}function g(t){var i,n=this.pool;for(var s in n)if(e.callWidget(s,"getUrl")===t&&(n[s].active!==!0||"suspend"===n[s].tag||"flush"===n[s].tag||"parked"===n[s].tag)){i=n[s];break}return i}function h(t,i,n,s){t.tag="",t.active=!0,brease.pageController.emptyContainer(i),Utils.prependChild(i,this.locker.querySelector("#"+t.id)),t.contentId!==n.id&&(t.contentId=n.id,e.callWidget(t.id,"load",n.path,n.id)),s.resolve(t.id,!0)}function p(e,t,i){var s="SystemLoader"+(n+=1),r=this,a={contentReadyHandler:m.bind(r,e.id),initializedHandler:f.bind(r,e.id),deferred:i,containerId:e.id,contentId:t.id,loaderId:s};this.slots+=1,this.createPool.set(e.id,a),e.addEventListener(BreaseEvent.CONTENT_READY,a.contentReadyHandler),brease.uiController.createWidgets(e,[{className:"system.widgets.ContentLoader",id:s,options:{url:t.path,contentId:t.id},HTMLAttributes:{style:"box-sizing: border-box; position:relative; overflow:hidden;visibility:hidden;","class":"systemContentLoader"}}],!0,brease.settings.globalContent,"#"+e.id+" > :first-child")}function m(e,t){var i=this.createPool.get(e);if(t.target.id===e){t.target.removeEventListener(BreaseEvent.CONTENT_READY,i.contentReadyHandler);var n=document.getElementById(i.loaderId);n?n.addEventListener(BreaseEvent.WIDGET_INITIALIZED,i.initializedHandler):this.createPool["delete"](e)}}function f(e,t){var i=this.createPool.get(e);if(i){var n=i.loaderId;t.target.id===n&&(t.target.removeEventListener(BreaseEvent.WIDGET_INITIALIZED,i.initializedHandler),this.pool[n]={id:n,active:!0,contentId:i.contentId},i.deferred.resolve(n,!0),this.createPool["delete"](e))}}return LoaderPool}),define("brease/controller/libs/PageLogger",["brease/enum/Enum","brease/config","brease/controller/libs/LogCode"],function(Enum,config,LogCode){"use strict";var PageLogger=function(e,i){this.controller=e,this.settings={clientMessage:void 0!==i&&void 0!==i.clientMessage?i.clientMessage:t.clientMessage}},e=PageLogger.prototype,t={clientMessage:!0};e.log=function(e,t){switch(e){case LogCode.PAGE_NOT_FOUND:console.iatWarn("referenced page ("+t.pageId+") does not exist!"),i(e,[t.pageId]),t.isStartPage===!0&&n.call(this,e,[t.pageId||"undefined"]);break;case LogCode.CONTAINER_NOT_FOUND:console.iatWarn("referenced page ("+t.pageId+") does not exist!"),i(e,[t.pageId]),t.isStartPage===!0&&n.call(this,e,[t.pageId||"undefined"]);break;case LogCode.DIALOG_NOT_FOUND:console.iatWarn("referenced dialog ("+t.dialogId+") does not exist!"),i(e,[t.dialogId]);break;case LogCode.NO_PAGES_FOUND:console.iatWarn('no pages in in visualisation (id="'+t.visuId+'") referenced!'),n.call(this,e,[t.visuId]),i(e,[t.visuId]);break;case LogCode.NO_LAYOUTS_FOUND:console.iatWarn('no layouts in in visualisation (id="'+t.visuId+'") referenced!'),n.call(this,e,[t.visuId],t.container),i(e,[t.visuId]);break;case LogCode.VISU_MALFORMED:n.call(this,e,[t.visuId],t.container),console.log("%cVisu file ("+t.visuId+".json) ist kein gueltiges JSON!","color:red;"),i(e,[t.visuId]);break;case LogCode.VISU_NOT_FOUND:n.call(this,e,[t.visuId],t.container),console.log("%cVisu file ("+t.visuId+".json) nicht gefunden","color:red;"),i(e,[t.visuId]);break;case LogCode.LAYOUT_NOT_FOUND:console.iatWarn('layout (id="'+t.layoutId+'") does not exist!'),i(e,[t.layoutId,t.pageId]),t.isStartPage===!0&&n.call(this,e,[t.layoutId,t.pageId]);break;case LogCode.CONTENT_NOT_FOUND:console.iatWarn("content (id="+t.contentId+") not found!"),i(e,[t.contentId]);break;case LogCode.CONTENT_IS_ACTIVE:console.iatWarn("content (id="+t.contentId+") already loaded!"),i(e,[t.contentId]);break;case LogCode.AREA_NOT_FOUND:console.iatWarn('area (id="'+t.areaId+'") not found! (pageId:"'+t.pageId+'", layoutId:"'+t.layoutId+")"),i(e,[t.areaId,t.layoutId,t.pageId]);break;case LogCode.PAGE_IS_CURRENT:console.iatWarn('page (id="'+t.pageId+'") is current! no need to load');break;case LogCode.PAGE_NOT_CURRENT:console.iatWarn('page (id="'+t.pageId+'") is currently not loaded'),i(e,[t.pageId]);break;case LogCode.NO_VISUDATA_FOUND:console.log("%cPageController.start, no visuData found","color:red;");break;case LogCode.THEME_NOT_FOUND:console.iatWarn("Theme (id="+t.themeId+") not found!"),i(e,[t.themeId],"themeId:"+t.themeId);break;case LogCode.VISU_ACTIVATE_FAILED:console.iatWarn("activate visu (id="+t.visuId+") denied,code="+t.code),n.call(this,e,[t.visuId,t.code],t.container)}},e.message=function(){s.apply(this,arguments)};function i(e,t,i){var n=LogCode.getConfig(e);brease.loggerService.log(n.code,Enum.EventLoggerCustomer.BUR,n.verboseLevel,n.severity,t,i)}function n(e,t,i){var n=LogCode.getConfig(e).messageKey,r=this.controller.rootContainer;this.settings.clientMessage===!0&&s(n,t,function(e){i?($(i).html("<label>"+e+"</label>"),"appContainer"===i.id&&$("#splashscreen").remove()):($(r).html("<label>"+e+"</label>"),
$("#splashscreen").remove())})}function s(e,t,i){var n=brease.language.getSystemTextByKey("BR/IAT/"+e);n===config.undefinedTextReturnValue&&(n=r[e]),void 0!==n&&brease.textFormatter.format(n,t).then(i)}var r={"brease.error.STARTPAGE_NOT_FOUND":'startpage (id="{1}") not found!',"brease.error.NO_PAGES_FOUND":'no pages in visualization (id="{1}")!',"brease.error.NO_LAYOUTS_FOUND":'no layouts in visualization (id="{1}")!',"brease.error.INCORRECT_VISU":'Visualization (id="{1}") cannot be displayed!',"brease.error.VISU_NOT_FOUND":'Visualization (id="{1}") not found!',"brease.error.LAYOUT_NOT_FOUND":'Layout (id="{1}") for Page (id="{2}") not found!',"brease.error.CONTENT_NOT_FOUND":'content (id="{1}") not found!',"brease.error.ACTIVATE_VISU_FAILED":'Not allowed! License not available for visualization "{1}"!'};return PageLogger}),define("brease/controller/libs/ScrollManager",[],function(){"use strict";var ScrollManager={ADD_TIMEOUT:50,REFRESH_TIMEOUT:50,FAIL_TIMEOUT:1e3,init:function(e,i,n,s){t=e,i>0&&(this.FAIL_TIMEOUT=i),n>0&&(this.ADD_TIMEOUT=n),s>0&&(this.REFRESH_TIMEOUT=s)},refresh:function(e){var t=l(e);if(t){t.refreshTimer&&window.clearTimeout(t.refreshTimer);var i=document.getElementById(e);i?i.firstChild&&u(i.firstChild)&&i.firstChild.scrollHeight>0?d(e,i.firstChild):t.refreshTimer=window.setTimeout(ScrollManager.refresh.bind(ScrollManager,e),this.REFRESH_TIMEOUT):a(e)}},remove:function(e){var t=l(e);t&&(t.addTimer&&window.clearTimeout(t.addTimer),t.refreshTimer&&window.clearTimeout(t.refreshTimer),void 0!==t.scroller&&(t.scroller.destroy(),t.scroller=void 0),a(e))},add:function(e){if(i(e)===!1)console.iatWarn("element not suitable for adding a Scroller!");else if(this.hasScroller(e)===!0)console.iatWarn("element has already a Scroller!");else{var t=o(e.id);t.addTimer&&window.clearTimeout(t.addTimer),n(e)?s(e):Date.now()-t.startTime<this.FAIL_TIMEOUT?t.addTimer=window.setTimeout(this.add.bind(this,e),this.ADD_TIMEOUT):r(e)}},hasScroller:function(t){return void 0!==e[t.id]&&void 0!==e[t.id].scroller},scrollTo:function(t,i,n){e[t]&&e[t].scroller&&e[t].scroller.scrollTo(i,n)}},e={},t;function i(e){return!e==!1&&!e.id==!1&&!e.firstChild==!1}function n(e){return e.scrollHeight>0&&e.firstChild.scrollHeight>0}function s(i){e[i.id].scroller=t.addScrollbars(i,{mouseWheel:!0,tap:!0,scrollX:!0,scrollY:!0},!0),e[i.id].addTimer=void 0}function r(e){a(e.id),console.iatWarn("add scroller timed out: "+e.id)}function a(t){e[t]=void 0}function o(t){return e[t]||(e[t]={startTime:Date.now()}),e[t]}function l(t){return e[t]}function d(t,i){void 0!==e[t].scroller&&(e[t].scroller.scroller=i,e[t].scroller.scrollerStyle=i.style,e[t].scroller.refresh()),e[t].refreshTimer=void 0}function u(e){return-1!==e.className.indexOf("systemContentLoader")||-1!==e.className.indexOf("breaseLayout")||-1!==e.className.indexOf("ScrollBox")}return ScrollManager}),define("brease/controller/libs/Themes",["brease/events/BreaseEvent","brease/core/Utils"],function(BreaseEvent,Utils){"use strict";var Themes={setTheme:function(e){var n=t?a(t):"",s=a(e),o=Utils.getStylesheetByHref(n),l=Utils.getStylesheetByHref(s);e!==t&&(t=e,void 0!==l?(void 0!==o&&(o.disabled=!0),l.disabled=!1,r(e)):i(s,e,o))},themeId2Url:function(e){return a(e)},getCurrentTheme:function(){return t}},e={},t;function i(t,i,r){window.clearTimeout(e.timeout),e.themeId=i,e.themeURL=t,e.time=Date.now(),e.timeout=window.setTimeout(n,100),e.oldTheme=r;var a=$('<link id="theme_'+i+'" href="'+t+'" rel="stylesheet" ></link');a[0].addEventListener("load",s,!1),a.appendTo($("head"))}function n(){var t=Utils.getStylesheetByHref(e.themeURL);t&&t.rules&&t.rules.length>0?s():Date.now()-e.time<5e3&&(e.timeout=window.setTimeout(n,100))}function s(){window.clearTimeout(e.timeout),void 0!==e.oldTheme&&(e.oldTheme.disabled=!0),r(e.themeId)}function r(e){document.body.dispatchEvent(new CustomEvent(BreaseEvent.THEME_CHANGED,{detail:{themeId:t}}))}function a(e){return brease.config.themeFolder+e+".min.css"}return Themes}),define("brease/controller/objects/WidgetItem",[],function(){"use strict";var WidgetItem=function(e,t,i){this.id=e.id,this.elem=e,this.state=t,this.parentContentId=i};return WidgetItem}),define("brease/controller/OverlayController",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/FileManager"],function(BreaseEvent,Enum,Utils,e){"use strict";var DialogWindow,MessageBox,OverlayController={init:function(){this.ready=$.Deferred();var i=["widgets/brease/DialogWindow/DialogWindow","widgets/brease/MessageBox/MessageBox","widgets/brease/NumPad/NumPad","widgets/brease/KeyBoard/KeyBoard","widgets/brease/DateTimePicker/DateTimePicker","system/widgets/ContentLoader/ContentLoader"];return e.loadOverlays(i).done(function(e,i){DialogWindow=e,MessageBox=i,t.push({widget:new MessageBox,used:!1,type:"MessageBox"}),t.push({widget:new DialogWindow,used:!1,type:"DialogWindow"}),OverlayController.ready.resolve()}).fail(n),this.ready.promise()},showMessageBox:function(e,t,i,n,s,r){var a=$.Deferred();return $.when(this.getWindow("MessageBox")).then(function(o){var l={};l.header={text:t||""},l.content={text:i||""},n&&(l.icon=n),s&&(l.buttonText=s),e&&(l.type=e),o.widget.resetStyles(),r&&(l.style=r),o.widget.show(l).then(function(e){a.resolve(e),o.used=!1})}),a.promise()},getWindow:function(e){var i,n=this,s;for(var r in t)if(t[r].used===!1&&t[r].type===e)return t[r].used=!0,t[r];switch(i=$.Deferred(),e){case"MessageBox":s=MessageBox;break;case"DialogWindow":s=DialogWindow}return(new s).isReady().then(function(s){t.push({widget:s,used:!1,type:e}),i.resolve(n.getWindow(e))}),i.promise()},openDialog:function(e,t,n,r,a,o,l){var d=$.Deferred(),u={};return void 0!==i[e]?(d.resolve(),d.promise()):(l===!0?u.forceInteraction=!1:u.forceInteraction=!0,t===Enum.DialogMode.MODELESS?u.modal=!1:u.modal=!0,void 0!==n&&(u.position={horizontal:s(n)}),void 0!==r&&(u.position=u.position||{},u.position.vertical=s(r)),void 0!==o&&(u.headerText=o),$.when(this.getWindow("DialogWindow")).then(function(t){u.id=e,i[e]=t;var n=t.widget.show(u,a);$.when(t.widget.onClose()).then(function(){i[e]=void 0,t.used=!1}),d.resolve(void 0,n)}),d.promise())},closeDialog:function(e){var t=i[e];t&&(t.widget.hide(),i[e]=void 0)}},t=[],i=[];function n(){brease.messenger.announce("WIDGET_LOAD_ERROR")}function s(e){var t=/\d+px/g;return t.test(e)?parseInt(e,10):e}return OverlayController}),define("brease/controller/PageController",["brease/controller/objects/Client","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/libs/LoaderPool","brease/controller/libs/PageLogger","brease/model/VisuModel","brease/controller/libs/LoadCycle","brease/controller/libs/ScrollManager","brease/controller/libs/Areas","brease/controller/libs/Containers","brease/helper/Scroller","brease/core/libs/Deferred","brease/controller/objects/PageTypes","brease/controller/objects/AssignTypes","brease/controller/libs/Themes","brease/controller/objects/VisuStatus","brease/controller/libs/LogCode"],function(Client,BreaseEvent,Enum,Utils,LoaderPool,PageLogger,e,LoadCycle,ScrollManager,Areas,t,Scroller,Deferred,PageTypes,AssignTypes,Themes,VisuStatus,LogCode){"use strict";var PageController={init:function M(t,config){void 0===this.logger&&(brease.appElem.addEventListener(BreaseEvent.PAGE_CHANGE,P.bind(this)),ScrollManager.init(Scroller)),this.logger=new PageLogger(this,config),i=t,r=e.init(t,this.logger)},start:function R(e,t,i){e=Utils.ensureVisuId(e),s=new LoaderPool(i?i.cachingSlots:void 0),n=new LoadCycle,$.when(r.activateVisu(e,{visuId:e,rootContainer:t})).then(o,l)},swipeNavigation:function H(e){var i=t.getCurrentPage(this.rootContainer.id),n=r.findNav4page(i);return n&&n.swipes&&n.swipes[i]&&n.swipes[i][e]?(PageController.loadPage(n.swipes[i][e],this.rootContainer),!0):!1},loadPage:function V(e,i){var n;if(i){var s=r.getPageById(e);void 0!==s?(t.setLatestRequest(i.id,e),n=d.call(this,s,i)):(n={success:!1,code:LogCode.PAGE_NOT_FOUND},this.logger.log(n.code,{pageId:e,isStartPage:r.startPageId===e}))}else n={success:!1,code:LogCode.CONTAINER_NOT_FOUND},this.logger.log(n.code,{pageId:e,isStartPage:r.startPageId===e});return n},loadDialog:function W(e,i){var n=r.getDialogById(e);return void 0!==n?(t.setLatestRequest(i.id,e),d.call(this,n,i),n):(this.logger.log(LogCode.DIALOG_NOT_FOUND,{dialogId:e}),void 0)},loadContentInArea:function U(e,i,n){var a=this,o=$.Deferred(),l=r.getContentById(e);if(void 0===l||l.virtual===!0)c.call(a,o,!1,LogCode.CONTENT_NOT_FOUND,{contentId:e});else if(s.isContentActive(e)===!0)c.call(a,o,!1,LogCode.CONTENT_IS_ACTIVE,{contentId:e});else{var d=r.getPageById(n)||r.getDialogById(n);if(d){var u=t.getContainerForPage(n);if(void 0===u)c.call(a,o,!1,LogCode.PAGE_NOT_CURRENT,{pageId:n});else if(r.pageHasArea(i,d)===!1)c.call(a,o,!1,LogCode.AREA_NOT_FOUND,{areaId:i,pageId:n,layoutId:d.layout});else{var g=Areas.getArea(u,d.layout,i,d.type),h=r.findAssignment(d,i),p;g?(p=h?Utils.deepCopy(h):{},p.contentId=e,L(g,p).done(function m(e,t,i,n){var s=r.getContentById(n.contentId);if(s){var l=S(e,{width:s.width,height:s.height},{width:i.obj.width,height:i.obj.height},n.zoomMode);i.setProperties({width:s.width,height:s.height},n,l,t)}c.call(a,o,!0)}).fail(function f(){c.call(a,o,!1)})):c.call(a,o,!1,LogCode.AREA_NOT_FOUND,{areaId:i,pageId:n,layoutId:d.layout})}}else c.call(a,o,!1,LogCode.PAGE_NOT_FOUND,{pageId:n,isStartPage:!1})}return o.promise()},setTheme:function F(e){if(void 0!==e){if(-1===r.getThemes().indexOf(e))return this.logger.log(LogCode.THEME_NOT_FOUND,{themeId:e}),void 0;Themes.setTheme(e)}},themeId2Url:function G(e){return Themes.themeId2Url(e)},getCurrentTheme:function z(){return Themes.getCurrentTheme()},getThemes:function j(){return r.getThemes()},emptyContainer:function q(e){e&&e.childNodes&&e.id&&(O.call(this,e),t.resetCurrentPage(e.id))},getNavById:function K(e){return r.getNavById(e)},getPageById:function Y(e){return r.getPageById(e)},getLayoutById:function X(e){return Utils.deepCopy(r.getLayoutById(e))},getDialogById:function Q(e){return r.getDialogById(e)},getVisuById:function Z(e){return r.getVisuById(e)},getCurrentPage:function J(e){return t.getCurrentPage(e)},getVisu4Page:function ee(e){return void 0!==r.getPageById(e)?r.getPageById(e).visuId:void 0!==r.getDialogById(e)?r.getDialogById(e).visuId:void 0},getContentUrlById:function te(e){var t,i=r.getContentById(e);return i&&(t=i.path),t},getLoaderForElement:function ie(e){return $(e).closest(".systemContentLoader")[0]},getContentId:function ne(e){var t,i=this.getLoaderForElement(e);return void 0!==i&&(t=i.getAttribute("data-brease-contentid")),t},getLayoutDivId:function se(e,t){return"Layout_"+(this.rootContainer.id===e?"":e+"_")+t},getAreaDivId:function re(e,t,i,n){return Areas.getAreaDivId(e,t,i,n)},loadHTML:function ae(e,t){var i=new Deferred("singleShot",t);return require(["text!"+e],function n(e){i.resolve(e)},function s(e){i.reject(e)}),i},getRootZoom:function oe(){return b.scale},parseVisuData:function le(e,t){return r.parseVisuData(e,t)}},i,n,s,r,a;function o(e){var t=e.rootContainer;Areas.init(ScrollManager,t.id),PageController.rootContainer=t,PageController.$rootContainer=$(t),PageController.setTheme(r.startThemeId),PageController.loadPage(r.startPageId,t)}function l(e,t,i){var n={visuId:i.visuId,container:i.rootContainer};void 0!==t&&(n.code=t),PageController.logger.log("VISU_"+e,n)}function d(e,i){if(n.isOpen||a===!0){a=!1;var o=t.getCurrentPage(i.id),l=r.getPageById(o),d;if(void 0===l||o!==e.id)if(void 0!==r.getLayoutById(e.layout)){var c=u(e.id,e.type);s.startTagMode(c),(void 0===l||e.layout!==l.layout)&&O.call(this,i);var h=v.call(this,e.layout,i,e.type);f(h,e),t.setCurrentPage(i.id,e.id),n.start(g,c,{pageId:e.id,containerId:i.id,contentsToLoad:c}),y.call(this,e,i),k(e.style||"default",h,e.type),void 0!==l&&e.layout!==l.layout&&i.id!==this.rootContainer.id&&m.call(this,e,i),d={success:!0}}else d={success:!1,code:LogCode.LAYOUT_NOT_FOUND},this.logger.log(d.code,{pageId:e.id,layoutId:e.layout,isStartPage:r.startPageId===e.id});else{d={success:!1,code:LogCode.PAGE_IS_CURRENT},this.logger.log(d.code,{pageId:e.id});for(var p=u(e.id,e.type),b=0;b<p.length;b+=1)n.remove(p[b])}return d}}function u(e,t){var i=[],n=t===PageTypes.DIALOG?r.getDialogById(e):r.getPageById(e);for(var s in n.assignments){var a=n.assignments[s];switch(a.type){case AssignTypes.CONTENT:r.isValidContent(a.contentId)&&i.push(a.contentId);break;case AssignTypes.PAGE:i.push.apply(i,u(a.contentId));break;case AssignTypes.VISU:var o=a.contentId,l=r.getVisuById(o);l&&l.status===VisuStatus.LOADED&&i.push.apply(i,u(l.startPage))}}return i}function c(e,t,i,n){i&&this.logger.log(i,n),e.resolve(t)}function g(e){e.pageId===r.startPageId&&h(),s.endTagMode(),t.initPageLoadEvent(e.containerId,e.pageId,e.contentsToLoad,e.embedded)}function h(){var e=r.allActivated();e?Client.setValid(!0):document.body.addEventListener(BreaseEvent.VISU_ACTIVATED,p)}function p(){var e=r.allActivated();e&&(document.body.removeEventListener(BreaseEvent.VISU_ACTIVATED,p),Client.setValid(!0))}function m(e,t){var i,n,s,a,o,l,d,u,c;i=$(t).closest("div[data-brease-areaId]")[0],i&&(n=i.id,s=i.getAttribute("data-brease-areaId")),c=$(t).closest("div[data-brease-layoutId]")[0],c&&(o=c.getAttribute("data-brease-layoutId")),s&&o&&(a=r.getLayoutById(o).areas[s]),l=$(t).closest("div[data-brease-pageId]")[0],l&&(d=l.getAttribute("data-brease-pageId"),u=r.getPageById(d).assignments[s]),e&&n&&i&&a&&u&&C.call(this,e,Areas.get(n),u)}function f(e,t){e.setAttribute("data-brease-pageId",t.id);var i={"background-image":"","background-color":t.backColor?t.backColor:""};(t.backGround||t.backGroundGradient)&&(i["background-image"]="",t.backGroundGradient&&(i["background-image"]+=t.backGroundGradient),t.backGround&&(i["background-image"]+=(""!==i["background-image"]?", ":"")+"url("+t.backGround+")",i["background-repeat"]="no-repeat")),t.sizeMode&&(i["background-size"]=Enum.SizeMode.convertToCSS(t.sizeMode)),$(e).css(i)}function v(e,t,i){var n=t.id;t.id!==this.rootContainer.id&&i!==PageTypes.DIALOG&&(t=Areas.get(t.id).contentContainer);var s=this.getLayoutDivId(t.id,e),a=$("#"+t.id).find("#"+s)[0];if(!a){var o=r.getLayoutById(e);o.id=e,a=document.createElement("div"),a.setAttribute("style","width:"+o.width+"px;height:"+o.height+"px;display:block;position:absolute;z-index:0;"),a.setAttribute("id",s),a.setAttribute("class","breaseLayout"),a.setAttribute("data-brease-layoutId",e);for(var l in o.areas)a.appendChild(Areas.add(n,e,o.areas[l],i).div);ScrollManager.remove(n),Utils.prependChild(t,a),n===this.rootContainer.id&&(brease.config.visu.zoom===!0?b.init(a,this.$rootContainer):(document.body.style.overflow="auto",this.$rootContainer.css({width:o.width+"px",height:o.height+"px"}),brease.dispatchResize()))}return a}var b={scale:1,listening:!1,init:function de(e,t){document.body.style.overflow="hidden",this.$layoutDiv=$(e),this.$rootContainer=t,this.scale=1,this.listening||($(window).on("resize",_.debounce(this.zoom.bind(this),150)),this.listening=!0),this.zoom()},zoom:function ue(){var e=this.$layoutDiv[0].getBoundingClientRect(),t=document.body.getBoundingClientRect(),i=Math.floor(t.width)/(e.width/this.scale),n=Math.floor(t.height)/(e.height/this.scale);if(this.scale=Math.min(i,n),this.scale===i){var s=Math.floor(this.$layoutDiv.outerWidth()*this.scale);this.scale=s/this.$layoutDiv.outerWidth()}else{var r=Math.floor(this.$layoutDiv.outerHeight()*this.scale);this.scale=r/this.$layoutDiv.outerHeight()}this.$layoutDiv.css({transform:"scale("+this.scale+","+this.scale+")","transform-origin":"0 0"}),e=this.$layoutDiv[0].getBoundingClientRect(),this.$rootContainer.css({width:e.width,height:e.height}),brease.dispatchResize()}};function y(e,t){var i=r.getLayoutById(e.layout),s=Object.keys(i.areas);for(var a in e.assignments){var o=e.assignments[a],l=i.areas[a];if(void 0!==l){var d=Areas.getArea(t.id,e.layout,o.areaId,e.type);x.call(this,o,d),d.setStyle(o.style||"default"),d.show(),s.splice(s.indexOf(a),1)}else o.type===AssignTypes.CONTENT&&n.remove(o.contentId),this.logger.log(LogCode.AREA_NOT_FOUND,{contentId:o.contentId,layoutId:e.layout,pageId:e.id,areaId:o.areaId,isStartPage:r.startPageId===e.id})}if(s.length>0)for(var u=0;u<s.length;u+=1){var c=Areas.getArea(t.id,e.layout,s[u],e.type);c.hide(),O.call(this,c.div)}}function E(e,t){$(e).html(t)}function x(e,t){var i=this;switch(e.type){case AssignTypes.CONTENT:window.performanceMonitor.profile("loadContent - "+e.contentId,0),L(t,e).done(function o(e,t,i,s){n.remove(s.contentId);var a=r.getContentById(s.contentId);if(a){var o=S(e,{width:a.width,height:a.height},{width:i.obj.width,height:i.obj.height},s.zoomMode);i.setProperties({width:a.width,height:a.height},s,o,t)}}).fail(function l(e,t,n,s){e===LogCode.CONTENT_NOT_FOUND&&(i.logger.log(e,{contentId:s.contentId}),t&&i.logger.message("brease.error.CONTENT_NOT_FOUND",[s.contentId],E.bind(null,t)))});break;case AssignTypes.PAGE:var s=e.contentId;N.call(this,s,t.div),C.call(this,r.getPageById(s),t,e),D(r.getVisuByStartpage(s));break;case AssignTypes.VISU:var a=e.contentId;$.when(r.activateVisu(a,{visuId:a,area:t,assignment:e})).then(I,w)}}function I(e){var t=r.getVisuById(e.visuId);$.when(T.call(PageController,e.area,e.assignment)).then(function i(n){C.call(PageController,r.getPageById(n),e.area,e.assignment),D(t)},function n(i,s){i===LogCode.PAGE_IS_CURRENT&&(C.call(PageController,r.getPageById(s),e.area,e.assignment),D(t))})}function w(e,t,i){if(e===VisuStatus.ACTIVATE_FAILED)for(var s=u(r.getVisuById(i.visuId).startPage),a=0;a<s.length;a+=1)n.remove(s[a],!0);var o={visuId:i.visuId};void 0!==t&&(o.code=t),A.call(PageController,"VISU_"+e,o,i.area.div)}function C(e,t,i){if(void 0!==e){var n=e.layout,s=r.getLayoutById(n),a=this.getLayoutDivId(t.contentContainer.id,n),o=S(a,{width:s.width,height:s.height},{width:t.obj.width,height:t.obj.height},i.zoomMode);t.setProperties({width:s.width,height:s.height},i,o,!0)}}function S(e,t,i,n){var s=i.width/t.width,r=i.height/t.height,a=1,o={};return"contain"===n?a=Math.min(s,r):"cover"===n&&(a=Math.max(s,r)),o.width=t.width,o.height=t.height,o.transform="scale("+a+","+a+")",o["transform-origin"]="0 0",$("#"+e).css(o),a}function T(e,t){var i=$.Deferred(),n=t.contentId,s,a=r.getVisuById(n);return a.status===VisuStatus.LOADED?(void 0===Themes.getCurrentTheme()&&this.setTheme(r.startThemeId),s=N.call(this,a.startPage,e.div),s.success?(r.getVisuById(n).containerId=e.div.id,i.resolve(a.startPage)):i.reject(s.code,a.startPage)):(A.call(this,"VISU_"+a.status,{visuId:n},e.div),i.reject("VISU_"+a.status)),i.promise()}function A(e,t,i){O.call(this,i),t.container=$(i).find(".ScrollBox")[0],this.logger.log(e,t)}function D(e){if(e&&e.containerId){var t=1,i=$("#"+e.containerId).find(".breaseLayout");i.length>0&&(t=i[0].getBoundingClientRect().width/i.outerWidth()),e.zoomFactor=t}}function L(e,i){var n=new Deferred("singleShot",[e,i]),a=r.getContentById(i.contentId);return t.resetCurrentPages(e.div.id),s.loadContent(a,e.$contentContainer,n),n}function N(e,t){return a=!0,this.loadPage(e,t)}function P(e){var t=document.getElementById(e.detail.containerId);null!==t&&this.loadPage(e.detail.pageId,document.getElementById(e.detail.containerId))}function O(e){if(e.childNodes.length>0){var i,n,r,a=$(e);for(r=a.find(".LayoutArea"),i=0,n=r.length;n>i;i+=1)Areas.get(r[i].id).dispose(),t.dispose(r[i].id);for(r=a.find(".systemContentLoader"),i=0,n=r.length;n>i;i+=1)s.slots<=s.maxSlots?s.suspendLoader(r[i]):s.flushLoader(r[i]),t.dispose(r[i].id);t.resetCurrentPages(e.id),e!==this.rootContainer&&brease.uiController.dispose(e),a.children().not(".iScrollLoneScrollbar,.iScrollBothScrollbars,.ScrollBox").remove(),a.children(".ScrollBox").empty()}}var B=new RegExp(".*_style_.*");function k(e,t,i){var n=$(t),s="system_brease_"+i+"_style_"+e;i===PageTypes.DIALOG&&(n=n.closest('[data-brease-widget="widgets/brease/DialogWindow"]'));var r=n[0].classList;if(r.contains(s)===!1){for(var a in r)B.test(r[a])&&n.removeClass(r[a]);n.addClass(s)}}return PageController}),define("brease/controller/WidgetParser",["brease/controller/FileManager","brease/controller/libs/FactoryUtils","brease/controller/objects/WidgetItem","brease/core/Utils","brease/events/BreaseEvent","brease/enum/Enum","brease/controller/libs/Queue"],function(e,t,WidgetItem,Utils,BreaseEvent,Enum,Queue){"use strict";var i={init:function h(e){void 0!==e&&(s=e)},start:function(e,t,i,n,s){for(var o=0,l=n.length;l>o;o+=1)a(n[o],t,i);s===!0&&null!==e.getAttribute("data-brease-widget")&&a(e,t,i),t.start(function d(e){e.run(r).then(function t(e){e.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_PARSED))},function i(){console.log("errorHandler:",arguments)})})},parse:function p(e,n,r){if(e=t.getElem(e),null!==e){var a=Queue.getQueue(e,"parse",!0),o=e.querySelectorAll("[data-brease-widget]"),l=[],d=[],u,c,h=o.length;for(c=h-1;c>=0;c-=1)u=o[c],u.id=t.ensureElemId(u.id),-1===d.indexOf(u.id)?(l.push(u),d.push(u.id)):(console.iatWarn("[parse] HTML element has duplicate id ("+u.id+") and will be removed"),u.parentNode.removeChild(u));r=t.ensureContentId(r,e,s.getState(e.id)),i.start(e,a,r,l,n)}else g("parse")}},n={},s;function r(t,i){var n,r,a=s.getState(t.id);a<Enum.WidgetState.INITIALIZED?(s.optionsExist(t.id)?(n=s.getOptions(t.id),r=e.getPathByClass(n.className),void 0===n.parentContentId&&s.addOption(t.id,"parentContentId",t.parentContentId)):(n=Utils.parseElementData(t.elem,"brease-options"),r=e.getPathByClass(t.elem.getAttribute("data-brease-widget")),void 0===n.parentContentId&&(n.parentContentId=t.parentContentId),s.setOptions(t.id,n,!0)),e.loadJSFiles(r,brease.config.editMode===!0||brease.config.mocked!==!0).done(function(e){d({method:"loadWidgetFileSuccess",WidgetClass:e,widgetPath:r,widgetItem:t,queue:i})}).fail(function(e){c(e,r,t,i)})):console.iatInfo("createWidget:"+t.id+" already initialized")}function a(e,t,i){if(void 0===s.getWidget(e.id)||void 0===s.getState(e.id))s.setState(e.id,Enum.WidgetState.IN_PARSE_QUEUE),t.add(new WidgetItem(e,Enum.WidgetState.IN_PARSE_QUEUE,i));else{var n=s.getState(e.id);n<Enum.WidgetState.IN_PARSE_QUEUE?(s.setState(e.id,Enum.WidgetState.IN_PARSE_QUEUE),t.add(new WidgetItem(e,Enum.WidgetState.IN_PARSE_QUEUE,i))):console.iatInfo("[parse] HTML element already parsed (id="+e.id+"),state="+n)}}var o=!1,l=[];function d(e){l.push(e),o!==!0&&(o=!0,"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,0))}function u(){for(var e=0;e<l.length;e+=1){var t=l[e];n[t.method].call(null,t.WidgetClass,t.widgetPath,t.widgetItem,t.queue)}l=[],o=!1}n.loadWidgetFileSuccess=function(e,t,i,n){if(i.state===Enum.WidgetState.IN_PARSE_QUEUE&&null!==n.elem)try{var r=new e(i.elem,s.getOptions(i.id,!0));r.state=Enum.WidgetState.INITIALIZED,s.addWidget(r),r.dispatchEvent(new CustomEvent(BreaseEvent.WIDGET_INITIALIZED)),r.omitReadyEvent!==!0&&r._defer("_dispatchReady"),n.finishItem(i.id)}catch(a){var o="script error for module "+t.path;s.setState(i.id,Enum.WidgetState.FAILED),console.log(o+" ("+a.message+")"),console.error&&console.error(a.stack),brease.loggerService.log(Enum.EventLoggerId.CLIENT_SCRIPT_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[],o),n.finishItem(i.id)}};function c(e,t,i,n){var r="load error for module "+(t&&t.path?t.path:"undefined")+"("+e+")";s.setState(i.id,Enum.WidgetState.FAILED),console.log(r),brease.loggerService.log(Enum.EventLoggerId.CLIENT_MODULELOADER_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.ERROR,[],r),n.finishItem(i.id)}function g(e,t){var i=t||"["+e+"] target of wrong type";console.iatWarn(i),brease.loggerService.log(Enum.EventLoggerId.CLIENT_PARSE_ERROR,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[],i)}return i}),define("brease/controller/WidgetFactory",["brease/controller/FileManager","brease/core/Utils","brease/events/BreaseEvent","brease/enum/Enum","brease/controller/libs/FactoryUtils","brease/core/libs/Deferred","brease/controller/libs/Queue","brease/controller/WidgetParser"],function(e,Utils,BreaseEvent,Enum,t,Deferred,Queue,i){"use strict";var n={init:function c(e){void 0!==e&&(s=e),i.init(e)},createWidgets:function g(i,n,a,o,c){if(i=t.getElem(i),null!==i){var g=Queue.getQueue(i,"create",!0);g.pending=!0,g.autoParse=a===!1?!1:!0,o=t.ensureContentId(o,i,s.getState(i.id)),g.add(n.filter(d).map(l.bind(null,o,c))),e.loadHTMLFiles(n,g.id,[g,o]).done(r).fail(r)}else u("createWidgets")}},s;function r(e,t){e.pending===!0&&(e.pending=!1,e.start(a,[t]))}function a(e,t){e.run(o).then(function n(s){s.dispatchEvent(new CustomEvent(BreaseEvent.CONTENT_READY)),e.autoParse===!0&&i.parse(s,!1,t)},function s(){console.log("errorHandler:",arguments)})}function o(i,n){var r=i.widgetInfo,a=r.className;if(a){var o=r.id,l=r.content,d=r.options;d||(d={});var c=e.getPathByType(a,"class");s.setOptions(o,d,!1,!0),s.addOption(o,"className",c);var g=e.getHTMLByType(a);if(g){if(i.state===Enum.WidgetState.IN_QUEUE&&null!==n.elem){var h=t.createNode(g,o,d,c,r.HTMLAttributes,l);d.styleClassAdded&&s.addOption(o,"styleClassAdded",!0),r.addBeforeSelector?n.elem.insertBefore(h,document.querySelector(r.addBeforeSelector)):n.elem.appendChild(h),i.state=Enum.WidgetState.INITIALIZED,n.finishItem(r.id)}}else u("_loadHTML","[loadHTML] unknown class ("+a+") name given for widget creation; element[id="+(r.id?r.id:"undefined")+"] not created!"),i.state=Enum.WidgetState.FAILED,n.finishItem(r.id)}else u("_loadHTML","[loadHTML] no class name given for widget creation; element[id="+(r.id?r.id:"undefined")+"] not created!"),i.state=Enum.WidgetState.FAILED,n.finishItem(r.id)}function l(e,i,n){return e&&(n.options?n.options.parentContentId=e:n.options={parentContentId:e}),i&&(n.addBeforeSelector=i),n.id=t.ensureElemId(n.id),{state:Enum.WidgetState.IN_QUEUE,widgetInfo:n,id:n.id}}function d(e){var t=s.getState(e.id)<=Enum.WidgetState.IN_QUEUE;return t||console.iatWarn("filtered out:"+e.id),t}function u(e,t){var i=t||"["+e+"] target of wrong type";console.iatWarn(i),brease.loggerService.log(Enum.EventLoggerId.CLIENT_PARSE_ERROR,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.LOW,Enum.EventLoggerSeverity.WARNING,[],i)}return n}),define("brease/controller/UIController",["brease/controller/WidgetFactory","brease/controller/WidgetParser","brease/core/Utils"],function(e,t,Utils){"use strict";var UIController=function UIController(){},i=UIController.prototype,n,s=function(e,t,i){Utils.defineProperty(e,t,i,!0,!1,void 0!==window.brease&&void 0!==brease.config&&brease.config.mocked===!0)};return i.init=function r(t,i){n=i,n.init(),this.bindingController=t,this.widgetsController={getWidget:n.getWidget,getWidgetsOfContent:n.getWidgetsOfContent,getState:n.getState},e.init(n)},s(i,"setOptions",function a(e,t){n.setOptions(e,t)}),s(i,"allActive",function o(){return this.bindingController.allActive.apply(this.bindingController,arguments)}),s(i,"loadValuesForContent",function l(e,t){var i=this;$.when(this.bindingController.activateContent(e)).then(function n(){"function"==typeof t&&t(),i.bindingController.sendInitialValues(e)})}),s(i,"loadValuesForVirtualContent",function d(e,t,i){var n=this;$.when(this.bindingController.activateVirtualContent(e,i)).then(function s(){"function"==typeof t&&t(),n.bindingController.sendInitialValues(e)})}),s(i,"getSubscriptionsForElement",function u(e){return this.bindingController.getSubscriptionsForElement(e)}),s(i,"parse",function c(){t.parse.apply(t,arguments)}),s(i,"dispose",function g(){n.dispose.apply(n,arguments)}),s(i,"wake",function h(){n.wake.apply(n,arguments)}),s(i,"suspend",function p(){n.suspend.apply(n,arguments)}),s(i,"wakeInContent",function m(){n.wakeInContent.apply(n,arguments)}),s(i,"suspendInContent",function f(){n.suspendInContent.apply(n,arguments)}),s(i,"callWidget",function v(){return n.callWidget.apply(n,arguments)}),s(i,"createWidgets",function b(){e.createWidgets.apply(e,arguments)}),s(i,"findWidgets",function y(){return n.findWidgets.apply(n,arguments)}),s(i,"addWidget",function E(e){if(!e.elem||!e.elem.id)throw new SyntaxError("widget needs property 'elem' with id");n.addWidget(e)}),s(i,"getWidgetState",function x(e){return n.getState(e)}),s(i,"addWidgetOption",function I(e,t,i){n.addOption(e,t,i)}),s(i,"parentWidgetId",function w(e){if(Utils.hasClass(e,"breaseWidget"))return e.id;var t=$(e).parents(".breaseWidget");return t.length>0?t[0].id:brease.appElem.id}),s(i,"createBindings",function C(){return this.bindingController.createBindings.apply(this.bindingController,arguments)}),s(i,"deleteBindings",function S(){return this.bindingController.deleteBindings.apply(this.bindingController,arguments)}),new UIController}),define("brease/core/Class",["brease/core/Utils"],function(Utils){"use strict";var Class=function Class(){this._bound={}};return Class.extend=function(e,t,i){var n=this,s=function(){};if(n["final"])throw new SyntaxError("Class is final and cannot be extended!");s.prototype=n.prototype,e.prototype=new s,e.prototype.constructor=e,e.prototype.superClass=n,null!==t&&(void 0!==n.prototype.defaultSettings?e.prototype.defaultSettings=Utils.extendDeepToNew(n.prototype.defaultSettings,t):e.prototype.defaultSettings=Utils.deepCopy(t)),e.extend=n.extend,e["static"]={},e.defaults={};for(var r in n["static"])e["static"][r]=n["static"][r];return i===!0&&Utils.defineProperty(e,"final",!0,!1),e},Class["static"]={},Class.prototype.dispose=function(){this._bound=null},Class.prototype._bind=function(e){if(null!==this._bound){if("function"==typeof e.bind)void 0===this._bound[e]&&(this._bound[e]=e.bind(this));else{if("function"!=typeof this[e])throw new TypeError("Class.prototype._bind - what is trying to be bound is not callable ("+this.constructor.name+")");void 0===this._bound[e]&&(this._bound[e]=this._handlerProxy.bind(this,e))}return this._bound[e]}return console.iatWarn("trying to bind function on disposed widget"),void 0},Class.prototype._handlerProxy=function(e){var t=arguments.length,i=1;if(t>i){for(var n=[],s=i;t>s;s+=1)n.push(arguments[s]);this[e].apply(this,n)}else this[e].call(this)},Class}),define("brease/core/Decorator",[],function(){"use strict";var Decorator=function Decorator(){};Decorator.TYPE_PRE="pre",Decorator.TYPE_POST="post",Decorator.createDecorator=function(e){var t=function(){};return t.prototype=new Decorator,t.prototype.constructor=t,t.prototype.initType=e===Decorator.TYPE_PRE?Decorator.TYPE_PRE:Decorator.TYPE_POST,t},Decorator.prototype.decorate=function(i,n,s){if(s)for(var r in s)i["static"][r]=$.extend({},i["static"][r],s[r]);var a;for(a in this.methodsToAdd)void 0!==i.prototype[a]?t(i,this.methodsToAdd,a,n,this.initType):"init"===a?e(i,this.methodsToAdd,a,n):i.prototype[a]=this.methodsToAdd[a];for(a in this.addIfNotDefined)void 0===i.prototype[a]&&(i.prototype[a]=this.addIfNotDefined[a]);return i};function e(e,t,i,n){e.prototype[i]=function(){t[i].call(this,n)}}function t(e,t,i,n,s){var r=e.prototype[i];e.prototype[i]=function(){"init"===i?(s===Decorator.TYPE_PRE&&t[i].call(this,n),r.apply(this,arguments),s!==Decorator.TYPE_PRE&&t[i].call(this,n)):(t[i].apply(this,arguments),r.apply(this,arguments))}}return Decorator}),define("brease/decorators/Permissions",["brease/core/Decorator","brease/events/BreaseEvent","brease/core/Utils","brease/enum/Enum"],function(Decorator,BreaseEvent,Utils,Enum){"use strict";var Permissions=function(){this.initType=Decorator.TYPE_PRE},e="roles",t="permissionsChangeHandler";Permissions.prototype=new Decorator;var i=new Permissions;i.methodsToAdd={init:function(i){var s=this;this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:function(){s.dependencies[e].state===Enum.Dependency.ACTIVE&&(s.dependencies[e].stored=brease.user.getUserRoles(),n.call(s,Enum.Dependency.SUSPENDED))},wake:function(){s.dependencies[e].state===Enum.Dependency.SUSPENDED&&(n.call(s,Enum.Dependency.ACTIVE),s.dependencies[e].stored.join(",")!==brease.user.getUserRoles().join(",")&&s[t].call(s));
}},i===!0&&(this._updatePermissions(),n.call(this,Enum.Dependency.ACTIVE))},dispose:function(){this.dependencies[e]=null,r.call(this)}},i.methodsToAdd[t]=function(){this._updatePermissions(!0)},i.methodsToAdd._updatePermissions=function(e){var t=this.constructor["static"].permissions;for(var i in t)this._updatePermission(i,e)},i.methodsToAdd._updatePermission=function(e,t){var i=this.constructor["static"].permissions[e];void 0!==this.settings[i.property]&&(this.settings.permissions[e]=null!==this.settings[i.property]?brease.user.hasOneOfRoles(this.settings[i.property]):!0,t===!0&&this[i.updateMethod].call(this))};function n(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?s.call(this):r.call(this)}function s(){document.body.addEventListener(BreaseEvent.ROLES_CHANGED,this._bind(t))}function r(){document.body.removeEventListener(BreaseEvent.ROLES_CHANGED,this._bind(t))}return i}),define("brease/core/BaseWidget",["brease/core/Class","brease/events/BreaseEvent","brease/config","brease/core/Utils","brease/enum/Enum","brease/core/Types","brease/events/EventHandler","brease/decorators/Permissions","brease/controller/BindingController","brease/controller/FileManager"],function(e,BreaseEvent,config,Utils,Enum,Types,EventHandler,t,i,n){"use strict";var s={enable:!0,editable:!0,visible:!0,omitClass:!1,style:"default",stylePrefix:"",permissions:{view:!0,operate:!0},parentVisibleState:!0,parentEnableState:!0},BaseWidget=e.extend(function BaseWidget(t,i,n){e.call(this),Utils.defineProperty(this,"dependencies",{}),this.events={},this.initialized=!1,void 0!==i&&null!==i?this.settings=Utils.extendDeepToNew(this.defaultSettings,i):this.settings=Utils.deepCopy(this.defaultSettings),this.settings.className=this.constructor.defaults.className,null!==t&&void 0!==t&&(this.elem=t,this.el=$(t)),this.constructor["static"].multitouch===!0&&this.el.attr("data-multitouch","true"),this.isDisabled=!1,this.isHidden=!1,this._cssClasses=brease.config.editMode===!0?["editMode","breaseWidget"]:["breaseWidget"],this._cssUpdates={},n!==!0&&(this.omitReadyEvent=!0,this.init())},s),r=BaseWidget.prototype;r.init=function(e){this.omitReadyEvent=e,this._internalEnable(),this.updateVisibility(!0),Utils.isString(this.settings.position)&&(this._cssUpdates.position=this.settings.position,this._invalidate()),l(this),this.settings.styleClassAdded!==!0&&this.addInitialClass(this.settings.stylePrefix+"_style_"+this.settings.style),this.addClassNames(this._cssClasses),this._initEventHandler(),void 0===this.settings.parentContentId||this.settings.parentContentId===brease.settings.globalContent?this._initialValueHandling():i.isBindingLoaded(this.settings.parentContentId)?this._initialValueHandling(i.getSubscriptionsForElement(this.elem.id)):document.body.addEventListener(BreaseEvent.BINDING_LOADED,this._bind(a))},r.addClassNames=function(e){if(void 0!==this.elem&&e.length>0){var t=this.elem.className;this.elem.className=(""!==t?t+" ":"")+e.join(" ")}this.initialized=!0},r.setStyle=function(e){this.el.removeClass(this.settings.stylePrefix+"_style_"+this.settings.style),this.settings.style=e,this.el.addClass(this.settings.stylePrefix+"_style_"+this.settings.style)},r.getStyle=function(){return this.settings.style},r.resetStyles=function(){this.el.removeClass(this.settings.stylePrefix+"_style_"+this.settings.style);for(var e=0;e<this.elem.classList.length;e+=1)0===this.elem.classList[e].indexOf(this.settings.stylePrefix)&&this.el.removeClass(this.elem.classList[e]);this.settings.style="default",this.el.addClass(this.settings.stylePrefix+"_style_"+this.settings.style)},r._invalidate=function(){this._cssRender()},r._defer=function(e){void 0===this.queue&&(this.queue=[]),-1===this.queue.indexOf(e)&&this.queue.push(e),this._updatePending!==!0&&(this._updatePending=!0,window.setTimeout(this._bind("_processDefered"),0))},r._cssRender=function(){Object.keys(this._cssUpdates).length>0&&(this.el.css(this._cssUpdates),this._cssUpdates={})},r._setCSSUpdate=function(e,t,i,n,config){this.settings[i]=Types.parseValue(this.settings[i],n,config),this._cssUpdates[e]=this.settings[i]+t},r._setWidth=function(e){this.settings.width=e},r._setHeight=function(e){this.settings.height=e},r.deferredInit=function(e,t,i){this.el=$(t).prependTo(e),this.elem=this.el[0],this.init.call(this,i)},r.addInitialClass=function(e){-1===this._cssClasses.indexOf(e)&&this._cssClasses.push(e)},r.removeInitialClass=function(e){var t=this._cssClasses.indexOf(e);-1!==t&&this._cssClasses.splice(t,1)},r.createEvent=function(e,t){if(this.settings.className&&null!==this.elem){if(void 0!==this.events[e])return this.events[e].setEventArgs(t),this.events[e];var i=n.getPathByClass(this.settings.className,"type");return this.events[e]=new EventHandler(i+".Event",this.elem.id,e,t,this.elem),this.events[e]}console.iatWarn("could not create Event")},r.disable=function(){this.isDisabled===!1&&(this.isDisabled=!0,this.initialized!==!0?this.addInitialClass("disabled"):(this.el.addClass("disabled"),this._enableHandler(!1)))},r.enable=function(){this.isDisabled===!0&&(this.isDisabled=!1,this.initialized!==!0?this.removeInitialClass("disabled"):(this.el.removeClass("disabled"),this._enableHandler(!0)))},r.setEnable=function(e){var t=arguments[1];this.settings.enable=Types.parseValue(e,"Boolean"),this._internalEnable();var i=t?t.origin:void 0;"server"!==i&&this.sendValueChange({enable:this.getEnable()});var n=this.createEvent("EnableChanged",{value:this.getEnable()});n&&n.dispatch()},r._enableHandler=function(){},r.setEditable=function(e,t){},r.getEditable=function(){return this.settings.editable},r.getEnable=function(){return this.settings.enable},r.setVisible=function(e){var t=arguments[1];this.settings.visible=Types.parseValue(e,"Boolean"),this.updateVisibility();var i=t?t.origin:void 0;"server"!==i&&this.sendValueChange({visible:this.getVisible()});var n=this.createEvent("VisibleChanged",{value:this.getVisible()});n&&n.dispatch()},r.getVisible=function(){return this.settings.visible},r.getSettings=function(){return this.settings},r.getDefaultSettings=function(){return this.defaultSettings},r.isEnabled=function(){return!this.isDisabled},r.isVisible=function(){return!this.isHidden},r.addEventListener=function(e,t){this.elem&&this.elem.addEventListener(e,t)},r.removeEventListener=function(e,t){this.elem&&this.elem.removeEventListener(e,t)},r.dispatchEvent=function(e){try{this.elem.dispatchEvent(e)}catch(t){console.iatWarn(t.message),console.iatWarn(this.settings.className+"["+(this.elem?this.elem.id:"undefined elem")+"].dispatchEvent("+e.type+"):"+t.message)}},r.suspend=function(){for(var e in this.dependencies)this.dependencies[e].suspend()},r.wake=function(e,t,i){for(var n in this.dependencies)this.dependencies[n].wake(e[n])},r.dispose=function(t){this.queue&&(this.queue.length=0);for(var i in this.events)this.events[i].dispose();this.events=null,this.el.off(),this.el.empty(),document.body.removeEventListener(BreaseEvent.BINDING_LOADED,this._bind(a)),e.prototype.dispose.call(this),document.body.dispatchEvent(new CustomEvent(BreaseEvent.WIDGET_DISPOSE,{detail:{id:this.elem.id,keepBindingInformation:t},bubbles:!0})),this.el.remove(),this.el=null,this.elem=null},r.sendValueChange=function(e){this.dispatchEvent(new CustomEvent(BreaseEvent.ATTRIBUTE_CHANGE,{detail:e,bubbles:!0}))},r.sendNodeChange=function(e){this.dispatchEvent(new CustomEvent(BreaseEvent.NODE_ATTRIBUTE_CHANGE,{detail:e,bubbles:!0}))},r._setChildData=function(e,t,i,n){},r._handleEvent=function(e,t){e.originalEvent&&e.originalEvent.preventDefault(),(this.isDisabled===!0||t===!0)&&e.stopImmediatePropagation()},r._dispatchReady=function(){this.state=Enum.WidgetState.READY,this.dispatchEvent(new CustomEvent(BreaseEvent.WIDGET_READY,{detail:{widgetType:this.settings.className},bubbles:!0}))},r._initEventHandler=function(){this.el&&this.el.on(BreaseEvent.CLICK,this._bind("_clickHandler"))},r._clickHandler=function(e){if(!this.isDisabled){var t=this.createEvent("Click",{origin:brease.uiController.parentWidgetId(e.target)});t.dispatch(!1)}},r._internalEnable=function(){this.settings.enable!==!0||this.settings.editable!==!0||this.settings.permissions.operate!==!0||this.settings.parentEnableState!==!0?this.disable():this.enable()},r.updateVisibility=function(e){o.call(this,this.settings.visible,this.settings.permissions.view,this.settings.parentVisibleState,brease.config.editMode,e)},r.setParentVisibleState=function(e){this.settings.parentVisibleState=e,this.updateVisibility()},r.setParentEnableState=function(e){this.settings.parentEnableState=e,this._internalEnable()},r._processDefered=function(){this._updatePending=!1;for(var e=0,t=this.queue.length;t>e;e+=1)this[this.queue[e]].call(this);this.queue.length=0},r._initialValueHandling=function(e){this.bindings=e};function a(e){e.detail.contentId===this.settings.parentContentId&&(document.body.removeEventListener(BreaseEvent.BINDING_LOADED,this._bind(a)),this._initialValueHandling(i.getSubscriptionsForElement(this.elem.id)))}function o(e,t,i,n,s){n!==!0&&(e!==!0||t!==!0||i!==!0?(s?this.addInitialClass("remove"):this.el.addClass("remove"),this.isHidden=!0):s||(this.el.removeClass("remove"),this.isHidden=!1))}function l(e){e.settings.stylePrefix||(void 0===e.constructor.defaults.stylePrefix&&(e.constructor.defaults.stylePrefix=n.getPathByClass(e.settings.className,"style")),e.settings.stylePrefix=e.constructor.defaults.stylePrefix)}return t.decorate(BaseWidget,brease.config.editMode!==!0,{permissions:{view:{property:"permissionView",updateMethod:"updateVisibility"},operate:{property:"permissionOperate",updateMethod:"_internalEnable"}}}),BaseWidget}),define("brease/core/ContainerWidget",["brease/core/BaseWidget","brease/events/BreaseEvent"],function(e,BreaseEvent){"use strict";var t={},i=e.extend(function ContainerWidget(){e.apply(this,arguments)},t),n=i.prototype;i.widgetAddedHandler="widgetAddedHandler",i.widgetRemovedHandler="widgetRemovedHandler",n.init=function(){this.el.wrapInner('<div class="container" />'),this.getContainer(),s.call(this),e.prototype.init.apply(this,arguments),this.debouncedRefresh=_.debounce(this._refresh.bind(this),100)},n.disable=function(){e.prototype.disable.apply(this,arguments),this.initialized!==!0&&a(this.getContainer()).each(function(){null===brease.uiController.callWidget(this.id,"setParentEnableState",!1)&&brease.uiController.addWidgetOption(this.id,"parentEnableState",!1)})},n._enableHandler=function(){e.prototype._enableHandler.apply(this,arguments);var t=this.isDisabled;a(this.getContainer()).each(function(){brease.uiController.callWidget(this.id,"setParentEnableState",!t)})},n.updateVisibility=function(){var t=this.isHidden;e.prototype.updateVisibility.apply(this,arguments),this.isHidden!==t&&(t=this.isHidden,a(this.getContainer()).each(function(){brease.uiController.callWidget(this.id,"setParentVisibleState",!t)})),this.elem.dispatchEvent(new CustomEvent(BreaseEvent.VISIBILITY_CHANGED,{bubbles:!1,detail:{visible:!this.isHidden}}))},n.visibilityChangeHandler=function(e){this.scroller&&($.contains(e.target,this.elem)||e.target===this.elem||$.contains(this.elem,e.target))&&this.debouncedRefresh()},n._refresh=function(){this.scroller&&!this.isHidden&&this.scroller.refresh()},n.dispose=function(){r.call(this),e.prototype.dispose.apply(this,arguments)},n.wake=function(){e.prototype.wake.apply(this,arguments),document.body.addEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0)},n.suspend=function(){document.body.removeEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0),e.prototype.suspend.apply(this,arguments)},n.getContainer=function(){return void 0===this.container&&(this.container=this.el.find(">.container")),this.container},n[i.widgetAddedHandler]=function(){},n[i.widgetRemovedHandler]=function(){};function s(){brease.config.editMode===!0&&(this.elem.addEventListener(BreaseEvent.WIDGET_ADDED,this._bind(i.widgetAddedHandler)),this.elem.addEventListener(BreaseEvent.WIDGET_REMOVED,this._bind(i.widgetRemovedHandler))),document.body.addEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0)}function r(){brease.config.editMode===!0&&(this.elem.removeEventListener(BreaseEvent.WIDGET_ADDED,this._bind(i.widgetAddedHandler)),this.elem.removeEventListener(BreaseEvent.WIDGET_REMOVED,this._bind(i.widgetRemovedHandler))),document.body.removeEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind("visibilityChangeHandler"),!0)}function a(e){var t=e.find("[data-brease-widget]");return t.length>0&&(t=t.first().parent().children("[data-brease-widget]")),t}return i}),define("brease/core/designer/BaseWidget/ClassExtension",["brease/core/Utils"],function(Utils){"use strict";var ClassExtension={extend:function(t){if("BaseWidget"===t.name){e(t);var i=t.prototype;i.isRotatable=function(){return!0},i.isMovable=function(){return!0},i.isResizable=function(){return!0},i.getHandles=function(){return[]};var n=i.init;i.init=function(){var e=this,t=e.constructor.meta;this.designer={isRotatable:function(){return e.isRotatable.apply(e,arguments)},isMovable:function(){return e.isMovable.apply(e,arguments)},isResizable:function(){return e.isResizable.apply(e,arguments)},getHandles:function(){return e.getHandles.apply(e,arguments)},allowsChild:function(e){if(!Utils.isWidget(e))throw new SyntaxError("argument has to be of type Widget");var i=t.children,n=e.constructor.meta.inheritance;if(-1!==i.indexOf("*"))return!0;for(var s=!1,r=0;r<n.length;r+=1)if(-1!==i.indexOf(n[r])){s=!0;break}return s},isAllowedIn:function(e){if(!Utils.isWidget(e))throw new SyntaxError("argument has to be of type Widget");var i=t.parents,n=e.constructor.meta.className;return Array.isArray(i)?-1!==i.indexOf("*")||-1!==i.indexOf(n):(console.warn("Meta data of "+e.elem.id+" missing!"),!1)},isAllowedInContent:function(){var e=t.parents,i="system.brease.Content";return Array.isArray(e)?-1!==e.indexOf("*")||-1!==e.indexOf(i):void 0}},n.apply(this,arguments)}}}};function e(e){e["static"].getInitialProperties=function(e,t){return{left:e,top:t}}}return ClassExtension}),define("brease/core/designer/BaseWidget/ClassInfo",["brease/core/designer/BaseWidget/ClassExtension"],function(e){"use strict";return{}}),define("brease/core/designer/Brease/ClassExtension",["brease/core/Utils"],function(Utils){"use strict";var e={isWidgetAllowedIn:function(e,r,a){var o=$.Deferred(),l=s(e,!1,!0)+"/designer/ClassInfo.js",d=s(r,!1,!0)+"/designer/ClassInfo.js";return require([l,d],function(e,s){t(o,a,i(s.meta,e.meta)&&n(e.meta,s.meta))}),o.promise()},getInitialProperties:function(e,i,n,r){var a=$.Deferred(),o=s(n,!1),l=s(n,!1,!0)+"/designer/ClassInfo.js";return require([o,l],function(n,s){s.classExtension&&n.extended!==!0&&s.classExtension.extend(n);var o=n["static"].getInitialProperties(e,i);t(a,r,o)}),a.promise()},className2Path:function(e,t,i){return s.apply(null,arguments)}};function t(e,t,i){Utils.isFunction(t)&&t(i),e.resolve(i)}function i(e,t){var i=e.children,n=t.inheritance;if(-1!==i.indexOf("*"))return!0;for(var s=!1,r=0;r<n.length;r+=1)if(-1!==i.indexOf(n[r])){s=!0;break}return s}function n(e,t){var i=e.parents,n=t.className,s=-1!==i.indexOf("*"),r=-1!==i.indexOf(n),a=!1;if(t.isDerived===!0){var o=t.inheritance[1];a=-1!==i.indexOf(o)}return s||r||a}function s(e,t,i){var n=e;return i!==!0&&0!==e.indexOf("brease")&&(n+=n.substring(n.lastIndexOf("."))),(-1!==e.indexOf("BaseWidget")||-1!==e.indexOf("ContainerWidget"))&&(n=n.substring(0,n.lastIndexOf("."))),n=n.replace(/\./g,"/"),t===!0&&-1===n.indexOf(".js")&&(n+=".js"),n}return{extend:function(brease){brease.designer=e}}}),define("brease/core/designer/ContainerWidget/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e){"use strict";return{}}),define("brease/core/libs/Extensions",[],function(){"use strict";var Extensions={originalConsole:window.console,console:{init:function(config){config.storageLog&&(console.log=function(){try{throw new Error("LogError")}catch(e){var i=e.stack.split("\n"),n=i[2].substring(i[2].lastIndexOf("/")+1),s=n.split(":");t.call(null,"log",Date.now(),arguments[0],s[0],s[1],arguments[1])}},console.debug=function(){try{throw new Error("LogError")}catch(e){var i=e.stack.split("\n"),n=i[2].substring(i[2].lastIndexOf("/")+1),s=n.split(":");t.call(null,"debug",Date.now(),arguments[0],s[0],s[1],"#0000ff")}},console.warn=function(){try{throw new Error("LogError")}catch(e){var i=e.stack.split("\n"),n=i[2].substring(i[2].lastIndexOf("/")+1),s=n.split(":");t.call(null,"warn",Date.now(),arguments[0],s[0],s[1],"#000","#fffbe6")}}),config.warn===!0?(console.iatWarn=console.warn,console.iatInfo=console.info):(console.iatWarn=function(){},console.iatInfo=function(){}),config.debug===!0?(console.iatDebug=console.debug,console.iatDebugLog=console.log):(console.iatDebug=function(){},console.iatDebugLog=function(){}),console.always=function(e,t,i){console[t]||(t="log");var n=[(i?"%c":"")+e];void 0!==i&&n.push(i),console[t].apply(console,n)},console.color=function(e,t){console.log.call(console,"%c"+e,"color:"+t+";")}}}},e=!0;function t(){var t=localStorage.getItem("log");t=e?i.apply(null,arguments):t+"|#|"+i.apply(null,arguments),e=!1,localStorage.setItem("log",t)}function i(e,t,i,s,r,a,o){var l={type:e,time:t,message:0===i.indexOf("%c")?i.substring(2):i,file:s,line:r,color:a?n(a):"#000",backColor:o?o:"transparent"};return JSON.stringify(l)}function n(e){return e.indexOf&&-1!==e.indexOf("color:")?e.substring(e.indexOf(":")+1):e}return Math.range=function(e,t,i){return t>e&&(e=t),e>i&&(e=i),e},Math.roundTo=function(e,t){var i=Math.pow(10,t);return isNaN(i)?NaN:Math.round(e*i)/i},Math.log10=Math.log10||function(e){return Math.log(e)/Math.LN10},Extensions}),define("brease/datatype/Node",["brease/core/Utils"],function(Utils){"use strict";var Node=function(t,i,n,s,r){e+=1,this.id=void 0!==r?r+"":"brease_node_"+e,this.setUnit(i),this.setValue(t),this.setMinValue(n),this.setMaxValue(s)},e=0,t=Node.prototype;return t.toJSON=function(){return{value:this.value,id:this.id,unit:this.unit?this.unit:null,minValue:this.minValue,maxValue:this.maxValue}},t.setId=function(e){void 0!==e&&(this.id=e+"")},t.getId=function(){return this.id},t.setUnit=function(e){this.unit=void 0!==e&&null!==e?e+"":null},t.getUnit=function(){return this.unit},t.setMinValue=function(e){this.minValue=Utils.isNumeric(e)&&!Array.isArray(e)?Number(e):null},t.getMinValue=function(){return this.minValue},t.setMaxValue=function(e){this.maxValue=Utils.isNumeric(e)&&!Array.isArray(e)?Number(e):null},t.getMaxValue=function(){return this.maxValue},t.setValue=function(e){this.value=Utils.isNumeric(e)&&!Array.isArray(e)?Number(e):null},t.getValue=function(){return this.value},Node}),define("brease/datatype/ArrayNode",["brease/datatype/Node"],function(Node){"use strict";var ArrayNode=function ArrayNode(t,i,n,s,r){e+=1,this.id=void 0!==r?r:"brease_arrayNode_"+e,this.setUnit(i),this.setValue(t),this.setMinValue(n),this.setMaxValue(s)},e=0,t=ArrayNode.prototype=new Node;return t.setValue=function(e){if(Array.isArray(e)!==!0)throw new TypeError("value has to be of type Array");this.value=e},ArrayNode}),define("brease/decorators/CultureDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var CultureDependency=function(){this.initType=Decorator.TYPE_PRE},e="culture",t="cultureChangeHandler";CultureDependency.prototype=new Decorator,CultureDependency.prototype.constructor=CultureDependency;var i=new CultureDependency;i.methodsToAdd={init:function(s){if(void 0===this[t])throw new Error("widget »"+this.elem.id+'«: decoration with "'+i.constructor.name+'" requires method "'+t+'"');var r=this;this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:function(){r.dependencies[e].state===Enum.Dependency.ACTIVE&&(r.dependencies[e].stored=brease.culture.getCurrentCulture().key,n.call(r,Enum.Dependency.SUSPENDED))},wake:function(i){r.dependencies[e].state===Enum.Dependency.SUSPENDED&&(n.call(r,Enum.Dependency.ACTIVE),r.dependencies[e].stored!==brease.culture.getCurrentCulture().key&&r[t].call(r,i))}},s===!0&&this.setCultureDependency(s)},setCultureDependency:function(e){e===!0?n.call(this,Enum.Dependency.ACTIVE):n.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,r.call(this)}};function n(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?s.call(this):r.call(this)}function s(){document.body.addEventListener(BreaseEvent.CULTURE_CHANGED,this._bind(t))}function r(){document.body.removeEventListener(BreaseEvent.CULTURE_CHANGED,this._bind(t))}return i}),define("brease/decorators/LanguageDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var LanguageDependency=function LanguageDependency(){this.initType=Decorator.TYPE_PRE},e="language",t="langChangeHandler";LanguageDependency.prototype=new Decorator,LanguageDependency.prototype.constructor=LanguageDependency;var i=new LanguageDependency;i.methodsToAdd={init:function(s){if(void 0===this[t])throw new Error("widget »"+this.elem.id+'«: decoration with "'+i.constructor.name+'" requires method "'+t+'"');var r=this;this.dependencies[e]={state:Enum.Dependency.INACTIVE,stored:{},suspend:function(){r.dependencies[e].state===Enum.Dependency.ACTIVE&&(r.dependencies[e].stored.key=brease.language.getCurrentLanguage(),r.dependencies[e].stored.version=brease.language.getCurrentVersion(),n.call(r,Enum.Dependency.SUSPENDED))},wake:function(i){r.dependencies[e].state===Enum.Dependency.SUSPENDED&&(n.call(r,Enum.Dependency.ACTIVE),(r.dependencies[e].stored.key!==brease.language.getCurrentLanguage()||r.dependencies[e].stored.version!==brease.language.getCurrentVersion())&&r[t].call(r,i))}},s===!0&&this.setLangDependency(s)},setLangDependency:function(e){e===!0?n.call(this,Enum.Dependency.ACTIVE):n.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,r.call(this)}};function n(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?s.call(this):r.call(this)}function s(){document.body.addEventListener(BreaseEvent.LANGUAGE_CHANGED,this._bind(t))}function r(){document.body.removeEventListener(BreaseEvent.LANGUAGE_CHANGED,this._bind(t))}return i}),define("brease/decorators/MeasurementSystemDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var MeasurementSystemDependency=function(){this.initType=Decorator.TYPE_PRE},e="mms",t="measurementSystemChangeHandler";MeasurementSystemDependency.prototype=new Decorator,MeasurementSystemDependency.prototype.constructor=MeasurementSystemDependency;var i=new MeasurementSystemDependency;i.methodsToAdd={init:function(s){if(void 0===this[t])throw new Error("widget »"+this.elem.id+'«: decoration with "'+i.constructor.name+'" requires method "'+t+'"');var r=this;this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:function(){r.dependencies[e].state===Enum.Dependency.ACTIVE&&(r.dependencies[e].stored=brease.measurementSystem.getCurrentMeasurementSystem(),n.call(r,Enum.Dependency.SUSPENDED))},wake:function(i){r.dependencies[e].state===Enum.Dependency.SUSPENDED&&(n.call(r,Enum.Dependency.ACTIVE),r.dependencies[e].stored!==brease.measurementSystem.getCurrentMeasurementSystem()&&r[t].call(r,i))}},s===!0&&this.setMeasurementSystemDependency(s)},setMeasurementSystemDependency:function(e){e===!0?n.call(this,Enum.Dependency.ACTIVE):n.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,r.call(this)}};function n(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?s.call(this):r.call(this)}function s(){document.body.addEventListener(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,this._bind(t))}function r(){document.body.removeEventListener(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,this._bind(t))}return i}),define("brease/decorators/UserDependency",["brease/core/Decorator","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,BreaseEvent,Enum){"use strict";var UserDependency=function UserDependency(){this.initType=Decorator.TYPE_PRE},e="user",t="userChangeHandler";UserDependency.prototype=new Decorator,UserDependency.prototype.constructor=UserDependency;var i=new UserDependency;i.methodsToAdd={init:function(s){if(void 0===this[t])throw new Error("widget »"+this.elem.id+'«: decoration with "'+i.constructor.name+'" requires method "'+t+'"');var r=this;this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:function(){r.dependencies[e].state===Enum.Dependency.ACTIVE&&(r.dependencies[e].stored=brease.user.getCurrentUser().userID,n.call(r,Enum.Dependency.SUSPENDED))},wake:function(i){r.dependencies[e].state===Enum.Dependency.SUSPENDED&&(n.call(r,Enum.Dependency.ACTIVE),r.dependencies[e].stored!==brease.user.getCurrentUser().userID&&r[t].call(r,i))}},s===!0&&this.setUserDependency(s)},setUserDependency:function(e){e===!0?n.call(this,Enum.Dependency.ACTIVE):n.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,r.call(this)}};function n(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?s.call(this):r.call(this)}function s(){document.body.addEventListener(BreaseEvent.USER_CHANGED,this._bind(t))}function r(){document.body.removeEventListener(BreaseEvent.USER_CHANGED,this._bind(t))}return i}),define("brease/decorators/VisibilityDependency",["brease/core/Decorator","brease/core/Utils","brease/events/BreaseEvent","brease/enum/Enum"],function(Decorator,Utils,BreaseEvent,Enum){"use strict";var e="visibility",t="visibilityChangeHandler",i=100,n=Decorator.createDecorator(Decorator.TYPE_PRE),s=new n;s.methodsToAdd={init:function(t){var n=this;this.dependencies[e]={state:Enum.Dependency.INACTIVE,suspend:function(){n.dependencies[e].state===Enum.Dependency.ACTIVE&&r.call(n,Enum.Dependency.SUSPENDED)},wake:function(){n.dependencies[e].state===Enum.Dependency.SUSPENDED&&r.call(n,Enum.Dependency.ACTIVE)}},t===!0&&this.setVisibilityDependency(t),this.debouncedRefresh=_.debounce(this._refreshScroller.bind(this),i)},setVisibilityDependency:function(e){e===!0?r.call(this,Enum.Dependency.ACTIVE):r.call(this,Enum.Dependency.INACTIVE)},dispose:function(){this.dependencies[e]=null,o.call(this)}},s.methodsToAdd[t]=function(e){Utils.elemContains(e.target,this.elem)&&this.debouncedRefresh()},s.addIfNotDefined={_refreshScroller:function(){this.scroller&&"function"==typeof this.scroller.refresh&&!this.isHidden&&this.scroller.refresh()}};function r(t){this.dependencies[e].state=t,t===Enum.Dependency.ACTIVE?a.call(this):o.call(this)}function a(){document.body.addEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind(t),!0)}function o(){document.body.removeEventListener(BreaseEvent.VISIBILITY_CHANGED,this._bind(t),!0)}return s}),define("brease/events/EventDispatcher",["brease/core/Utils"],function(Utils){"use strict";var EventDispatcher=function EventDispatcher(){Utils.defineProperty(this,"_listeners",{},!1,!1,!0)},e=EventDispatcher.prototype;return e.addEventListener=function(e,t,i){var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&(i===!0?n[e].unshift(t):n[e].push(t))},e.hasEventListener=function(e,t){var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)?!0:!1},e.hasListenersOfType=function(e){var t=this._listeners;return void 0!==t&&void 0!==t[e]&&t[e].length>0},e.removeEventListener=function(e,t){var i=this._listeners;if(i[e]){var n=i[e].indexOf(t);-1!==n&&i[e].splice(n,1)}},e.dispatchEvent=function(e,t){var i=this._listeners[void 0!==t?t:e.type];if(void 0!==i)for(var n=0,s=i.length;s>n;n+=1)i[n].call(this,e)},EventDispatcher}),function(e,t){var i,n,s,r,a,o,l,d,u,c,g,h,p,m,f,v,b,y,E,x,I,w,C,S;i=function(e){return new i.prototype.init(e)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:e.Globalize=i,i.cultures={},i.prototype={constructor:i,init:function(e){return this.cultures=i.cultures,this.cultureSelector=e,this}},i.prototype.init.prototype=i.prototype,i.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},i.cultures["default"].calendar=i.cultures["default"].calendars.standard,i.cultures.en=i.cultures["default"],i.cultureSelector="en",n=/^0x[a-f0-9]+$/i,s=/^[+\-]?infinity$/i,r=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,a=/^\s+|\s+$/g,o=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;n>i;i++)if(e[i]===t)return i;return-1},l=function(e,t){return e.substr(e.length-t.length)===t},d=function(){var e,i,n,s,r,a,o=arguments[0]||{},l=1,h=arguments.length,p=!1;for("boolean"==typeof o&&(p=o,o=arguments[1]||{},l=2),"object"==typeof o||c(o)||(o={});h>l;l++)if(null!=(e=arguments[l]))for(i in e)n=o[i],s=e[i],o!==s&&(p&&s&&(g(s)||(r=u(s)))?(r?(r=!1,a=n&&u(n)?n:[]):a=n&&g(n)?n:{},o[i]=d(p,a,s)):s!==t&&(o[i]=s));return o},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(e){return"[object Function]"===Object.prototype.toString.call(e)},g=function(e){return"[object Object]"===Object.prototype.toString.call(e)},h=function(e,t){return 0===e.indexOf(t)},p=function(e){return(e+"").replace(a,"")},m=function(e){return isNaN(e)?NaN:Math[0>e?"ceil":"floor"](e)},f=function(e,t,i){var n;for(n=e.length;t>n;n+=1)e=i?"0"+e:e+"0";return e},v=function(e,t){for(var i=0,n=!1,s=0,r=e.length;r>s;s++){var a=e.charAt(s);switch(a){case"'":n?t.push("'"):i++,n=!1;break;case"\\":n&&t.push("\\"),n=!n;break;default:t.push(a),n=!1}}return i},b=function(e,t){t=t||"F";var i,n=e.patterns,s=t.length;if(1===s){if(i=n[t],!i)throw"Invalid date format string '"+t+"'.";t=i}else 2===s&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},y=function(e,t,i){var n=i.calendar,s=n.convert,r;if(!t||!t.length||"i"===t){if(i&&i.name.length)if(s)r=y(e,n.patterns.F,i);else{var a=new Date(e.getTime()),o=I(e,n.eras);a.setFullYear(w(e,n,o)),r=a.toLocaleString()}else r=e.toString();return r}var l=n.eras,d="s"===t;t=b(n,t),r=[];var u,c=["0","00","000"],g,h,p=/([^d]|^)(d|dd)([^d]|$)/g,m=0,f=x(),E;function C(e,t){var i,n=e+"";return t>1&&n.length<t?(i=c[t-2]+n,i.substr(i.length-t,t)):(i=n,i)}function S(){return g||h?g:(g=p.test(t),h=!0,g)}function T(e,t){if(E)return E[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}for(!d&&s&&(E=s.fromGregorian(e));;){var A=f.lastIndex,D=f.exec(t),_=t.slice(A,D?D.index:t.length);if(m+=v(_,r),!D)break;if(m%2)r.push(D[0]);else{var L=D[0],N=L.length;switch(L){case"ddd":case"dddd":var P=3===N?n.days.namesAbbr:n.days.names;r.push(P[e.getDay()]);break;case"d":case"dd":g=!0,r.push(C(T(e,2),N));break;case"MMM":case"MMMM":var O=T(e,1);r.push(n.monthsGenitive&&S()?n.monthsGenitive[3===N?"namesAbbr":"names"][O]:n.months[3===N?"namesAbbr":"names"][O]);break;case"M":case"MM":r.push(C(T(e,1)+1,N));break;case"y":
case"yy":case"yyyy":O=E?E[0]:w(e,n,I(e,l),d),4>N&&(O%=100),r.push(C(O,N));break;case"h":case"hh":u=e.getHours()%12,0===u&&(u=12),r.push(C(u,N));break;case"H":case"HH":r.push(C(e.getHours(),N));break;case"m":case"mm":r.push(C(e.getMinutes(),N));break;case"s":case"ss":r.push(C(e.getSeconds(),N));break;case"t":case"tt":O=e.getHours()<12?n.AM?n.AM[0]:" ":n.PM?n.PM[0]:" ",r.push(1===N?O.charAt(0):O);break;case"f":case"ff":case"fff":r.push(C(e.getMilliseconds(),3).substr(0,N));break;case"z":case"zz":u=e.getTimezoneOffset()/60,r.push((0>=u?"+":"-")+C(Math.floor(Math.abs(u)),N));break;case"zzz":u=e.getTimezoneOffset()/60,r.push((0>=u?"+":"-")+C(Math.floor(Math.abs(u)),2)+":"+C(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":n.eras&&r.push(n.eras[I(e,l)].name);break;case"/":r.push(n["/"]);break;default:throw"Invalid date format pattern '"+L+"'."}}}return r.join("")},function(){var e;e=function(e,t,i){var n=i.groupSizes,s=n[0],r=1,a=Math.pow(10,t),o=Math.round(e*a)/a;isFinite(o)||(o=e),e=o;var l=e+"",d="",u=l.split(/e/i),c=u.length>1?parseInt(u[1],10):0;l=u[0],u=l.split("."),l=u[0],d=u.length>1?u[1]:"",c>0?(d=f(d,c,!1),l+=d.slice(0,c),d=d.substr(c)):0>c&&(c=-c,l=f(l,c+1,!0),d=l.slice(-c,l.length)+d,l=l.slice(0,-c)),d=t>0?i["."]+(d.length>t?d.slice(0,t):f(d,t)):"";for(var g=l.length-1,h=i[","],p="";g>=0;){if(0===s||s>g)return l.slice(0,g+1)+(p.length?h+p+d:d);p=l.slice(g-s+1,g+1)+(p.length?h+p:""),g-=s,r<n.length&&(s=n[r],r++)}return l.slice(0,g+1)+h+p+d},E=function(t,i,n){if(!isFinite(t))return t===1/0?n.numberFormat.positiveInfinity:t===-(1/0)?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!i||"i"===i)return n.name.length?t.toLocaleString():t.toString();i=i||"D";var s=n.numberFormat,r=Math.abs(t),a=-1,o;i.length>1&&(a=parseInt(i.slice(1),10));var l=i.charAt(0).toUpperCase(),d;switch(l){case"D":o="n",r=m(r),-1!==a&&(r=f(""+r,a,!0)),0>t&&(r="-"+r);break;case"N":d=s;case"C":d=d||s.currency;case"P":d=d||s.percent,o=0>t?d.pattern[0]:d.pattern[1]||"n",-1===a&&(a=d.decimals),r=e(r*("P"===l?100:1),a,d);break;default:throw"Bad number format specifier: "+l}for(var u=/n|\$|-|%/g,c="";;){var g=u.lastIndex,h=u.exec(o);if(c+=o.slice(g,h?h.index:o.length),!h)break;switch(h[0]){case"n":c+=r;break;case"$":c+=s.currency.symbol;break;case"-":/[1-9]/.test(r)&&(c+=s["-"]);break;case"%":c+=s.percent.symbol}}return c}}(),x=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},I=function(e,t){if(!t)return 0;for(var i,n=e.getTime(),s=0,r=t.length;r>s;s++)if(i=t[s].start,null===i||n>=i)return s;return 0},w=function(e,t,i,n){var s=e.getFullYear();return!n&&t.eras&&(s-=t.eras[i].offset),s},function(){var e,t,i,n,s,r,a;e=function(e,t){if(100>t){var i=new Date,n=I(i),s=w(i,e,n),r=e.twoDigitYearMax;r="string"==typeof r?(new Date).getFullYear()%100+parseInt(r,10):r,t+=s-s%100,t>r&&(t-=100)}return t},t=function(e,t,i){var n,s=e.days,l=e._upperDays;return l||(e._upperDays=l=[a(s.names),a(s.namesAbbr),a(s.namesShort)]),t=r(t),i?(n=o(l[1],t),-1===n&&(n=o(l[2],t))):n=o(l[0],t),n},i=function(e,t,i){var n=e.months,s=e.monthsGenitive||e.months,l=e._upperMonths,d=e._upperMonthsGen;l||(e._upperMonths=l=[a(n.names),a(n.namesAbbr)],e._upperMonthsGen=d=[a(s.names),a(s.namesAbbr)]),t=r(t);var u=o(i?l[1]:l[0],t);return 0>u&&(u=o(i?d[1]:d[0],t)),u},n=function(e,t){var i=e._parseRegExp;if(i){var n=i[t];if(n)return n}else e._parseRegExp=i={};for(var s=b(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),r=["^"],a=[],o=0,l=0,d=x(),u;null!==(u=d.exec(s));){var c=s.slice(o,u.index);if(o=d.lastIndex,l+=v(c,r),l%2)r.push(u[0]);else{var g=u[0],h=g.length,p;switch(g){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":p="(\\D+)";break;case"tt":case"t":p="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":p="(\\d{"+h+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":p="(\\d\\d?)";break;case"zzz":p="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":p="([+-]?\\d\\d?)";break;case"/":p="(\\/)";break;default:throw"Invalid date format pattern '"+g+"'."}p&&r.push(p),a.push(u[0])}}v(s.slice(o),r),r.push("$");var m=r.join("").replace(/\s+/g,"\\s+"),f={regExp:m,groups:a};return i[t]=f},s=function(e,t,i){return t>e||e>i},r=function(e){return e.split(" ").join(" ").toUpperCase()},a=function(e){for(var t=[],i=0,n=e.length;n>i;i++)t[i]=r(e[i]);return t},C=function(r,a,o){r=p(r);var l=o.calendar,d=n(l,a),u=new RegExp(d.regExp).exec(r);if(null===u)return null;for(var c=d.groups,g=null,m=null,f=null,v=null,b=null,y=0,E,x=0,I=0,w=0,C=null,S=!1,T=0,A=c.length;A>T;T++){var D=u[T+1];if(D){var _=c[T],L=_.length,N=parseInt(D,10);switch(_){case"dd":case"d":if(v=N,s(v,1,31))return null;break;case"MMM":case"MMMM":if(f=i(l,D,3===L),s(f,0,11))return null;break;case"M":case"MM":if(f=N-1,s(f,0,11))return null;break;case"y":case"yy":case"yyyy":if(m=4>L?e(l,N):N,s(m,0,9999))return null;break;case"h":case"hh":if(y=N,12===y&&(y=0),s(y,0,11))return null;break;case"H":case"HH":if(y=N,s(y,0,23))return null;break;case"m":case"mm":if(x=N,s(x,0,59))return null;break;case"s":case"ss":if(I=N,s(I,0,59))return null;break;case"tt":case"t":if(S=l.PM&&(D===l.PM[0]||D===l.PM[1]||D===l.PM[2]),!S&&(!l.AM||D!==l.AM[0]&&D!==l.AM[1]&&D!==l.AM[2]))return null;break;case"f":case"ff":case"fff":if(w=N*Math.pow(10,3-L),s(w,0,999))return null;break;case"ddd":case"dddd":if(b=t(l,D,3===L),s(b,0,6))return null;break;case"zzz":var P=D.split(/:/);if(2!==P.length)return null;if(E=parseInt(P[0],10),s(E,-12,13))return null;var O=parseInt(P[1],10);if(s(O,0,59))return null;C=60*E+(h(D,"-")?-O:O);break;case"z":case"zz":if(E=N,s(E,-12,13))return null;C=60*E;break;case"g":case"gg":var B=D;if(!B||!l.eras)return null;B=p(B.toLowerCase());for(var k=0,M=l.eras.length;M>k;k++)if(B===l.eras[k].name.toLowerCase()){g=k;break}if(null===g)return null}}}var R=new Date,H,V=l.convert;if(H=V?V.fromGregorian(R)[0]:R.getFullYear(),null===m?m=H:l.eras&&(m+=l.eras[g||0].offset),null===f&&(f=0),null===v&&(v=1),V){if(R=V.toGregorian(m,f,v),null===R)return null}else{if(R.setFullYear(m,f,v),R.getDate()!==v)return null;if(null!==b&&R.getDay()!==b)return null}if(S&&12>y&&(y+=12),R.setHours(y,x,I,w),null!==C){var W=R.getMinutes()-(C+R.getTimezoneOffset());R.setHours(R.getHours()+parseInt(W/60,10),W%60)}return R}}(),S=function(e,t,i){var n=t["-"],s=t["+"],r;switch(i){case"n -":n=" "+n,s=" "+s;case"n-":l(e,n)?r=["-",e.substr(0,e.length-n.length)]:l(e,s)&&(r=["+",e.substr(0,e.length-s.length)]);break;case"- n":n+=" ",s+=" ";case"-n":h(e,n)?r=["-",e.substr(n.length)]:h(e,s)&&(r=["+",e.substr(s.length)]);break;case"(n)":h(e,"(")&&l(e,")")&&(r=["-",e.substr(1,e.length-2)])}return r||["",e]},i.prototype.findClosestCulture=function(e){return i.findClosestCulture.call(this,e)},i.prototype.format=function(e,t,n){return i.format.call(this,e,t,n)},i.prototype.localize=function(e,t){return i.localize.call(this,e,t)},i.prototype.parseInt=function(e,t,n){return i.parseInt.call(this,e,t,n)},i.prototype.parseFloat=function(e,t,n){return i.parseFloat.call(this,e,t,n)},i.prototype.culture=function(e){return i.culture.call(this,e)},i.addCultureInfo=function(e,t,i){var n={},s=!1;"string"!=typeof e?(i=e,e=this.culture().name,n=this.cultures[e]):"string"!=typeof t?(i=t,s=null==this.cultures[e],n=this.cultures[e]||this.cultures["default"]):(s=!0,n=this.cultures[t]),this.cultures[e]=d(!0,{},n,i),s&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},i.findClosestCulture=function(e){var t;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if("string"==typeof e&&(e=e.split(",")),u(e)){var i,n=this.cultures,s=e,r,a=s.length,o=[];for(r=0;a>r;r++){e=p(s[r]);var l,d=e.split(";");i=p(d[0]),1===d.length?l=1:(e=p(d[1]),0===e.indexOf("q=")?(e=e.substr(2),l=parseFloat(e),l=isNaN(l)?0:l):l=1),o.push({lang:i,pri:l})}for(o.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),r=0;a>r;r++)if(i=o[r].lang,t=n[i],t)return t;for(r=0;a>r;r++)for(i=o[r].lang;;){var c=i.lastIndexOf("-");if(-1===c)break;if(i=i.substr(0,c),t=n[i],t)return t}for(r=0;a>r;r++){i=o[r].lang;for(var g in n){var h=n[g];if(h.language===i)return h}}}else if("object"==typeof e)return e;return t||null},i.format=function(e,t,i){var n=this.findClosestCulture(i);return e instanceof Date?e=y(e,t,n):"number"==typeof e&&(e=E(e,t,n)),e},i.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures["default"].messages[e]},i.parseDate=function(e,t,i){i=this.findClosestCulture(i);var n,s,r;if(t){if("string"==typeof t&&(t=[t]),t.length)for(var a=0,o=t.length;o>a;a++){var l=t[a];if(l&&(n=C(e,l,i),n))break}}else{r=i.calendar.patterns;for(s in r)if(n=C(e,r[s],i),n)break}return n||null},i.parseInt=function(e,t,n){return m(i.parseFloat(e,t,n))},i.parseFloat=function(e,t,i){"number"!=typeof t&&(i=t,t=10);var a=this.findClosestCulture(i),o=NaN,l=a.numberFormat;if(e.indexOf(a.numberFormat.currency.symbol)>-1&&(e=e.replace(a.numberFormat.currency.symbol,""),e=e.replace(a.numberFormat.currency["."],a.numberFormat["."])),e.indexOf(a.numberFormat.percent.symbol)>-1&&(e=e.replace(a.numberFormat.percent.symbol,"")),e=e.replace(/ /g,""),s.test(e))o=parseFloat(e);else if(!t&&n.test(e))o=parseInt(e,16);else{var d=S(e,l,l.pattern[0]),u=d[0],c=d[1];""===u&&"(n)"!==l.pattern[0]&&(d=S(e,l,"(n)"),u=d[0],c=d[1]),""===u&&"-n"!==l.pattern[0]&&(d=S(e,l,"-n"),u=d[0],c=d[1]),u=u||"+";var g,h,p=c.indexOf("e");0>p&&(p=c.indexOf("E")),0>p?(h=c,g=null):(h=c.substr(0,p),g=c.substr(p+1));var m,f,v=l["."],b=h.indexOf(v);0>b?(m=h,f=null):(m=h.substr(0,b),f=h.substr(b+v.length));var y=l[","];m=m.split(y).join("");var E=y.replace(/\u00A0/g," ");y!==E&&(m=m.split(E).join(""));var x=u+m;if(null!==f&&(x+="."+f),null!==g){var I=S(g,l,"-n");x+="e"+(I[0]||"+")+I[1]}r.test(x)&&(o=parseFloat(x))}return o},i.culture=function(e){return"undefined"!=typeof e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures["default"]}}(this),define("globalize",function(){}),define("brease/helper/DateFormatter",["globalize"],function(e){"use strict";var t={format:function(e,t,n,s){var r=i(t,s);n(Globalize.format(e,r.format,r.key))},formatSync:function(e,t,n){var s=i(t,n);return Globalize.format(e,s.format,s.key)},getFormat4Pattern:function(e){var t=brease.culture.getCurrentCulture().culture;return t.calendar.patterns[e]},defaultPattern:"S"};function i(e,i){var n;if(void 0!==i){if(n=Globalize.findClosestCulture(i),null===n){var s=brease.culture.getCurrentCulture();console.iatWarn('invalid culture "'+i+'" -> take default culture "'+s.key+'"'),n=s.culture,i=s.key}}else n=brease.culture.getCurrentCulture().culture;return 1===e.length&&void 0===n.calendar.patterns[e]&&(console.iatWarn('invalid pattern "'+e+'" -> take default pattern "'+t.defaultPattern+'"'),e=t.defaultPattern),{format:e,key:i}}return t}),define("brease/helper/NumberFormatter",[],function(){"use strict";var e=function(){return void 0===c&&(c=this),c},t=e.prototype;t.defaults={useDigitGrouping:!1,decimalPlaces:1,minimumIntegerDigits:1,maximumIntegerDigits:8,separators:{dsp:".",gsp:","}},t.parseFloat=function(e,t){return t=t||{dsp:"."},e=e.replace(l(t),""),e=e.replace(t.dsp,"."),parseFloat(e)},t.formatNumber=function(e,t,i,n){var s=Math.abs(e),o=e/s;return u.lastIndex=0,u.test(s.toString())?a.call(this,s,-1===o?"-":"",n,t):r.call(this,s,-1===o?"-":"",n,t,i)},t.roundToSignificant=function(e,t){if(isNaN(e))throw new SyntaxError("value has to be a number");if(isNaN(t))throw new SyntaxError("precision has to be a positive integer >= 1");if(0===e)return e;t=Math.max(1,parseInt(t,10));var i=Math.abs(e),n=e/i,s=Math.floor(Math.log10(i))+1,r=Math.max(1,Math.round(Math.pow(10,t)/Math.pow(10,s)));return n*Math.round(r*i)/r},t.roundToFormat=function(e,t){if(isNaN(e))throw new SyntaxError("value has to be a number");if(isNaN(t))throw new SyntaxError("decimalPlaces has to be a positive integer >= 0");if(0===e)return e;t=Math.max(0,parseInt(t,10));var i=Math.abs(e),n=e/i,s=Math.max(1,Math.pow(10,t));return i>0&&i*s<Number.MAX_VALUE?n*Math.round(i*s)/s:e};function i(e,t){var i=this.defaults.separators[e];return t&&t[e]&&(i=t[e]),i}function n(e,t,i){var n=this.defaults[e];return t&&t[e]>=i&&(n=parseInt(t[e],10)),n}function s(e,t,i,n){var s=Math.floor(Math.log10(e)),r=e/Math.pow(10,s),a=Math.round(r*Math.pow(10,i))/Math.pow(10,i);10===a&&(a=1,s+=1);var o=a.toFixed(i).split(".");return o.length>1?t+o[0]+n+o[1]+"e+"+s:t+o[0]+"e+"+s}function r(e,t,r,a,l){var d=i.call(this,"dsp",r),u=i.call(this,"gsp",r),c=n.call(this,"decimalPlaces",a,0),g=n.call(this,"minimumIntegerDigits",a,1),h=n.call(this,"maximumIntegerDigits",a,1),p,m="";g>h&&(h=g);var f=e.toFixed(c).split(".");if(c>0&&(m=f[1]),f[0].length>h)return s(e,t,c,d);if(g>0&&g>f[0].length){var v=parseInt(f[0],10)/Math.pow(10,g-1);p=v.toFixed(g-1).replace(".","")}else p=f[0];return l===!0&&(p=o(p,u)),t+p+(""!==p&&""!==m?d:"")+m}function a(e,t,i,n){var s=this.defaults.separators.dsp,r=this.defaults.separators.gsp;i&&(i.dsp&&(s=i.dsp),i.gsp&&(r=i.gsp));var a=e.toString().split("e+");return a[0]=parseFloat(a[0]).toFixed(n.decimalPlaces),a[0]=a[0].replace(".",s),t+a.join("e+")}function o(e,t){return e.split(d).join(t)}function l(e){return g.gsp!==e.gsp&&(g.gsp=e.gsp,h=new RegExp("\\"+e.gsp,"g")),h}var d=/(?=(?:\d{3})+(?:\.|$))/g,u=/[0-9]\.[0-9]*e\+[0-9]{1,2}/g,c,g={},h;return e}),define("brease/helper/stubs/RuntimeService",["brease/events/EventDispatcher","brease/events/ServerEvent","brease/controller/objects/VisuStatus"],function(EventDispatcher,ServerEvent,VisuStatus){"use strict";var e=function s(e){this.testData={};for(var t in e)this.testData[t.toLowerCase()]=e[t]};e.prototype=new EventDispatcher,e.prototype.constructor=e;var t=e.prototype;t.loadVisuData=function(e,t,i){e=e.toLowerCase(),"function"==typeof t&&(this.testData&&this.testData[e]?t({success:!0,visuData:this.testData[e]},i):"malformedvisu"===e?t({success:!1,status:"parsererror"},i):t({success:!1,status:VisuStatus.NOT_FOUND},i))},t.activateVisu=function(e,t,s){console.warn("activateVisu:"+e),window.setTimeout(i.bind(this,t,s),50),window.setTimeout(n.bind(this,e),150)},t.activateContent=function(e,t){console.log("activateContent:"+e+",visuId="+t)},t.deactivateVisu=function(e){console.log("deactivateVisu:"+e)},t.getSessionEventSubscription=function(){return{success:!0,eventSubscriptions:[]}},t.setClientInformation=function(e){console.log("%csetClientInformation:"+e,"color:#cc00cc;")},t.sendUpdate=function(e){console.log("sendUpdate:",JSON.stringify(e))},t.sendEvent=function(e){console.log("sendEvent:",JSON.stringify(e))};function i(e,t){e({status:{code:0}},t)}function n(e){this.dispatchEvent({event:ServerEvent.VISU_ACTIVATED,detail:{visuId:e.toLowerCase()}},ServerEvent.VISU_ACTIVATED)}return e}),define("brease/helper/stubs/Server",["brease/events/EventDispatcher","brease/events/ServerEvent","brease/events/ClientSystemEvent"],function(EventDispatcher,ServerEvent,ClientSystemEvent){"use strict";var e={client:{id:"ClientIdFromServerStub"},subscriptions:{},eventSubscriptions:{},sessionEventSubscriptions:[{event:ClientSystemEvent.KEY_PRESS},{event:ClientSystemEvent.KEY_UP},{event:ClientSystemEvent.KEY_DOWN}],measurementSystems:{measurementSystemList:{metric:{description:"Metrisch"},imperial:{description:"Imperial"},"imperial-us":{description:"Imperial U.S."}},current_measurementSystem:"metric"},language:{data:{languages:{de:{description:"Deutsch",index:2},en:{description:"English",index:1},fr:{description:"Français",index:5},zh:{description:"普通话",index:4},ko:{description:"한국말",index:3}},current_language:"de"},texts:{de:{"BR/IAT/brease.common.attention":"Achtung","BR/IAT/brease.common.connectionError.text":"Die Verbindung zum Server wurde unterbrochen!","BR/IAT/brease.common.transferStart":"Transfer gestartet - bitte warten Sie bis der Server bereit ist!","BR/IAT/brease.common.ok":"ok","BR/IAT/brease.common.yes":"ja","BR/IAT/brease.common.no":"nein","BR/IAT/brease.common.cancel":"abbrechen","BR/IAT/brease.common.abort":"abort","BR/IAT/brease.common.retry":"retry","BR/IAT/brease.common.ignore":"ignore","BR/IAT/brease.common.enter":"enter","BR/IAT/brease.common.reset":"reset","BR/IAT/brease.common.pageloading":"Seite wird geladen...","BR/IAT/brease.error.STARTPAGE_NOT_FOUND":"Startseite nicht gefunden!","BR/IAT/brease.error.DIALOG_NOT_FOUND":"Dialog nicht gefunden!","BR/IAT/brease.error.NO_PAGES_FOUND":"Achtung: keine Pages in Visualisierung angegeben!","BR/IAT/brease.error.NO_LAYOUTS_FOUND":"Achtung: keine Layouts in Visualisierung angegeben!","BR/IAT/brease.error.INCORRECT_VISU":'Visualisierung (id="{1}") kann nicht dargestellt werden!',"BR/IAT/brease.error.VISU_NOT_FOUND":'Visualisierung (id="{1}") nicht gefunden!',"BR/IAT/brease.error.LAYOUT_NOT_FOUND":"Layout nicht gefunden!","BR/IAT/brease.error.CONTENT_NOT_FOUND":"Content nicht gefunden!","BR/IAT/brease.error.ACTIVATE_VISU_FAILED":'Zugriff verweigert! Lizenz für die Visualisierung "{1}" nicht vorhanden!',"IAT/brease.unittest.text1":"text1_de","IAT/brease.unittest.text2":"text2_de","IAT/unit.temp.gc":"°C","IAT/unit.time.sec":"s","IAT/unit.pieces":"Stk","IAT/brease.common.today":"heute","IAT/brease.common.languages":"Sprachen","IAT/brease.demo.home":"Startseite","IAT/brease.demo.table.status1":"status 1","IAT/brease.demo.table.status2":"status 2","IAT/brease.demo.table.status3":"status 3","IAT/brease.demo.table.status4":"status 4","IAT/brease.demo.buttonbar.btn01":"Startseite","IAT/brease.demo.buttonbar.btn02":"Trends","IAT/brease.demo.buttonbar.btn03":"Kontakt","IAT/brease.demo.buttonbar.btn04":"Hilfe","IAT/brease.demo.buttons.example":"Beispiel Button","IAT/brease.demo.differentText":"anderer text","IAT/brease.demo.dropdown.prompt":"bitte wählen","IAT/brease.demo.dropdown.testoption1":"Auswahl 1","IAT/brease.demo.dropdown.testoption2":"Auswahl 2","IAT/brease.demo.dropdown.testoption3":"Auswahl 3","IAT/brease.demo.dropdown.testoption4":"Auswahl 4","IAT/brease.demo.dropdown.testoption5":"Auswahl 5","IAT/brease.format.y":"Y","IAT/snippetSample":"enthaelt ein snippet: {$IAT/unit.temp.gc}","IAT/snippetError":"snippetError: {$IAT/unit.temp.gc}"},en:{"BR/IAT/brease.common.attention":"Attention","BR/IAT/brease.common.connectionError.text":"Connection to server is lost!","BR/IAT/brease.common.transferStart":"Server transfer started - please wait for reconnection!","BR/IAT/brease.common.ok":"ok","BR/IAT/brease.common.yes":"yes","BR/IAT/brease.common.no":"no","BR/IAT/brease.common.cancel":"cancel","BR/IAT/brease.common.abort":"abort","BR/IAT/brease.common.retry":"retry","BR/IAT/brease.common.ignore":"ignore","BR/IAT/brease.common.enter":"enter","BR/IAT/brease.common.reset":"reset","BR/IAT/brease.common.pageloading":"page is loading...","BR/IAT/brease.error.STARTPAGE_NOT_FOUND":"Startpage not found!","BR/IAT/brease.error.DIALOG_NOT_FOUND":"Dialog not found!","BR/IAT/brease.error.NO_PAGES_FOUND":"Attention: no pages declared!","BR/IAT/brease.error.NO_LAYOUTS_FOUND":"Attention: no layouts declared","BR/IAT/brease.error.INCORRECT_VISU":'Visualization (id="{1}") could not be displayed!',"BR/IAT/brease.error.VISU_NOT_FOUND":'Visualization (id="{1}") not found!',"BR/IAT/brease.error.LAYOUT_NOT_FOUND":"Layout not found!","BR/IAT/brease.error.CONTENT_NOT_FOUND":"Content not found!","BR/IAT/brease.error.ACTIVATE_VISU_FAILED":'Not allowed! License not available for visualization "{1}"!',"IAT/brease.unittest.text1":"text1_en","IAT/brease.unittest.text2":"text2_en","IAT/unit.temp.gc":"°C","IAT/unit.time.sec":"s","IAT/unit.pieces":"pcs","IAT/brease.common.today":"today","IAT/brease.common.languages":"Languages","IAT/brease.demo.home":"Home","IAT/brease.demo.table.status1":"status 1","IAT/brease.demo.table.status2":"status 2","IAT/brease.demo.table.status3":"status 3","IAT/brease.demo.table.status4":"status 4","IAT/brease.demo.buttonbar.btn01":"Startpage","IAT/brease.demo.buttonbar.btn02":"Trends","IAT/brease.demo.buttonbar.btn03":"Contact","IAT/brease.demo.buttonbar.btn04":"Help","IAT/brease.demo.buttons.example":"Example Button","IAT/brease.demo.differentText":"different text","IAT/brease.demo.dropdown.prompt":"please select","IAT/brease.demo.dropdown.testoption1":"option 1","IAT/brease.demo.dropdown.testoption2":"option 2","IAT/brease.demo.dropdown.testoption3":"option 3","IAT/brease.demo.dropdown.testoption4":"option 4","IAT/brease.demo.dropdown.testoption5":"option 5","IAT/brease.format.y":"t","IAT/snippetSample":"enthaelt ein snippet: {$IAT/unit.temp.gc}","IAT/snippetError":"snippetError: {$IAT/unit.temp.gc}"},fr:{"IAT/unit.temp.gc":"°C","IAT/unit.time.sec":"s","IAT/brease.unittest.text1":"text1_fr","IAT/brease.unittest.text2":"text2_fr"},zh:{"IAT/unit.temp.gc":"°C","IAT/unit.time.sec":"s","IAT/brease.unittest.text1":"text1_zh","IAT/brease.unittest.text2":"text2_zh"},ko:{"BR/IAT/brease.common.attention":"Attention","BR/IAT/brease.common.transferStart":"transferStart","BR/IAT/brease.common.yes":"예","BR/IAT/brease.common.no":"아니","BR/IAT/brease.common.ok":"확인","BR/IAT/brease.common.retry":"retry","BR/IAT/brease.common.abort":"abort","BR/IAT/brease.common.ignore":"ignore","BR/IAT/brease.common.cancel":"취소","IAT/brease.unittest.text1":"text1_kr","IAT/brease.unittest.text2":"text2_kr","IAT/unit.temp.gc":"섭씨","IAT/unit.time.sec":"s","IAT/unit.pieces":"조각","IAT/brease.common.today":"today","IAT/brease.common.languages":"언어 선택","IAT/brease.demo.home":"홈","IAT/brease.demo.table.status1":"status 1","IAT/brease.demo.table.status2":"status 2","IAT/brease.demo.table.status3":"status 3","IAT/brease.demo.table.status4":"status 4","IAT/brease.demo.buttonbar.btn01":"Startpage","IAT/brease.demo.buttonbar.btn02":"Trends","IAT/brease.demo.buttonbar.btn03":"Contact","IAT/brease.demo.buttonbar.btn04":"Help","IAT/brease.demo.buttons.example":"Example Button","IAT/brease.demo.differentText":"different text","IAT/brease.demo.dropdown.prompt":"please select","IAT/brease.demo.dropdown.testoption1":"option 1","IAT/brease.demo.dropdown.testoption2":"option 2","IAT/brease.demo.dropdown.testoption3":"option 3","IAT/brease.demo.dropdown.testoption4":"option 4","IAT/brease.demo.dropdown.testoption5":"option 5"}},units:{INH:"in",MTR:"m",GRM:"g"}},culture:{data:{cultures:{de:{description:"German"},en:{description:"English"},fr:{description:"French"},zh:{description:"Chinese"}},current_culture:"de"}},visus:{Visu:{startPage:"miscPage",startTheme:"DemoTheme",pages:{miscPage:{layout:"main",assignments:[{areaId:"A0",contentId:"navigationContent",type:"Content",style:"navigation"},{areaId:"A1",contentId:"miscContent",type:"Content"}]},groupBoxPage:{layout:"main",assignments:[{areaId:"A0",contentId:"navigationContent",type:"Content",style:"navigation"},{areaId:"A1",contentId:"embeddedVisu",type:"Visu"}]}},navigations:{mainNav:{pages:{miscPage:{targets:["groupBoxPage"]},groupBoxPage:{targets:["miscPage"]}}}},layouts:{main:{areas:{A0:{height:50,width:780,top:0,left:0,zIndex:2},A1:{height:500,width:780,top:50,left:0,zIndex:1}},width:780,height:550}},contents:{navigationContent:{path:"/contents/mappView/navigationContent.html",height:50,width:780},miscContent:{path:"/contents/mappView/miscContent.html",height:500,width:780}},themes:["DemoTheme","BuRThemeFlat1"],configurations:{activityCount:!1,watchdog:0,zoom:!1,bootLogo:"Media/images/DKT.png",bootColor:"rgb(156,26,32)",favicon:"Media/images/DKTicon.png"}},embeddedVisu:{startPage:"embedded_page1",pages:{embedded_page1:{layout:"embedded_L1",assignments:[{areaId:"A1",contentId:"groupBoxContent",type:"Content"}]}},layouts:{embedded_L1:{width:780,height:500,areas:{A1:{height:500,width:780,top:0,left:0}}}},contents:{groupBoxContent:{path:"/contents/mappView/groupBoxContent.html",height:500,width:780}}}}};function t(e,t,i){var n=t.split(".");if(1===n.length)e[t]=i;else{for(var s=0,r=n.length;r-1>s;s+=1)e=e[n[s]];e[n[r-1]]=i}}var i=new EventDispatcher;return i.getModelData=function(t,i){return e[t]?e[t][i]:void 0},i.setModelData=function(i,n){t(e,i,n)},i.setData=function(t){for(var i=0;i<t.length;i+=1)if(t[i].event===ServerEvent.PROPERTY_VALUE_CHANGED)for(var n=0;n<t[i].eventArgs.length;n+=1)for(var s=t[i].eventArgs[n],r=0;r<s.data.length;r+=1){var a=s.data[r];e[s.refId]=e[s.refId]||{},e[s.refId][a.attribute]=a.value}},i.addSubscriptions=function(t){var i=t.contentId;e.subscriptions[i]=e.subscriptions[i]||{subscriptions:[]};for(var n=0;n<t.subscriptions.length;n+=1)e.subscriptions[i].subscriptions.push(t.subscriptions[n])},i.addEventSubscriptions=function(t){var i=t.contentId;e.eventSubscriptions[i]=e.eventSubscriptions[i]||{eventSubscriptions:[]};for(var n=0;n<t.eventSubscriptions.length;n+=1)e.eventSubscriptions[i].eventSubscriptions.push(t.eventSubscriptions[n])},i.getSubscriptions=function(t){return void 0!==e.subscriptions[t]?e.subscriptions[t].subscriptions:[]},i.getVisuData=function(t){return e.visus[t]},i.setCurrentLanguage=function(t){e.language.data.current_language=t},i.getCurrentText=function(){var t=$.extend({},e.language.texts.de,e.language.texts[e.language.data.current_language]);return t},i.getLanguages=function(){return e.language.data},i.getAllUnitSymbols=function(){return e.language.units},i.getUnitSymbol=function(t){return e.language.units[t]},i.getCultures=function(){return e.culture.data},i.setCurrentCulture=function(t){e.culture.data.current_culture=t},i.getMMSystems=function(){return e.measurementSystems},i.setCurrentMMS=function(t){e.measurementSystems.current_measurementSystem=t},i.getEventSubscriptions=function(t){return void 0!==e.eventSubscriptions[t]?e.eventSubscriptions[t].eventSubscriptions:[]},i.getSessionEventSubscriptions=function(){return void 0!==e.sessionEventSubscriptions?e.sessionEventSubscriptions:[]},i}),define("brease/helper/stubs/ServiceBridge",["brease/helper/stubs/Server","brease/controller/objects/VisuStatus","brease/controller/libs/ErrorCode","brease/events/ServerEvent"],function(Server,VisuStatus,ErrorCode,ServerEvent){"use strict";var e=0,t={addSubscriptions:function(){Server.addSubscriptions.apply(Server,arguments)},addEventSubscriptions:function(){Server.addEventSubscriptions.apply(Server,arguments)},getModelData:function(){return Server.getModelData.apply(Server,arguments)},setModelData:function(){Server.setModelData.apply(Server,arguments)},setData:function(e,t){i[e]=t},getData:function(e){return i[e]}},i={registerClientResponseCode:0,activateVisuSuccessResponseCode:0,activateVisuFailResponseCode:ErrorCode.NO_LICENSE,visusWithoutLicense:["visuwithoutlicense"]},n={activateContent:10,activateVisu:50,registerClient:25};function s(e,t,i,s){n[e]>0?window.setTimeout(function(){t(i,s)},n[e]):t(i,s)}var r={authenticate:function(e,t){var i=(new Date).valueOf();for(var n in a)if(l(a[n].username,e)&&l(a[n].password,t))return a[n].signature=i,{userID:e,isAuthenticated:!0,signature:i};return{userID:e,isAuthenticated:!1,signature:i}},setCurrentUser:function(){},triggerUserChange:function(e){r.currentUser=e;var t=ServerEvent.USER_CHANGED;Server.dispatchEvent({event:t,detail:{user:e}},t)}};r.currentUser=r.authenticate("anonymous","");var a=[{username:"anonymous",password:""},{username:"martin",password:"iat"}],o={anonymous:["Everyone"],TestUser99:["Everyone","Administrators"]};function l(e,t){return 0===e.indexOf(t)&&e.length===t.length?!0:!1}function d(e,t,i,n){i(e,n)}function u(e,t,i){t(e,i)}return{respondWith:function(e,t){"data"===t?this[e]=u:this[e]=d.bind(null,t)},deactivateContent:function(e,t,i,n){var s={success:!0,contentId:e},r=ServerEvent.CONTENT_DEACTIVATED,a={event:r,detail:{contentId:e,success:!0}};i(s,n),window.setTimeout(function(){Server.dispatchEvent(a,r)},100)},getSubscription:function(e,t,i,n){var s={contentId:e,success:!0};s.subscriptions=Server.getSubscriptions(e),i(s,n)},activateContent:function(e,t,i,n){var r={success:!0};s("activateContent",i,r,n);var a=ServerEvent.CONTENT_ACTIVATED,o={event:a,detail:{contentId:e,success:!0}};window.setTimeout(function(){Server.dispatchEvent(o,a)},100)},activateVisu:function(e,t,r){var a=i.activateVisuSuccessResponseCode;-1!==i.visusWithoutLicense.indexOf(e.toLowerCase())&&(a=i.activateVisuFailResponseCode);var o={success:!0,status:{code:a}};s("activateVisu",t,o,r);var l=ServerEvent.VISU_ACTIVATED,d={event:l,detail:{visuId:e.toLowerCase()}};window.setTimeout(function(){Server.dispatchEvent(d,l)},n.activateVisu+10)},registerClient:function(e,n){var r={status:{code:i.registerClientResponseCode}};0!==i.registerClientResponseCode?r.Error={Code:9,Text:"Visualization already open on this client, no further sessions allowed"}:(r.success=!0,r.ClientId=t.getModelData("client","id")),s("registerClient",n,r)},deactivateVisu:function(e,t,i){var n={success:!0};"function"==typeof t&&t(n,i)},loadConfiguration:function(e,t){e({success:!0,configuration:{ContentCaching:{cachingSlots:"0",preserveOldValues:"TRUE"}}},t)},loadVisuData:function(e,t,i){if("project"===brease.config.mockType)$.getJSON("/"+e+".json",function(e){t({success:!0,visuData:e},i)}).fail(function(e,n,s){console.log("error:"+JSON.stringify({status:n,errorMessage:s.toString()})),t({success:!1,status:n},i)});else if("malformedvisu"===e.toLowerCase())t({success:!1,status:"parsererror"},i);else{var n=Server.getVisuData(e);n?t({success:!0,visuData:n},i):t({success:!1,status:VisuStatus.NOT_FOUND},i)}},logEvents:function(e,t){var i={success:!0,verboseLvl:255};t(i)},loadLanguages:function(e){var t=Server.getLanguages();t.success=!0,e(t)},switchLanguage:function(e,t){Server.setCurrentLanguage(e),t({langKey:e,success:!0})},loadTexts:function(t,i,n){var s=Server.getCurrentText();s.success=!0,e>0?window.setTimeout(function(){i(s,n)},e):i(s,n)},loadSystemTexts:function(e,t,i){var n=Server.getCurrentText();n.success=!0,t(n,i)},getAllUnitSymbols:function(e,t,i){if(void 0!==e){var n={unitSymbols:Server.getAllUnitSymbols(),success:!0};t(n,i)}},getUnitSymbols:function(e,t,i,n){if(void 0!==e){for(var s={},r=0;r<t.length;r+=1)s[t[r]]=Server.getUnitSymbol(t[r]);var a={unitSymbols:s,success:!0};i(a,n)}},loadCultures:function(e){var t=Server.getCultures();t.success=!0,e(t)},switchCulture:function(e,t){Server.setCurrentCulture(e),t({cultureKey:e,success:!0})},loadMeasurementSystemList:function(e){var t=Server.getMMSystems();t.success=!0,e(t)},switchMeasurementSystem:function(e,t,i){void 0!==e&&(Server.setCurrentMMS(e),t({success:!0},i))},authenticateUser:function(e,t,i){var n=r.authenticate(e,t);i(void 0!==n?{success:!0,user:n}:{success:!1})},setCurrentUser:function(e,t){r.currentUser=e,"function"==typeof t&&t({success:!0}),r.triggerUserChange(e)},loadCurrentUser:function(e){e({success:!0,user:r.currentUser})},setDefaultUser:function(e){var t=r.authenticate("anonymous","");r.currentUser=t,e({success:!0,user:r.currentUser}),r.triggerUserChange(t)},userHasRoles:function(e,t){for(var i={},n=0;n<e.length;n+=1)i[e[n]]="NotInRole"===e[n]?!1:!0;t({success:!0,roles:i})},loadUserRoles:function(e,t){e({success:!0,roles:o[r.currentUser.userID]||["Everyone"]},t)},formatText:function(e,t,i){if(-1!==e.indexOf("snippetError"))i({success:!1,string:e});else{for(var n=0;n<t.length;n+=1)e=e.replace(new RegExp("\\{"+(n+1)+"\\}",["g"]),t[n]);i({success:!0,string:e})}},setClientInformation:function(){},getEventSubscription:function(e,t,i,n){var s={contentId:e,success:!0};s.eventSubscriptions=Server.getEventSubscriptions(e),i(s,n)},getSessionEventSubscription:function(e,t){var i={contentId:"_session",success:!0};i.eventSubscriptions=Server.getEventSubscriptions(),e(i,t)},testServices:t,mocked:!0}}),define("brease/helper/stubs/WebSocket",["brease/helper/stubs/Server","brease/events/ServerEvent","brease/events/BreaseEvent"],function(Server,ServerEvent,BreaseEvent){"use strict";var e=0;return{send:function(e){var t;try{t=JSON.parse(e)}catch(i){console.log("PARSE ERROR:"+i.message)}t&&"update"===t.Command&&Server.setData(t.Data)},getModelData:function(e,t){return Server.getModelData(e,t)},start:function(t){t(!0),window.setTimeout(function(){var e=ServerEvent.SESSION_ACTIVATED;Server.dispatchEvent({event:e},e)},e)},startHeartbeat:function(){},addEventListener:function(e,t){
Server.addEventListener(e,t)},removeEventListener:function(e,t){Server.removeEventListener(e,t)},triggerServerAction:function(e,t,i,n){var s="action";Server.dispatchEvent({event:s,detail:{action:e,target:t,actionArgs:n||{},actionId:i}},s)},triggerServerChange:function(e,t,i){var n=ServerEvent.PROPERTY_VALUE_CHANGED;Server.dispatchEvent({event:n,detail:[{data:[{attribute:t,value:i}],refId:e}]},n)},triggerConnectionStateChange:function(e){var t=BreaseEvent.CONNECTION_STATE_CHANGED;Server.dispatchEvent({event:t,detail:{state:e}},t)},triggerContentActivated:function(e){var t=ServerEvent.CONTENT_ACTIVATED;Server.dispatchEvent({event:t,detail:{contentId:e}},t)}}}),define("brease/helper/Timer",["brease/events/EventDispatcher","brease/events/BreaseEvent"],function(e,BreaseEvent){"use strict";var Timer=function Timer(e){this.active=!1,this.interval=e,this.start()},t=Timer.prototype=new e;return t.start=function(){this.active===!1&&(this.ticker=window.setInterval(this.tickHandler.bind(this),this.interval),this.active=!0)},t.stop=function(){window.clearInterval(this.ticker),this.active=!1},t.tickHandler=function(){this.dispatchEvent(new CustomEvent(BreaseEvent.TICK,{detail:{timestamp:Date.now()}}))},t.addEventListener=function(t,i,n){e.prototype.addEventListener.call(this,t,i,n),this.start()},t.removeEventListener=function(t,i){e.prototype.removeEventListener.call(this,t,i),this.hasListenersOfType("tick")===!1&&this.stop()},t.dispose=function(){window.clearInterval(this.ticker)},Timer}),define("brease/objects/Response",[],function(){"use strict";var e={fromXHR:function(e){return""!==e.responseText?t(e.responseText):{success:!1}}};function t(e){try{var t=JSON.parse(e);return t.Error||t.error?(t.success=!1,t.error&&(t.Error={Code:-1,Text:t.error},delete t.error),t):(void 0===t.success&&(t.success=!0),t)}catch(i){return console.iatWarn("malformed data in server response!"),{success:!1,Error:{Code:-1,Text:"malformed data in server response"}}}}return e}),define("brease/helper/XHR",["brease/objects/Response"],function(e){"use strict";var XHR=function(){try{this.xhr=new XMLHttpRequest,this.ontimeout=i.bind(this),this.onreadystatechange=t.bind(this)}catch(e){return console.log("XMLHttpRequest not supported!"),null}};XHR.prototype.open=function n(e,t){this.xhr.open(e,t,!0),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Cache-Control","no-cache"),this.xhr.setRequestHeader("Accept","*/*"),this.xhr.ontimeout=this.ontimeout,this.xhr.onreadystatechange=this.onreadystatechange},XHR.prototype.send=function s(e,t){this.callback=t,this.xhr.send(e)};function t(){if(this.xhr.readyState===XMLHttpRequest.DONE){if(this.xhr.status===XMLHttpRequest.UNSENT)return console.log("%chttp status 0 for server connection!","color:#fa00f1;"),void 0;this.xhr.ontimeout=null,this.xhr.onreadystatechange=null,"function"==typeof this.callback&&(this.callback(e.fromXHR(this.xhr),this.callbackInfo),this.callback=null,this.callbackInfo=null),"function"==typeof this.free&&this.free(this)}}function i(){console.log("%cserver connection timed out","color:#fa00f1;"),"function"==typeof this.callback&&(this.callback=null),this.callbackInfo&&(this.callbackInfo=null),"function"==typeof this.free&&(this.free(this),this.free=null)}return XHR}),define("brease/helper/XHRPool",["brease/helper/XHR"],function(XHR){"use strict";var XHRPool={getXHR:function(i){var n;return e.length>0?n=e.shift():(n=new XHR,n.free=t),n.callbackInfo=i,n}},e=[],t=function(t){e.push(t)};return XHRPool}),define("brease/services/Configuration",[],function(){"use strict";var Configuration={init:function(t){return e=t,this},loadConfigurations:function(n){n&&i(n);var s=$.Deferred();return e.loadConfiguration(t,{deferred:s}),s.promise()}},e;function t(e,t){e.success===!0?(e.configuration&&i(e.configuration),t.deferred.resolve()):t.deferred.reject()}function i(e){void 0!==e.zoom&&(brease.config.visu.zoom="true"===e.zoom||e.zoom===!0?!0:!1),void 0!==e.activityCount&&(brease.config.visu.activityCount="true"===e.activityCount||e.activityCount===!0?!0:!1),void 0!==e.watchdog&&void 0===brease.config.watchdog&&(brease.config.watchdog=parseInt(e.watchdog,10)),void 0!==e.ContentCaching&&(brease.config.ContentCaching=e.ContentCaching,brease.config.ContentCaching.preserveOldValues="TRUE"===brease.config.ContentCaching.preserveOldValues?!0:!1,void 0!==e.ContentCaching.cachingSlots&&(brease.config.ContentCaching.cachingSlots=parseInt(e.ContentCaching.cachingSlots,10)))}return Configuration}),define("brease/services/Culture",["brease/events/BreaseEvent","brease/core/Utils","brease/config","globalize"],function(BreaseEvent,Utils,config){"use strict";var Culture={init:function(){return document.body.addEventListener(BreaseEvent.LANGUAGE_CHANGED,n),this},isReady:function(){var e=$.Deferred();return i(brease.language.getCurrentLanguage(),!1,e),e.promise()},getCurrentCulture:function(){return e},switchCulture:function(e){i(e,!0)},findClosestCulture:function(e){var t=$.Deferred(),i=Globalize.findClosestCulture(e);return null!==i?t.resolve(i):require(["libs/cultures/globalize.culture."+e],function(){t.resolve(Globalize.findClosestCulture(e))},function(){t.resolve(Globalize.cultures["default"])}),t.promise()},defaultCulture:{key:Globalize.cultures["default"].name,culture:Globalize.cultures["default"]}},e={};function t(t){Globalize.culture(t.name),e={key:t.name,culture:t}}function i(i,n,s){$.when(brease.culture.findClosestCulture(i)).then(function(i){t(i),n===!0&&document.body.dispatchEvent(new CustomEvent(BreaseEvent.CULTURE_CHANGED,{detail:{currentCulture:e.key}})),s&&s.resolve()})}function n(){i(brease.language.getCurrentLanguage(),!0)}return Culture}),define("brease/services/Language",["brease/events/BreaseEvent","brease/core/Utils","brease/config"],function(BreaseEvent,Utils,config){"use strict";var Language={init:function(e){return d=e,this},isReady:function(){return l=$.Deferred(),g(),l.promise()},allTextsLoaded:function(){return l=$.Deferred(),h(),l.promise()},getLanguages:function(){return Utils.deepCopy(i)},getCurrentLanguage:function(){return n.key},getTextByKey:function(e){-1===e.indexOf("IAT/")&&(e="IAT/"+e);var t=s[e];return t||console.iatWarn("undefined text key:"+e),t||(brease.config.editMode===!0?"$"+e:config.undefinedTextReturnValue)},getSystemTextByKey:function(e){var t=s[e];return void 0!==t?t:(console.iatWarn("undefined text key:"+e),config.undefinedTextReturnValue)},getFormattedTextByKey:function(e,t){var i=s[e];void 0!==i?b(i)?brease.textFormatter.format(i,[]).then(function n(e){t(e)},function r(){console.iatWarn('error in textFormatter for textkey "'+e+'"'),t(void 0)}):t(i):(console.iatWarn("undefined text key:"+e),t(config.undefinedTextReturnValue))},switchLanguage:function(e){return l=$.Deferred(),void 0===i.languages[e]?(console.iatWarn("Language »"+e+"« is not defined!"),l.resolve({success:!1})):n.key===e?(console.iatInfo("Language »"+e+"« is current!"),l.resolve({success:!0})):(u=e,o=!0,n.version=0,d.switchLanguage(e,m)),l.promise()},reloadTexts:function(){o=!0,n.version+=1,d.loadTexts(n.key,f,{type:"reload"})},getCurrentVersion:function(){return n.version},setKeyText:function(e,t){s[e]=t},addTextKey:function(e,t,i){s[e]&&i===!0?s[e]=t:s[e]&&i!==!0?console.iatWarn("text key ["+e+"] already exists!"):s[e]=t},addTextKeys:function(e,t){for(var i in e)Language.addTextKey(i,e[i],t)},isKey:function(e){return Utils.isString(e)&&"$"===e.substring(0,1)},parseKey:function(e){try{return e.substring(1)}catch(t){return}},parseProperty:function(e){return Language.isKey(e)?Language.getTextByKey(Language.parseKey(e)):e},pipeAsyncUnitSymbol:function(i,n){void 0!==i?void 0!==r[i]?void 0!==n&&n(r[i]):void 0!==a[i]?e(i,n):t(i,n):void 0!==n&&n(void 0)}};function e(e,t){$.when(a[e].promise()).then(function(e){void 0!==t&&t(e)})}function t(e,t){a[e]=$.Deferred(),d.getUnitSymbols(n.key,[e+""],function(i){void 0!==i.unitSymbols[e]&&(r[e]=i.unitSymbols[e]),a[e].resolve(r[e]),a[e]=void 0,t(r[e])})}var i={},n={version:0},s={},r={GRM:"g",DJ:"dag",KGM:"kg",ONZ:"oz",LBR:"lb",MMT:"mm",DMT:"dm",CMT:"cm","4H":"µm",MTR:"m",INH:"in",M7:"µin",FOT:"ft",YRD:"yd",PAL:"Pa",KPA:"kPa",BAR:"bar",HBA:"hbar",MBR:"mbar",KBA:"kbar",CEL:"°C",FAH:"°F",KEL:"K",MMQ:"mm³",CMQ:"cm³",DMQ:"dm³",INQ:"in³",FTQ:"ft³",YDQ:"yd³",AMP:"A",B22:"kA",H38:"MA","4K":"mA",B84:"µA",C39:"nA",WTT:"W",KWT:"kW",MAW:"MW",JOU:"J",KJO:"kJ",WHR:"W·h",MWH:"MW·h",KWH:"kW·h"},a={},o=!1,l,d,u;function c(e,t){e===!0?l.resolve(t):l.reject(t)}function g(){o=!1,d.loadLanguages(p)}function h(){d.loadTexts(n.key,f,{type:"user"})}function p(e){e.success===!0?(i={languages:e.languages,current_language:e.current_language},n.key=i.current_language,d.getUnitSymbols(n.key,Object.keys(r),v),d.loadSystemTexts(n.key,f,{type:"system"})):c(!1,"languages load error")}function m(e){e.success===!0?(n.key=u,d.getUnitSymbols(n.key,Object.keys(r),v),d.loadTexts(n.key,f,{type:"switch"}),l.resolve({success:!0})):(console.iatWarn("service switchLanguage failed!"),document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:n.key}})),l.resolve({success:!1}))}function f(e){s=e,o?(o=!1,document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_CHANGED,{detail:{currentLanguage:n.key}}))):(c(!0,"languages and texts loaded successfully"),document.body.dispatchEvent(new CustomEvent(BreaseEvent.LANGUAGE_LOADED,{detail:{currentLanguage:n.key}})))}function v(e){if(!e.unitSymbols)throw new Error("error on fetching unit symbols!");r=e.unitSymbols}function b(e){return void 0!==e&&-1!==e.indexOf("{")}return Language}),define("brease/services/Logger",["brease/events/BreaseEvent","brease/enum/Enum"],function(BreaseEvent,Enum){"use strict";var Logger=function(){},e=Logger.prototype;e.init=function(e){return this.runtimeService=e,this.verboseLevel=Enum.EventLoggerVerboseLevel.OFF,document.addEventListener(BreaseEvent.LOG_MESSAGE,this._logMessageHandler.bind(this)),this},e.logMessage=function(e,t,i,n){(void 0===t||t<=this.verboseLevel)&&this.runtimeService.logEvents(e,t,i,n,this._logCallbackHandler.bind(this))},e.log=function(e,i,n,s,r,a){if(void 0===n&&(n=Enum.EventLoggerVerboseLevel.OFF),void 0!==e){var o=t(e,Enum.EventLoggerFacility.IAT,i||Enum.EventLoggerCustomer.BUR,s);this.logMessage(o,n,a||"",r||[])}},e._logMessageHandler=function(e){var i=Enum.EventLoggerVerboseLevel.OFF;if(void 0!==e.detail.verbose&&(i=e.detail.verbose),e.detail&&e.detail.code){e.detail.args=e.detail.args||[];var n=t(e.detail.code,Enum.EventLoggerFacility.IAT,e.detail.customer||Enum.EventLoggerCustomer.BUR,e.detail.severity);this.logMessage(n,i,e.detail.text,e.detail.args)}},e._logCallbackHandler=function(e){void 0!==e.verboseLvl&&(this.verboseLevel=e.verboseLvl)};function t(e,t,i,n){var s;return void 0===n&&(n=1),s=e|t<<16|i<<29|n<<30,s}return new Logger}),define("brease/services/MeasurementSystem",["brease/events/BreaseEvent","brease/core/Utils"],function(BreaseEvent,Utils){"use strict";var MeasurementSystem={init:function(e){return a=e,this},isReady:function(){return s=$.Deferred(),l(),s.promise()},getMeasurementSystems:function(){return Utils.deepCopy(e)},updateMeasurementSystems:function(){return r=$.Deferred(),i!==brease.language.getCurrentLanguage()?(a.loadMeasurementSystemList(u),i=brease.language.getCurrentLanguage()):r.reject("language is current"),r.promise()},getCurrentMeasurementSystem:function(){return t},switchMeasurementSystem:function(i){return n=$.Deferred(),void 0===e[i]?(console.iatWarn("Measurement-System »"+i+"« is not defined!"),n.resolve({success:!1})):t===i?(console.iatInfo("Measurement-System »"+i+"« is current!"),n.resolve({success:!0})):a.switchMeasurementSystem(i,c,{newKey:i}),n.promise()}},e={},t="",i,n,s,r,a;function o(e,t,i){t===!0?e.resolve(i):e.reject(i)}function l(){a.loadMeasurementSystemList(d)}function d(i){_.isObject(i)&&i.success===!0?(e=i.measurementSystemList,t=i.current_measurementSystem,document.body.dispatchEvent(new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_LOADED,{detail:{currentMeasurementSystem:t}})),o(s,!0)):o(s,!1,"MeasurementSystems load error")}function u(i){_.isObject(i)&&i.success===!0?(e=i.measurementSystemList,t=i.current_measurementSystem,document.body.dispatchEvent(new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_LOADED,{detail:{currentMeasurementSystem:t}})),o(r,!0)):o(r,!1,"MeasurementSystems load error")}function c(e,i){e.success===!0?(t=i.newKey,n.resolve({success:!0})):(console.iatWarn("service switchMeasurementSystem failed!"),n.resolve({success:!1})),document.body.dispatchEvent(new CustomEvent(BreaseEvent.MEASUREMENT_SYSTEM_CHANGED,{detail:{currentMeasurementSystem:t}}))}return MeasurementSystem}),define("brease/services/RuntimeService",[],function(){"use strict";var RuntimeService=function RuntimeService(){},e=RuntimeService.prototype;return e.init=function(e,t){this.services=e,this.socket=t},e.socketIsReady=function(){var e=$.Deferred();return this.socket.start(function(t){t===!0?e.resolve():e.reject()}),e.promise()},e.startHeartbeat=function(){this.socket.startHeartbeat.apply(this.socket,arguments)},e.addEventListener=function(){this.socket.addEventListener.apply(this.socket,arguments)},e.removeEventListener=function(){this.socket.removeEventListener.apply(this.socket,arguments)},e.loadLanguages=function(){this.services.loadLanguages.apply(this.services,arguments)},e.loadTexts=function(){this.services.loadTexts.apply(this.services,arguments)},e.loadSystemTexts=function(){this.services.loadSystemTexts.apply(this.services,arguments)},e.switchLanguage=function(){this.services.switchLanguage.apply(this.services,arguments)},e.getAllUnitSymbols=function(){this.services.getAllUnitSymbols.apply(this.services,arguments)},e.getUnitSymbols=function(){this.services.getUnitSymbols.apply(this.services,arguments)},e.loadCultures=function(){this.services.loadCultures.apply(this.services,arguments)},e.switchCulture=function(){this.services.switchCulture.apply(this.services,arguments)},e.loadMeasurementSystemList=function(){this.services.loadMeasurementSystemList.apply(this.services,arguments)},e.switchMeasurementSystem=function(){this.services.switchMeasurementSystem.apply(this.services,arguments)},e.authenticateUser=function(){this.services.authenticateUser.apply(this.services,arguments)},e.setCurrentUser=function(){this.services.setCurrentUser.apply(this.services,arguments)},e.loadCurrentUser=function(){this.services.loadCurrentUser.apply(this.services,arguments)},e.setDefaultUser=function(){this.services.setDefaultUser.apply(this.services,arguments)},e.userHasRoles=function(){this.services.userHasRoles.apply(this.services,arguments)},e.loadUserRoles=function(){this.services.loadUserRoles.apply(this.services,arguments)},e.formatText=function(){this.services.formatText.apply(this.services,arguments)},e.logEvents=function(e,t,i,n,s){var r=[];if(void 0!==e){var a={eventId:e,verboseLvl:t,text:i||"",args:n||[]};r.push(a)}this.services.logEvents(r,s)},e.getSubscription=function(){this.services.getSubscription.apply(this.services,arguments)},e.activateContent=function(){this.services.activateContent.apply(this.services,arguments)},e.deactivateContent=function(){this.services.deactivateContent.apply(this.services,arguments)},e.activateVisu=function(){this.services.activateVisu.apply(this.services,arguments)},e.deactivateVisu=function(){this.services.deactivateVisu.apply(this.services,arguments)},e.sendUpdate=function(e){void 0!==e&&this.socket.send(JSON.stringify({Command:"update",Resource:"services",Data:e}))},e.createBindings=function(){this.services.createBindings.apply(this.services,arguments)},e.deleteBindings=function(){this.services.deleteBindings.apply(this.services,arguments)},e.getEventSubscription=function(){this.services.getEventSubscription.apply(this.services,arguments)},e.getSessionEventSubscription=function(){this.services.getSessionEventSubscription.apply(this.services,arguments)},e.sendEvent=function(e){void 0!==e&&this.socket.send(JSON.stringify({Command:"event",Resource:"services",Data:e}))},e.actionResponse=function(e){void 0!==e&&this.socket.send(JSON.stringify({Command:"actionResponse",Resource:"services",Data:e}))},e.setClientInformation=function(){this.services.setClientInformation.apply(this.services,arguments)},e.registerClient=function(){this.services.registerClient.apply(this.services,arguments)},e.loadVisuData=function(){this.services.loadVisuData.apply(this.services,arguments)},e.loadConfiguration=function(){this.services.loadConfiguration.apply(this.services,arguments)},e.opcuaReadNodeHistory=function(){this.services.opcuaReadNodeHistory.apply(this.services,arguments)},e.opcuaReadHistoryCount=function(){this.services.opcuaReadHistoryCount.apply(this.services,arguments)},e.opcuaReadHistoryStart=function(){this.services.opcuaReadHistoryStart.apply(this.services,arguments)},e.opcuaReadHistoryEnd=function(){this.services.opcuaReadHistoryEnd.apply(this.services,arguments)},e.opcuaBrowse=function(){this.services.opcuaBrowse.apply(this.services,arguments)},e.opcuaCallMethod=function(){this.services.opcuaCallMethod.apply(this.services,arguments)},e.opcuaRead=function(){this.services.opcuaRead.apply(this.services,arguments)},new RuntimeService}),define("brease/services/Opcua",["brease/services/RuntimeService"],function(e){"use strict";var Opcua={readNodeHistory:function(i,n){var s=$.Deferred(),r={nodesReadInfo:i};return n&&(r.timeSpan=n),e.opcuaReadNodeHistory(r,t,{deferred:s}),s.promise()},readHistoryCount:function(i,n){var s=$.Deferred();return e.opcuaReadHistoryCount({nodeId:i,timeSpan:n},t,{deferred:s}),s.promise()},readHistoryStart:function(i){var n=$.Deferred();return e.opcuaReadHistoryStart({nodeId:i},t,{deferred:n}),n.promise()},readHistoryEnd:function(i){var n=$.Deferred();return e.opcuaReadHistoryEnd({nodeId:i},t,{deferred:n}),n.promise()},browse:function(i){var n=$.Deferred();return e.opcuaBrowse({nodeId:i},t,{deferred:n}),n.promise()},read:function(i){var n=$.Deferred();return e.opcuaRead({nodesToRead:i},t,{deferred:n}),n.promise()},callMethod:function(i,n,s){var r=$.Deferred();return e.opcuaCallMethod({objectId:i,methodId:n,arguments:s},t,{deferred:r}),r.promise()}};function t(e,t){t.deferred.resolve(e)}return Opcua}),define("brease/services/ServiceBridge",["brease/helper/XHRPool"],function(XHRPool){"use strict";var e=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/services/";return{activateVisu:function(t,i,n){if(void 0!==t){var s=XHRPool.getXHR(n);s.open("GET",e+"activateVisu?visuId="+t),s.send(null,i)}else console.iatWarn("undefined visuId in method activateVisu")},deactivateVisu:function(t,i,n){if(void 0!==t){var s=XHRPool.getXHR(n);s.open("GET",e+"deactivateVisu?visuId="+t),s.send(null,i)}else console.iatWarn("undefined visuId in method deactivateVisu")},deactivateContent:function(t,i,n,s){if(void 0!==t){var r=XHRPool.getXHR(s);r.open("GET",e+"deactivateContent?contentId="+t+"&visuId="+i),r.send(null,n)}else console.iatWarn("undefined contentId in method deactivateContent")},getSubscription:function(t,i,n,s){if(void 0!==t){var r=XHRPool.getXHR(s);r.open("GET",e+"getSubscription?contentId="+t+"&visuId="+i),r.send(null,n)}else console.iatWarn("undefined contentId in method getSubscription")},activateContent:function(t,i,n,s){if(void 0!==t){var r=XHRPool.getXHR(s);r.open("GET",e+"activateContent?contentId="+t+"&visuId="+i),r.send(null,n)}else console.iatWarn("undefined contentId in method activateContent")},loadConfiguration:function(t,i){var n=XHRPool.getXHR(i);n.open("GET",e+"getConfiguration"),n.send(null,t)},loadVisuData:function(e,t,i){$.getJSON("/"+e+".json",function(e){t({success:!0,visuData:e},i)}).fail(function(e,n,s){console.log("error:"+JSON.stringify({status:n,errorMessage:s.toString()})),t({success:!1,status:n},i)})},createBindings:function(t,i,n,s,r){var a=XHRPool.getXHR(r);a.open("POST",e+"createBindings"),a.send(JSON.stringify({Parameter:{visuId:i,contentId:t},Data:n}),s)},deleteBindings:function(t,i,n,s,r){var a=XHRPool.getXHR(r);a.open("POST",e+"deleteBindings"),a.send(JSON.stringify({Parameter:{visuId:i,contentId:t},Data:n}),s)},getEventSubscription:function(t,i,n,s){if(void 0!==t){var r=XHRPool.getXHR(s);r.open("GET",e+"getEventSubscription?contentId="+t+"&visuId="+i),r.send(null,n)}else console.iatWarn("undefined contentId in method getEventSubscription")},getSessionEventSubscription:function(t,i){var n=XHRPool.getXHR(i);n.open("GET",e+"getSessionEventSubscription"),n.send(null,t)},loadLanguages:function(t){var i=XHRPool.getXHR();i.open("GET",e+"getLanguages"),i.send(null,t)},switchLanguage:function(t,i){if(void 0!==t){var n=XHRPool.getXHR();n.open("GET",e+"switchLanguage?language="+t),n.send(null,i)}},loadTexts:function(t,i,n){if(void 0!==t){var s=XHRPool.getXHR(n);s.open("GET",e+"getText?language="+t),s.send(null,i)}},loadSystemTexts:function(t,i,n){if(void 0!==t){var s=XHRPool.getXHR(n);s.open("GET",e+"getSystemTexts?language="+t),s.send(null,i)}},getAllUnitSymbols:function(t,i,n){if(void 0!==t){var s=XHRPool.getXHR(n);s.open("GET",e+"getAllUnitSymbols?language="+t),s.send(null,i)}},getUnitSymbols:function(t,i,n,s){if(void 0!==t){var r=XHRPool.getXHR(s);r.open("POST",e+"getUnitSymbols"),r.send(JSON.stringify({Data:{language:t,commonCodes:i}}),n)}},loadCultures:function(t){var i=XHRPool.getXHR();i.open("GET",e+"loadCultures"),i.send(null,t)},switchCulture:function(t,i){if(void 0!==t){var n=XHRPool.getXHR();n.open("GET",e+"switchCulture?culture="+t),n.send(null,i)}},loadMeasurementSystemList:function(t){var i=XHRPool.getXHR();i.open("GET",e+"getMeasurementSystemList"),i.send(null,t)},switchMeasurementSystem:function(t,i,n){if(void 0!==t){var s=XHRPool.getXHR(n);s.open("GET",e+"setMeasurementSystem?measurementSystem="+t),s.send(null,i)}},logEvents:function(t,i){var n=XHRPool.getXHR();n.open("POST",e+"sendEventLog"),n.send(JSON.stringify({Data:t}),i)},authenticateUser:function(t,i,n){var s=XHRPool.getXHR(),r={userID:t,password:i};s.open("POST",e+"authenticate"),s.send(JSON.stringify({Data:r}),n)},setCurrentUser:function(t,i){var n=XHRPool.getXHR();n.open("POST",e+"setCurrentUser"),n.send(JSON.stringify({Data:{user:t}}),i)},loadCurrentUser:function(t){var i=XHRPool.getXHR();i.open("GET",e+"getCurrentUser"),i.send(null,t)},setDefaultUser:function(t){var i=XHRPool.getXHR();i.open("GET",e+"setDefaultUser"),i.send(null,t)},userHasRoles:function(t,i){var n=XHRPool.getXHR();n.open("POST",e+"userHasRoles"),n.send(JSON.stringify({Data:{roles:t}}),i)},loadUserRoles:function(t,i){var n=XHRPool.getXHR(i);n.open("GET",e+"getUserRoles"),n.send(null,t)},formatText:function(t,i,n){var s=XHRPool.getXHR(),r={formatstring:t,args:i};s.open("POST",e+"format"),s.send(JSON.stringify({Data:r}),n)},setClientInformation:function(t){var i=XHRPool.getXHR();i.open("POST",e+"setClientInformation"),i.send('{"Data":'+t+"}")},registerClient:function(t,i){var n=XHRPool.getXHR();n.open("GET",e+"registerclient"+(void 0!==t?"?visuId="+t:"")),n.send(null,i)},opcuaReadNodeHistory:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/readHistory"),s.send(JSON.stringify({Data:t}),i)},opcuaReadHistoryCount:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/readHistoryCount"),s.send(JSON.stringify({Data:t}),i)},opcuaReadHistoryStart:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/readHistoryStart"),s.send(JSON.stringify({Data:t}),i)},opcuaReadHistoryEnd:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/readHistoryEnd"),s.send(JSON.stringify({Data:t}),i)},opcuaBrowse:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/browse"),s.send(JSON.stringify({Data:t}),i)},opcuaCallMethod:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/callMethod"),s.send(JSON.stringify({Data:t}),i)},opcuaRead:function(t,i,n){var s=XHRPool.getXHR(n);s.open("POST",e+"opcua/read"),s.send(JSON.stringify({Data:t}),i)}}}),define("brease/services/TextFormatter",["brease/events/BreaseEvent","brease/core/Utils","brease/enum/Enum"],function(BreaseEvent,Utils,Enum){"use strict";var TextFormatter={init:function(e){return t=e,this},isReady:function(){return e=$.Deferred(),e.resolve(),e.promise()},format:function(e,n){var s=$.Deferred();return t.formatText(e,n,function(e){i(e,s)}),s.promise()}},e,t;function i(e,t){e.success===!0?t.resolve(e.string):t.reject(e.string)}return TextFormatter}),define("brease/services/User",["brease/core/Utils","brease/events/BreaseEvent","brease/events/ServerEvent","brease/events/ClientSystemEvent","brease/enum/Enum"],function(Utils,BreaseEvent,ServerEvent,ClientSystemEvent,Enum){"use strict";var User={init:function(e){return d=e,o=null,this},isReady:function(){return n=$.Deferred(),g(),n.promise()},getSeparators:function(){return{dsp:".",gsp:","}},authenticateUser:function(e,t){return s=$.Deferred(),d.authenticateUser(e,t,p),s.promise()},setCurrentUser:function(e){return r=$.Deferred(),d.setCurrentUser(e,m),r.promise()},loadCurrentUser:function(){return r=$.Deferred(),void 0!==o&&null!==o?r.resolve(o):d.loadCurrentUser(f),r.promise()},getCurrentUser:function(){return o},setDefaultUser:function(){return r=$.Deferred(),d.setDefaultUser(m),r.promise()},hasOneOfRoles:function(e){return Utils.permission(e,l)},getUserRoles:function(){return l},loadUserRoles:function(e){var t=$.Deferred();return d.loadUserRoles(u,{deferred:t,callback:e}),t.promise()},loginAction:function(t,i){return a=$.Deferred(),d.authenticateUser(t,i,e),a.promise()}};function e(e){e.success===!0&&void 0!==e.user&&e.user.isAuthenticated===!0?d.setCurrentUser(e.user,i.bind(null,e.user.userID)):t(!1,e.user.userID)}function t(e,t){a.resolve({success:e});var i={event:e?ClientSystemEvent.LOGIN_SUCCESS:ClientSystemEvent.LOGIN_FAILED,source:{type:"clientSystem.Event"},eventArgs:{userName:t}};d.sendEvent(i)}function i(e,i){t(i.success,e)}var n,s,r,a,o,l=[],d;function u(e,t){e.success&&e.roles&&(l=e.roles.sort()),c(t.deferred,t.callback,e.roles)}function c(e,t,i){Utils.isFunction(t)&&t(i),e.resolve(i)}function g(){d.addEventListener(ServerEvent.USER_CHANGED,v),d.loadCurrentUser(h)}function h(e){e.success===!0?(o=e.user,document.body.dispatchEvent(new CustomEvent(BreaseEvent.USER_LOADED,{detail:e.user})),$.when(brease.user.loadUserRoles()).then(function(){n.resolve()})):n.reject()}function p(e){e.success===!0&&void 0!==e.user&&e.user.isAuthenticated===!0?(s.resolve(e.user),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_AUTHENTICATE_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.SUCCESS,[e.user.userID])):(s.reject(e.user),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_AUTHENTICATE_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR,[e.user.userID]))}function m(e){e.success===!0?(r.resolve(),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_SETUSER_OK,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.SUCCESS)):(r.reject(),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_SETUSER_FAIL,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.ERROR))}function f(e){e.success?(o=e.user,r.resolve(e.user)):r.reject()}function v(e){o=e.detail.user,$.when(brease.user.loadUserRoles()).then(function(){document.body.dispatchEvent(new CustomEvent(BreaseEvent.ROLES_CHANGED))}),document.body.dispatchEvent(new CustomEvent(BreaseEvent.USER_CHANGED,{detail:o})),brease.loggerService.log(Enum.EventLoggerId.CLIENT_USER_USERCHANGE,Enum.EventLoggerCustomer.BUR,Enum.EventLoggerVerboseLevel.OFF,Enum.EventLoggerSeverity.INFORMATIONAL,[o.userID])}return User}),define("brease/services/WebSocket",["brease/events/EventDispatcher","brease/events/BreaseEvent"],function(EventDispatcher,BreaseEvent){"use strict";var e=!1,t=window.location.protocol+"//"+window.location.hostname+":"+window.location.port,i,n,s;function r(e,t){if("WebSocket"in window){var r="ws://";0===window.location.protocol.indexOf("https")&&(r="wss://");try{var o=window.setTimeout(function(){b("timedOutInitially")},void 0!==t?t:15e3);e||(e=window.WebSocket),s=new e(r+i.host+":"+i.port+"?watchdog="+i.watchdog),s.onmessage=a,s.onopen=function(){console.log(y.MESSAGES.success),window.clearTimeout(o),i.sockets.available=!0,n(!0)},s.onclose=function(){console.log(y.MESSAGES.socketClosed),window.clearTimeout(d),i.sockets.available!==!0?(window.clearTimeout(o),b("socketClosedBeforeSuccess")):(c(),p(),v({type:BreaseEvent.CONNECTION_STATE_CHANGED,detail:{state:!1}}),window.setTimeout(f,1e3))},s.onerror=function(e){console.log("SOCKET ERROR["+e.type+"]:"+e.message)}}catch(l){b("openSocketError","\n"+l.message)}}else b("noSockets")}function a(e){if("pong"!==e.data){var t;try{t=JSON.parse(e.data)}catch(i){console.warn(y.MESSAGES.parsererror+"\n"+i.message)}t&&("getUpdate"===t.Command||"system"===t.Command?v({type:t.Data.event,detail:t.Data.eventArgs}):"event"===t.Command?void 0!==t.Data&&v({type:t.Data.event,detail:t.Data.eventArgs}):"action"===t.Command&&v({type:t.Command,detail:t.Data}))}void 0!==o&&u()}var o,l,d;function u(){c(),i.watchdog>=1e4&&(l=window.setTimeout(g,i.watchdog))}function c(){l&&window.clearTimeout(l)}function g(){s.readyState===s.OPEN&&(s.close(),d=window.setTimeout(function e(){s.readyState===s.CLOSING&&(console.log(y.MESSAGES.socketNotClosing),s.onclose(),s.onclose=null)},1500))}function h(){i.watchdog>=1e4&&(m(),o=window.setInterval(m,i.watchdog/2)),u()}function p(){o&&window.clearInterval(o)}function m(){s.readyState===s.OPEN&&s.send("ping")}function f(){$.ajax({type:"GET",url:t+window.location.pathname,async:!0,complete:function(e,t){"error"===t?window.setTimeout(f,1e3):(r(),v({type:BreaseEvent.CONNECTION_STATE_CHANGED,detail:{state:!0}}))}})}function v(e){y.dispatchEvent(e)}function b(e,t){var i=y.MESSAGES[e]+(t?t:"");i&&console.log(i),n(!1)}var y=new EventDispatcher;return y.send=function(e){s.send(e)},y.start=function(t,s,a){n=t,i={sockets:{},port:window.location.port,host:window.location.hostname,watchdog:1e4},void 0!==brease.config.watchdog&&(0===brease.config.watchdog||brease.config.watchdog>=1e4)&&(i.watchdog=brease.config.watchdog),e!==!0&&(e=!0,r(s,a))},y.startHeartbeat=function(){h()},y.MESSAGES={timedOutInitially:"socket connection timed out!",success:"socket connection established!",parsererror:"could not parse server message",noSockets:"WebSockets not available",openSocketError:"could not open WebSocket",socketClosed:"socket connection closed!",socketClosedBeforeSuccess:"socket connection closed before opened --> failure!",socketNotClosing:"socket not closing -> force close"},y}),define("text",["module"],function(e){"use strict";var t,i,n,s,r,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,u=d&&location.protocol&&location.protocol.replace(/\:/,""),c=d&&location.hostname,g=d&&(location.port||void 0),h={},p=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=a[t];try{e=new ActiveXObject(i)}catch(n){}if(e){a=[i];break}}return e},parseName:function(e){var t,i,n,s=!1,r=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!a||r>1)?(t=e.substring(0,r),i=e.substring(r+1,e.length)):t=e,n=i||t,r=n.indexOf("!"),-1!==r&&(s="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:t=n),{moduleName:t,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,s){var r,a,o,l=t.xdRegExp.exec(e);return l?(r=l[2],a=l[3],a=a.split(":"),o=a[1],
a=a[0],!(r&&r!==i||a&&a.toLowerCase()!==n.toLowerCase()||(o||a)&&o!==s)):!0},finishLoad:function(e,i,n,s){n=i?t.strip(n):n,p.isBuild&&(h[e]=n),s(n)},load:function(e,i,n,config){if(config&&config.isBuild&&!config.inlineText)return n(),void 0;p.isBuild=config&&config.isBuild;var s=t.parseName(e),r=s.moduleName+(s.ext?"."+s.ext:""),a=i.toUrl(r),o=p.useXhr||t.useXhr;return 0===a.indexOf("empty:")?(n(),void 0):(!d||o(a,u,c,g)?t.get(a,function(i){t.finishLoad(e,s.strip,i,n)},function(e){n.error&&n.error(e)}):i([r],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,n)}),void 0)},write:function(e,i,n,config){if(h.hasOwnProperty(i)){var s=t.jsEscape(h[i]);n.asModule(e+"!"+i,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,i,n,s,config){var r=t.parseName(i),a=r.ext?"."+r.ext:"",o=r.moduleName+a,l=n.toUrl(r.moduleName+a)+".js";t.load(o,n,function(i){var n=function(e){return s(l,e)};n.asModule=function(e,t){return s.asModule(e,l,t)},t.write(e,o,n,config)},config)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var s=i.readFileSync(e,"utf8");0===s.indexOf("\ufeff")&&(s=s.substring(1)),t(s)}catch(r){n&&n(r)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,i,n,s){var r=t.createXhr(),a;if(r.open("GET",e,!0),s)for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a.toLowerCase(),s[a]);p.onXhr&&p.onXhr(r,e),r.onreadystatechange=function(t){var s,a;4===r.readyState&&(s=r.status||0,s>399&&600>s?(a=new Error(e+" HTTP status: "+s),a.xhr=r,n&&n(a)):i(r.responseText),p.onXhrComplete&&p.onXhrComplete(r,e))},r.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,s="utf-8",r=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),s)),l="";try{for(i=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=o.readLine());)i.append(a),i.append(n);l=String(i.toString())}finally{o.close()}t(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,a,o,l={};r&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),i.init(o,1,0,!1),a=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),a.init(i,"utf-8",i.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(i.available(),l),a.close(),i.close(),t(l.value)}catch(d){throw new Error((o&&o.path||"")+": "+d)}}),t}),define("text!system/widgets/ContentLoader/ContentLoader.html",[],function(){return'<div id="WIDGETID" data-brease-widget="system/widgets/ContentLoader"></div>\r\n'}),define("system/widgets/ContentLoader/ContentLoader",["brease/core/BaseWidget","brease/enum/Enum","brease/events/BreaseEvent","brease/controller/WidgetController","brease/controller/WidgetParser"],function(SuperClass,Enum,BreaseEvent,widgetsController,parser){"use strict";var defaultSettings={loadPolicy:Enum.LoadPolicy.IMMEDIATE,cachePolicy:Enum.CachePolicy.CACHE,busyTimeout:1e3},WidgetClass=SuperClass.extend(function ContentLoader(){SuperClass.apply(this,arguments)},defaultSettings,!0),p=WidgetClass.prototype;p.init=function e(){this.bindingController=brease.uiController.bindingController,this.step=0,this.isLoaded=!1,this.loadQueue=[],this.settings.url&&this.settings.loadPolicy===Enum.LoadPolicy.IMMEDIATE&&this.load(this.settings.url,this.settings.contentId),this._defer("_dispatchReady")},p.load=function t(e,i,n){if(0===this.loadQueue.length||e!==this.loadQueue[0]||n===!0){this.contentComplete=!1,this.loadQueue.unshift(e);var s=this.settings.contentId,r=this.settings.url;this.settings.url=e,this.settings.contentId=i,this.loadFlag=!0,this.isLoaded===!0?_unload.call(this,s,r).then(function a(e){_load.call(e)}):_load.call(this),this.el.attr("data-brease-contentid",i)}},p.suspend=function i(){_hide.call(this),this.loadQueue.length=0,_clearTimer.call(this),this.suspended=!0,widgetsController.suspendInContent(this.elem,this.settings.contentId)},p.flush=function n(){_hide.call(this),widgetsController.disposeInContent(this.elem,this.settings.contentId),_reset.call(this)},p.deactivateContent=function s(){this.active&&(this.active=!1,this.step=-1,this.bindingController.deactivateContent(this.settings.contentId))},p.wake=function r(){var e=this;this.contentComplete===!0?(widgetsController.wakeInContent(this.settings.contentId),this.suspended=!1,this.step=0,$.when(this.bindingController.activateContent(this.settings.contentId)).then(function t(i){0===e.step&&(e.active=!0,e.step=1,_setVisible.call(e,!0),i===e.settings.contentId&&(e.bindingController.sendInitialValues(e.settings.contentId),e.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:e.settings.url,contentId:e.settings.contentId},bubbles:!0})),window.performanceMonitor.profile("loadContent - "+e.settings.contentId,1)))})):this.load(this.settings.url,this.settings.contentId)},p.dispose=function a(){this.loadFlag=!1,widgetsController.disposeInContent(this.elem,this.settings.contentId),this.isLoaded===!0&&this.deactivateContent(),this.loadQueue.length=0,_clearTimer.call(this),SuperClass.prototype.dispose.apply(this,arguments)},p.getContentId=function o(){return this.settings.contentId},p.getUrl=function l(){return this.settings.url};function _setVisible(e){this.el.css("visibility",e?"visible":"hidden"),this.elem.dispatchEvent(new CustomEvent(BreaseEvent.VISIBILITY_CHANGED,{bubbles:!1,detail:{visible:e}}))}function _contentReadyHandler(){var e=this;0===this.step&&(this.step=1,this.contentComplete=!0,_setVisible.call(this,!0),window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,0),this.bindingController.sendInitialValues(e.settings.contentId,function t(i){e.settings.contentId===i&&(e.elem&&e.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:e.settings.url,contentId:e.settings.contentId},bubbles:!0})),window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,1),window.performanceMonitor.profile("loadContent - "+e.settings.contentId,1))}))}function _busyHandler(){this.el.html(brease.language.getSystemTextByKey("BR/IAT/brease.common.pageloading"))}function _clearTimer(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0)}function _hide(){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_HIDE,{detail:{id:this.elem.id,contentId:this.settings.contentId}})),this.loadFlag=!1,_setVisible.call(this,!1),this.deactivateContent(),_dispatchHide.call(this,this.settings.contentId,this.settings.url)}function _reset(){this.isLoaded=!1,this.settings.url=void 0}function _parseContent(e){var t=$.Deferred(),i=this,n=function s(){e.removeEventListener(BreaseEvent.CONTENT_PARSED,n),window.performanceMonitor.profile("parseContent - "+i.settings.contentId,1),t.resolve(null)};return e.addEventListener(BreaseEvent.CONTENT_PARSED,n),window.performanceMonitor.profile("parseContent - "+this.settings.contentId,0),parser.parse(e,!1,i.settings.contentId),t.promise()}function _unload(e,t){var i=$.Deferred();brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_UNLOAD,{detail:{id:this.elem.id,contentId:e}})),brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_HIDE,{detail:{id:this.elem.id,contentId:e}})),_setVisible.call(this,!1),this.bindingController.isContentActive(e)&&this.bindingController.deactivateContent(e),_dispatchHide.call(this,e,t);var n=this;return widgetsController.disposeInContent(this.elem,e,function s(){n.isLoaded=!1,n.el.empty(),i.resolve(n)}),i.promise()}function _dispatchHide(e,t){this.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_HIDE,{detail:{contentId:e,url:t}}))}function _load(){var e=this;_clearTimer.call(this),e.timer=window.setTimeout(e._bind(_busyHandler),e.settings.busyTimeout),window.performanceMonitor.profile("loadContentHTML - "+e.settings.contentId,0),brease.pageController.loadHTML(e.settings.url,[e.settings.url]).done(e._bind(_loadSuccess)).fail(e._bind(_loadFail))}function appendHTML(elem,html){elem.innerHTML=html;for(var scripts=elem.querySelectorAll("script"),i=0;i<scripts.length;i+=1)eval(scripts[i].textContent),scripts[i].parentNode.removeChild(scripts[i])}function _loadSuccess(e,t){var i=this;if(t===i.loadQueue[0]&&this.loadFlag===!0){_clearTimer.call(this),i.loadQueue.length=0;try{appendHTML(i.elem,e)}catch(n){console.error(n),console.log('Content "'+i.settings.contentId+'": error in widget properties (ContentLoader.js)')}i.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_LOADED,{detail:{url:i.settings.url,contentId:i.settings.contentId},bubbles:!0})),window.performanceMonitor.profile("loadContentHTML - "+i.settings.contentId,1),i.isLoaded=!0,i.step=0,$.when(this.bindingController.activateContent(i.settings.contentId)).then(i._bind(_activateFinished)),this.active=!0}}function _activateFinished(){var e=this;$.when(_parseContent.call(e,e.elem)).then(e._bind(_contentReadyHandler))}function _loadFail(e){var t=this;_clearTimer.call(this),t.isLoaded=!1,t.elem&&this.loadFlag===!0&&(t.dispatchEvent(new CustomEvent(BreaseEvent.LOAD_ERROR,{detail:{url:t.settings.url,contentId:t.settings.contentId}})),t.el.html("ERROR: could not load content with url="+t.settings.url).css("visibility","visible")),console.iatWarn("WARNING: could not load content in ContentLoader["+(t.elem?t.elem.id:"")+"]:"+e.message)}return p.dispatchEvent=function d(e){this.elem.dispatchEvent(e)},WidgetClass}),define("text!widgets/brease/BasicSlider/BasicSlider.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/BasicSlider"></div>\r\n'}),define("widgets/brease/BasicSlider/libs/Renderer",["require","brease/core/Class","brease/events/BreaseEvent","libs/d3/d3","brease/core/Types","brease/enum/Enum","brease/core/Utils"],function(e){"use strict";var t=e("brease/core/Class"),BreaseEvent=e("brease/events/BreaseEvent"),i=e("libs/d3/d3"),Types=e("brease/core/Types"),Enum=e("brease/enum/Enum"),Utils=e("brease/core/Utils"),Renderer=t.extend(function Renderer(e){t.call(this),this.widget=e,this.settings=e.settings,this.initialize()},null),n=Renderer.prototype;n.initialize=function(){this.reinitialize()},n.reinitialize=function(){this.settings.axisSizeFactor=10,this.settings.thumbRadius=this.settings.thumbSize/2,this.scaleMinMax(this.widget.data.node),this.scaleDomain(this.widget.data.node),c(this),this.initDraw(),g(this),this.valueDisplayHandling(),this.updateThumbPositionByValue(this.widget.data.node.value),this.tickNumbersHandling(),h(this),this.widget.isDisabled&&this.widget.disable()},n.initDraw=function(){this.containerId=Utils.uniqueID(this.widget.elem.id+"_container"),this.axisId=Utils.uniqueID(this.widget.elem.id+"_axis"),this.containerElement=$("<div class='borderElement' id="+this.containerId+">"),this.widget.el.append(this.containerElement),this.containerElement.height(this.settings.height).width(this.settings.width),this.axisElement=i.select("#"+this.containerId).append("svg").attr("id",this.axisId).attr("class","axisElement"),this.backgroundId=Utils.uniqueID(this.widget.elem.id+"_container"),this.backgroundElement=$("<div class='backgroundElement' id="+this.backgroundId+">"),this.containerElement.append(this.backgroundElement),this.sliderElement=i.select("#"+this.containerId).append("svg").attr("class","sliderElement").attr("width",this.settings.width).attr("height",this.settings.height),this.settings.orientation===Enum.Orientation.LTR||this.settings.orientation===Enum.Orientation.RTL?this.drawHorizontal():(this.settings.orientation===Enum.Orientation.TTB||this.settings.orientation===Enum.Orientation.BTT)&&this.drawVertical()},n.drawHorizontal=function(){this.sliderRectangle=this.sliderElement.append("rect").attr("x",0).attr("y",parseFloat(this.settings.height,10)/2-this.settings.trackSize/2).attr("height",this.settings.trackSize).attr("width",parseFloat(this.settings.width,10)).attr("rx",this.settings.trackSize/2).attr("class","sliderRectangle").attr("ry",0),this.dragBehavior=i.behavior.drag(),this.sliderThumb=this.sliderElement.append("rect").attr("y",parseFloat(this.settings.height,10)/2-this.settings.thumbRadius).attr("height",this.settings.thumbSize).attr("width",this.settings.thumbSize).attr("class","sliderThumb").call(this.dragBehavior),this.thumbBackground=$("<div>").css("height",2*this.settings.thumbRadius).css("width",2*this.settings.thumbRadius).css("top",parseFloat(this.settings.height,10)/2-this.settings.thumbRadius).css("left",this.settings.thumbPosition-this.settings.thumbRadius).attr("class","thumbBackground"),this.rectangleBackground=$("<div>").css("height",this.settings.trackSize).css("width",parseFloat(this.settings.width,10)).css("top",parseFloat(this.settings.height,10)/2-this.settings.trackSize/2).css("left",0).attr("class","rectangleBackground"),this.backgroundElement.append(this.rectangleBackground).append(this.thumbBackground),this.widget.el.addClass("horizontal").removeClass("vertical"),brease.config.editMode||(this.widget.el.find(".sliderRectangle").on(BreaseEvent.CLICK,this._bind("_rectangleTrackHandler")),this.dragBehavior.on("dragstart",this._bind(this.updateThumbPositionByEvent)),this.dragBehavior.on("drag",this._bind(this.updateThumbPositionByEvent)),this.dragBehavior.on("dragend",this._bind(this.updateThumbPositionByEvent))),this.drawHorizontalAxis()},n.drawVertical=function(){this.sliderRectangle=this.sliderElement.append("rect").attr("x",parseFloat(this.settings.width,10)/2-this.settings.trackSize/2).attr("y",0).attr("height",parseFloat(this.settings.height,10)).attr("width",this.settings.trackSize).attr("rx",0).attr("ry",this.settings.trackSize/2).attr("class","sliderRectangle"),this.dragBehavior=i.behavior.drag(),this.sliderThumb=this.sliderElement.append("rect").attr("x",parseFloat(this.settings.width,10)/2-this.settings.thumbRadius).attr("height",this.settings.thumbSize).attr("width",this.settings.thumbSize).attr("class","sliderThumb").call(this.dragBehavior),this.thumbBackground=$("<div>").css("height",2*this.settings.thumbRadius).css("width",2*this.settings.thumbRadius).css("top",this.settings.thumbPosition-this.settings.thumbRadius).css("left",parseFloat(this.settings.width,10)/2-this.settings.thumbRadius).attr("class","thumbBackground"),this.rectangleBackground=$("<div>").css("height",parseFloat(this.settings.height,10)).css("width",this.settings.trackSize).css("top",0).css("left",parseFloat(this.settings.width,10)/2-this.settings.trackSize/2).attr("class","rectangleBackground"),this.backgroundElement.append(this.rectangleBackground).append(this.thumbBackground),this.widget.el.addClass("vertical").removeClass("horizontal"),brease.config.editMode===!1&&(this.widget.el.find(".sliderRectangle").on(BreaseEvent.CLICK,this._bind("_rectangleTrackHandler")),this.dragBehavior.on("dragstart",this._bind(this.updateThumbPositionByEvent)),this.dragBehavior.on("drag",this._bind(this.updateThumbPositionByEvent)),this.dragBehavior.on("dragend",this._bind(this.updateThumbPositionByEvent))),this.drawVerticalAxis()},n.updateThumbPositionByEvent=function(){i.event.sourceEvent.stopPropagation(),d(this,i.event)},n.updateThumbPositionByValue=function(e){this.settings.thumbPosition=this.thumbScale(e),s(this)},n.getCurrentValue=function(){this.widget.data.node.value=this.thumbScale.invert(this.settings.thumbPosition)},n.scaleDomain=function(e){switch(void 0!==e&&(this.settings.value=e.value,this.settings.minValue=e.minValue,this.settings.maxValue=e.maxValue),this.settings.orientation){case Enum.Orientation.TTB:this.thumbScale=i.scale.linear().domain([this.settings.minValue,this.settings.maxValue]).range([this.settings.thumbRadius,parseFloat(this.settings.height,10)-this.settings.thumbRadius]);break;case Enum.Orientation.BTT:this.thumbScale=i.scale.linear().domain([this.settings.minValue,this.settings.maxValue]).range([parseFloat(this.settings.height,10)-this.settings.thumbRadius,this.settings.thumbRadius]);break;case Enum.Orientation.RTL:this.thumbScale=i.scale.linear().domain([this.settings.minValue,this.settings.maxValue]).range([parseFloat(this.settings.width,10)-this.settings.thumbRadius,this.settings.thumbRadius]);break;case Enum.Orientation.LTR:this.thumbScale=i.scale.linear().domain([this.settings.minValue,this.settings.maxValue]).range([this.settings.thumbRadius,parseFloat(this.settings.width,10)-this.settings.thumbRadius])}},n.scaleMinMax=function(e){void 0!==e&&(this.settings.value=e.value,this.settings.minValue=e.minValue,this.settings.maxValue=e.maxValue),this.settings.orientation===Enum.Orientation.LTR||this.settings.orientation===Enum.Orientation.RTL?this.minMaxScale=i.scale.linear().domain([this.settings.minValue,this.settings.maxValue]).range([this.settings.thumbRadius,parseFloat(this.settings.width,10)-this.settings.thumbRadius]):(this.settings.orientation===Enum.Orientation.TTB||this.settings.orientation===Enum.Orientation.BTT)&&(this.minMaxScale=i.scale.linear().domain([this.settings.minValue,this.settings.maxValue]).range([this.settings.thumbRadius,parseFloat(this.settings.height,10)-this.settings.thumbRadius]))},n.drawHorizontalAxis=function(){var e=this.settings.height/this.settings.axisSizeFactor;"top"===this.settings.tickPosition&&o(this,e),"bottom"===this.settings.tickPosition&&l(this,e),"topbottom"===this.settings.tickPosition&&(o(this,e),l(this,e))},n.drawVerticalAxis=function(){var e=this.settings.width/this.settings.axisSizeFactor;"top"===this.settings.tickPosition&&r(this,e),"bottom"===this.settings.tickPosition&&a(this,e),"topbottom"===this.settings.tickPosition&&(r(this,e),a(this,e))},n._rectangleTrackHandler=function(e){if(!this.widget.isDisabled){var t=Types.parseValue(this.settings.largeChange,"Number",{min:0,max:100})/100,i=this.widget.data.node.value,n=this.settings.maxValue-this.settings.minValue,s,r=Utils.getScaleFactor(this.widget.elem);switch((void 0===e.offsetX||void 0===e.offsetY)&&(e.offsetX=(e.pageX-this.widget.elem.getBoundingClientRect().left)/r,e.offsetY=(e.pageY-this.widget.elem.getBoundingClientRect().top)/r),this.settings.orientation){case Enum.Orientation.TTB:e.offsetY<this.settings.thumbPosition?s=Types.parseValue(i-n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}):e.offsetY>this.settings.thumbPosition&&(s=Types.parseValue(i+n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}));break;case Enum.Orientation.BTT:e.offsetY<this.settings.thumbPosition?s=Types.parseValue(i+n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}):e.offsetY>this.settings.thumbPosition&&(s=Types.parseValue(i-n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}));break;case Enum.Orientation.RTL:e.offsetX<this.settings.thumbPosition?s=Types.parseValue(i+n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}):e.offsetX>this.settings.thumbPosition&&(s=Types.parseValue(i-n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}));break;case Enum.Orientation.LTR:e.offsetX<this.settings.thumbPosition?s=Types.parseValue(i-n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}):e.offsetX>this.settings.thumbPosition&&(s=Types.parseValue(i+n*t,"Number",{min:this.settings.minValue,max:this.settings.maxValue}))}this.widget.data.node.value=s,this.updateThumbPositionByValue(s),this.widget.submitChange(),this.widget.writeValue()}},n.updateAxis=function(){this.settings=this.widget.settings,c(this);var e;this.settings.orientation===Enum.Orientation.LTR||this.settings.orientation===Enum.Orientation.RTL?e=this.settings.height/this.settings.axisSizeFactor:(this.settings.orientation===Enum.Orientation.TTB||this.settings.orientation===Enum.Orientation.BTT)&&(e=this.settings.width/this.settings.axisSizeFactor),(void 0!==this.axisAfter||void 0!==this.axisBefore)&&("top"===this.settings.tickPosition&&(this.axisBefore.scale(this.minMaxScale).tickValues(this.tickValues).tickFormat(i.format("."+this.settings.numberFormat.decimalPlaces+"f")).innerTickSize(e),i.select("#"+this.axisId).select(".axis-before").call(this.axisBefore)),"bottom"===this.settings.tickPosition&&(this.axisAfter.scale(this.minMaxScale).tickValues(this.tickValues).tickFormat(i.format("."+this.settings.numberFormat.decimalPlaces+"f")).innerTickSize(e),i.select("#"+this.axisId).select(".axis-after").call(this.axisAfter)),"topbottom"===this.settings.tickPosition&&(this.axisBefore.scale(this.minMaxScale).tickValues(this.tickValues).tickFormat(i.format("."+this.settings.numberFormat.decimalPlaces+"f")).innerTickSize(e),i.select("#"+this.axisId).select(".axis-before").call(this.axisBefore),this.axisAfter.scale(this.minMaxScale).tickValues(this.tickValues).tickFormat(i.format("."+this.settings.numberFormat.decimalPlaces+"f")).innerTickSize(e),i.select("#"+this.axisId).select(".axis-after").call(this.axisAfter)),this.tickNumbersHandling())},n.valueDisplayHandling=function(){this.settings.showValueDisplay?this.output.css("display",""):this.output.css("display","none"),brease.config.editMode===!0&&(this.outputVal.text(this.settings.displayedValue),this.settings.showUnit&&this.outputUnit.text("unit"))},n.tickNumbersHandling=function(){this.settings.showTickNumbers===!0?this.widget.el.find("text").css("display","block"):this.widget.el.find("text").css("display","none")},n.tickPositionHandling=function(){void 0!==this.axisAfter&&i.select("#"+this.axisId).selectAll(".axis-after").remove(),void 0!==this.axisBefore&&i.select("#"+this.axisId).selectAll(".axis-before").remove(),this.settings.orientation===Enum.Orientation.LTR||this.settings.orientation===Enum.Orientation.RTL?this.drawHorizontalAxis():(this.settings.orientation===Enum.Orientation.TTB||this.settings.orientation===Enum.Orientation.BTT)&&this.drawVerticalAxis(),this.tickNumbersHandling()},n.updateImg=function(e,t){t?h(this):this.widget.el.find("img").attr("src",e)},n.thumbCornerHandling=function(e){e?this.sliderThumb.attr("rx",0):this.sliderThumb.attr("rx",this.settings.thumbRadius)},n.dispose=function(){this.dragBehavior.on("drag",null),this.widget.el.find(".sliderRectangle").off(BreaseEvent.CLICK,this._bind("_rectangleTrackHandler")),t.prototype.dispose.call(this)};function s(e){e.settings.orientation===Enum.Orientation.LTR||e.settings.orientation===Enum.Orientation.RTL?(e.sliderThumb.attr("x",e.settings.thumbPosition-e.settings.thumbRadius),e.thumbBackground.css("left",e.settings.thumbPosition-e.settings.thumbRadius),e.output.css("left",e.settings.thumbPosition-e.settings.valueDisplaySize/2)):(e.settings.orientation===Enum.Orientation.TTB||e.settings.orientation===Enum.Orientation.BTT)&&(e.sliderThumb.attr("y",e.settings.thumbPosition-e.settings.thumbRadius),e.thumbBackground.css("top",e.settings.thumbPosition-e.settings.thumbRadius),e.output.css("top",e.settings.thumbPosition-e.settings.valueDisplaySize/2))}function r(e,t){e.axisBefore=i.svg.axis().scale(e.thumbScale).tickValues(e.tickValues).innerTickSize(t).tickFormat(i.format("."+e.settings.numberFormat.decimalPlaces+"f")).orient("left"),e.axisElement.append("g").call(e.axisBefore).attr("class","axis-before").attr("transform","translate("+(e.settings.width/2-e.settings.scaleOffset)+",0)")}function a(e,t){e.axisAfter=i.svg.axis().scale(e.thumbScale).tickValues(e.tickValues).innerTickSize(t).tickFormat(i.format("."+e.settings.numberFormat.decimalPlaces+"f")).orient("right"),e.axisElement.append("g").call(e.axisAfter).attr("class","axis-after").attr("transform","translate("+(e.settings.width/2+e.settings.scaleOffset)+",0)")}function o(e,t){e.axisBefore=i.svg.axis().scale(e.thumbScale).tickValues(e.tickValues).innerTickSize(t).tickFormat(i.format("."+e.settings.numberFormat.decimalPlaces+"f")).orient("top"),e.axisElement.append("g").call(e.axisBefore).attr("class","axis-before").attr("transform","translate(0,"+(e.settings.height/2-e.settings.scaleOffset)+")")}function l(e,t){e.axisAfter=i.svg.axis().scale(e.thumbScale).tickValues(e.tickValues).innerTickSize(t).tickFormat(i.format("."+e.settings.numberFormat.decimalPlaces+"f")).orient("bottom"),e.axisElement.append("g").call(e.axisAfter).attr("class","axis-after").attr("transform","translate(0,"+(e.settings.height/2+e.settings.scaleOffset)+")")}function d(e,t){if(!e.widget.isDisabled){var i=Types.parseValue(e.settings.smallChange,"Number",{min:0,max:100})/100,n=(e.minMaxScale(e.settings.maxValue)-e.minMaxScale(e.settings.minValue))*i,r;switch(e.scaleFactor||(e.scaleFactor=Utils.getChromeScale(e.widget.elem)),e.settings.orientation){case Enum.Orientation.LTR:t.x/e.scaleFactor>=e.settings.thumbPosition+n&&(r=e.widget.data.node.value+(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e)),t.x/e.scaleFactor<=e.settings.thumbPosition-n&&(r=e.widget.data.node.value-(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e));break;case Enum.Orientation.RTL:t.x/e.scaleFactor>=e.settings.thumbPosition+n&&(r=e.widget.data.node.value-(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e)),t.x/e.scaleFactor<=e.settings.thumbPosition-n&&(r=e.widget.data.node.value+(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e));break;case Enum.Orientation.TTB:t.y/e.scaleFactor>=e.settings.thumbPosition+n&&(r=e.widget.data.node.value+(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e)),t.y/e.scaleFactor<=e.settings.thumbPosition-n&&(r=e.widget.data.node.value-(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e));break;case Enum.Orientation.BTT:t.y/e.scaleFactor>=e.settings.thumbPosition+n&&(r=e.widget.data.node.value-(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e)),t.y/e.scaleFactor<=e.settings.thumbPosition-n&&(r=e.widget.data.node.value+(e.settings.maxValue-e.settings.minValue)*i*u(e,t,n),e.settings.thumbPosition=Types.parseValue(e.thumbScale(r),"Number",{min:e.minMaxScale(e.settings.minValue),max:e.minMaxScale(e.settings.maxValue)}),s(e))}}}function u(e,t,i){var n;return e.settings.orientation===Enum.Orientation.LTR||e.settings.orientation===Enum.Orientation.RTL?n=Math.floor(Math.abs(e.settings.thumbPosition-t.x/e.scaleFactor)/i):(e.settings.orientation===Enum.Orientation.TTB||e.settings.orientation===Enum.Orientation.BTT)&&(n=Math.floor(Math.abs(e.settings.thumbPosition-t.y/e.scaleFactor)/i)),n}function c(e){var t=(e.settings.maxValue-e.settings.minValue)/(e.settings.majorTicks+1);e.tickValues=[];for(var i=0;i<e.settings.majorTicks+2;i+=1)e.tickValues[i]=parseFloat(brease.formatter.formatNumber(e.settings.minValue+i*t,e.settings.numberFormat,e.settings.useDigitGrouping,e.settings.separators))}function g(e){var t=8;e.output=$("<output/>").attr("class","valueDisplay"),e.outputVal=$("<span/>").attr("class","valueOutput"),e.outputUnit=$("<span/>").attr("class","unitOutput"),e.output.append([e.outputVal,e.outputUnit]),e.containerElement.append(e.output),e.settings.orientation===Enum.Orientation.LTR||e.settings.orientation===Enum.Orientation.RTL?e.output.css("height",e.settings.valueDisplaySize).css("top",e.settings.height/2-e.settings.valueDisplaySize-e.settings.thumbRadius-t).css("width",e.settings.valueDisplaySize):(e.settings.orientation===Enum.Orientation.TTB||e.settings.orientation===Enum.Orientation.BTT)&&e.output.css("width",e.settings.valueDisplaySize).css("left",e.settings.width/2-e.settings.valueDisplaySize-e.settings.thumbRadius-t).css("height",e.settings.valueDisplaySize)}function h(e){if(void 0!==e.settings.image&&""!==e.settings.image){var t="<img src="+e.settings.image+"></img>";e.thumbBackground.append(t),e.thumbCornerHandling(!0)}else e.thumbCornerHandling(!1)}return Renderer}),define("widgets/brease/BasicSlider/libs/Config",["require","brease/enum/Enum"],function(e){"use strict";var Enum=e("brease/enum/Enum");return{changeOnMove:!0,largeChange:10,majorTicks:5,maxValue:100,minValue:0,orientation:Enum.Orientation.LTR,smallChange:1,showTickNumbers:!1,showValueDisplay:!1,tickPosition:Enum.TickStyle.NONE,value:0,thumbSize:"25px",scaleOffset:"15px",valueDisplaySize:"35px",trackSize:"7px",image:""}}),define("widgets/brease/BasicSlider/BasicSlider",["require","brease/core/BaseWidget","brease/events/BreaseEvent","widgets/brease/BasicSlider/libs/Renderer","brease/enum/Enum","brease/core/Types","brease/core/Utils","brease/decorators/MeasurementSystemDependency","brease/datatype/Node","brease/config/NumberFormat","brease/decorators/LanguageDependency","widgets/brease/BasicSlider/libs/Config","widgets/brease/BasicSlider/libs/EditorHandles"],function(e){"use strict";var t=e("brease/core/BaseWidget"),BreaseEvent=e("brease/events/BreaseEvent"),Renderer=e("widgets/brease/BasicSlider/libs/Renderer"),Enum=e("brease/enum/Enum"),Types=e("brease/core/Types"),Utils=e("brease/core/Utils"),i=e("brease/decorators/MeasurementSystemDependency"),Node=e("brease/datatype/Node"),NumberFormat=e("brease/config/NumberFormat"),n=e("brease/decorators/LanguageDependency"),Config=e("widgets/brease/BasicSlider/libs/Config"),s=Config,r=t.extend(function BasicSlider(){t.apply(this,arguments)},s),a=r.prototype;a.init=function(){if(this.settings.omitClass!==!0&&this.addInitialClass("breaseBasicSlider"),this.data={node:new Node(this.settings.value,null,this.settings.minValue,this.settings.maxValue)},c(this),this.onMove=!1,this.renderer=new Renderer(this),this.sliderThumb=this.el.find(".sliderThumb"),this.sliderThumb.on(BreaseEvent.MOUSE_DOWN,this._bind("_mouseDownHandler")),this.settings.minValue>0&&(this.settings.value=this.settings.minValue,this.submitChange()),this.writeUnit(this.settings.unitSymbol),this.writeValue(),t.prototype.init.call(this),brease.config.editMode===!0){var EditorHandles=e("widgets/brease/BasicSlider/libs/EditorHandles"),i=new EditorHandles(this);this.getHandles=function(){return i.getHandles()},this.designer.getSelectionDecoratables=function(){return i.getSelectionDecoratables()}}},a.enable=function(){t.prototype.enable.call(this),this.renderer.rectangleBackground.removeClass("disabled"),this.renderer.thumbBackground.removeClass("disabled")},a.disable=function(){t.prototype.disable.call(this),this.renderer.rectangleBackground.addClass("disabled"),this.renderer.thumbBackground.addClass("disabled")},a.setFormat=function(e){this.settings.format=e,o(this.settings.format,this),this.renderer.updateAxis(),this.writeValue()},a.getFormat=function(){return this.settings.format},a.setLargeChange=function(e){this.settings.largeChange=e},a.getLargeChange=function(){return this.settings.largeChange},a.setMajorTicks=function(e){this.settings.majorTicks=e,this.renderer.updateAxis()},a.getMajorTicks=function(){return this.settings.majorTicks},a.setMaxValue=function(e){Utils.isNumeric(e)&&(this.data.node.setMaxValue(e),
this.renderer.settings.maxValue=e,this.renderer.scaleDomain(this.data.node),this.renderer.scaleMinMax(this.data.node),this.renderer.updateAxis(),this.setValue(this.data.node.value))},a.getMaxValue=function(){return this.data.node.maxValue},a.setMinValue=function(e){Utils.isNumeric(e)&&(this.data.node.setMinValue(e),this.renderer.settings.minValue=e,this.renderer.scaleDomain(this.data.node),this.renderer.scaleMinMax(this.data.node),this.renderer.updateAxis(),this.setValue(this.data.node.value))},a.getMinValue=function(){return this.data.node.minValue},a.setNode=function(e){void 0!==e.minValue&&this.data.node.minValue!==e.minValue&&(this.data.node.setMinValue(e.minValue),this.renderer.scaleDomain(e),this.renderer.scaleMinMax(e),this.renderer.updateAxis()),void 0!==e.maxValue&&this.data.node.maxValue!==e.maxValue&&(this.data.node.setMaxValue(e.maxValue),this.renderer.scaleDomain(e),this.renderer.scaleMinMax(e),this.renderer.updateAxis()),void 0!==this.valueChange&&"resolved"!==this.valueChange.state()?this.valueChange.resolve():this.setValue(e.value)},a.getNode=function(){return this.data.node},a.setOrientation=function(e){this.settings.orientation=e,this.el.children().remove(),this.renderer.reinitialize()},a.getOrientation=function(){return this.settings.orientation},a.setShowTickNumbers=function(e){this.settings.showTickNumbers=e,this.renderer.tickNumbersHandling()},a.getShowTickNumbers=function(){return this.settings.showTickNumbers},a.setShowValueDisplay=function(e){this.settings.showValueDisplay=e,this.renderer.valueDisplayHandling()},a.getShowValueDisplay=function(){return this.settings.showValueDisplay},a.setSmallChange=function(e){this.settings.smallChange=e},a.getSmallChange=function(){return this.settings.smallChange},a.setTickPosition=function(e){this.settings.tickPosition=e,this.renderer.tickPositionHandling()},a.getTickPosition=function(){return this.settings.tickPosition},a.setShowUnit=function(e){this.settings.showUnit=e,this.showUnit()},a.getShowUnit=function(){return this.settings.showUnit},a.setUnit=function(e){if(Utils.isObject(e))this.settings.unitTextKey=void 0,this.settings.unit=e;else if(brease.language.isKey(e))try{this.setLangDependency(!0),this.settings.unitTextKey=brease.language.parseKey(e),this.settings.unit=JSON.parse(brease.language.getTextByKey(this.settings.unitTextKey).replace(/\'/g,'"'))}catch(t){console.iatWarn(this.elem.id+':Unit String "'+e+'" is invalid!')}else{this.settings.unitTextKey=void 0;try{this.settings.unit=JSON.parse(e.replace(/\'/g,'"'))}catch(t){console.iatWarn(this.elem.id+':Unit String "'+e+'" is invalid!')}}void 0===e&&(this.settings.unit=void 0),this.processMeasurementSystemUpdate()},a.getUnit=function(){return this.settings.unit},a.setValue=function(e){this.onMove===!1&&(void 0!==e&&this.data.node.setValue(Types.parseValue(e,"Number",{min:this.data.node.minValue,max:this.data.node.maxValue})),void 0!==this.valueChange&&"resolved"!==this.valueChange.state()?this.valueChange.resolve():(this.renderer.updateThumbPositionByValue(this.data.node.value),this.writeValue()))},a.getValue=function(){return this.data.node.value},a.setScaleOffset=function(e){this.settings.scaleOffset=parseInt(e,10),this.el.children().remove(),this.renderer.reinitialize()},a.getScaleOffset=function(){return this.settings.scaleOffset+"px"},a.setThumbSize=function(e){this.settings.thumbSize=parseInt(e,10),this.el.children().remove(),this.renderer.reinitialize()},a.getThumbSize=function(){return this.settings.thumbSize+"px"},a.setValueDisplaySize=function(e){this.settings.valueDisplaySize=parseInt(e,10),this.el.children().remove(),this.renderer.reinitialize()},a.getValueDisplaySize=function(){return this.settings.valueDisplaySize+"px"},a.setTrackSize=function(e){this.settings.trackSize=parseInt(e,10),this.el.children().remove(),this.renderer.reinitialize()},a.getTrackSize=function(){return this.settings.trackSize+"px"},a.setImage=function(e){this.settings.image=e;var t=this.el.find("img");void 0!==e&&""!==e?t.length>0?this.renderer.updateImg(e,!1):this.renderer.updateImg(e,!0):(t.remove(),this.renderer.thumbCornerHandling(!1))},a.getImage=function(){return this.settings.image},a.setEditable=function(e,t){if(void 0!==t&&void 0!==t.refAttribute){var i=t.refAttribute;("value"===i||"node"===i)&&(this.settings.editable=e,this._internalEnable())}},a._setHeight=function(e){t.prototype._setHeight.call(this,e),this.el.children().remove(),this.renderer.reinitialize()},a._setWidth=function(e){t.prototype._setWidth.call(this,e),this.el.children().remove(),this.renderer.reinitialize()},a.langChangeHandler=function(e){null!==this.data.node.unit&&this.settings.showUnit===!0&&this.showUnit()},a.showUnit=function(){brease.language.pipeAsyncUnitSymbol(this.data.node.unit,this._bind("writeUnit"))},a.writeUnit=function(e){this.settings.unitSymbol=e,this.settings.showUnit===!0||"true"===this.settings.showUnit?this.renderer&&(this.renderer.outputUnit.text(e),brease.config.editMode===!0&&this.renderer.outputUnit.text("unit")):this.renderer&&this.renderer.outputUnit.text("")},a.processMeasurementSystemUpdate=function(){var e=this;this.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),o(this.settings.format,this),this.valueChange=$.Deferred(),this.unitChange=$.Deferred(),$.when(this.valueChange.promise(),this.unitChange.promise()).then(function n(){d(e)});var t=this.data.node.unit;void 0!==this.settings.unit&&this.data.node.setUnit(this.settings.unit[this.settings.mms]),this.data.node.unit!==t?brease.language.pipeAsyncUnitSymbol(this.data.node.unit,this._bind(l)):this.unitChange.resolve();var i=brease.uiController.getSubscriptionsForElement(this.elem.id);void 0!==i&&void 0!==i.node&&this.data.node.unit!==t?this.sendNodeChange({attribute:"node",nodeAttribute:"unit",value:this.data.node.unit}):this.valueChange.resolve()},a.measurementSystemChangeHandler=function(){this.processMeasurementSystemUpdate()},a.writeValue=function(){this.settings.displayedValue=brease.formatter.formatNumber(this.data.node.value,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators),this.renderer.outputVal.text(this.settings.displayedValue)},a._mouseDownHandler=function(e){this.onMove=!0,this._handleEvent(e),$(document).on(BreaseEvent.MOUSE_MOVE,this._bind("_mouseMoveHandler")),$(document).on(BreaseEvent.MOUSE_UP,this._bind("_mouseUpHandler"));var t=this.createEvent("MouseDown");t.dispatch()},a._mouseMoveHandler=function(e){this._handleEvent(e),this.renderer.getCurrentValue(),this.writeValue(),this.settings.changeOnMove===!0&&this.submitChange()},a._mouseUpHandler=function(e){this._handleEvent(e),$(document).off(BreaseEvent.MOUSE_MOVE,this._bind("_mouseMoveHandler")),$(document).off(BreaseEvent.MOUSE_UP,this._bind("_mouseUpHandler")),this.submitChange(),this.onMove=!1;var t=this.createEvent("MouseUp");t.dispatch()},a.submitChange=function(){this.sendValueChange({value:this.getValue(),node:this.getNode()});var e=this.createEvent("ValueChanged",{value:this.getValue()});e.dispatch()},a.dispose=function(){this.sliderThumb.off(),this.renderer.dispose(),$(document).off(BreaseEvent.MOUSE_UP,this._bind("_mouseUpHandler")),$(document).off(BreaseEvent.MOUSE_MOVE,this._bind("_mouseMoveHandler")),t.prototype.dispose.apply(this,arguments)};function o(e,t){if(void 0!==t.settings.format){var i;if(Utils.isObject(e))t.settings.numberFormat=NumberFormat.getFormat(t.settings.format,t.settings.mms);else if("string"==typeof e)if(brease.language.isKey(e))try{t.setLangDependency(!0);var n=brease.language.parseKey(e);i=JSON.parse(brease.language.getTextByKey(n).replace(/\'/g,'"')),t.settings.numberFormat=NumberFormat.getFormat(i,t.settings.mms)}catch(s){console.iatWarn(t.elem.id+': Format String "'+e+'" is invalid!'),t.settings.numberFormat=NumberFormat.getFormat({},t.settings.mms)}else try{i=JSON.parse(e.replace(/\'/g,'"')),t.settings.numberFormat=NumberFormat.getFormat(i,t.settings.mms)}catch(s){console.iatWarn(t.elem.id+': Format String "'+e+'" is invalid!'),t.settings.numberFormat=NumberFormat.getFormat({},t.settings.mms)}}else t.settings.numberFormat=NumberFormat.getFormat({},t.settings.mms);t.settings.separators=brease.user.getSeparators()}function l(e){this.settings.unitSymbol=e,this.unitChange.resolve()}function d(e){e.writeUnit(e.settings.unitSymbol),e.renderer.updateAxis(),e.renderer.getCurrentValue(),e.writeValue()}function u(e){e.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),Utils.isObject(e.settings.unit)&&(e.data.node.unit=e.settings.unit[brease.measurementSystem.getCurrentMeasurementSystem()],e.showUnit(),e.setLangDependency(!0))}function c(e){h(e),e.settings.separators=brease.user.getSeparators(),e.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),o(e.settings.format,e),u(e)}function g(e){e.settings.showTickNumbers===!0?e.el.find("text").css("display","block"):e.el.find("text").css("display","none")}function h(e){e.settings.thumbSize=parseInt(e.settings.thumbSize,10),e.settings.valueDisplaySize=parseInt(e.settings.valueDisplaySize,10),e.settings.scaleOffset=parseInt(e.settings.scaleOffset,10),e.settings.trackSize=parseInt(e.settings.trackSize,10)}return i.decorate(n.decorate(r,!1),!0)}),define("widgets/brease/BasicSlider/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.BasicSlider",parents:["*"],children:[],inheritance:["widgets.brease.BasicSlider","brease.core.BaseWidget"],actions:{SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFormat:{method:"setFormat",parameter:{format:{name:"format",index:0,type:"brease.config.MeasurementSystemFormat"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setLargeChange:{method:"setLargeChange",parameter:{largeChange:{name:"largeChange",index:0,type:"UNumber"}}},setMajorTicks:{method:"setMajorTicks",parameter:{majorTicks:{name:"majorTicks",index:0,type:"UInteger"}}},setMaxValue:{method:"setMaxValue",parameter:{maxValue:{name:"maxValue",index:0,type:"Number"}}},setMinValue:{method:"setMinValue",parameter:{minValue:{name:"minValue",index:0,type:"Number"}}},setNode:{method:"setNode",parameter:{node:{name:"node",index:0,type:"brease.datatype.Node"}}},setOrientation:{method:"setOrientation",parameter:{orientation:{name:"orientation",index:0,type:"brease.enum.Orientation"}}},setScaleOffset:{method:"setScaleOffset",parameter:{scaleOffset:{name:"scaleOffset",index:0,type:"PixelVal"}}},setShowTickNumbers:{method:"setShowTickNumbers",parameter:{showTickNumbers:{name:"showTickNumbers",index:0,type:"Boolean"}}},setShowUnit:{method:"setShowUnit",parameter:{showUnit:{name:"showUnit",index:0,type:"Boolean"}}},setShowValueDisplay:{method:"setShowValueDisplay",parameter:{showValueDisplay:{name:"showValueDisplay",index:0,type:"Boolean"}}},setSmallChange:{method:"setSmallChange",parameter:{smallChange:{name:"smallChange",index:0,type:"UNumber"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setThumbSize:{method:"setThumbSize",parameter:{thumbSize:{name:"thumbSize",index:0,type:"PixelVal"}}},setTickPosition:{method:"setTickPosition",parameter:{tickPosition:{name:"tickPosition",index:0,type:"brease.enum.TickStyle"}}},setTrackSize:{method:"setTrackSize",parameter:{trackSize:{name:"trackSize",index:0,type:"PixelVal"}}},setUnit:{method:"setUnit",parameter:{unit:{name:"unit",index:0,type:"brease.config.MeasurementSystemUnit"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"Number"}}},setValueDisplaySize:{method:"setValueDisplaySize",parameter:{valueDisplaySize:{name:"valueDisplaySize",index:0,type:"PixelVal"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/Button/Button.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/Button">CONTENT</div>\r\n'}),define("widgets/brease/common/libs/wfUtils/UtilsImage",["require","libs/d3/d3"],function(e){"use strict";var t=e("libs/d3/d3"),UtilsImage={};return UtilsImage.getInlineSvg=function(e){var i=$.Deferred();return t.xml(e).mimeType("image/svg+xml").get(function(e,t){if(e){var n=UtilsImage.getBrokenSvg();i.resolve($(n))}else i.resolve($(t.documentElement))}),i.promise()},UtilsImage.isStylable=function(e){var t;return t=""!==e&&void 0!==e&&"svg"===e.split(".").pop()?!0:!1,t},UtilsImage.getBrokenSvg=function(){var e=document.createElementNS(t.ns.prefix.svg,"svg"),i=t.select(e).attr("style","width: 20px; height:23px");return i.append("line").attr("x1",3.75).attr("y1",-.069449).attr("x2",.75).attr("y2",23).attr("stroke","#b2b2b2").attr("stroke-width",1.5),i.append("line").attr("x1",23).attr("y1",22.25).attr("x2",0).attr("y2",22.25).attr("stroke","#666666").attr("stroke-width",1.5),i.append("line").attr("x1",22.521265).attr("y1",3.787241).attr("x2",22.521265).attr("y2",16.808505).attr("stroke","#666666").attr("stroke-width",1.5),i.append("line").attr("x1",19.25).attr("y1",5.202132).attr("x2",19.25).attr("y2",23).attr("stroke","#666666").attr("stroke-width",1.5),i.append("rect").attr("height",3.339856).attr("width",15.40424).attr("x",2.297881).attr("y",17.436729).attr("stroke","#00bf00").attr("stroke-width",1.5).attr("fill","#00bf00"),i.append("rect").attr("height",7.914511).attr("width",14.553177).attr("x",2.808519).attr("y",8.01064).attr("stroke","#97c9fc").attr("stroke-width",2.5).attr("fill","#97c9fc"),i.append("rect").attr("height",3.489358).attr("width",8.51063).attr("x",2.808518).attr("y",2.563837).attr("stroke","#97c9fc").attr("stroke-width",2.5).attr("fill","#97c9fc"),i.append("ellipse").attr("rx",1.548673).attr("ry",.309735).attr("cx",5.840707).attr("cy",5.615045).attr("stroke","#ffffff").attr("stroke-width",1.5),i.append("ellipse").attr("rx",7.743362).attr("ry",2.964602).attr("cx",10.088495).attr("cy",16.676991).attr("stroke","#00bf00").attr("stroke-width",1.5).attr("fill","#00bf00"),i.append("line").attr("x1",21.814158).attr("y1",12.207965).attr("x2",7.743362).attr("y2",25.039822).attr("stroke","#ffffff").attr("stroke-width",3.5),i.append("line").attr("x1",12.964601).attr("y1",.349558).attr("x2",19.690264).attr("y2",6.013275).attr("stroke","#666666").attr("stroke-width",1.5),i.append("line").attr("x1",0).attr("y1",.615045).attr("x2",13.672565).attr("y2",.792036).attr("stroke","#b2b2b2").attr("stroke-width",1.5),i.append("line").attr("x1",12.964601).attr("y1",-.09292).attr("x2",13.053096).attr("y2",6.89823).attr("stroke","#666666").attr("stroke-width",1.5),i.append("line").attr("x1",19.867255).attr("y1",6.190266).attr("x2",12.610619).attr("y2",6.278761).attr("stroke","#666666").attr("stroke-width",1.5),e},UtilsImage}),define("widgets/brease/Button/Button",["require","brease/core/BaseWidget","brease/decorators/LanguageDependency","brease/enum/Enum","brease/core/Types","brease/core/Utils","widgets/brease/common/libs/wfUtils/UtilsImage","brease/events/BreaseEvent"],function(e){"use strict";var t=e("brease/core/BaseWidget"),i=e("brease/decorators/LanguageDependency"),Enum=e("brease/enum/Enum"),Types=e("brease/core/Types"),Utils=e("brease/core/Utils"),UtilsImage=e("widgets/brease/common/libs/wfUtils/UtilsImage"),BreaseEvent=e("brease/events/BreaseEvent"),n={imageAlign:Enum.ImageAlign.left,ellipsis:!1,wordWrap:!1,multiLine:!1,breakWord:!1},s=t.extend(function Button(){t.apply(this,arguments)},n),r=s.prototype;s["static"].multitouch=!0,r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseButton"),a.call(this),o(this),l.call(this),t.prototype.init.call(this)},r.langChangeHandler=function(e){this.settings.textkey&&this.setText(brease.language.getTextByKey(this.settings.textkey),!0),this.settings.mouseDownTextkey&&this.setMouseDownText(brease.language.getTextByKey(this.settings.mouseDownTextkey),!0)},r.setText=function(e,t){return this.settings.text=e,t!==!0&&this.removeTextKey(),brease.config.editMode!==!0&&brease.language.isKey(this.settings.text)===!0?(this.setTextKey(brease.language.parseKey(this.settings.text),!1),this.langChangeHandler(),void 0):(void 0===this.textEl&&c(this),this.textEl&&this.textEl.text(e),this.setClasses(),void 0)},r.getText=function(){return this.settings.text},r.setMouseDownText=function(e,t){if(this.settings.mouseDownText=e,void 0!==this.settings.mouseDownText&&""!==this.settings.mouseDownText){if(t!==!0&&this.removeMouseDownTextKey(),brease.config.editMode!==!0&&brease.language.isKey(this.settings.mouseDownText)===!0)return this.setMouseDownTextKey(brease.language.parseKey(this.settings.mouseDownText),!1),this.langChangeHandler(),void 0;void 0===this.downtextEl&&d(this),this.downtextEl&&(""===this.settings.mouseDownText&&this.downtextEl.text(this.settings.text),this.downtextEl.text(e)),this.setClasses()}else void 0!==this.downtextEl&&u(this)},r.getMouseDownText=function(){return this.settings.mouseDownText},r.setMouseDownImage=function(e){""===e?(this.settings.mouseDownImage=void 0,(this.el.hasClass("active")||this.el.hasClass("checked"))&&this.setImage(this.settings.image,!0)):(this.settings.mouseDownImage=e,(this.el.hasClass("active")||this.el.hasClass("checked"))&&this.setImage(this.settings.mouseDownImage,!0))},r.getMouseDownImage=function(){return this.settings.mouseDownImage},r.setEllipsis=function(e){this.settings.ellipsis=e,o(this)},r.getEllipsis=function(){return this.settings.ellipsis},r.setImageAlign=function(e){this.settings.imageAlign=e,this.setClasses(),!this.textEl||this.settings.imageAlign!==Enum.ImageAlign.left&&this.settings.imageAlign!==Enum.ImageAlign.top?(this.el.append(this.imgEl),this.el.append(this.svgEl)):(this.el.prepend(this.imgEl),this.el.prepend(this.svgEl))},r.getImageAlign=function(){return this.settings.imageAlign},r.setMultiLine=function(e){this.settings.multiLine=e,o(this)},r.getMultiLine=function(){return this.settings.multiLine},r.setWordWrap=function(e){this.settings.wordWrap=e,o(this)},r.getWordWrap=function(){return this.settings.wordWrap},r.setBreakWord=function(e){this.settings.breakWord=e,o(this)},r.getBreakWord=function(){return this.settings.breakWord},r.setTextKey=function(e,t){void 0!==e&&(this.settings.textkey=e,this.setLangDependency(!0),t!==!1&&this.langChangeHandler())},r.getTextKey=function(){return this.settings.textkey},r.removeTextKey=function(){this.settings.textkey=null,this.settings.mouseDownTextkey||this.setLangDependency(!1)},r.setMouseDownTextKey=function(e,t){void 0!==e&&(this.settings.mouseDownTextkey=e,this.setLangDependency(!0),t!==!1&&this.langChangeHandler())},r.getMouseDownTextKey=function(){return this.settings.mouseDownTextkey},r.removeMouseDownTextKey=function(){this.settings.mouseDownTextkey=null,this.settings.textkey||this.setLangDependency(!1)},r.setImage=function(e,t){var i=this;void 0!==e&&""!==e?(t!==!0&&(this.settings.image=e),UtilsImage.isStylable(e)?(this.imgEl.hide(),UtilsImage.getInlineSvg(e).then(function(e){i.svgEl.replaceWith(e),i.svgEl=e,i.svgEl.show()})):(this.imgEl.show(),this.svgEl.hide(),this.imgEl.attr("src",e)),this.setClasses()):(this.settings.image=void 0,this.imgEl.hide(),this.svgEl.hide())},r.getImage=function(){return this.settings.image},r.removeImage=function(){this.imgEl&&(this.imgEl.hide(),this.svgEl.hide(),this.settings.image=void 0),this.setClasses()},r.removeText=function(){this.setText(""),this.setClasses()},r.removeMouseDownText=function(){this.setMouseDownText(""),this.setClasses()},r._initEventHandler=function(){this.el&&(this.el.on(BreaseEvent.CLICK,this._bind("_clickEventHandler")),this.el.on(BreaseEvent.CLICK,this._bind("_clickHandler")).on("click",this._bind("_preventClickHandler")),this.el.on(BreaseEvent.DBL_CLICK,this._bind("_dblclickHandler")),this.el.on(BreaseEvent.MOUSE_DOWN,this._bind("_downHandler")))},r._clickHandler=function(e){},r._clickEventHandler=function(e){if(!this.isDisabled&&!brease.config.editMode){var t=this.createEvent("Click",{origin:brease.uiController.parentWidgetId(e.target)});t.dispatch()}},r._dblclickHandler=function(e){if(!this.isDisabled&&!brease.config.editMode){var t=this.createEvent("DoubleClick");t.dispatch()}},r._downHandler=function(e){if(!(this.isDisabled||brease.config.editMode||this.isActive)){this.isActive=!0,this.pointerId=Utils.getPointerId(e),void 0!==this.settings.mouseDownImage&&this.setImage(this.settings.mouseDownImage,!0),this.el.addClass("active"),$(document).on(BreaseEvent.MOUSE_UP,this._bind("_upHandler"));var t=this.createEvent("MouseDown");t.dispatch()}},r._upHandler=function(e){if(!this.isDisabled&&!brease.config.editMode&&Utils.getPointerId(e)===this.pointerId){this.isActive=!1,void 0!==this.settings.mouseDownImage&&void 0!==this.settings.image&&this.setImage(this.settings.image,!0),void 0!==this.settings.mouseDownImage&&void 0===this.settings.image&&this.setImage("",!1),this.el.removeClass("active"),$(document).off(BreaseEvent.MOUSE_UP,this._bind("_upHandler"));var t=this.createEvent("MouseUp");t.dispatch()}},r.disable=function(){this.isActive&&this.el.trigger(BreaseEvent.MOUSE_UP),t.prototype.disable.apply(this,arguments)},r._preventClickHandler=function(e){this._handleEvent(e)},r.wake=function(){t.prototype.wake.apply(this,arguments)},r.suspend=function(){$(document).off(BreaseEvent.MOUSE_UP,this._bind("_upHandler")),this.isActive=!1,this.el.removeClass("active"),t.prototype.suspend.apply(this,arguments)},r.dispose=function(){$(document).off(BreaseEvent.MOUSE_UP,this._bind("_upHandler")),this.isActive=!1,this.el.removeClass("active"),t.prototype.dispose.apply(this,arguments)},r.setClasses=function(){var e;if(void 0!==this.imgEl&&void 0!==this.textEl&&""!==this.settings.text){switch(this.settings.imageAlign){case Enum.ImageAlign.left:e="image-left";break;case Enum.ImageAlign.right:e="image-right";break;case Enum.ImageAlign.top:e="image-top";break;case Enum.ImageAlign.bottom:e="image-bottom"}this.el.removeClass("image-left image-right image-top image-bottom"),this.el.addClass(e)}else this.el.removeClass("image-left image-right image-top image-bottom")};function a(){this.settings.imageAlign=Types.parseValue(this.settings.imageAlign,"Enum",{IAT_Enum:Enum.ImageAlign,"default":Enum.ImageAlign.left}),void 0===this.imgEl&&void 0===this.svgEl&&(this.imgEl=$("<img/>").hide(),this.svgEl=$("<svg/>").hide()),this.setImageAlign(this.settings.imageAlign),void 0!==this.settings.image&&this.setImage(this.settings.image)}function o(e){e.settings.ellipsis=Types.parseValue(e.settings.ellipsis,"Boolean"),e.settings.multiLine=Types.parseValue(e.settings.multiLine,"Boolean"),e.settings.wordWrap=Types.parseValue(e.settings.wordWrap,"Boolean"),e.settings.ellipsis===!0?e.el.addClass("ellipsis"):e.el.removeClass("ellipsis"),e.settings.multiLine===!0?(e.el.addClass("multiLine"),e.settings.wordWrap===!0?(e.el.addClass("wordWrap"),e.el.removeClass("multiLine")):e.el.removeClass("wordWrap"),e.settings.breakWord===!0?(e.el.addClass("breakWord"),e.el.removeClass("multiLine")):e.el.removeClass("breakWord")):(e.el.removeClass("breakWord"),e.el.removeClass("wordWrap"),e.el.removeClass("multiLine"))}function l(){void 0!==this.settings.text&&""!==this.settings.text&&(brease.language.isKey(this.settings.text)===!1?this.setText(this.settings.text):this.setTextKey(brease.language.parseKey(this.settings.text),!1)),void 0!==this.settings.mouseDownText&&""!==this.settings.mouseDownText&&(brease.language.isKey(this.settings.mouseDownText)===!1?this.setMouseDownText(this.settings.mouseDownText):this.setMouseDownTextKey(brease.language.parseKey(this.settings.mouseDownText),!1)),this.langChangeHandler()}function d(e){void 0===e.downtextEl&&(e.downtextEl=$('<span class="down"></span>')),!e.imgEl||e.settings.imageAlign!==Enum.ImageAlign.right&&e.settings.ImageAlign!==Enum.ImageAlign.bottom?e.el.append(e.downtextEl):e.el.prepend(e.downtextEl)}function u(e){void 0!==e.downtextEl&&(e.downtextEl.remove(),e.downtextEl=void 0)}function c(e){void 0===e.textEl&&(e.textEl=$('<span class="up"></span>')),!e.imgEl||e.settings.imageAlign!==Enum.ImageAlign.right&&e.settings.imageAlign!==Enum.ImageAlign.bottom?e.el.append(e.textEl):e.el.prepend(e.textEl)}return i.decorate(s,!1)}),define("widgets/brease/Button/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.Button",parents:["*"],children:[],inheritance:["widgets.brease.Button","brease.core.BaseWidget"],actions:{RemoveImage:{method:"removeImage"},RemoveMouseDownText:{method:"removeMouseDownText"},RemoveText:{method:"removeText"},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},SetMouseDownImage:{method:"setMouseDownImage",parameter:{mouseDownImage:{name:"mouseDownImage",index:0,type:"ImagePath"}}},SetMouseDownText:{method:"setMouseDownText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setMouseDownTextKey:{method:"setMouseDownTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/ButtonBar/ButtonBar.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/ButtonBar">CONTENT</div>\r\n'}),define("widgets/brease/ToggleButton/ToggleButton",["require","widgets/brease/Button/Button","brease/enum/Enum","brease/core/Utils","brease/core/Types","brease/events/BreaseEvent"],function(e){"use strict";var t=e("widgets/brease/Button/Button"),Enum=e("brease/enum/Enum"),Utils=e("brease/core/Utils"),Types=e("brease/core/Types"),BreaseEvent=e("brease/events/BreaseEvent"),i={value:!1},n=t.extend(function ToggleButton(){t.apply(this,arguments)},i),s=n.prototype;n.values={checked:!0,unchecked:!1},s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseToggleButton"),t.prototype.init.call(this),this.settings.value=Types.parseValue(this.settings.value,"Boolean"),this.settings.value===n.values.checked&&this.toggle(this.settings.value,!0)},s.toggle=function(e,t){var i=!1;if(e=r.call(this,e),e===n.values.checked?(this.settings.value===n.values.unchecked&&(i=!0),this.settings.value=n.values.checked):(this.settings.value===n.values.checked&&(i=!0),this.settings.value=n.values.unchecked),a(this,this.settings.value),i===!0&&t!==!0){var s=this.createEvent("ValueChanged",{newValue:this.getValue()});s.dispatch(),this.submitChange()}this.dispatchEvent(new CustomEvent(BreaseEvent.CHANGE,{bubbles:!0,cancelable:!0,detail:{checked:this.isChecked()}}))};function r(e){return void 0===e&&(e=this.settings.value===n.values.unchecked?n.values.checked:n.values.unchecked),e}s.setValue=function(e,t){1===e?e=!0:0===e&&(e=!1),this.toggle(e,void 0!==t&&"server"===t.origin)},s.getValue=function(){return this.settings.value},s.setImage=function(e,i){i!==!0&&(this.el.hasClass("checked")||this.el.hasClass("active"))&&void 0!==this.settings.mouseDownImage?(void 0!==e||""!==e)&&(this.settings.image=e):t.prototype.setImage.call(this,e,i)},s.setEditable=function(e,t){if(void 0!==t&&void 0!==t.refAttribute){var i=t.refAttribute;"value"===i&&(this.settings.editable=e,this._internalEnable())}},s.isChecked=function(){return this.settings.value===n.values.checked},s.submitChange=function(){this.sendValueChange({value:this.getValue()})},s._clickHandler=function(e){this.isDisabled||(t.prototype._clickHandler.call(this,e),this.isDisabled!==!0&&this.toggle())},s._downHandler=function(e){if(!(this.isDisabled||brease.config.editMode||this.isActive)){this.isActive=!0,this.pointerId=Utils.getPointerId(e),this.el.addClass("active"),$(document).on(BreaseEvent.MOUSE_UP,this._bind("_upHandler"));var t=this.createEvent("MouseDown");t.dispatch()}},s._upHandler=function(e){if(!this.isDisabled&&!brease.config.editMode&&Utils.getPointerId(e)===this.pointerId){this.isActive=!1,this.el.removeClass("active"),$(document).off(BreaseEvent.MOUSE_UP,this._bind("_upHandler"));var t=this.createEvent("MouseUp");t.dispatch()}},s.isToggleButton=function(){return!0};function a(e,t){t?(e.el.addClass("checked"),void 0!==e.settings.mouseDownImage&&""!==e.settings.mouseDownImage&&e.setImage(e.settings.mouseDownImage,!0)):(e.el.removeClass("checked"),void 0!==e.settings.mouseDownImage&&e.setImage(e.settings.image,!0))}return n}),define("widgets/brease/ButtonBar/ButtonBar",["require","brease/core/ContainerWidget","widgets/brease/ToggleButton/ToggleButton","brease/events/BreaseEvent","brease/helper/Scroller","brease/enum/Enum","brease/core/Types","widgets/brease/ButtonBar/libs/EditorHandles"],function(e){"use strict";var t=e("brease/core/ContainerWidget"),ToggleButton=e("widgets/brease/ToggleButton/ToggleButton"),BreaseEvent=e("brease/events/BreaseEvent"),Scroller=e("brease/helper/Scroller"),i=brease.uiController,Enum=e("brease/enum/Enum"),Types=e("brease/core/Types"),n={cancelButtonChangeEvents:!0,submitOnChange:!0,alignment:Enum.Direction.vertical,childPositioning:Enum.ChildPositioning.absolute,autoScroll:!1,selectedIndex:0},s=t.extend(function ButtonBar(){t.apply(this,arguments)},n),r=s.prototype;r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseButtonBar"),brease.config.editMode===!0&&this.addInitialClass("iatd-outline");var i=this;t.prototype.init.call(this),l(this),d(this),c(this),this.el.on(BreaseEvent.CHANGE,this._bind("_buttonChangeHandler")),this.el.on(BreaseEvent.WIDGET_READY,this._bind("_widgetReadyHandler")),this.settings.buttonIds=[],$("#"+this.elem.id+"_scrollWrapper").children().each(function(){i.settings.buttonIds.push($(this).attr("id"))}),this.buttonReady=[];for(var n=0;n<this.settings.buttonIds.length;n+=1)this.buttonReady[n]=new $.Deferred;if($.when.apply(this,this.buttonReady).then(function(){i._refreshScroller()}),void 0!==this.settings.selectedId?this.setSelectedId(this.settings.selectedId):void 0!==this.settings.selectedIndex&&this.setSelectedIndex(this.settings.selectedIndex),brease.config.editMode){var EditorHandles=e("widgets/brease/ButtonBar/libs/EditorHandles"),s=new EditorHandles(this);this.getHandles=function(){return s.getHandles()}}},r.setAlignment=function(e){this.settings.alignment=e,o(this)},r.getAlignment=function(){return this.settings.alignment},r.setChildPositioning=function(e){this.settings.childPositioning=Types.parseValue(e,"Enum",{IAT_Enum:Enum.ChildPositioning,"default":n.childPositioning}),c(this)},r.getChildPositioning=function(){return this.settings.childPositioning},r.setSelectedId=function(e,t){var i=this;0===this.readyState?u.call(this,e,t):window.setTimeout(function(){i.setSelectedId(e,t)},0)},r.getSelectedId=function(){return this.settings.selectedId},r.setSelectedIndex=function(e){if(e=parseInt(e,10),e>-1){var t=this.buttons[e];t&&t.id&&this.setSelectedId(t.id)}else this.reset()},r.getSelectedIndex=function(){return this.settings.selectedIndex},r.setAutoScroll=function(e){this.settings.autoScroll=e,this.settings.childPositioning===Enum.ChildPositioning.relative&&(e?o(this):(h(this),
o(this)))},r.getAutoScroll=function(){return this.settings.autoScroll},r.submitChange=function(){this.sendValueChange({selectedIndex:this.getSelectedIndex()});var e=this.createEvent("SelectedIndexChanged",{value:this.getSelectedIndex()});e&&e.dispatch()},r.enable=function(){t.prototype.enable.apply(this,arguments),$("#"+this.elem.id+" > [data-brease-widget]").each(function(){brease.uiController.callWidget(this.id,"enable")})},r.disable=function(){t.prototype.disable.apply(this,arguments),$("#"+this.elem.id+" > [data-brease-widget]").each(function(){brease.uiController.callWidget(this.id,"disable")})},r.reset=function(){this.settings.selectedIndex=-1,u.call(this,"")},r._buttonClickHandler=function(e){this._handleEvent(e);var t=$(e.target).closest("[data-brease-widget]").attr("id");this.isDisabled||-1===this.buttonIds.indexOf(t)||t===this.settings.selectedId||i.callWidget(t,"isEnabled")!==!0||this.setSelectedId(t,"user")},r.removeClickHandler=function(e){var t=i.callWidget(e,"widget");t&&t.el&&t.el.off(BreaseEvent.CLICK,t._bind("_clickHandler"))},r._buttonChangeHandler=function(e){var t=e.target.id,i=!1;-1!==this.buttonIds.indexOf(t)&&(this.buttons[this.buttonIndex[t]].selected=e.originalEvent.detail.checked);for(var n=0;n<this.buttons.length;n+=1)this.buttons[n].selected===!0&&(i=!0);i===!1&&(this.settings.selectedIndex=-1,this.settings.selectedId=""),this.settings.cancelButtonChangeEvents===!0&&e.target!==this.elem&&(e.stopImmediatePropagation(),e.stopPropagation())},r._widgetReadyHandler=function(e){var t=this.settings.buttonIds.indexOf(e.target.id);-1!==t&&this.buttonReady[t].resolve()},r.widgetAddedHandler=function(e){this.scrollWrapper||this.settings.childPositioning!==Enum.ChildPositioning.relative?this.scrollWrapper&&this.settings.childPositioning===Enum.ChildPositioning.relative&&m(this):o(this)},r.widgetRemovedHandler=function(e){f(this)},r._enableScroll=function(e){if(null!==this.el){var t=this;$(window).off("mouseup",t._bind("_enableScroll")),t.el.parents().find("[data-brease-widget*=ButtonBar]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.enable()})}},r._disableScroll=function(e){if(null!==this.el){var t=this;$(window).on("mouseup",t._bind("_enableScroll")),t.el.parents("[data-brease-widget*=ButtonBar]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.disable()}),"wheel"===e.originalEvent.type&&setTimeout(function(){t.el.parents("[data-brease-widget*=ButtonBar]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.enable()})},50)}},r._scrollUpdateHandler=function(e){this._handleEvent(e),void 0!==this.scroller?this._refreshScroller():o(this)},r._refreshScroller=function(){var e=this;e.settings.autoScroll&&brease.config.editMode&&e.el.hasClass("vertical")&&e.scrollWrapper.height(v(e)),e.scroller&&e.scroller.refresh()},r.wake=function(){t.prototype.wake.apply(this,arguments)},r.suspend=function(){t.prototype.suspend.apply(this,arguments)},r.dispose=function(){this.scroller&&(this.scroller.destroy(),this.scroller=null,this.scrollWrapper=null),this.el.off(),this.container.off(),this.buttons=null,this.buttonIds=null,t.prototype.dispose.apply(this,arguments)};function a(e,t,i){$(e).each(function(){$(this).css(function(){return t}(),i)})}function o(e){(e.el.hasClass("vertical")||e.el.hasClass("horizontal"))&&e.el.removeClass("vertical","horizontal");var t;"horizontal"===e.settings.alignment?(e.el.removeClass("vertical"),e.el.addClass("horizontal"),t={mouseWheel:!0,tap:!0,scrollY:!1,scrollX:!0}):"vertical"===e.settings.alignment&&(e.el.removeClass("horizontal"),e.el.addClass("vertical"),t={mouseWheel:!0,tap:!0,scrollY:!0,scrollX:!1}),e.el.off("tap",e._bind("_buttonClickHandler")),e.el.off(BreaseEvent.CLICK,e._bind("_buttonClickHandler")),e.container.off("VisibleChanged",e._bind("_scrollUpdateHandler")),e.settings.childPositioning===Enum.ChildPositioning.relative?!e.scrollWrapper&&e.settings.autoScroll?(g(e,t),e.el.addClass("autoScroll"),e.el.on("tap",e._bind("_buttonClickHandler")),e.container.on("VisibleChanged",e._bind("_scrollUpdateHandler"))):e.scrollWrapper&&e.settings.autoScroll?(p(e,t),m(e),e.el.on("tap",e._bind("_buttonClickHandler"))):e.settings.autoScroll||(e.el.on(BreaseEvent.CLICK,e._bind("_buttonClickHandler")),e.el.removeClass("autoScroll")):(e.el.on(BreaseEvent.CLICK,e._bind("_buttonClickHandler")),e.el.removeClass("autoScroll"))}function l(e){e.buttons=[],e.buttonIds=[],e.el.find("[data-brease-widget]").each(function(){var t=this,i=t.id,n={el:$(t),elem:t,id:i,state:Enum.WidgetState.IN_QUEUE,selected:!1};e.buttons.push(n),e.buttonIds.push(n.id)})}function d(e){var t=-1;e.buttonIndex={},e.readyState=0,e.el.find("[data-brease-widget]").each(function(){var n=this,s=n.id,r={el:$(n),elem:n,id:s,state:Enum.WidgetState.IN_QUEUE,selected:!1};e.readyState+=1,t+=1,e.buttonIndex[s]=t,i.getWidgetState(s)>0?(r.state=Enum.WidgetState.INITIALIZED,e.readyState-=1,e.removeClickHandler(s)):n.addEventListener(BreaseEvent.WIDGET_INITIALIZED,function(t){e.buttons[e.buttonIndex[t.target.id]].state=Enum.WidgetState.INITIALIZED,e.readyState-=1,e.removeClickHandler(t.target.id)})})}function u(e,t){var n=this,s=e,r;if(this.settings.selectedId!==e){for(var a=this.buttons.length,o=0;a>o;o+=1){if(null===this.buttons)return;r=this.buttons[o];var l=i.callWidget(r.id,"isToggleButton");l===!0&&(s===r.id?(i.callWidget(r.id,"toggle",ToggleButton.values.checked,void 0,t),r.el.css("z-index",100),n.settings.selectedIndex=o,n.settings.selectedData=r.el.data("brease-data")):(i.callWidget(r.id,"toggle",ToggleButton.values.unchecked,void 0,t),r.el.css("z-index",o)))}this.settings.selectedId=e,this.dispatchEvent(new CustomEvent(BreaseEvent.CHANGE,{detail:{selectedId:this.settings.selectedId,selectedData:this.settings.selectedData,selectedIndex:this.settings.selectedIndex,origin:t}})),this.settings.submitOnChange===!0&&"user"===t&&this.submitChange()}}function c(e){var t="#"+e.elem.id+" > div > [data-brease-widget]";e.settings.childPositioning===Enum.ChildPositioning.relative?($(t).each(function(){var e=brease.uiController.getWidgetState(this.id);if(e<Enum.WidgetState.INITIALIZED)brease.uiController.addWidgetOption(this.id,"position","relative");else{var t=brease.uiController.callWidget(this.id,"widget");$("#"+this.id).css("position","relative")}}),o(e)):e.settings.childPositioning===Enum.ChildPositioning.absolute&&(e.settings.autoScroll&&h(e),o(e),$(t).each(function(){var e=brease.uiController.getWidgetState(this.id);if(e<Enum.WidgetState.INITIALIZED)brease.uiController.addWidgetOption(this.id,"position","absolute");else{var t=brease.uiController.callWidget(this.id,"widget");$("#"+this.id).css("position","absolute")}}))}function g(e,t){var i;i=e.container.children().detach(),e.scrollWrapper=$("<div/>").addClass("scrollWrapper").attr("id",e.elem.id+"_scrollWrapper"),e.scrollWrapper.append(i),e.container.height("100%"),e.container.width("100%"),e.container.append(e.scrollWrapper),e.scroller=Scroller.addScrollbars(e.container[0],t),e.el.on("mousedown wheel",e._bind("_disableScroll")),e._refreshScroller()}function h(e){var t=e.container.children("#"+e.elem.id+"_scrollWrapper").children().detach();e.container.children().remove(),e.container.append(t),e.scroller=void 0,e.scrollWrapper=void 0}function p(e,t){e.container.children(".iScrollLoneScrollbar").remove(),e.scroller=Scroller.addScrollbars(e.container[0],t)}function m(e){var t;t=e.container.children(".breaseWidget").detach(),e.scrollWrapper.append(t),e._refreshScroller()}function f(e){e._refreshScroller()}function v(e){var t=0,i,n="#"+e.elem.id+"_scrollWrapper",s=0;return brease.config.editMode?$(n).children().each(function(){i=$(this).position(),t=i.top+$(this).outerHeight(!0),t>s&&(s=t)}):$(n).children().each(function(){$(this).hasClass("remove")!==!0&&(i=$(this).position(),t=i.top+$(this).outerHeight(!0),t>s&&(s=t))}),s}return s}),define("widgets/brease/ButtonBar/designer/ClassInfo",["brease/core/designer/ContainerWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.ButtonBar",parents:["*"],children:["widgets.brease.ToggleButton"],inheritance:["widgets.brease.ButtonBar","brease.core.ContainerWidget","brease.core.BaseWidget"],actions:{setAlignment:{method:"setAlignment",parameter:{alignment:{name:"alignment",index:0,type:"String"}}},setAutoScroll:{method:"setAutoScroll",parameter:{autoScroll:{name:"autoScroll",index:0,type:"Boolean"}}},setChildPositioning:{method:"setChildPositioning",parameter:{childPositioning:{name:"childPositioning",index:0,type:"String"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setSelectedId:{method:"setSelectedId",parameter:{id:{name:"id",index:0,type:"Object"}}},SetSelectedIndex:{method:"setSelectedIndex",parameter:{index:{name:"index",index:0,type:"Integer"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/common/DragDropHandler/doc/example.html",[],function(){return'<!doctype html>\r\n<html>\r\n\r\n<head>\r\n    <meta charset="utf-8">\r\n    <title>GenericDialog</title>\r\n    <base href="../../../../../" />\r\n\r\n\r\n\r\n\r\n    <link id="theme_css" href="././css/brease_core.css" rel="stylesheet" />\r\n    <script src="././libs/require.js" data-main="require_config"></script>\r\n\r\n    <style>\r\n        .draggableItem.drag-drop-item-clone {\r\n            position: fixed;\r\n            cursor: pointer;\r\n            touch-action: none;\r\n        }\r\n\r\n        .draggableContainer {\r\n            overflow: hidden;\r\n        }\r\n\r\n        .droppableContainer {\r\n            overflow: hidden;\r\n        }\r\n\r\n        .draggableItem {\r\n            float: left;\r\n            width: 100px;\r\n            height: 100px;\r\n            margin: 10px;\r\n            border: 1px solid grey;\r\n        }\r\n\r\n        .draggableItem:hover {\r\n            background-color: rgb(255, 138, 0);\r\n        }\r\n\r\n        .droppableItem {\r\n            float: left;\r\n            width: 100px;\r\n            height: 100px;\r\n            margin: 10px;\r\n            cursor: pointer;\r\n            border: 1px solid grey;\r\n        }\r\n\r\n        .dropPossible {\r\n            background-color: rgba(255, 138, 0, 0.3);\r\n        }\r\n\r\n        .dragEntered {\r\n            background-color: rgb(255, 138, 0);\r\n        }\r\n\r\n        .draggableItem img {\r\n            touch-action: none;\r\n            user-select: none;\r\n            pointer-events: none;\r\n        }\r\n\r\n        .border-class {\r\n            border: 2px solid #000000;\r\n        }\r\n    </style>\r\n</head>\r\n\r\n<body>\r\n    <!-- To use this example, you need a web server, nodeJs or "Web Server for Chrome" Extension \r\n        (https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb)\r\n\r\n        Root folder must be the BRVisu folder. Then navigate to this Example.html file\r\n    -->\r\n\r\n\r\n    <div id="appContainer" data-mocked="true" style="height: 800px; width: 600px; min-height: 1px;">\r\n\r\n        <div class="systemContentLoader" id="systemContentLoaderContent" data-brease-contentid="content1">\r\n\r\n            <div class="draggableContainer">\r\n                <h1>Draggables</h1>\r\n                <div class="draggableItem">\r\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAEgZJREFUeJztnXmUXVWVh79KzFgkECohUAFikwFQmyEQFIOQ0A00uFxECCJiTLsWS0Fdy6HFDtIqToBIgzOK2AoigyC00C4lEEGm0C0mEMVox0CMJgxmhoRUUpXyj/2KVIr37rvTOfucd/e31m+9kEfu3ffcs98995x99gbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDSEWbtgHGbrQBE4CJwP41dQJ7A2OAvYDRwDBgSE2DgW5gO9AFvAisq+kFYBWwEngG+BOww9fFtALmIHqMAY4GjgIOAw4BpgLtDs+5A/gD8FvgcWARsBhxLqMO5iD+2B+YVdPxwCRdc15hG+Io9wA/B5bqmmNUhUHAccAVwDKgNxKtAq4C3lh+kxgGHAN8DXge/c5eVCuAi5H3IMPITQdwITK+1+7ULtQN3IE8EQ0jNYcDPwBeRr8T+9IiYHYJbWe0MG8GfoZ+Z9XU48BpRRvSaC2mAQvQ75wh6X5kmtqoMAcCNwE70e+QIaob+BaykGlUiCHAfGAL+p0wBq0BTs/V0kZ0vBF4Cv1OF6Nuxp4mLctQ4FJk2KDd0WLWSmBGtqY3QmcysAT9ztUq6gY+kekOGMEyB9iEfqdqRd0CjEx/K4yQaAMuR78TtboWA/umvCdGIIxEQii0O09V9AwS1m9EQAfwa/Q7TdW0DtkDYwRMJzaFq6kNSNSzESAHIGHc2p2k6tqEOUlw7Af8P/qdwyRaCxyaeMcMb3Rgw6oQ9Rck1s1QZDjwCPqdwVRfS4E9Gt49wyltwK3odwJTsu5G9vEHxWBtAzzwGeCD2kYYTZmKRE//UtuQKnEqtocjJu0E/qXunVSilfNiHYgEHu6tbYiRiXXIXv/V2oZAgGO+khgE/BBzjhjpAL5PID/erfoO8nHgPG0jjNxMQvIK/1rbkCC8tGQOAZ5AEjwb8bIFeD3wZ00jWm2I1QZ8B3OOVqAd+Lq2Ea3Ge9GfiTGVK9UkEK00xBqF1L/YR9sQR/RlYV8C/BG51o3AS0hdkHZkNXo8cDAy1DwWeJ2GsSXyNBKvZSUaCvJF9H/tytZ64BrgRCRcJg/jgblIeYOeAK4pjz6W89qNGp3AVvRvZFn6HXAu5b9LdSIZW2Lbe78eSyNUiK+hfxPL0NPAGbgf+u4FfAEZmmlfc1pd4qIhqsC+xJ9dfQfweWBEyW3TjKnAwoK2+9IGpD6jkZEr0L95RbQKyRavRRvwSeJIlHeRozZoWdqRXxbtG5dXDyGhFSEwE5kV026TJK1GIn6NlJyP/k3Lq7sob0g1D8ntNR94NzCdfLNehwHPot82STonx3VVlqXo37A8uht4TYntcHudc2wHfgX8G1J7PS1Tgb/VOV4oeiTDtVSaaejfrDx6lPJfxus5SH91A7cBR6Q83jHIAqR2WzXSwRnaprLEOLW7Bjcr/c0cpE87kVDyNNsAzk55TA1dlq15qsdgJBxa+0ZlUQ8wy0VjkN5B+rQaeEuK416b8bi+9FdaK0yqdGahf5Oy6monLSFkdZBe5B1lbpPjjkDqfGi3XT0dm7GNKkVsw6s1uF3kyuMgvciQa16TY8/OeWzXujJrI1WJlejfoCx6r5NW2EVeB+lFVvFPbHL8+woc35VWZG2kqjAV/ZuTRSspd0q3HkUcpBd4nuTJg5kFj+9KUzK3VEZi3FH4z9oGZORKZJo1ZPYheffeA8helNA4yfUJYnQQVzNBLugCbtQ2IiXvILno5nW+DMmAcweJkb+i/2hPq9sctcFAig6x+nRPwjlGE96emxeyN1U2YnuCdJItbEKb27UNyMjJNF6l3gzc69GWNIxDUgQ5IzYHma5tQEbu1zYgB+cmfBfi9ThdD4nNQQ7TNiADv8fDEMABb0v4LsTE0ke6PHhsDhJTho4ntQ3IyeHAng2+W0Z4M3JvcHlwcxB3/FHbgJy00Tjqdweybz4kzEH6cZC2ARmIeaV3csJ3oV1XJw6rU8XkIGOIq0zXJm0DCrBfwncbvVmRnomuDhyTg8RW6PFFbQMKMCrhuxCv67WuDhyTg+yrbUBGdmgbUICkshghXtcBrg7sOoiuTELJ/pGWpOHgBcB/AkORH6mBm3/6Vop3squE3M4B6q599gAfBT5Sou1JT4mkp4sW41wdOCYHia1aVFJH6iZ5X3pbTWmf8N1ICI4PQnSQsa4OHNMQq9HcfKgkhcT46swu6NQ2oA7ORhcxOUje7OZaHJLw3TJvVpRPiBlF2l0dOCYHGaptQEYOTfhuJfCcJzvKZDxhZll39uNpDuKO6STbnBRaHirHaRvQAHMQ4HhtAzIykuRI01t9GVIizfaua+GsH8fiIG9AMinGxmkJ3y1AhloxcYq2AQ1wVp4tFgeZp21ATs6lcRv3IGshsXAsjjcnFWCzqwPH4CCDgHdpG5GTCSQnmfgu8IwnW4ryHm0DEvibqwPH4CBnE+bce1o+nvBdF/BhX4YUYCzNszBqstrVgUN3kBFI3YuYOQnJlt6Iu4Ef+DElNx/D4VpDCYS2R8Ubn0I/c0YZaraXu51itU7mpGjLvHQiY3ztNkyS0223odJJ2DUqsiopGQLInoY1OY/t0kFuyWmTL22n/HLZUXA9+o1fppql9wTZUvxcjmO7cpBTc9jiW487uvagOZpdYd6tpAU0f++bgmxr1XaQCcRRg+UqB9cePA+j3/Cu9PkU19+BhKJoOcgwpAKvdlulUdJibEsScumvsnR+inZoQzZBpXkPK9NBBlFeKlPX2kL59R6DZjjx1f7Iox7SL7wdgLyPdSccrywHGQx8L8N1aOsnJV13NFyMfqP70k6kRHNaJiGhKc/XOVYZDjIcuDPHdWjqzBKuOxr2Q/ZCaze6b11LtnDtQUhc1IXIAuMC4IQM/74eE4HHSroeX1pHfFsgCvF99BtdS08Cry/ehLmYA2xIYWNoiinQszDTaM1p3SzaDlyBv5COg4D/cXxNrtRDuJHFTngQ/UYPRc8iAY6uHGUi8E3g5QCuNa8q9XI+B/0GD1Frga9QzkaxIUhZg1uRJ5X2tRXVUSW0SSoGJizzzTAkw8c/KNsROsuBhTUtQfaQ7Ez4/0cgK/IzkJqOJxJf4r1G/BSp3e4FbQeZD1ymbEOMdCEh3huQSNttSCbHUUiK1gPRv7cu6EHqlzylbYgPxhN+GLUpLH2DCnEd+g1uikd/RiHtqdZj+AjgN4S/o9EIg24k7dMi3yfW6qBXK57biI8LUHAOLc5A/3FtikefokIMJftmIFN1dRHK+K4P8mHiKsRp6LAVOA+4WdsQny/pQ5AwilZZsDLcsATJwRXEWofPF+V/xJzDaMxmJIT/GAJxDvA7xBri8VxV41lkD/kaZG/JGKSOx8DPEO/BOuAaJO5snbItr8LnEKsdyZIx0uM5W50VSOTvXSTHZvXRTn3HSfNZ5iLdFuBe4MfILsZtJR67VHwvFF6GxF8ZxfkFcBaS1MEHgxFnqedA9f5uFDJC2QZsAlYBfwAWI7msQiwnrc4QZGZCe/owdv2WimXzqBqnIpteutDvbDFqZuYWN6KkA/gg8H/od7pYtDxXSxvRcyjwJWSRSLsThqxKJSswXs070O+EIWtm7pY1MhPirrM9gY3aRgTKBiRDfLe2IVXBdyxWGpJKJ1edn9PYOQ4H/h3ZbrsJWI8svK1P+PMm5KlkNCA0B2kDLtU2ImDubvD3BwGPkD1VUA/yVEpyooF/NsdS5D3oj/FD1XZkAa4el3u2ZQsSHlLJyk5ajEBWW7U7YqhamNB2v1Oy6csJNrUEIW17/QiS6t+oT6Ph1UT08vq2fPGakBzk/doGBE4jB3mrVyt2Z73iub0QkoNYlG9jliGRu/V4k09DBnCf4rm9EJKD3KVtQMAktY3mHop7FM9dOUYj4dDaL8MhakZCu01h17SrT61HQuBbmtBW0g9GAhdHaxsSEGuRNK1JG6ImA+ciVbrGAWP7fXbgZqRwC3COg+MGRWgOAlIO4TZtIwLiBmBegX8/CNib3Z2m/2e9v2u212Qj8lT7fQG7oiBEB2lDNvDvoW1IIMzBf8GYkdR3nrHIyvvNwGrPNhk1ZqA/5g9FXSgkbDZ2EdIsFkjmxe9pGxEQDyCVfw0lQnOQ+ciLuiHY1LcyIb2DDELm9BsF5FWRiUh8mqFESOHuIzDn6M9SGjvHW5CcUmORIdhLtc8XC/73y24uJV5CcpAtSEjFodqGBEKj2CuAi5FahCB5qMaUdM5uxFkGOtCLSLKIK5Hkf4YSJyMJxbRnj0LQ0Q3aaBh6iS2W465+u5GSNyHl2bQ7qKaeSGiff1K2bW6CbS1HaLNYAI8B05FaIr3KtmhxScJ3J/syogEWBhQQVayE22zVfLGyfdoOavTjreh3WJ9aTPIv9AQkaFHTxokJ9rUcIQ6x+rNZ2wCP3I+8XyRd83x01642YusyQXEi+r/qrrUOed9q9mP1zgBs/UwTG1uOkNZB6hG6fUVYhdSLv450NT7e59ac3diGrH1srn1uAP4b+LpHG4Ig9A4YYsmwojyJpMu5lWwpRH8DzEr4fge7d+rNA/5c7+8a/dmK29QI3UFCty8L9yGOsSDnv58P/BJpk3qdO9gyZoY7zkR/3F1E3cBNwJFlN4zhh9B/oUO3rxFbkH0tVwMrdU0xihB6BwzdvoG8gLzIfosKJFWrAqF3wFhe0pcjlZ+uJ+53gTHA/jVN6Pc5FBkqVi4PVugOErp9/4u8eN9JujrlWgxCCu8M7PwDHSEpu+VcZCHzfqeWBkboHTBE+3qBnyGO8aCyLSBP2U6SO/9+FH8atwGnYA4SFCHZtx34EbJpyFc+qJHs6uyNOv8++As/Cel+eCH0Cw7Bvk3Ad4CvAmtKPO7eJA939se2IKsTQgdMQjOYcjXwFeBasgdNjgNeS/3O3/fnZtkLjQAI3UE0ZoSeQt4vbiJ7yMVU4EIkVWgsM3BZ6NU2wNidk/G36v0AUjEpz3h+OrLRqcejvRq6IEfbGA4ZhaTfdHXDe5BE2dNz2ncKEh+l3XFdayfyAzA8ZzsZDrmR8m/4VmS1e1IOewYjezO0t766UjdSFPQG4KPACdg+9KCZRHlpbtYCn0VeorMyHBlirCjJlhDUhTj6dcAHkIwyNnkQIf9KsY7wNPAh8tdBPAB4pqAN2toKLEKenOcB05AQEqNF+ADZk8o9DpxN8VJhV2c8r7Y2Ab+q2T0XKRPd8uXSjPRJ5X6B7Gcvi5tSnFNLa4F7gS8hPwZTCCspedSEvg4ykMeAo4CZwGwkPed4ZDZqFfAospV1Wcnn1awk259nkXeG/nKVZaQDeUGfVfscB/wX8B+IYxrGK3wa/0+GlcAdSIc8jV3Jql0xBvnR+Sqyb75R/q3Zju0IitieIFqsdXjsXmQ/Sd8TYUnt0/WGq72QJ8PMmg4jXWjPCUiGk0pgDpKOshykBxn+9R8iPYGfMmt7AscjzjALOJx8sW5HlWhT8JiDpCOPg3QhC279nwpL8VekZjRSaGcm4hBHUM5M1pGIY4W8Qaw0zEHSsQyZYm4UgLgVGbf3fzI8hd/8Unuwu0NMw83U7h5IHcmyJ0KMyJmHZBjciAQ2XgW8G3gdOmH57Ugs2OXI7J7PwkNnebg+I0I01xdGAicBlyLT2dvRW3uxPF+GOiOQJAlfAB5G1yH6L0q+3+VFG0YjhiOr/58DHsJtmH8WbQNuB06nNTeBGYEyDHmhvgSJm9qGvjP010NIRnnbF294YSiyDvFpJHXOy+g7wUAtr9l3kKM2MIxXGAIch4SKLESvdHMzrQW+iQSCGoYzhgBvBi5Gomu3oN/5G6kL2UI7G3uvMBzxGuRX9yIkZ+1L6Hf8ZnoYmYUa46A9DAOQ8Po7kPgp7Q6fRsuR2oL2XmF44Qb0O30zrUO21h7rqA0MoyFL0HeAeupCnmxvx/aaG4p8F31n6K9HgPORXL+GoU4IdRP/hLxX5MnrZRhO2RO/kbN9Wg9cg0wlG0bQPIi/94o7sfcKIzI+iVvHeBTJ4mjvFUaUTKN8p1iBBC5O9ncZhuGGNuA5ynmv+DYww6/5huGe6yn2XnEGEvJuGC3JOWRzjEVIfuEODWMNwzcdNK8otQIptzBFyUbDUGUhr3aKDUhV3OMU7TKMIJiMZEbcBvwUWWW39wrDMAzDMAzDMAzDMAzDMAzDMAzDMIyY+TvPkqu5yMRhrAAAAABJRU5ErkJggg=="\r\n                        style="margin: 18px; background-color: #FF0000" width="64" height="64">\r\n                </div>\r\n                <div class="draggableItem">\r\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAEgZJREFUeJztnXmUXVWVh79KzFgkECohUAFikwFQmyEQFIOQ0A00uFxECCJiTLsWS0Fdy6HFDtIqToBIgzOK2AoigyC00C4lEEGm0C0mEMVox0CMJgxmhoRUUpXyj/2KVIr37rvTOfucd/e31m+9kEfu3ffcs98995x99gbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDSEWbtgHGbrQBE4CJwP41dQJ7A2OAvYDRwDBgSE2DgW5gO9AFvAisq+kFYBWwEngG+BOww9fFtALmIHqMAY4GjgIOAw4BpgLtDs+5A/gD8FvgcWARsBhxLqMO5iD+2B+YVdPxwCRdc15hG+Io9wA/B5bqmmNUhUHAccAVwDKgNxKtAq4C3lh+kxgGHAN8DXge/c5eVCuAi5H3IMPITQdwITK+1+7ULtQN3IE8EQ0jNYcDPwBeRr8T+9IiYHYJbWe0MG8GfoZ+Z9XU48BpRRvSaC2mAQvQ75wh6X5kmtqoMAcCNwE70e+QIaob+BaykGlUiCHAfGAL+p0wBq0BTs/V0kZ0vBF4Cv1OF6Nuxp4mLctQ4FJk2KDd0WLWSmBGtqY3QmcysAT9ztUq6gY+kekOGMEyB9iEfqdqRd0CjEx/K4yQaAMuR78TtboWA/umvCdGIIxEQii0O09V9AwS1m9EQAfwa/Q7TdW0DtkDYwRMJzaFq6kNSNSzESAHIGHc2p2k6tqEOUlw7Af8P/qdwyRaCxyaeMcMb3Rgw6oQ9Rck1s1QZDjwCPqdwVRfS4E9Gt49wyltwK3odwJTsu5G9vEHxWBtAzzwGeCD2kYYTZmKRE//UtuQKnEqtocjJu0E/qXunVSilfNiHYgEHu6tbYiRiXXIXv/V2oZAgGO+khgE/BBzjhjpAL5PID/erfoO8nHgPG0jjNxMQvIK/1rbkCC8tGQOAZ5AEjwb8bIFeD3wZ00jWm2I1QZ8B3OOVqAd+Lq2Ea3Ge9GfiTGVK9UkEK00xBqF1L/YR9sQR/RlYV8C/BG51o3AS0hdkHZkNXo8cDAy1DwWeJ2GsSXyNBKvZSUaCvJF9H/tytZ64BrgRCRcJg/jgblIeYOeAK4pjz6W89qNGp3AVvRvZFn6HXAu5b9LdSIZW2Lbe78eSyNUiK+hfxPL0NPAGbgf+u4FfAEZmmlfc1pd4qIhqsC+xJ9dfQfweWBEyW3TjKnAwoK2+9IGpD6jkZEr0L95RbQKyRavRRvwSeJIlHeRozZoWdqRXxbtG5dXDyGhFSEwE5kV026TJK1GIn6NlJyP/k3Lq7sob0g1D8ntNR94NzCdfLNehwHPot82STonx3VVlqXo37A8uht4TYntcHudc2wHfgX8G1J7PS1Tgb/VOV4oeiTDtVSaaejfrDx6lPJfxus5SH91A7cBR6Q83jHIAqR2WzXSwRnaprLEOLW7Bjcr/c0cpE87kVDyNNsAzk55TA1dlq15qsdgJBxa+0ZlUQ8wy0VjkN5B+rQaeEuK416b8bi+9FdaK0yqdGahf5Oy6monLSFkdZBe5B1lbpPjjkDqfGi3XT0dm7GNKkVsw6s1uF3kyuMgvciQa16TY8/OeWzXujJrI1WJlejfoCx6r5NW2EVeB+lFVvFPbHL8+woc35VWZG2kqjAV/ZuTRSspd0q3HkUcpBd4nuTJg5kFj+9KUzK3VEZi3FH4z9oGZORKZJo1ZPYheffeA8helNA4yfUJYnQQVzNBLugCbtQ2IiXvILno5nW+DMmAcweJkb+i/2hPq9sctcFAig6x+nRPwjlGE96emxeyN1U2YnuCdJItbEKb27UNyMjJNF6l3gzc69GWNIxDUgQ5IzYHma5tQEbu1zYgB+cmfBfi9ThdD4nNQQ7TNiADv8fDEMABb0v4LsTE0ke6PHhsDhJTho4ntQ3IyeHAng2+W0Z4M3JvcHlwcxB3/FHbgJy00Tjqdweybz4kzEH6cZC2ARmIeaV3csJ3oV1XJw6rU8XkIGOIq0zXJm0DCrBfwncbvVmRnomuDhyTg8RW6PFFbQMKMCrhuxCv67WuDhyTg+yrbUBGdmgbUICkshghXtcBrg7sOoiuTELJ/pGWpOHgBcB/AkORH6mBm3/6Vop3squE3M4B6q599gAfBT5Sou1JT4mkp4sW41wdOCYHia1aVFJH6iZ5X3pbTWmf8N1ICI4PQnSQsa4OHNMQq9HcfKgkhcT46swu6NQ2oA7ORhcxOUje7OZaHJLw3TJvVpRPiBlF2l0dOCYHGaptQEYOTfhuJfCcJzvKZDxhZll39uNpDuKO6STbnBRaHirHaRvQAHMQ4HhtAzIykuRI01t9GVIizfaua+GsH8fiIG9AMinGxmkJ3y1AhloxcYq2AQ1wVp4tFgeZp21ATs6lcRv3IGshsXAsjjcnFWCzqwPH4CCDgHdpG5GTCSQnmfgu8IwnW4ryHm0DEvibqwPH4CBnE+bce1o+nvBdF/BhX4YUYCzNszBqstrVgUN3kBFI3YuYOQnJlt6Iu4Ef+DElNx/D4VpDCYS2R8Ubn0I/c0YZaraXu51itU7mpGjLvHQiY3ztNkyS0223odJJ2DUqsiopGQLInoY1OY/t0kFuyWmTL22n/HLZUXA9+o1fppql9wTZUvxcjmO7cpBTc9jiW487uvagOZpdYd6tpAU0f++bgmxr1XaQCcRRg+UqB9cePA+j3/Cu9PkU19+BhKJoOcgwpAKvdlulUdJibEsScumvsnR+inZoQzZBpXkPK9NBBlFeKlPX2kL59R6DZjjx1f7Iox7SL7wdgLyPdSccrywHGQx8L8N1aOsnJV13NFyMfqP70k6kRHNaJiGhKc/XOVYZDjIcuDPHdWjqzBKuOxr2Q/ZCaze6b11LtnDtQUhc1IXIAuMC4IQM/74eE4HHSroeX1pHfFsgCvF99BtdS08Cry/ehLmYA2xIYWNoiinQszDTaM1p3SzaDlyBv5COg4D/cXxNrtRDuJHFTngQ/UYPRc8iAY6uHGUi8E3g5QCuNa8q9XI+B/0GD1Frga9QzkaxIUhZg1uRJ5X2tRXVUSW0SSoGJizzzTAkw8c/KNsROsuBhTUtQfaQ7Ez4/0cgK/IzkJqOJxJf4r1G/BSp3e4FbQeZD1ymbEOMdCEh3huQSNttSCbHUUiK1gPRv7cu6EHqlzylbYgPxhN+GLUpLH2DCnEd+g1uikd/RiHtqdZj+AjgN4S/o9EIg24k7dMi3yfW6qBXK57biI8LUHAOLc5A/3FtikefokIMJftmIFN1dRHK+K4P8mHiKsRp6LAVOA+4WdsQny/pQ5AwilZZsDLcsATJwRXEWofPF+V/xJzDaMxmJIT/GAJxDvA7xBri8VxV41lkD/kaZG/JGKSOx8DPEO/BOuAaJO5snbItr8LnEKsdyZIx0uM5W50VSOTvXSTHZvXRTn3HSfNZ5iLdFuBe4MfILsZtJR67VHwvFF6GxF8ZxfkFcBaS1MEHgxFnqedA9f5uFDJC2QZsAlYBfwAWI7msQiwnrc4QZGZCe/owdv2WimXzqBqnIpteutDvbDFqZuYWN6KkA/gg8H/od7pYtDxXSxvRcyjwJWSRSLsThqxKJSswXs070O+EIWtm7pY1MhPirrM9gY3aRgTKBiRDfLe2IVXBdyxWGpJKJ1edn9PYOQ4H/h3ZbrsJWI8svK1P+PMm5KlkNCA0B2kDLtU2ImDubvD3BwGPkD1VUA/yVEpyooF/NsdS5D3oj/FD1XZkAa4el3u2ZQsSHlLJyk5ajEBWW7U7YqhamNB2v1Oy6csJNrUEIW17/QiS6t+oT6Ph1UT08vq2fPGakBzk/doGBE4jB3mrVyt2Z73iub0QkoNYlG9jliGRu/V4k09DBnCf4rm9EJKD3KVtQMAktY3mHop7FM9dOUYj4dDaL8MhakZCu01h17SrT61HQuBbmtBW0g9GAhdHaxsSEGuRNK1JG6ImA+ciVbrGAWP7fXbgZqRwC3COg+MGRWgOAlIO4TZtIwLiBmBegX8/CNib3Z2m/2e9v2u212Qj8lT7fQG7oiBEB2lDNvDvoW1IIMzBf8GYkdR3nrHIyvvNwGrPNhk1ZqA/5g9FXSgkbDZ2EdIsFkjmxe9pGxEQDyCVfw0lQnOQ+ciLuiHY1LcyIb2DDELm9BsF5FWRiUh8mqFESOHuIzDn6M9SGjvHW5CcUmORIdhLtc8XC/73y24uJV5CcpAtSEjFodqGBEKj2CuAi5FahCB5qMaUdM5uxFkGOtCLSLKIK5Hkf4YSJyMJxbRnj0LQ0Q3aaBh6iS2W465+u5GSNyHl2bQ7qKaeSGiff1K2bW6CbS1HaLNYAI8B05FaIr3KtmhxScJ3J/syogEWBhQQVayE22zVfLGyfdoOavTjreh3WJ9aTPIv9AQkaFHTxokJ9rUcIQ6x+rNZ2wCP3I+8XyRd83x01642YusyQXEi+r/qrrUOed9q9mP1zgBs/UwTG1uOkNZB6hG6fUVYhdSLv450NT7e59ac3diGrH1srn1uAP4b+LpHG4Ig9A4YYsmwojyJpMu5lWwpRH8DzEr4fge7d+rNA/5c7+8a/dmK29QI3UFCty8L9yGOsSDnv58P/BJpk3qdO9gyZoY7zkR/3F1E3cBNwJFlN4zhh9B/oUO3rxFbkH0tVwMrdU0xihB6BwzdvoG8gLzIfosKJFWrAqF3wFhe0pcjlZ+uJ+53gTHA/jVN6Pc5FBkqVi4PVugOErp9/4u8eN9JujrlWgxCCu8M7PwDHSEpu+VcZCHzfqeWBkboHTBE+3qBnyGO8aCyLSBP2U6SO/9+FH8atwGnYA4SFCHZtx34EbJpyFc+qJHs6uyNOv8++As/Cel+eCH0Cw7Bvk3Ad4CvAmtKPO7eJA939se2IKsTQgdMQjOYcjXwFeBasgdNjgNeS/3O3/fnZtkLjQAI3UE0ZoSeQt4vbiJ7yMVU4EIkVWgsM3BZ6NU2wNidk/G36v0AUjEpz3h+OrLRqcejvRq6IEfbGA4ZhaTfdHXDe5BE2dNz2ncKEh+l3XFdayfyAzA8ZzsZDrmR8m/4VmS1e1IOewYjezO0t766UjdSFPQG4KPACdg+9KCZRHlpbtYCn0VeorMyHBlirCjJlhDUhTj6dcAHkIwyNnkQIf9KsY7wNPAh8tdBPAB4pqAN2toKLEKenOcB05AQEqNF+ADZk8o9DpxN8VJhV2c8r7Y2Ab+q2T0XKRPd8uXSjPRJ5X6B7Gcvi5tSnFNLa4F7gS8hPwZTCCspedSEvg4ykMeAo4CZwGwkPed4ZDZqFfAospV1Wcnn1awk259nkXeG/nKVZaQDeUGfVfscB/wX8B+IYxrGK3wa/0+GlcAdSIc8jV3Jql0xBvnR+Sqyb75R/q3Zju0IitieIFqsdXjsXmQ/Sd8TYUnt0/WGq72QJ8PMmg4jXWjPCUiGk0pgDpKOshykBxn+9R8iPYGfMmt7AscjzjALOJx8sW5HlWhT8JiDpCOPg3QhC279nwpL8VekZjRSaGcm4hBHUM5M1pGIY4W8Qaw0zEHSsQyZYm4UgLgVGbf3fzI8hd/8Unuwu0NMw83U7h5IHcmyJ0KMyJmHZBjciAQ2XgW8G3gdOmH57Ugs2OXI7J7PwkNnebg+I0I01xdGAicBlyLT2dvRW3uxPF+GOiOQJAlfAB5G1yH6L0q+3+VFG0YjhiOr/58DHsJtmH8WbQNuB06nNTeBGYEyDHmhvgSJm9qGvjP010NIRnnbF294YSiyDvFpJHXOy+g7wUAtr9l3kKM2MIxXGAIch4SKLESvdHMzrQW+iQSCGoYzhgBvBi5Gomu3oN/5G6kL2UI7G3uvMBzxGuRX9yIkZ+1L6Hf8ZnoYmYUa46A9DAOQ8Po7kPgp7Q6fRsuR2oL2XmF44Qb0O30zrUO21h7rqA0MoyFL0HeAeupCnmxvx/aaG4p8F31n6K9HgPORXL+GoU4IdRP/hLxX5MnrZRhO2RO/kbN9Wg9cg0wlG0bQPIi/94o7sfcKIzI+iVvHeBTJ4mjvFUaUTKN8p1iBBC5O9ncZhuGGNuA5ynmv+DYww6/5huGe6yn2XnEGEvJuGC3JOWRzjEVIfuEODWMNwzcdNK8otQIptzBFyUbDUGUhr3aKDUhV3OMU7TKMIJiMZEbcBvwUWWW39wrDMAzDMAzDMAzDMAzDMAzDMAzDMIyY+TvPkqu5yMRhrAAAAABJRU5ErkJggg=="\r\n                        style="margin: 18px; background-color: #00FF00" width="64" height="64">\r\n                </div>\r\n                <div class="draggableItem">\r\n                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAEgZJREFUeJztnXmUXVWVh79KzFgkECohUAFikwFQmyEQFIOQ0A00uFxECCJiTLsWS0Fdy6HFDtIqToBIgzOK2AoigyC00C4lEEGm0C0mEMVox0CMJgxmhoRUUpXyj/2KVIr37rvTOfucd/e31m+9kEfu3ffcs98995x99gbDMAzDMAzDMAzDMAzDMAzDMAzDMAzDMAzDSEWbtgHGbrQBE4CJwP41dQJ7A2OAvYDRwDBgSE2DgW5gO9AFvAisq+kFYBWwEngG+BOww9fFtALmIHqMAY4GjgIOAw4BpgLtDs+5A/gD8FvgcWARsBhxLqMO5iD+2B+YVdPxwCRdc15hG+Io9wA/B5bqmmNUhUHAccAVwDKgNxKtAq4C3lh+kxgGHAN8DXge/c5eVCuAi5H3IMPITQdwITK+1+7ULtQN3IE8EQ0jNYcDPwBeRr8T+9IiYHYJbWe0MG8GfoZ+Z9XU48BpRRvSaC2mAQvQ75wh6X5kmtqoMAcCNwE70e+QIaob+BaykGlUiCHAfGAL+p0wBq0BTs/V0kZ0vBF4Cv1OF6Nuxp4mLctQ4FJk2KDd0WLWSmBGtqY3QmcysAT9ztUq6gY+kekOGMEyB9iEfqdqRd0CjEx/K4yQaAMuR78TtboWA/umvCdGIIxEQii0O09V9AwS1m9EQAfwa/Q7TdW0DtkDYwRMJzaFq6kNSNSzESAHIGHc2p2k6tqEOUlw7Af8P/qdwyRaCxyaeMcMb3Rgw6oQ9Rck1s1QZDjwCPqdwVRfS4E9Gt49wyltwK3odwJTsu5G9vEHxWBtAzzwGeCD2kYYTZmKRE//UtuQKnEqtocjJu0E/qXunVSilfNiHYgEHu6tbYiRiXXIXv/V2oZAgGO+khgE/BBzjhjpAL5PID/erfoO8nHgPG0jjNxMQvIK/1rbkCC8tGQOAZ5AEjwb8bIFeD3wZ00jWm2I1QZ8B3OOVqAd+Lq2Ea3Ge9GfiTGVK9UkEK00xBqF1L/YR9sQR/RlYV8C/BG51o3AS0hdkHZkNXo8cDAy1DwWeJ2GsSXyNBKvZSUaCvJF9H/tytZ64BrgRCRcJg/jgblIeYOeAK4pjz6W89qNGp3AVvRvZFn6HXAu5b9LdSIZW2Lbe78eSyNUiK+hfxPL0NPAGbgf+u4FfAEZmmlfc1pd4qIhqsC+xJ9dfQfweWBEyW3TjKnAwoK2+9IGpD6jkZEr0L95RbQKyRavRRvwSeJIlHeRozZoWdqRXxbtG5dXDyGhFSEwE5kV026TJK1GIn6NlJyP/k3Lq7sob0g1D8ntNR94NzCdfLNehwHPot82STonx3VVlqXo37A8uht4TYntcHudc2wHfgX8G1J7PS1Tgb/VOV4oeiTDtVSaaejfrDx6lPJfxus5SH91A7cBR6Q83jHIAqR2WzXSwRnaprLEOLW7Bjcr/c0cpE87kVDyNNsAzk55TA1dlq15qsdgJBxa+0ZlUQ8wy0VjkN5B+rQaeEuK416b8bi+9FdaK0yqdGahf5Oy6monLSFkdZBe5B1lbpPjjkDqfGi3XT0dm7GNKkVsw6s1uF3kyuMgvciQa16TY8/OeWzXujJrI1WJlejfoCx6r5NW2EVeB+lFVvFPbHL8+woc35VWZG2kqjAV/ZuTRSspd0q3HkUcpBd4nuTJg5kFj+9KUzK3VEZi3FH4z9oGZORKZJo1ZPYheffeA8helNA4yfUJYnQQVzNBLugCbtQ2IiXvILno5nW+DMmAcweJkb+i/2hPq9sctcFAig6x+nRPwjlGE96emxeyN1U2YnuCdJItbEKb27UNyMjJNF6l3gzc69GWNIxDUgQ5IzYHma5tQEbu1zYgB+cmfBfi9ThdD4nNQQ7TNiADv8fDEMABb0v4LsTE0ke6PHhsDhJTho4ntQ3IyeHAng2+W0Z4M3JvcHlwcxB3/FHbgJy00Tjqdweybz4kzEH6cZC2ARmIeaV3csJ3oV1XJw6rU8XkIGOIq0zXJm0DCrBfwncbvVmRnomuDhyTg8RW6PFFbQMKMCrhuxCv67WuDhyTg+yrbUBGdmgbUICkshghXtcBrg7sOoiuTELJ/pGWpOHgBcB/AkORH6mBm3/6Vop3squE3M4B6q599gAfBT5Sou1JT4mkp4sW41wdOCYHia1aVFJH6iZ5X3pbTWmf8N1ICI4PQnSQsa4OHNMQq9HcfKgkhcT46swu6NQ2oA7ORhcxOUje7OZaHJLw3TJvVpRPiBlF2l0dOCYHGaptQEYOTfhuJfCcJzvKZDxhZll39uNpDuKO6STbnBRaHirHaRvQAHMQ4HhtAzIykuRI01t9GVIizfaua+GsH8fiIG9AMinGxmkJ3y1AhloxcYq2AQ1wVp4tFgeZp21ATs6lcRv3IGshsXAsjjcnFWCzqwPH4CCDgHdpG5GTCSQnmfgu8IwnW4ryHm0DEvibqwPH4CBnE+bce1o+nvBdF/BhX4YUYCzNszBqstrVgUN3kBFI3YuYOQnJlt6Iu4Ef+DElNx/D4VpDCYS2R8Ubn0I/c0YZaraXu51itU7mpGjLvHQiY3ztNkyS0223odJJ2DUqsiopGQLInoY1OY/t0kFuyWmTL22n/HLZUXA9+o1fppql9wTZUvxcjmO7cpBTc9jiW487uvagOZpdYd6tpAU0f++bgmxr1XaQCcRRg+UqB9cePA+j3/Cu9PkU19+BhKJoOcgwpAKvdlulUdJibEsScumvsnR+inZoQzZBpXkPK9NBBlFeKlPX2kL59R6DZjjx1f7Iox7SL7wdgLyPdSccrywHGQx8L8N1aOsnJV13NFyMfqP70k6kRHNaJiGhKc/XOVYZDjIcuDPHdWjqzBKuOxr2Q/ZCaze6b11LtnDtQUhc1IXIAuMC4IQM/74eE4HHSroeX1pHfFsgCvF99BtdS08Cry/ehLmYA2xIYWNoiinQszDTaM1p3SzaDlyBv5COg4D/cXxNrtRDuJHFTngQ/UYPRc8iAY6uHGUi8E3g5QCuNa8q9XI+B/0GD1Frga9QzkaxIUhZg1uRJ5X2tRXVUSW0SSoGJizzzTAkw8c/KNsROsuBhTUtQfaQ7Ez4/0cgK/IzkJqOJxJf4r1G/BSp3e4FbQeZD1ymbEOMdCEh3huQSNttSCbHUUiK1gPRv7cu6EHqlzylbYgPxhN+GLUpLH2DCnEd+g1uikd/RiHtqdZj+AjgN4S/o9EIg24k7dMi3yfW6qBXK57biI8LUHAOLc5A/3FtikefokIMJftmIFN1dRHK+K4P8mHiKsRp6LAVOA+4WdsQny/pQ5AwilZZsDLcsATJwRXEWofPF+V/xJzDaMxmJIT/GAJxDvA7xBri8VxV41lkD/kaZG/JGKSOx8DPEO/BOuAaJO5snbItr8LnEKsdyZIx0uM5W50VSOTvXSTHZvXRTn3HSfNZ5iLdFuBe4MfILsZtJR67VHwvFF6GxF8ZxfkFcBaS1MEHgxFnqedA9f5uFDJC2QZsAlYBfwAWI7msQiwnrc4QZGZCe/owdv2WimXzqBqnIpteutDvbDFqZuYWN6KkA/gg8H/od7pYtDxXSxvRcyjwJWSRSLsThqxKJSswXs070O+EIWtm7pY1MhPirrM9gY3aRgTKBiRDfLe2IVXBdyxWGpJKJ1edn9PYOQ4H/h3ZbrsJWI8svK1P+PMm5KlkNCA0B2kDLtU2ImDubvD3BwGPkD1VUA/yVEpyooF/NsdS5D3oj/FD1XZkAa4el3u2ZQsSHlLJyk5ajEBWW7U7YqhamNB2v1Oy6csJNrUEIW17/QiS6t+oT6Ph1UT08vq2fPGakBzk/doGBE4jB3mrVyt2Z73iub0QkoNYlG9jliGRu/V4k09DBnCf4rm9EJKD3KVtQMAktY3mHop7FM9dOUYj4dDaL8MhakZCu01h17SrT61HQuBbmtBW0g9GAhdHaxsSEGuRNK1JG6ImA+ciVbrGAWP7fXbgZqRwC3COg+MGRWgOAlIO4TZtIwLiBmBegX8/CNib3Z2m/2e9v2u212Qj8lT7fQG7oiBEB2lDNvDvoW1IIMzBf8GYkdR3nrHIyvvNwGrPNhk1ZqA/5g9FXSgkbDZ2EdIsFkjmxe9pGxEQDyCVfw0lQnOQ+ciLuiHY1LcyIb2DDELm9BsF5FWRiUh8mqFESOHuIzDn6M9SGjvHW5CcUmORIdhLtc8XC/73y24uJV5CcpAtSEjFodqGBEKj2CuAi5FahCB5qMaUdM5uxFkGOtCLSLKIK5Hkf4YSJyMJxbRnj0LQ0Q3aaBh6iS2W465+u5GSNyHl2bQ7qKaeSGiff1K2bW6CbS1HaLNYAI8B05FaIr3KtmhxScJ3J/syogEWBhQQVayE22zVfLGyfdoOavTjreh3WJ9aTPIv9AQkaFHTxokJ9rUcIQ6x+rNZ2wCP3I+8XyRd83x01642YusyQXEi+r/qrrUOed9q9mP1zgBs/UwTG1uOkNZB6hG6fUVYhdSLv450NT7e59ac3diGrH1srn1uAP4b+LpHG4Ig9A4YYsmwojyJpMu5lWwpRH8DzEr4fge7d+rNA/5c7+8a/dmK29QI3UFCty8L9yGOsSDnv58P/BJpk3qdO9gyZoY7zkR/3F1E3cBNwJFlN4zhh9B/oUO3rxFbkH0tVwMrdU0xihB6BwzdvoG8gLzIfosKJFWrAqF3wFhe0pcjlZ+uJ+53gTHA/jVN6Pc5FBkqVi4PVugOErp9/4u8eN9JujrlWgxCCu8M7PwDHSEpu+VcZCHzfqeWBkboHTBE+3qBnyGO8aCyLSBP2U6SO/9+FH8atwGnYA4SFCHZtx34EbJpyFc+qJHs6uyNOv8++As/Cel+eCH0Cw7Bvk3Ad4CvAmtKPO7eJA939se2IKsTQgdMQjOYcjXwFeBasgdNjgNeS/3O3/fnZtkLjQAI3UE0ZoSeQt4vbiJ7yMVU4EIkVWgsM3BZ6NU2wNidk/G36v0AUjEpz3h+OrLRqcejvRq6IEfbGA4ZhaTfdHXDe5BE2dNz2ncKEh+l3XFdayfyAzA8ZzsZDrmR8m/4VmS1e1IOewYjezO0t766UjdSFPQG4KPACdg+9KCZRHlpbtYCn0VeorMyHBlirCjJlhDUhTj6dcAHkIwyNnkQIf9KsY7wNPAh8tdBPAB4pqAN2toKLEKenOcB05AQEqNF+ADZk8o9DpxN8VJhV2c8r7Y2Ab+q2T0XKRPd8uXSjPRJ5X6B7Gcvi5tSnFNLa4F7gS8hPwZTCCspedSEvg4ykMeAo4CZwGwkPed4ZDZqFfAospV1Wcnn1awk259nkXeG/nKVZaQDeUGfVfscB/wX8B+IYxrGK3wa/0+GlcAdSIc8jV3Jql0xBvnR+Sqyb75R/q3Zju0IitieIFqsdXjsXmQ/Sd8TYUnt0/WGq72QJ8PMmg4jXWjPCUiGk0pgDpKOshykBxn+9R8iPYGfMmt7AscjzjALOJx8sW5HlWhT8JiDpCOPg3QhC279nwpL8VekZjRSaGcm4hBHUM5M1pGIY4W8Qaw0zEHSsQyZYm4UgLgVGbf3fzI8hd/8Unuwu0NMw83U7h5IHcmyJ0KMyJmHZBjciAQ2XgW8G3gdOmH57Ugs2OXI7J7PwkNnebg+I0I01xdGAicBlyLT2dvRW3uxPF+GOiOQJAlfAB5G1yH6L0q+3+VFG0YjhiOr/58DHsJtmH8WbQNuB06nNTeBGYEyDHmhvgSJm9qGvjP010NIRnnbF294YSiyDvFpJHXOy+g7wUAtr9l3kKM2MIxXGAIch4SKLESvdHMzrQW+iQSCGoYzhgBvBi5Gomu3oN/5G6kL2UI7G3uvMBzxGuRX9yIkZ+1L6Hf8ZnoYmYUa46A9DAOQ8Po7kPgp7Q6fRsuR2oL2XmF44Qb0O30zrUO21h7rqA0MoyFL0HeAeupCnmxvx/aaG4p8F31n6K9HgPORXL+GoU4IdRP/hLxX5MnrZRhO2RO/kbN9Wg9cg0wlG0bQPIi/94o7sfcKIzI+iVvHeBTJ4mjvFUaUTKN8p1iBBC5O9ncZhuGGNuA5ynmv+DYww6/5huGe6yn2XnEGEvJuGC3JOWRzjEVIfuEODWMNwzcdNK8otQIptzBFyUbDUGUhr3aKDUhV3OMU7TKMIJiMZEbcBvwUWWW39wrDMAzDMAzDMAzDMAzDMAzDMAzDMIyY+TvPkqu5yMRhrAAAAABJRU5ErkJggg=="\r\n                        style="margin: 18px; background-color: #0000FF" width="64" height="64">\r\n                </div>\r\n            </div>\r\n            <div style="clear:both"></div>\r\n            <div class="droppableContainer">\r\n                <h1>Droppables</h1>\r\n                <div class="droppableItem">\r\n\r\n                </div>\r\n                <div class="droppableItem">\r\n\r\n                </div>\r\n                <div class="droppableItem">\r\n\r\n                </div>\r\n            </div>\r\n            \r\n        </div>\r\n    </div>\r\n\r\n    <script>\r\n        require([\'brease/application\'],\r\n            function (application, DragDropHandler, DraggableSettings, DroppableSettings) {\r\n                application.start(\'page1\', { debug: true, warn: true, editMode: false });\r\n\r\n                document.getElementById(\'appContainer\').addEventListener(\'app_ready\', function () {\r\n                    require([\'widgets/brease/common/DragDropHandler/doc/example\']);\r\n                });\r\n            });\r\n\r\n        console.log(\'Current file url:\' + window.location.href);\r\n    </script>\r\n</body>\r\n\r\n</html>';
}),define("widgets/brease/common/DragDropHandler/libs/draggable",[],function(){"use strict";function e(){this.id="",this.elem={},this.clone=!1,this.cloneClassList=[],this.data=null}return e}),define("widgets/brease/common/DragDropHandler/libs/droppable",[],function(){"use strict";function e(){this.id="",this.elem={},this.dragEnter=function(){},this.dragLeave=function(){},this.dragMove=function(){},this.drop=function(){}}return e}),define("widgets/brease/common/DragDropHandler/libs/utils",[],function(){"use strict";function Utils(){return{mapProperties:function(e,t){for(var i in e)t.hasOwnProperty(i)&&(t[i]=e[i])},mapMethods:function(e,t){for(var i in e)"function"==typeof t[i]&&(t[i]=e[i])},addClass:function(e,t){e.classList?e.classList.add(t):$(e).addClass(t)},removeClass:function(e,t){e.classList?e.classList.remove(t):$(e).removeClass(t)},containsClass:function(e,t){return e.classList?e.classList.contains(t):$(e).hasClass(t)}}}return new Utils}),define("widgets/brease/common/DragDropHandler/libs/eventListenerModel",[],function(){"use strict";function e(e,t){this.event=e,this["function"]=t}return e}),define("widgets/brease/common/DragDropHandler/libs/dragDropArgs",[],function(){"use strict";function e(){this.originalEventArgs=null,this.target=null,this.clientX=0,this.clientY=0,this.pageX=0,this.pageY=0,this.screenX=0,this.screenY=0,this.dragItem=null,this.sourceItem=null,this.dragData=null}var t=e.prototype;return e}),define("widgets/brease/common/DragDropHandler/libs/dragDropBase",["widgets/brease/common/DragDropHandler/libs/draggable","widgets/brease/common/DragDropHandler/libs/droppable","widgets/brease/common/DragDropHandler/libs/utils","widgets/brease/common/DragDropHandler/libs/eventListenerModel","widgets/brease/common/DragDropHandler/libs/dragDropArgs"],function(e,t,Utils,i,n){"use strict";var s="drag-drop-item-clone",r="drag-drop-item-active";function a(e,t,i){for(var n=0;n<e.dragDropAreaEventListeners.length;n+=1)if(e.dragDropAreaEventListeners[n].event===t&&e.dragDropAreaEventListeners[n]["function"]===i)return e.dragDropAreaEventListeners[n];return null}function o(e,t){var dragDropArgs=new n;return dragDropArgs.dragItem=e.dragItem,dragDropArgs.sourceItem=e.sourceItem,dragDropArgs.originalEventArgs=t,dragDropArgs.target=e._getDragDropTarget(e,t),dragDropArgs.clientX=e._getEventClientX(t),dragDropArgs.clientY=e._getEventClientY(t),dragDropArgs.pageX=e._getEventPageX(t),dragDropArgs.pageY=e._getEventPageY(t),dragDropArgs.dragData=e.dragData,dragDropArgs}function l(e){var t=0,i;for(t=0;t<e.dragDropAreaEventListeners.length;t+=1)i=e.dragDropAreaEventListeners[t],e.dragDropArea.removeEventListener(i.event,i["function"]);e.dragDropArea=null}function d(e,t){var i=o(e,t),n=new CustomEvent("dragstarted",{detail:i});e.dragDropArea.dispatchEvent(n)}function u(e,t){var i=o(e,t),n=new CustomEvent("dragended",{detail:i});e.dragDropArea.dispatchEvent(n)}function c(e,t){var i=o(e,t),droppable=e.getClosestDroppable(i.target);droppable&&"function"==typeof droppable.dragEnter&&droppable.dragEnter(i)}function g(e,t){var i=o(e,t),droppable=e.getClosestDroppable(i.target);droppable&&"function"==typeof droppable.dragMove&&droppable.dragMove(i)}function h(e,t){var i=o(e,t),droppable=e.getClosestDroppable(i.target);droppable&&"function"==typeof droppable.dragLeave&&droppable.dragLeave(i)}function p(e,t){var i=o(e,t),droppable=e.getClosestDroppable(i.target);droppable&&"function"==typeof droppable.drop&&droppable.drop(i)}function m(e,t){if(!e.isDisabled){var i=e._getDragDropTarget(e,t),droppable=e.getClosestDroppable(i);droppable&&(e.canDrop=!0,e.dragEntered=!0,e.dropTarget=droppable.elem,c(e,t))}}function f(e,t){g(e,t)}function v(e,t){var droppable=e.getClosestDroppable(t.target);null!==droppable&&(droppable.elem===e.dropTarget&&(e.canDrop=!1,e.dragEntered=!1,e.dropTarget=null),h(e,t))}function b(e,t){p(e,t)}function y(e,t){if(!e.isDisabled){var draggable=e.getClosestDraggable(t.target);if(e.dragActive=!0,e.sourceItem=t.target,e.dragItem=draggable.elem,e.clickOperationMode===!1){if(draggable.clone){var i=e.dragItem,n=i.cloneNode(!0);e.dragItem=n,e.setDragItemClone(e.dragItem,draggable.cloneClassList)}}else Utils.addClass(e.dragItem,r);d(e,t)}}function E(e,t){e.canDrop&&(e.isDisabled||b(e,t),v(e,t)),e.canDrop=!1,e.dragEntered=!1,e.dropTarget=null,Utils.containsClass(e.dragItem,s)&&document.body.removeChild(e.dragItem),Utils.removeClass(e.dragItem,r),e.dragActive=!1,e.dragEnabled=!1,u(e,t),e.dragItem=null,e.sourceItem=null,e.dragData=null}function x(){this.dragEnabled=!1,this.mouseDownClientX=0,this.mouseDownClientY=0,this.dragItem=null,this.sourceItem=null,this.dragActive=!1,this.dragData=null,this.canDrop=!1,this.dragEntered=!1,this.dropTarget=null,this.isDisabled=!1,this.draggables=[],this.droppables=[],this.dragDropArea=document.body,this.dragDropAreaEventListeners=[],this.clickOperationMode=!1,this.preventMouseDownEvent=!0;var e=window.devicePixelRatio>1?window.devicePixelRatio:1;this.dragDelay=10*e,this._wrapEventHandler(),this._documentAddEventListener()}var I=x.prototype;return I._wrapEventHandler=function(){var e=this;this.documentMouseUpHandler=function(t){e._documentMouseUpHandler(e,t)},this.documentMouseDownHandler=function(t){e._documentMouseDownHandler(e,t)},this.documentMouseMoveHandler=function(t){e._documentMouseMoveHandler(e,t)},this.draggableMouseMoveHandler=function(t){e._draggableMouseMoveHandler(e,t)},this.draggableMouseDownHandler=function(t){e._draggableMouseDownHandler(e,t)},this.draggableMouseLeaveHandler=function(t){e._draggableMouseLeaveHandler(e,t)},this.droppableMouseEnterHandler=function(t){e._droppableMouseEnterHandler(e,t)},this.droppableMouseMoveHandler=function(t){e._droppableMouseMoveHandler(e,t)},this.droppableMouseLeaveHandler=function(t){e._droppableMouseLeaveHandler(e,t)}},I._getEventClientX=function(e){return e.clientX},I._getEventClientY=function(e){return e.clientY},I._getEventPageX=function(e){return e.pageX},I._getEventPageY=function(e){return e.pageY},I._getDragDropTarget=function(e,t){var i=t.target;return i},I._documentAddEventListener=function(){document.addEventListener("mouseup",this.documentMouseUpHandler),document.addEventListener("mousedown",this.documentMouseDownHandler),document.addEventListener("mousemove",this.documentMouseMoveHandler)},I._draggableAddEventListener=function(draggable){draggable.elem.addEventListener("mousemove",this.draggableMouseMoveHandler),draggable.elem.addEventListener("mousedown",this.draggableMouseDownHandler),draggable.elem.addEventListener("mouseleave",this.draggableMouseLeaveHandler)},I._droppableAddEventListener=function(droppable){droppable.elem.addEventListener("mouseenter",this.droppableMouseEnterHandler),droppable.elem.addEventListener("mousemove",this.droppableMouseMoveHandler),droppable.elem.addEventListener("mouseleave",this.droppableMouseLeaveHandler)},I._documentRemoveEventListener=function(){document.removeEventListener("mouseup",this.documentMouseUpHandler),document.removeEventListener("mousedown",this.documentMouseDownHandler),document.removeEventListener("mousemove",this.documentMouseMoveHandler)},I._draggableRemoveEventListener=function(draggable){draggable.elem.removeEventListener("mousemove",this.draggableMouseMoveHandler),draggable.elem.removeEventListener("mousedown",this.draggableMouseDownHandler),draggable.elem.removeEventListener("mouseleave",this.draggableMouseLeaveHandler)},I._droppableRemoveEventListener=function(droppable){droppable.elem.removeEventListener("mouseenter",this.droppableMouseEnterHandler),droppable.elem.removeEventListener("mousemove",this.droppableMouseMoveHandler),droppable.elem.removeEventListener("mouseleave",this.droppableMouseLeaveHandler)},I._documentMouseUpHandler=function(e,t){e.clickOperationMode||(e.dragActive&&E(e,t),e.dragEnabled=!1)},I._documentMouseMoveHandler=function(e,t){if(e.dragActive&&!e.clickOperationMode){var i=e._getEventClientX(t),n=e._getEventClientY(t);e.dragItem&&(e.dragItem.style.left=i-e.dragItem.offsetWidth/2+"px",e.dragItem.style.top=n-e.dragItem.offsetHeight/2+"px")}},I._documentMouseDownHandler=function(e,t){e.dragActive&&E(e,t)},I._draggableMouseDownHandler=function(e,t){t.target&&(e.mouseDownClientX=e._getEventClientX(t),e.mouseDownClientY=e._getEventClientY(t),e.dragEnabled=!0,e.clickOperationMode&&(e.dragActive?E(e,t):(e.dragActive=!0,y(e,t))))},I._draggableMouseMoveHandler=function(e,t){if(!e.clickOperationMode){var i=e._getEventClientX(t),n=e._getEventClientY(t);e.dragEnabled&&!e.dragActive&&(Math.abs(e.mouseDownClientX-i)>e.dragDelay||Math.abs(e.mouseDownClientY-n)>e.dragDelay)&&y(e,t)}},I._draggableMouseLeaveHandler=function(e,t){!e.dragActive&&e.dragEnabled&&y(e,t)},I._droppableMouseEnterHandler=function(e,t){e.dragActive&&m(e,t)},I._droppableMouseMoveHandler=function(e,t){e.dragActive&&(e.dragEntered===!1&&m(e,t),f(e,t))},I._droppableMouseLeaveHandler=function(e,t){e.dragActive&&v(e,t)},I.getDraggableByElement=function(e){var t=0;for(t=0;t<this.draggables.length;t+=1)if(this.draggables[t].elem===e)return this.draggables[t];return null},I.getClosestDraggable=function(e){for(var t=e;t;){var draggable=this.getDraggableByElement(t);if(draggable)return draggable;t=t.parentNode}return null},I.getDroppableByElement=function(e){var t=0;for(t=0;t<this.droppables.length;t+=1)if(this.droppables[t].elem===e)return this.droppables[t];return null},I.getClosestDroppable=function(e){for(var t=e;t;){var droppable=this.getDroppableByElement(t);if(droppable)return droppable;t=t.parentNode}return null},I.setDragDropArea=function(e){var t,i;for(this.dragDropArea&&l(this),this.dragDropArea=e,i=0;i<this.dragDropAreaEventListeners.length;i+=1)t=this.dragDropAreaEventListeners[i],this.dragDropArea.addEventListener(t.event,t["function"])},I.getDragItem=function(){return this.dragItem},I.setDragItemClone=function(e,t){if(Utils.addClass(e,s),t)for(var i=0;i<t.length;i+=1)Utils.addClass(e,t[i]);e.style.pointerEvents="none",this.dragItem=e,document.body.appendChild(e)},I.setClickOperationMode=function(e){this.clickOperationMode=e},I.getClickOperationMode=function(){return this.clickOperationMode},I.setPreventMouseDownEvent=function(e){this.preventMouseDownEvent=e},I.getPreventMouseDownEvent=function(){return this.preventMouseDownEvent},I.setDragData=function(e){this.dragData=e},I.getDragData=function(){return this.dragData},I.registerDraggable=function(t,i){var draggable=new e;return draggable.id=t.id,draggable.elem=t,Utils.mapProperties(i,draggable),this.draggables.push(draggable),this._draggableAddEventListener(draggable),draggable},I.registerDroppable=function(e,i){var droppable=new t;return droppable.id=e.id,droppable.elem=e,Utils.mapProperties(i,droppable),Utils.mapMethods(i,droppable),this.droppables.push(droppable),this._droppableAddEventListener(droppable),droppable},I.unregisterDraggable=function(e){var draggable=this.getClosestDraggable(e);return draggable?(this._draggableRemoveEventListener(draggable),this.draggables.splice(this.draggables.indexOf(draggable),1),!0):!1},I.unregisterDroppable=function(e){var droppable=this.getClosestDroppable(e);return droppable?(this._droppableRemoveEventListener(droppable),this.droppables.splice(this.droppables.indexOf(droppable),1),!0):!1},I.unregisterDraggables=function(){for(var e=0;e<this.draggables.length;e+=1)this.unregisterDraggable(this.draggables[e]);this.draggables=null},I.unregisterDroppables=function(){for(var e=0;e<this.droppables.length;e+=1)this.unregisterDroppable(this.droppables[e]);this.droppables=null},I.getDraggables=function(){return this.draggables},I.getDroppables=function(){return this.droppables},I.addEventListener=function(e,t){null===a(this,e,t)&&(this.dragDropAreaEventListeners.push(new i(e,t)),this.dragDropArea.addEventListener(e,t))},I.removeEventListener=function(e,t){null!==a(this,e,t)&&this.dragDropArea.removeEventListener(e,t)},I.disable=function(){this.isDisabled=!0},I.enable=function(){this.isDisabled=!1},I.dispose=function(){l(this),this.dragDropAreaEventListeners=void 0,this.unregisterDraggables(),this.unregisterDroppables(),this._documentRemoveEventListener()},x}),define("widgets/brease/common/DragDropHandler/libs/dragDropTouch",["widgets/brease/common/DragDropHandler/libs/dragDropBase"],function(e){"use strict";function t(e,t){setTimeout(function(){var i=new Event("mouseenter",t);e.dispatchEvent(i)},0)}function i(e,t){setTimeout(function(){var i=new Event("mouseleave",t);e.dispatchEvent(i)},0)}function n(){e.call(this)}n.prototype=Object.create(e.prototype);var s=n.prototype;return s._wrapEventHandler=function(){e.prototype._wrapEventHandler.call(this);var n=this,s=null;this.documentTouchStartHandler=function(e){n._documentMouseDownHandler(n,e)},this.documentTouchEndHandler=function(e){n._documentMouseUpHandler(n,e),s&&(i(s),s=null)},this.documentTouchMoveHandler=function(e){var r=event.touches[0],a=document.elementFromPoint(r.clientX,r.clientY);if(null===s&&null!==a?(t(a),s=a):s!==a&&null!==a&&(i(s),t(a),s=a),a){var droppable=n.getClosestDroppable(a);n.dragActive&&droppable&&n._droppableMouseMoveHandler(n,e)}n._documentMouseMoveHandler(n,e)},this.draggableTouchMoveHandler=function(e){e.preventDefault(),n._draggableMouseMoveHandler(n,e)},this.draggableTouchStartHandler=function(e){e.preventDefault(),n._draggableMouseDownHandler(n,e)},this.droppableTouchMoveHandler=function(e){e.preventDefault()}},s._documentAddEventListener=function(){e.prototype._documentAddEventListener.call(this),document.addEventListener("touchstart",this.documentTouchStartHandler),document.addEventListener("touchend",this.documentTouchEndHandler),document.addEventListener("touchmove",this.documentTouchMoveHandler)},s._draggableAddEventListener=function(draggable){e.prototype._draggableAddEventListener.call(this,draggable),draggable.elem.addEventListener("touchmove",this.draggableTouchMoveHandler),draggable.elem.addEventListener("touchstart",this.draggableTouchStartHandler)},s._droppableAddEventListener=function(droppable){e.prototype._droppableAddEventListener.call(this,droppable),droppable.elem.addEventListener("touchmove",this.droppableTouchMoveHandler)},s._documentRemoveEventListener=function(){e.prototype._documentRemoveEventListener.call(this),document.removeEventListener("touchstart",this.documentTouchStartHandler),document.removeEventListener("touchend",this.documentTouchEndHandler),document.removeEventListener("touchmove",this.documentTouchMoveHandler)},s._draggableRemoveEventListener=function(draggable){e.prototype._draggableRemoveEventListener.call(this,draggable),draggable.elem.removeEventListener("touchmove",this.draggableTouchMoveHandler),draggable.elem.removeEventListener("touchstart",this.draggableTouchStartHandler)},s._droppableRemoveEventListener=function(droppable){e.prototype._droppableRemoveEventListener.call(this,droppable),droppable.elem.removeEventListener("touchmove",this.droppableTouchMoveHandler)},s._getEventClientX=function(e){return e instanceof TouchEvent?e.changedTouches[0].clientX:e.clientX},s._getEventClientY=function(e){return e instanceof TouchEvent?e.changedTouches[0].clientY:e.clientY},s._getEventPageX=function(e){return e instanceof TouchEvent?e.changedTouches[0].pageX:e.pageX},s._getEventPageY=function(e){return e instanceof TouchEvent?e.changedTouches[0].pageY:e.pageY},s._getDragDropTarget=function(e,t){var i=t.target;if(t instanceof TouchEvent){var n=t.changedTouches.item(0);i=document.elementFromPoint(n.clientX,n.clientY)}return i},n}),define("widgets/brease/common/DragDropHandler/libs/dragDropPointer",["widgets/brease/common/DragDropHandler/libs/dragDropBase"],function(e){"use strict";function t(){e.call(this)}t.prototype=Object.create(e.prototype);var i=t.prototype;return i._wrapEventHandler=function(){e.prototype._wrapEventHandler.call(this);var t=this;this.documentPointerUpHandler=function(e){t._documentMouseUpHandler(t,e)},this.documentPointerDownHandler=function(e){t._documentMouseDownHandler(t,e)},this.documentPointerMoveHandler=function(e){t._documentMouseMoveHandler(t,e)},this.draggablePointerMoveHandler=function(e){e.target.hasPointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId),t._draggableMouseMoveHandler(t,e)},this.draggablePointerDownHandler=function(e){t._draggableMouseDownHandler(t,e)},this.draggablePointerLeaveHandler=function(e){t._draggableMouseLeaveHandler(t,e)},this.droppablePointerEnterHandler=function(e){t._droppableMouseEnterHandler(t,e)},this.droppablePointerMoveHandler=function(e){t._droppableMouseMoveHandler(t,e)},this.droppablePointerLeaveHandler=function(e){t._droppableMouseLeaveHandler(t,e)}},i._documentAddEventListener=function(){document.addEventListener("pointerup",this.documentPointerUpHandler),document.addEventListener("pointerdown",this.documentPointerDownHandler),document.addEventListener("pointermove",this.documentPointerMoveHandler)},i._draggableAddEventListener=function(draggable){draggable.elem.addEventListener("pointermove",this.draggablePointerMoveHandler),draggable.elem.addEventListener("pointerdown",this.draggablePointerDownHandler),draggable.elem.addEventListener("pointerleave",this.draggablePointerLeaveHandler)},i._droppableAddEventListener=function(droppable){droppable.elem.addEventListener("pointerenter",this.droppablePointerEnterHandler),droppable.elem.addEventListener("pointermove",this.droppablePointerMoveHandler),droppable.elem.addEventListener("pointerleave",this.droppablePointerLeaveHandler)},i._documentRemoveEventListener=function(){document.removeEventListener("pointerup",this.documentPointerUpHandler),document.removeEventListener("pointerdown",this.documentPointerDownHandler),document.removeEventListener("pointermove",this.documentPointerMoveHandler)},i._draggableRemoveEventListener=function(draggable){draggable.elem.removeEventListener("pointermove",this.draggablePointerMoveHandler),draggable.elem.removeEventListener("pointerdown",this.draggablePointerDownHandler),draggable.elem.removeEventListener("pointerleave",this.draggablePointerLeaveHandler)},i._droppableRemoveEventListener=function(droppable){droppable.elem.removeEventListener("pointerenter",this.documentPointerUpHandler),droppable.elem.removeEventListener("pointermove",this.droppablePointerMoveHandler),droppable.elem.removeEventListener("pointerleave",this.droppablePointerLeaveHandler)},t}),define("widgets/brease/common/DragDropHandler/libs/dragDropHandler",["widgets/brease/common/DragDropHandler/libs/dragDropBase","widgets/brease/common/DragDropHandler/libs/dragDropTouch","widgets/brease/common/DragDropHandler/libs/dragDropPointer"],function(e,t,i){"use strict";function n(){return"ontouchstart"in window||navigator.maxTouchPoints}function s(){return window.PointerEvent?!0:!1}function r(){s()?i.call(this):n()?t.call(this):e.call(this)}return s()?r.prototype=Object.create(i.prototype):n()?r.prototype=Object.create(t.prototype):r.prototype=Object.create(e.prototype),r}),define("widgets/brease/common/DragDropHandler/libs/draggableSettings",[],function(){"use strict";function e(){this.clone=!1,this.cloneClassList=[],this.data=null}return e}),define("widgets/brease/common/DragDropHandler/libs/droppableSettings",[],function(){"use strict";function e(){this.dragEnter=function(){},this.dragLeave=function(){},this.dragMove=function(){},this.drop=function(){}}return e}),require(["widgets/brease/common/DragDropHandler/libs/dragDropHandler","widgets/brease/common/DragDropHandler/libs/draggableSettings","widgets/brease/common/DragDropHandler/libs/droppableSettings"],function(e,t,i){"use strict";var n=0,dragDropHandler=new e,s=document.getElementsByClassName("draggableItem");for(n=0;n<s.length;n+=1){var draggableSettings=new t;dragDropHandler.registerDraggable(s[n],draggableSettings)}var r=document.getElementsByClassName("droppableItem");for(n=0;n<r.length;n+=1){var droppableSettings=new i;droppableSettings.dragEnter=function(e){console.log(e.target.id+" dragEnter!"),e.target.classList.add("dragEntered")},droppableSettings.dragMove=_.throttle(function(e){console.log(e.target.id+" dragMove!")},500),droppableSettings.dragLeave=function(e){console.log(e.target.id+" dragLeave!"),e.target.classList.remove("dragEntered")},droppableSettings.drop=function(e){console.log(e.target.id+" drop!");var droppable=dragDropHandler.getClosestDroppable(e.target);droppable.elem.innerHTML="",droppable.elem.appendChild(e.dragItem.children[0].cloneNode(!0)),droppable.elem.classList.remove("dragEntered")},dragDropHandler.registerDroppable(r[n],droppableSettings)}dragDropHandler.addEventListener("dragstarted",function(e){console.log("dragstarted!");for(var t=document.getElementsByClassName("droppableItem"),i=0;i<t.length;i+=1)t[i].classList.add("dropPossible");var n=e.detail.target.cloneNode(!0),s=["border-class"];dragDropHandler.setDragItemClone(n,s)}),dragDropHandler.addEventListener("dragended",function(e){console.log("dragended!");for(var t=document.getElementsByClassName("droppableItem"),i=0;i<t.length;i+=1)t[i].classList.remove("dropPossible")})}),define("widgets/brease/common/DragDropHandler/doc/example",function(){}),define("widgets/brease/common/ErrorHandling/libs/CommissioningErrorHandler",["brease/core/Class"],function(e){"use strict";var t=e.extend(function o(t){this.widget=t,this.init(),e.apply(this,arguments)},null),i=t.prototype;i.init=function(){this.contentId=this.widget.settings.parentContentId,this.widgetId=this.widget.elem.id,this.numberOfReportedErrors=0},i.requiredBindingMissing=function(e,t){var i=n(this.widgetId,this.contentId),s=e;void 0!==t&&(i=n(t,this.contentId)),r(this,i,"Binding for property "+s+" missing!")},i.invalidPropertyValue=function(e,t){var i=n(this.widgetId,this.contentId),s=e;void 0!==t&&(i=n(t,this.contentId)),r(this,i,'Property "'+s+'" has invalid or conflicting value!')},i.requiredAncestorWidgetMissing=function(e,t){var i=n(this.widgetId,this.contentId),s;s="string"==typeof e?e:e.join(", "),void 0!==t&&(i=n(t,this.contentId)),r(this,i,"Missing an ancestor of type "+s+"!")},i.requiredParentWidgetMissing=function(e,t){var i=n(this.widgetId,this.contentId),s;s="string"==typeof e?e:e.join(", "),void 0!==t&&(i=n(t,this.contentId)),r(this,i,"Missing a parent of type "+s+"!")},i.requiredChildWidgetMissing=function(e,t){var i=n(this.widgetId,this.contentId),s;s="string"==typeof e?e:e.join(", "),void 0!==t&&(i=n(t,this.contentId)),r(this,i,"Missing a child of type "+s+"!")},i.childrenConflict=function(e,t){var i=n(this.widgetId,this.contentId),s=n(e,this.contentId);void 0!==t&&(i=n(t,this.contentId)),r(this,i,"Child "+s+" is invalid or conflicts with other children!")};function n(e,t){var i=e.replace(t+"_","");return i}function s(e){var t=$("<div />"),i={"background-color":"white",width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",color:"red","z-index":"999"};return t.css(i),e.el.append(t),t}function r(e,t,i){return brease.config.editMode||window.jasmine?!1:(a(e.widget,"ERROR: "+i+" { WidgetId: "+t+", ContentId: "+e.contentId+" }"),e._numberOfReportedErrors+=1,void 0)}function a(e,t){var i=s(e);i.text(t),console.error(t)}return t}),define("widgets/brease/common/libs/BindingSync",["brease/core/Utils","brease/enum/Enum","brease/events/BreaseEvent"],function(Utils,Enum,BreaseEvent){"use strict";var BindingSync={};BindingSync.setupPropertyOrder=function t(i,n){function s(){var t={};n.forEach(function(e,i,n){t[e.name]={name:e.name,waitFor:e.waitFor},e.waitFor.forEach(function(e){t.hasOwnProperty(e)||(t[e]={name:e,waitFor:[]})})});for(var s in t)if(t.hasOwnProperty(s)){var r=t[s],a=Utils.setter(r.name),o=Object.getPrototypeOf(i);!function(t,n){Utils.isFunction(i[t])&&(i[t]=function(){i[t].methodCalled=!0,i[t].dependenciesResolved?o[t].apply(i,arguments):i[t].bufferedCalls.push(arguments),i.dispatchEvent(new CustomEvent("BindingEvent"))},i[t].bufferedCalls=[],i[t].waitDone=!1,i[t].methodCalled=!1,i[t].dependenciesResolved=e(i,n),i[t].waitPromise=new Promise(function(s,r){i.elem.addEventListener("BindingEvent",function a(){i[t].waitDone||(i[t].dependenciesResolved=e(i,n),i[t].waitDone=i[t].dependenciesResolved&&i[t].methodCalled,i[t].waitDone&&(s(),i.elem.removeEventListener("BindingEvent",a),i.dispatchEvent(new CustomEvent("BindingEvent"))))})}).then(function(){i[t].bufferedCalls.forEach(function(e){o[t].apply(i,e)})}))}(a,r)}}return i.state===Enum.WidgetState.READY?s():new Promise(function(e){i.elem.addEventListener(BreaseEvent.WIDGET_READY,function(t){t.target===i.elem&&e()})}).then(s),!0};function e(e,t){return t.waitFor.reduce(function(t,i){var n=void 0!==e.bindings?e.bindings.hasOwnProperty(i):!1;return t&&(e[Utils.setter(i)].waitDone||!n)},!0)}return BindingSync}),define("widgets/brease/common/libs/BoxLayout",["brease/enum/Enum"],function(Enum){"use strict";var BoxLayout={};BoxLayout.CONTAINER_CLASS="box-container",BoxLayout.BOX_CLASS="box-class",BoxLayout.ORIENTATION_RIGHT="orientation-right",BoxLayout.ORIENTATION_LEFT="orientation-left",BoxLayout.ORIENTATION_TOP="orientation-top",BoxLayout.ORIENTATION_BOTTOM="orientation-bottom",BoxLayout.ALIGNMENT_TOP_LEFT="content-top-left",BoxLayout.ALIGNMENT_TOP="content-top",BoxLayout.ALIGNMENT_TOP_RIGHT="content-top-right",BoxLayout.ALIGNMENT_LEFT="content-left",BoxLayout.ALIGNMENT_CENTER="content-center",BoxLayout.ALIGNMENT_RIGHT="content-right",BoxLayout.ALIGNMENT_BOTTOM_LEFT="content-bottom-left",BoxLayout.ALIGNMENT_BOTTOM="content-bottom",BoxLayout.ALIGNMENT_BOTTOM_RIGHT="content-bottom-right";function e(e,t){if(e.classList.contains(t))return e;for(e=e.parentElement;e&&!e.classList.contains(t);)e=e.parentElement;return e}return BoxLayout.resetContainerClass=function(e){for(var t=0,i;i=e.classList.item(t);){switch(i){case this.ORIENTATION_RIGHT:case this.ORIENTATION_LEFT:case this.ORIENTATION_TOP:case this.ORIENTATION_BOTTOM:e.classList.remove(i)}t+=1}},BoxLayout.resetBoxClass=function(e){for(var t=0,i;i=e.classList.item(t);){switch(i){case this.ALIGNMENT_TOP_LEFT:case this.ALIGNMENT_TOP:case this.ALIGNMENT_TOP_RIGHT:case this.ALIGNMENT_LEFT:case this.ALIGNMENT_CENTER:case this.ALIGNMENT_RIGHT:case this.ALIGNMENT_BOTTOM_LEFT:case this.ALIGNMENT_BOTTOM:case this.ALIGNMENT_BOTTOM_RIGHT:e.classList.remove(i)}t+=1}},BoxLayout.createBoxContainer=function(){var e=document.createElement("div");return e.classList.add(this.CONTAINER_CLASS),e},BoxLayout.createBox=function(){var e=document.createElement("div");return e.classList.add(this.BOX_CLASS),e},BoxLayout.setOrientation=function(t,i){var n=e(t,this.CONTAINER_CLASS);if(n)switch(this.resetContainerClass(n),i){case Enum.Orientation.RTL:n.classList.add(this.ORIENTATION_RIGHT);break;case Enum.Orientation.LTR:n.classList.add(this.ORIENTATION_LEFT);break;case Enum.Orientation.TTB:n.classList.add(this.ORIENTATION_TOP);break;case Enum.Orientation.BTT:n.classList.add(this.ORIENTATION_BOTTOM)}},BoxLayout.setBoxAlign=function(t,i){var n=e(t,this.BOX_CLASS);if(n)switch(this.resetBoxClass(n),i){case"TopLeft":n.classList.add(this.ALIGNMENT_TOP_LEFT);break;case"Top":n.classList.add(this.ALIGNMENT_TOP);break;case"TopRight":n.classList.add(this.ALIGNMENT_TOP_RIGHT);break;case"Left":n.classList.add(this.ALIGNMENT_LEFT);break;case"Center":n.classList.add(this.ALIGNMENT_CENTER);break;case"Right":n.classList.add(this.ALIGNMENT_RIGHT);break;case"BottomLeft":n.classList.add(this.ALIGNMENT_BOTTOM_LEFT);break;case"Bottom":n.classList.add(this.ALIGNMENT_BOTTOM);break;case"BottomRight":n.classList.add(this.ALIGNMENT_BOTTOM_RIGHT)}},BoxLayout}),define("widgets/brease/common/libs/ChartUtils",["brease/enum/Enum"],function(Enum){"use strict";var ChartUtils={};function e(e,t){var i=parseInt(e,10);return isNaN(i)?t:i}return ChartUtils.formatTickLabels=function(t,i,n,s){var r=e(s,0),a=e(n,0),o="",l="";"top"===i?(o="y",a=-1*a,l="rotate("+r+", 0, "+a+")"):"bottom"===i?(o="y",l="rotate("+r+", 0, "+a+")"):"right"===i?(o="x",l="rotate("+r+", "+a+", 0)"):(o="x",a=-1*a,l="rotate("+r+", "+a+", 0)"),t.attr("transform",l).attr(o,a)},ChartUtils}),define("widgets/brease/common/libs/DataAdapter",["require","brease/core/Class","libs/d3/d3","brease/core/Utils"],function(e){"use strict";var t=e("brease/core/Class"),i=e("libs/d3/d3"),Utils=e("brease/core/Utils"),n=t.extend(function DataAdapter(e){t.call(this),this.widget=e,this.settings={chartMargin:{marginTop:15,marginRight:15,marginBottom:15,marginLeft:15},cursorAreaWidth:10},this.init()},null),s=n.prototype;s.init=function(){this.xAxisAreas=[],this.yAxisAreas=[],this.xAxisCursorAreas=[],this.chartArea={},this.yScales=[],this.xScales=[],this.xAxisCursors=[],this.graphs=[];for(var e in this.widget.chartItems.yValues)this.graphs.push({id:e,coordinates:[]});r(this)},s.dispose=function(){},s.updateScales=function(){a(this)},s.updateGraphData=function(){o(this)},s.updateCursor=function(){l(this)},s.updateZoomLevelLimits=function(){d(this)},s.getXAxisAreas=function(){return this.xAxisAreas},s.getYAxisAreas=function(){return this.yAxisAreas},s.getXAxisCursorAreas=function(){return this.xAxisCursorAreas},s.getChartArea=function(){return this.chartArea},s.getGraphs=function(){return this.graphs},s.getYAxesMinimum=function(){var e=this.getYAxisAreas(),t=null;if(!this.widget||this.widget.chartItems.length<1||this.widget.chartItems.yAxis.length<0)return t;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=this.widget.chartItems.yAxis[i].minimum();(null===t||t>n)&&(t=n)}return t},s.getYAxesMaximum=function(){var e=this.getYAxisAreas(),t=null;if(!this.widget||this.widget.chartItems.length<1||this.widget.chartItems.yAxis.length<0)return t;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=this.widget.chartItems.yAxis[i].maximum();(null===t||n>t)&&(t=n)}return t};function r(e){var t=0,n,s,r=0,a=e.widget.settings.width,o=0,l=e.widget.settings.height,d=0,u=0,c,g,h,p=e.widget.settings.width,m=e.widget.settings.height,f;f=e.widget.settings.chartMargin.match(/-?\d+(\.\d+)?px/g);for(var v in e.settings.chartMargin)e.settings.chartMargin[v]=parseFloat(f[t],10),t=f[t+1]?t+1:0;r+=e.settings.chartMargin.marginLeft,a-=e.settings.chartMargin.marginRight,o+=e.settings.chartMargin.marginTop,l-=e.settings.chartMargin.marginBottom;for(n in e.widget.chartItems.yAxis)u=parseInt(e.widget.chartItems.yAxis[n].settings.width,10),e.yAxisAreas[n]={id:n,y:e.settings.chartMargin.marginTop,width:u,info:{position:e.widget.chartItems.yAxis[n].getAxisPosition(),axisLabelDistance:parseInt(e.widget.chartItems.yAxis[n].getAxisLabelDistance(),10),minZoomLevel:e.widget.getMinZoomLevel()/100,maxZoomLevel:e.widget.getMaxZoomLevel()/100,format:e.widget.chartItems.yAxis[n].currentFormat(),type:"number"}},a-="right"===e.yAxisAreas[n].info.position?u:0,e.yAxisAreas[n].x="left"===e.yAxisAreas[n].info.position?r:a,r+="left"===e.yAxisAreas[n].info.position?u:0,e.yScales[n]=i.scale.linear(),e.yAxisAreas[n].scale=e.yScales[n];for(n in e.widget.chartItems.xAxis){switch(g=e.widget.chartItems.xAxis[n],d=parseInt(g.settings.height,10),e.xAxisAreas[n]={id:n,x:r,width:a-r,height:d,info:{position:g.getAxisPosition(),axisLabelDistance:parseInt(g.getAxisLabelDistance(),10),minZoomLevel:e.widget.getMinZoomLevel()/100,maxZoomLevel:e.widget.getMaxZoomLevel()/100}},l-="bottom"===e.xAxisAreas[n].info.position?d:0,e.xAxisAreas[n].y="bottom"===e.xAxisAreas[n].info.position?l:o,o+="top"===e.xAxisAreas[n].info.position?d:0,h=e.widget.chartItems.xAxis[n]._getMinValue(),g._getAxisType()){case"dateTime":e.xScales[n]=i.time.scale();break;case"index":case"secondsAsNumber":e.xScales[n]=i.scale.linear()}e.xAxisAreas[n].scale=e.xScales[n]}for(n in e.widget.chartItems.yAxis)e.yAxisAreas[n].y=o,e.yAxisAreas[n].height=l-o;e.chartArea={x:r,y:o,width:a-r,height:l-o};for(s in e.widget.chartItems.xCursors){var b=e.widget.chartItems.xCursors[s];e.xAxisCursorAreas[s]={id:s,xCursor:e.widget.chartItems.xCursors[s].getValue(),yValues:[],yValueAxes:[],active:!1,x:-e.settings.cursorAreaWidth/2+e.xAxisAreas[b.axisWidget.elem.id].scale(b._getValue()),y:0,width:e.settings.cursorAreaWidth,height:e.chartArea.height,maxAvailableXPositionIndex:b._getMaxDrawnXSampleIndex()};for(var y in e.widget.chartItems.xCursors[s].graphWidgets)e.xAxisCursorAreas[s].yValues[y]=e.widget.chartItems.xCursors[s].graphWidgets[y].getCursorValue(),
e.xAxisCursorAreas[s].yValueAxes[y]=e.widget.chartItems.yValues[y].axisWidget.elem.id}}function a(e){var t,n,s,r,a;for(t in e.yAxisAreas)r=e.widget.chartItems.yAxis[t].minimum(),a=e.widget.chartItems.yAxis[t].maximum(),r===a&&(0!==r?(r=.9*r,a=1.1*a):(r=-1,a=1)),e.yScales[t]=i.scale.linear().domain([r,a]).range([e.yAxisAreas[t].height,0]),e.yAxisAreas[t].scale=e.yScales[t],e.yAxisAreas[t].info.format=e.widget.chartItems.yAxis[t].currentFormat();for(t in e.xAxisAreas){var l=e.widget.chartItems.xAxis[t];switch(n=l._getMinValue(),s=l._getMaxValue(),l._getAxisType()){case"dateTime":e.xScales[t]=i.time.scale(),e.xAxisAreas[t].info.type=l._getAxisType();break;case"index":case"secondsAsNumber":e.xScales[t]=i.scale.linear(),e.xAxisAreas[t].info.type=l._getAxisType()}e.xAxisAreas[t].info.format=e.widget.chartItems.xAxis[t].currentFormat(),e.xScales[t].domain([n,s]).range([0,e.xAxisAreas[t].width]),e.xAxisAreas[t].scale=e.xScales[t]}o(e)}function o(e){for(var t,i,n,s=0;s<e.graphs.length;s+=1)t=e.widget.chartItems.yValues[e.graphs[s].id],i=t.axisWidget.elem.id,n=t.xAxisWidget.elem.id,e.graphs[s].yScale=e.yScales[i],e.graphs[s].xScale=e.xScales[n],e.graphs[s].coordinates=t._coordinates(),e.graphs[s].interpolationType=t.getInterpolationType()}function l(e){for(var t in e.widget.chartItems.xCursors){var i=e.widget.chartItems.xCursors[t];e.xAxisCursorAreas[t].xCursor=i._getValue(),e.xAxisCursorAreas[t].active=i._getActive(),e.xAxisCursorAreas[t].x=-e.settings.cursorAreaWidth/2+e.xAxisAreas[i.axisWidget.elem.id].scale(i._getValue()),e.xAxisCursorAreas[t].y=0,e.xAxisCursorAreas[t].width=e.settings.cursorAreaWidth;for(var n in e.widget.chartItems.xCursors[t].graphWidgets)e.xAxisCursorAreas[t].yValues[n]=e.widget.chartItems.xCursors[t].graphWidgets[n]._getIntersectionValue(i._getValue(),i._getActive()),e.xAxisCursorAreas[t].yValueAxes[n]=e.widget.chartItems.yValues[n].axisWidget.elem.id;e.xAxisCursorAreas[t].maxAvailableXPositionIndex=i._getMaxDrawnXSampleIndex()}}function d(e){for(var t in e.widget.chartItems.yAxis)e.yAxisAreas[t].info.minZoomLevel=e.widget.getMinZoomLevel()/100,e.yAxisAreas[t].info.maxZoomLevel=e.widget.getMaxZoomLevel()/100;for(t in e.widget.chartItems.xAxis)e.xAxisAreas[t].info.minZoomLevel=e.widget.getMinZoomLevel()/100,e.xAxisAreas[t].info.maxZoomLevel=e.widget.getMaxZoomLevel()/100}return n}),define("widgets/brease/common/libs/EditorGrid",["require","brease/core/Class","libs/d3/d3","globalize","widgets/brease/common/libs/ChartUtils"],function(e){"use strict";var t=e("brease/core/Class"),i=e("libs/d3/d3"),n=e("globalize"),ChartUtils=e("widgets/brease/common/libs/ChartUtils"),s={},r=t.extend(function EditorGrid(e,i){t.call(this),this.widget=e,i.mainContainer||(this.parentWidget=brease.callWidget(e.el.parents(":eq(1)")[0].id,"widget"),this.areas=this.parentWidget?this.parentWidget.editorGrid.areas:null),this.children={},this.configuration=i,this.init()},s),a=r.prototype;a.init=function(){this.widget.el.on("widget_added",this._bind("childrenAdded")),this.widget.el.on("widget_removed",this._bind("childrenRemoved"))},a.dispose=function(){this.widget.el.off("widget_added",this._bind("childrenAdded")),this.widget.el.off("widget_removed",this._bind("childrenRemoved"))},a.childrenAdded=function(e){if(e.target===this.widget.elem){var t=e.detail.widgetId,i=brease.callWidget(t,"widget");this.children.hasOwnProperty(t)||(this.children[t]=i)}},a.childrenRemoved=function(e){if(e.target===this.widget.elem){var t=e.detail.widgetId;this.children.hasOwnProperty(t)&&delete this.children[t]}},a.createLayout=function(){var e=this;switch(this.areas={left:$("<div class='container areaLeft'></div>"),right:$("<div class='container areaRight'></div>"),graph:$("<div class='container areaGraph'></div>")},e.configuration.layout){case"2Areas":e.leftAreaSize=0,e.widget.el.append(this.areas.left),this.areas.right.append(this.areas.graph),e.widget.el.append(this.areas.right);break;case"5Areas":this.areas.center=$("<div class='container areaCenter'></div>"),this.areas.top=$("<div class='container areaTop'></div>"),this.areas.bottom=$("<div class='container areaBottom'></div>"),e.leftAreaSize=0,e.rightAreaSize=0,e.topAreaHeight=0,e.bottomAreaHeight=0,e.actualOrder=0,this.areas.top.css("flex-basis",e.topAreaHeight),this.areas.bottom.css("flex-basis",e.bottomAreaHeight),e.widget.el.append(this.areas.left),this.areas.center.append(this.areas.top),this.areas.center.append(this.areas.graph),this.areas.center.append(this.areas.bottom),e.widget.el.append(this.areas.center),e.widget.el.append(this.areas.right)}},a.createAxis=function(){var e=this,t={};t=o(e),e.scaleContainer=i.select(e.widget.el.get(0)).append("svg").attr("style","z-index:-1").attr("class","container scaleContainer"),e.scale="time"===e.widget.editorGrid.configuration.scaleType?i.time.scale():i.scale.linear(),e.scale.domain(t.domain).range(t.range),e.axis=i.svg.axis().scale(e.scale).orient(t.orient),e.widget.editorGrid.configuration.tickFormat&&e.axis.tickFormat(function(t){return l(e.widget.editorGrid.configuration.tickFormat,t,e.widget.editorGrid.configuration.scaleType)}),e.axisElement=e.scaleContainer.append("g").attr("class","axis").attr("id",t.id).call(e.axis);var n=e.axisElement.selectAll(".tick>text");ChartUtils.formatTickLabels(n,e.configuration.axisPosition,e.configuration.tickLabelDistance,e.configuration.tickLabelRotation),e.scaleContainer.append("g").attr("transform","translate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?t.axisLabelDistance:e.areas.graph.width()/2)+", "+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?e.areas.graph.height()/2:t.axisLabelDistance)+") rotate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?-90:0)+")").attr("id",t.id+"_axisLabel").attr("class","containerAxisDescription").append("text").attr("class","axisDescription").style("text-anchor","middle").text(t.axisLabel)},a.updateAxis=function(){var e=this,t={};t=o(e),e.scale.domain(t.domain),e.scale.range(t.range),e.axis.orient(t.orient),t.tickFormat&&e.axis.tickFormat(function(t){return l(e.widget.editorGrid.configuration.tickFormat,t,e.widget.editorGrid.configuration.scaleType)}),e.axisElement.call(e.axis),e.axisElement.attr("transform","translate("+t.offsetX+","+t.offsetY+")").call(e.axis);var i=e.axisElement.selectAll(".tick>text");ChartUtils.formatTickLabels(i,e.configuration.axisPosition,e.configuration.tickLabelDistance,e.configuration.tickLabelRotation),e.scaleContainer.select(".containerAxisDescription").attr("transform","translate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?t.axisLabelDistance:e.areas.graph.width()/2)+", "+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?e.areas.graph.height()/2:t.axisLabelDistance)+") rotate("+(e.widget.elem.className.match(/breaseChartYAxisWidget/)?-90:0)+")"),e.scaleContainer.select(".axisDescription").attr("dy","left"===e.configuration.axisPosition||"top"===e.configuration.axisPosition?"-0.03em":"0.75em").text(t.axisLabel)},a.updateAllChildren=function(){};function o(e){var t={};switch(e.configuration.axisType){case"Vertical":t.domain="TopToBottom"===e.widget.settings.orientation?[0,100]:[100,0],t.range="5Areas"===e.parentWidget.editorGrid.configuration.layout?[20,e.areas.graph.height()-20]:[20,e.widget.el.height()-20],t.orient="right"===e.configuration.axisPosition?"right":"left",t.offsetX=e.configuration.offsetX||("right"===e.configuration.axisPosition?0:e.widget.settings.width-10),t.offsetY=e.configuration.offsetY||0,t.axisLabel=e.configuration.axisLabel||null,t.axisLabelDistance=e.configuration.offsetX+1+("left"===e.configuration.axisPosition?-1:1)*e.configuration.axisLabelDistance||0,t.id=e.widget.elem.id+"_YAxis";break;case"Horizontal":t.domain="RightToLeft"===e.widget.settings.orientation?e.widget.editorGrid.configuration.axisDomain?e.widget.editorGrid.configuration.axisDomain:[100,0]:e.widget.editorGrid.configuration.axisDomain?e.widget.editorGrid.configuration.axisDomain:[0,100],t.format&&(t.format=e.widget.editorGrid.configuration.tickFormat&&"time"===e.widget.editorGrid.configuration.scaleType?i.time.format(e.widget.editorGrid.configuration.tickFormat):i.format("d")),t.range="5Areas"===e.parentWidget.editorGrid.configuration.layout?[20,e.areas.graph.width()-20]:[20,e.widget.el.width()-20],t.orient="top"===e.configuration.axisPosition?"top":"bottom",t.offsetX=e.configuration.offsetX||0,t.offsetY=e.configuration.offsetY||("top"===e.configuration.axisPosition?e.widget.settings.height-10:0),t.axisLabel=e.configuration.axisLabel||null,t.axisLabelDistance=e.configuration.offsetY+1+("top"===e.configuration.axisPosition?-1:1)*e.configuration.axisLabelDistance||0,t.id=e.widget.elem.id+"_XAxis";break;default:t=void 0}return t}function l(e,t,n){switch(n){case"time":return Globalize.format(t,e);case"number":var s=0===e.decimalPlaces?e.minimumIntegerDigits:e.minimumIntegerDigits+e.decimalPlaces+1,r=i.format("0"+(0>t?s+1:s)+"."+e.decimalPlaces+"f");return r(t);default:return i.format("d")}}return r}),define("widgets/brease/common/libs/redux/reducers/Image/ImageActions",["brease/core/Class"],function(e){"use strict";var ImageActions={UPDATE_IMAGE_LIST:"UPDATE_IMAGE_LIST",updateImageList:function t(e){return{type:ImageActions.UPDATE_IMAGE_LIST,imageList:e}},UPDATE_IMAGE_PATH:"UPDATE_IMAGE_PATH",updateImagePath:function i(e){return{type:ImageActions.UPDATE_IMAGE_PATH,imagePath:e}},UPDATE_IMAGE_SETTINGS:"UPDATE_IMAGE_SETTINGS",updateImageSettings:function n(e){return{type:ImageActions.UPDATE_IMAGE_SETTINGS,imageSettings:e}}};return ImageActions}),define("widgets/brease/common/libs/redux/utils/UtilsImage",["require"],function(e){"use strict";var UtilsImage={};return UtilsImage.createImageList=function t(e){var t=[],i=0;for(i=0;e>i;i+=1)t.push(i.toString()+".png");return t},UtilsImage.createImageElements=function i(e,t){var i={},n=0;for(n=0;n<e.length;n+=1){var s=n.toString();i[s]={},i[s].id=s,void 0!==t&&""!==t?i[s].imagePath=t+e[n]:i[s].imagePath=void 0}return i},UtilsImage}),define("widgets/brease/common/libs/redux/reducers/Image/ImageReducer",["widgets/brease/common/libs/redux/reducers/Image/ImageActions","widgets/brease/common/libs/redux/utils/UtilsImage"],function(ImageActions,UtilsImage){"use strict";var ImageReducer=function ImageReducer(e,t){if(void 0===e)return null;var i;switch(t.type){case ImageActions.UPDATE_IMAGE_LIST:return i=UtilsImage.createImageElements(t.imageList,e.imagePath),_.assign({},e,{imageList:t.imageList,imageElements:i});case ImageActions.UPDATE_IMAGE_PATH:return i=UtilsImage.createImageElements(e.imageList,t.imagePath),_.assign({},e,{imagePath:t.imagePath,imageElements:i});default:return e}};return ImageReducer}),define("widgets/brease/common/libs/redux/reducers/List/ListActions",[],function(){"use strict";var e={UPDATE_ITEM_LIST:"UPDATE_ITEM_LIST",updateItemList:function t(i){return{type:e.UPDATE_ITEM_LIST,itemList:i}},UPDATE_ITEM_SETTINGS:"UPDATE_ITEM_SETTINGS",updateItemSettings:function i(t){return{type:e.UPDATE_ITEM_SETTINGS,itemSettings:t}},UPDATE_SELECTED_ITEM:"UPDATE_SELECTED_ITEM",updateSelectedItem:function n(t){return{type:e.UPDATE_SELECTED_ITEM,selectedItemIndex:t}},UPDATE_SELECTED_VALUE:"UPDATE_SELECTED_VALUE",updateSelectedValue:function s(t){return{type:e.UPDATE_SELECTED_VALUE,selectedItemValue:t}},TOGGLE_LIST_STATUS:"TOGGLE_LIST_STATUS",toggleListStatus:function r(){return{type:e.TOGGLE_LIST_STATUS}},CLOSE_LIST:"CLOSE_LIST",closeList:function a(){return{type:e.CLOSE_LIST}},OPEN_LIST:"OPEN_LIST",openList:function o(){return{type:e.OPEN_LIST}},UPDATE_LIST_SETTINGS:"UPDATE_LIST_SETTINGS",updateListSettings:function l(t){return{type:e.UPDATE_LIST_SETTINGS,listSettings:t}}};return e}),define("widgets/brease/common/libs/redux/utils/UtilsList",[],function(){"use strict";var UtilsList={};return UtilsList.parseJSONtoObject=function e(t){var i=[];return t.map(function(e){if("string"==typeof e)try{return i.push(JSON.parse(e))}catch(t){return[]}else"object"==typeof e&&i.push(e)}),i},UtilsList.getItemsFromItems=function t(e,i){var n=[],s;for(s=0;s<e.length;s+=1)n.push({imageId:s.toString(),textId:s.toString(),value:e[s].value,selected:s===i});return n},UtilsList.getSelectedValueFromItems=function i(e,t){return void 0!==e[t]?e[t].value:""},UtilsList.calculateListHeight=function n(e,t,i,s){var r=i>t||e?t:i,a=r*s;return a},UtilsList}),define("widgets/brease/common/libs/redux/reducers/List/ListReducer",["widgets/brease/common/libs/redux/reducers/List/ListActions","widgets/brease/common/libs/redux/utils/UtilsList","brease/core/Utils"],function(ListActions,UtilsList,Utils){"use strict";var ListReducer=function ListReducer(i,n){if(void 0===i)return null;var s,r,a,o,l;switch(n.type){case ListActions.UPDATE_ITEM_LIST:return r=t(n.itemList,i.selectedValue),o=e(n.itemList,r),s=UtilsList.getSelectedValueFromItems(o,r),_.assign({},i,{itemList:o,selectedValue:s,selectedIndex:r,previousSelectedIndex:i.selectedIndex,listSettings:_.assign({},i.listSettings,{listHeight:UtilsList.calculateListHeight(i.listSettings.fitHeight2Items,n.itemList.length,i.listSettings.maxVisibleEntries,i.itemSettings.itemHeight)})});case ListActions.UPDATE_SELECTED_ITEM:return r=Utils.isNumeric(n.selectedItemIndex)&&n.selectedItemIndex<i.itemList.length&&n.selectedItemIndex>0?n.selectedItemIndex:0,o=e(i.itemList,r),s=UtilsList.getSelectedValueFromItems(o,r),_.assign({},i,{itemList:o,selectedIndex:r,selectedValue:s,previousSelectedIndex:i.selectedIndex,listOpen:!1});case ListActions.UPDATE_SELECTED_VALUE:return r=t(i.itemList,n.selectedItemValue),o=e(i.itemList,r),s=UtilsList.getSelectedValueFromItems(o,r),_.assign({},i,{itemList:o,selectedIndex:r,selectedValue:s,previousSelectedIndex:i.selectedIndex,listOpen:!1});case ListActions.UPDATE_ITEM_SETTINGS:return _.assign({},i,{itemSettings:{itemHeight:void 0===n.itemSettings.itemHeight?i.itemSettings.itemHeight:n.itemSettings.itemHeight,imageAlign:void 0===n.itemSettings.imageAlign?i.itemSettings.imageAlign:n.itemSettings.imageAlign}});case ListActions.TOGGLE_LIST_STATUS:return a=!i.listOpen,_.assign({},i,{listOpen:a});case ListActions.CLOSE_LIST:return _.assign({},i,{listOpen:!1});case ListActions.OPEN_LIST:return _.assign({},i,{listOpen:!0});case ListActions.UPDATE_LIST_SETTINGS:return _.assign({},i,{listSettings:{fitHeight2Items:void 0===n.listSettings.fitHeight2Items?i.listSettings.fitHeight2Items:n.listSettings.fitHeight2Items,listPosition:void 0===n.listSettings.listPosition?i.listSettings.listPosition:n.listSettings.listPosition,listWidth:void 0===n.listSettings.listWidth?i.listSettings.listWidth:n.listSettings.listWidth,listHeight:void 0===n.listSettings.listHeight?i.listSettings.listHeight:n.listSettings.listHeight,maxVisibleEntries:void 0===n.listSettings.maxVisibleEntries?i.listSettings.maxVisibleEntries:n.listSettings.maxVisibleEntries,cropToParent:void 0===n.listSettings.cropToParent?i.listSettings.cropToParent:n.listSettings.cropToParent}});default:return i}};function e(e,t){return e.map(function(e,i){return e.selected=i===t,e})}function t(e,t){var i;for(i=0;i<e.length;i+=1)if(e[i].value===t)return i;return 0}return ListReducer}),define("widgets/brease/common/libs/redux/reducers/Size/SizeActions",[],function(){"use strict";var SizeActions={HEIGHT_CHANGE:"HEIGHT_CHANGE",changeHeight:function e(t){return{type:SizeActions.HEIGHT_CHANGE,height:t}},WIDTH_CHANGE:"WIDTH_CHANGE",changeWidth:function t(e){return{type:SizeActions.WIDTH_CHANGE,width:e}}};return SizeActions}),define("widgets/brease/common/libs/redux/reducers/Size/SizeReducer",["widgets/brease/common/libs/redux/reducers/Size/SizeActions"],function(SizeActions){"use strict";var SizeReducer=function SizeReducer(e,t){if(void 0===e)return null;switch(t.type){case SizeActions.HEIGHT_CHANGE:return e.height=t.height,e;case SizeActions.WIDTH_CHANGE:return e.width=t.width,e;default:return e}};return SizeReducer}),define("widgets/brease/common/libs/redux/reducers/Status/StatusActions",["brease/core/Class"],function(e){"use strict";var StatusActions={VISIBLE_CHANGE:"VISIBLE_CHANGE",changeVisible:function t(e){return{type:StatusActions.VISIBLE_CHANGE,visibility:e}},ENABLE_CHANGE:"ENABLE_CHANGE",changeEnable:function i(e){return{type:StatusActions.ENABLE_CHANGE,enable:e}},ACTIVE_CHANGE:"ACTIVE_CHANGE",changeActive:function n(e){return{type:StatusActions.ACTIVE_CHANGE,active:e}}};return StatusActions}),define("widgets/brease/common/libs/redux/reducers/Status/StatusReducer",["widgets/brease/common/libs/redux/reducers/Status/StatusActions"],function(StatusActions){"use strict";var StatusReducer=function StatusReducer(e,t){if(void 0===e)return null;switch(t.type){case StatusActions.VISIBLE_CHANGE:return e.visible=t.visibility,e;case StatusActions.ENABLE_CHANGE:return e.enabled=t.enable,e;case StatusActions.ACTIVE_CHANGE:return e.active=t.active,e;default:return e}};return StatusReducer}),define("widgets/brease/common/libs/redux/reducers/Style/StyleActions",[],function(){"use strict";var StyleActions={STYLE_CHANGE:"STYLE_CHANGE",styleChange:function e(t){return{type:StyleActions.STYLE_CHANGE,style:t}}};return StyleActions}),define("widgets/brease/common/libs/redux/utils/UtilsStyle",["require"],function(e){"use strict";var UtilsStyle={};return UtilsStyle.addStylePrefix=function t(e,i){return e+"_style_"+i},UtilsStyle}),define("widgets/brease/common/libs/redux/reducers/Style/StyleReducer",["widgets/brease/common/libs/redux/reducers/Style/StyleActions","widgets/brease/common/libs/redux/utils/UtilsStyle"],function(StyleActions,UtilsStyle){"use strict";var StyleReducer=function StyleReducer(e,t){if(void 0===e)return null;switch(t.type){case StyleActions.STYLE_CHANGE:return e=_.assign({},e,{style:t.style,styleToApply:UtilsStyle.addStylePrefix(e.stylePrefix,t.style)}),e;default:return e}};return StyleReducer}),define("widgets/brease/common/libs/redux/reducers/Text/TextActions",["brease/core/Class"],function(e){"use strict";var TextActions={LANGUAGE_CHANGE:"LANGUAGE_CHANGE",changeLanguage:function t(){return{type:TextActions.LANGUAGE_CHANGE}},UPDATE_TEXT:"UPDATE_TEXT",updateText:function i(e){return{type:TextActions.UPDATE_TEXT,textElements:e}},UPDATE_TEXT_SETTINGS:"UPDATE_TEXT_SETTINGS",updateTextSettings:function n(e){return{type:TextActions.UPDATE_TEXT_SETTINGS,textSettings:e}}};return TextActions}),define("widgets/brease/common/libs/redux/utils/UtilsText",[],function(){"use strict";var UtilsText={};return UtilsText.getTextsFromItems=function e(t){var i={},n;for(n=0;n<t.length;n+=1){var s=n.toString();i[s]=UtilsText.getTextElement(t[n].text,s)}return i},UtilsText.getTextElement=function t(e,i){var n={textId:i};return brease.language.isKey(e)?(n.textKey=brease.language.parseKey(e),n.displayText=brease.language.getTextByKey(n.textKey)):(n.textKey=void 0,n.displayText=e),n},UtilsText.translateTextElements=function i(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=UtilsText.translateTextElement(e[i]));return t},UtilsText.translateTextElement=function n(e){return void 0===e.textKey?e:_.assign({},e,{displayText:brease.language.getTextByKey(e.textKey)})},UtilsText}),define("widgets/brease/common/libs/redux/reducers/Text/TextReducer",["widgets/brease/common/libs/redux/reducers/Text/TextActions","widgets/brease/common/libs/redux/utils/UtilsText"],function(TextActions,UtilsText){"use strict";var TextReducer=function TextReducer(e,t){if(void 0===e)return null;switch(t.type){case TextActions.LANGUAGE_CHANGE:return _.assign({},e,{textElements:UtilsText.translateTextElements(e.textElements)});case TextActions.UPDATE_TEXT:return _.assign({},e,{textElements:t.textElements});case TextActions.UPDATE_TEXT_SETTINGS:return _.assign({},e,{textSettings:{multiLine:void 0===t.textSettings.multiLine?e.textSettings.multiLine:t.textSettings.multiLine,wordWrap:void 0===t.textSettings.wordWrap?e.textSettings.wordWrap:t.textSettings.wordWrap,ellipsis:void 0===t.textSettings.ellipsis?e.textSettings.ellipsis:t.textSettings.ellipsis}});default:return e}};return TextReducer}),define("widgets/brease/common/libs/redux/view/ImageView/ImageView",["widgets/brease/common/libs/BoxLayout"],function(BoxLayout){"use strict";var ImageView=function(e,t){this.render(e,t)},e=ImageView.prototype;return e.render=function t(e,i){this.el=$(BoxLayout.createBox()),this.el.addClass("ImageView"),this.image=$("<img src="+e.image+">"),this.el.append(this.image),i.append(this.el)},e.dispose=function i(){this.image.remove(),this.el.remove()},ImageView}),define("widgets/brease/common/libs/redux/view/TextView/TextView",["widgets/brease/common/libs/BoxLayout"],function(BoxLayout){"use strict";var TextView=function(e,t){this.render(e,t)},e=TextView.prototype;e.render=function i(e,n){this.el=$(BoxLayout.createBox()),this.span=$("<span></span>"),t(this.el,e.textSettings,e.selected),this.span.text(e.text),this.el.append(this.span),n.append(this.el)},e.dispose=function n(){this.span.remove(),this.el.remove()};function t(e,t,i){e.addClass("TextView"),t.ellipsis===!0?e.addClass("ellipsis"):e.removeClass("ellipsis"),i?e.addClass("textSelected"):e.removeClass("textSelected"),t.multiLine===!0?(e.addClass("multiLine"),t.wordWrap===!0?(e.addClass("wordWrap"),e.removeClass("multiLine")):e.removeClass("wordWrap"),t.breakWord===!0?(e.addClass("breakWord"),e.removeClass("multiLine")):e.removeClass("breakWord")):(e.removeClass("breakWord"),e.removeClass("wordWrap"),e.removeClass("multiLine"))}return TextView}),define("widgets/brease/common/libs/redux/view/ItemView/ItemView",["widgets/brease/common/libs/redux/view/ImageView/ImageView","widgets/brease/common/libs/redux/view/TextView/TextView","widgets/brease/common/libs/BoxLayout","brease/events/BreaseEvent","brease/enum/Enum"],function(ImageView,TextView,BoxLayout,BreaseEvent,Enum){"use strict";var ItemView=function(e,t){this.render(e,t)},e=ItemView.prototype;e.render=function i(e,n){this.el=$(BoxLayout.createBoxContainer()),this.el.on(BreaseEvent.CLICK,e.onClick),t(this.el,e.status,e.itemSettings.imageAlign),e.status.visible&&(this.el.height(e.itemSettings.itemHeight),void 0!==e.image.image&&(this.image=new ImageView(e.image,this.el)),void 0!==e.text&&""!==e.text.text&&void 0!==e.text.text&&(this.text=new TextView({text:e.text.text,textSettings:e.text.textSettings,selected:e.status.selected},this.el)),n.append(this.el))};function t(e,t,i){e.addClass("ItemView"),t.visible?(t.selected&&e.addClass("itemSelected"),t.enabled||e.addClass("itemDisabled")):e.addClass("itemInvisible"),t.lastItem&&e.addClass("lastItem");var n=i===Enum.ImagePosition.left?Enum.Orientation.LTR:Enum.Orientation.RTL;BoxLayout.setOrientation(e[0],n)}return e.dispose=function n(){void 0!==this.image&&(this.image.dispose(),this.image=void 0),void 0!==this.text&&(this.text.dispose(),this.text=void 0),this.el.off(),this.el.remove()},ItemView}),define("widgets/brease/common/libs/redux/view/ListView/ListView",["widgets/brease/common/libs/redux/view/ItemView/ItemView","brease/helper/Scroller"],function(ItemView,Scroller){"use strict";var ListView=function(e,t){this.render(e,t)},e=ListView.prototype;e.render=function r(e,t){if(this.elContainer=$('<div class="ListView Container"></div>'),this.elList=$('<div class="ListView List"></div>'),this.elContainer.append(this.elList),this.items=[],i(this.elContainer,e.status.visible,e.status.enabled),e.status.visible){var s=0;for(s=0;s<e.items.itemList.length;s+=1){var r=e.text.textElements[e.items.itemList[s].textId],a=e.image.imageElements[e.items.itemList[s].imageId],o={text:{text:void 0===r?"":r.displayText,textSettings:e.text.textSettings},image:{image:void 0===a?void 0:a.imagePath},itemSettings:e.items.itemSettings,status:{enabled:e.status.enabled,visible:e.status.visible,selected:e.items.itemList[s].selected,lastItem:s===e.items.itemList.length-1},onClick:function(t){var i=t;return function(t){e.onClick(i,t)}}(s)},l=new ItemView(o,this.elList);this.items.push(l)}t.append(this.elContainer);var d=void 0===this.items[e.items.selectedIndex]?void 0:this.items[e.items.selectedIndex].el[0],u=void 0===this.items[e.items.previousSelectedIndex]?void 0:this.items[e.items.previousSelectedIndex].el[0];this.scroller=n(!e.items.itemSettings.fitHeight2Items,this.elContainer[0],d,u)}},e.dispose=function a(){t(this),void 0!==this.scroller&&this.scroller.destroy(),this.elList.remove(),this.elContainer.remove()};function t(e){if(void 0!==e.items){var t=0;for(t=0;t<e.items.length;t+=1)e.items[t].dispose()}e.items=void 0}function i(e,t,i){t?(e.removeClass("invisible"),i?e.removeClass("disabled"):e.addClass("disabled")):e.addClass("invisible")}function n(e,t,i,n){var r;return e&&(r=s(t),void 0!==n&&r.scrollToElement(n,0,!0,!0),void 0!==i&&r.scrollToElement(i,400,!0,!0)),r}function s(e){var t={mouseWheel:!0,scrollX:!0,scrollY:!0};return Scroller.addScrollbars(e,t)}return ListView}),define("widgets/brease/common/libs/Renderer",["require","brease/core/Class","libs/d3/d3","brease/core/Utils","brease/enum/Enum","globalize","widgets/brease/common/libs/ChartUtils","brease/events/BreaseEvent"],function(e){"use strict";var t=e("brease/core/Class"),i=e("libs/d3/d3"),Utils=e("brease/core/Utils"),Enum=e("brease/enum/Enum"),n=e("globalize"),ChartUtils=e("widgets/brease/common/libs/ChartUtils"),BreaseEvent=e("brease/events/BreaseEvent"),s={enableZoomingBehavior:!0},r=t.extend(function Renderer(e,i){t.call(this),void 0!==i?this.settings=$.extend(!0,{},this.defaultSettings,i):this.settings=Utils.deepCopy(this.defaultSettings),this.widget=e,this.dataAdapter=e.dataAdapter,this.clipPathId=Utils.uniqueID(this.widget.elem.id+"_svg_clipPath"),this.init()},s),a=r.prototype;a.init=function(){this.svg=i.select(this.widget.elem).append("svg").attr("width",this.widget.el.width()).attr("height",this.widget.el.height()),this.mainZoomBehavior=null,this.savedX=null,this.savedY=null,this.scaleXY=null,this.scaleX=null,this.scaleY=null,this.previousMainScale=null,this.zoomBehaviorXAxes=[],this.zoomBehaviorYAxes=[],o(this),l(this),this.settings.enableZoomingBehavior&&h(this),A(this),d(this),P(this)},a.updateAxis=function(){u(this),this.settings.enableZoomingBehavior&&f(this)},a.updateCursor=function(){g(this)},a.updateGraphs=function(){D(this)},a.updateZoomLevelLimits=function(){m(this)},a.updateZoomType=function(e){v(this,e)},a.zoomIn=function(){_(this,this.widget.settings.zoomFactor,{x:0,y:0})},a.zoomOut=function(){_(this,1/this.widget.settings.zoomFactor,{x:0,y:0})},a.zoomReset=function(){this.mainZoomBehavior.scale(1),this.mainZoomBehavior.translate([0,0]);var e=this.widget.getZoomType();e===Enum.ChartZoomType.none?(this.savedX=0,this.savedY=0):e===Enum.ChartZoomType.x?(this.savedX=null,this.savedY=0):e===Enum.ChartZoomType.y&&(this.savedX=0,this.savedY=null),this.scaleX=1,this.scaleY=1,this.previousMainScale=1,y(this,!0)},a.scrollLeft=function(){_(this,1,{x:this.widget.settings.scrollFactor,y:0})},a.scrollRight=function(){_(this,1,{x:-this.widget.settings.scrollFactor,y:0})},a.scrollUp=function(){_(this,1,{x:0,y:this.widget.settings.scrollFactor})},a.scrollDown=function(){_(this,1,{x:0,y:-this.widget.settings.scrollFactor})},a.xCursorStepLeft=function(e,t){O(this,e,t)},a.xCursorStepRight=function(e,t){B(this,e,t)},a.xCursorDisableDrag=function(e){k(this,e)},a.xCursorEnableDrag=function(e){M(this,e)},a.dispose=function(){};function o(e){var t=e.dataAdapter.getChartArea();e.svg.append("defs").append("clipPath").attr("id",e.clipPathId).append("rect").attr("x",.5).attr("y",.5).attr("width",t.width-1).attr("height",t.height-1),e.svg.append("g").attr("class","chart").attr("transform","translate("+(t.x+.5)+","+(t.y+.5)+")").append("rect").attr("width",t.width).attr("height",t.height),e.svg.selectAll("g.xAxis").data(i.values(e.dataAdapter.getXAxisAreas())).enter().append("g").attr("class","axis xAxisArea").attr("transform",function(e){return"translate("+(e.x+.5)+","+(e.y+.5)+")"}),e.svg.selectAll("g.yAxis").data(i.values(e.dataAdapter.getYAxisAreas())).enter().append("g").attr("class","axis yAxisArea").attr("transform",function(e){return"translate("+(e.x+.5)+","+(e.y+.5)+")"})}function l(e){var t=e.dataAdapter.getChartArea();e.svg.selectAll("g.xAxisArea").each(function(n){var s=e.widget.chartItems.xAxis[n.id],r=i.select(this).append("g").attr("id",n.id+"_breaseChartXAxis").attr("class","xAxis").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("fill","none").attr("transform",function(e){return"translate(0, "+("top"===e.info.position?e.height:0)+")"});r.append("rect").attr("id",n.id+"_rect").attr("height",s.settings.height).attr("width",t.width).attr("pointer-events","visible").attr("transform",function(e){return"translate(0, "+("top"===e.info.position?-1*e.height:0)+")"});var a=r[0][0];$(a).on(BreaseEvent.CLICK,s._bind("_clickHandler")),r.append("g").attr("transform","translate("+t.width/2+", "+("top"===n.info.position?-n.info.axisLabelDistance:n.info.axisLabelDistance)+")").append("text").attr("class","xAxisDescription").attr("dy","top"===n.info.position?"-0.03em":"0.75em").attr("text-anchor","middle")}),e.svg.selectAll("g.chart").append("g").attr("class","xGrid gridLines").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")"),e.svg.selectAll("g.chart").append("g").attr("class","yGrid gridLines").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")"),e.svg.selectAll("g.yAxisArea").each(function(n){var s=e.widget.chartItems.yAxis[n.id],r=i.select(this).append("g").attr("id",n.id+"_breaseChartYAxis").attr("class","yAxis").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("fill","none").attr("transform",function(e){return"translate("+("left"===e.info.position?e.width:0)+", 0)"});r.append("rect").attr("id",n.id+"_rect").attr("height",t.height).attr("width",s.settings.width).attr("pointer-events","visible").attr("transform",function(e){return"translate("+("left"===e.info.position?-1*e.width:0)+",0)"});var a=r[0][0];$(a).on(BreaseEvent.CLICK,s._bind("_clickHandler")),r.append("g").attr("transform","rotate(-90) translate(-"+n.height/2+", "+("left"===n.info.position?-n.info.axisLabelDistance:n.info.axisLabelDistance)+")").append("text").attr("class","yAxisDescription").attr("dy","left"===n.info.position?"-0.03em":"0.75em").style("text-anchor","middle")})}function d(e){var t=e.dataAdapter.getChartArea();e.svg.select("g.chart").selectAll("g.xCursorAreas").data(i.values(e.dataAdapter.getXAxisCursorAreas())).enter().append("g").attr("class","xCursorArea").classed("disabled",function(t){return!e.widget.chartItems.xCursors[t.id].isEnabled()}).classed("remove",function(t){return e.widget.chartItems.xCursors[t.id].isHidden}).attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")").append("rect").attr("class",function(e){return"cursor "+e.id}).classed("remove",function(t){return e.widget.chartItems.xCursors[t.id].isHidden}).attr("transform",function(e){return"translate("+(e.x+.5)+","+(e.y+.5)+")"}).attr("height",function(e){return e.height}).attr("width",function(e){return e.width}).style("fill","transparent").style("stroke","transparent"),e.svg.selectAll("g.xCursorArea").each(function(n){var s=e.widget.chartItems.xCursors[n.id],r=i.select(this).attr("id",n.id+"_breaseChartXAxisCursor").append("line").attr("class","cursor "+n.id).classed("remove",e.widget.chartItems.xCursors[n.id].isHidden).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",t.height)}),e.svg.selectAll("g.xCursorArea").each(function(t){var n=e.widget.chartItems.xCursors[t.id],s=i.select(this),r=s[0][0];$(r).on(BreaseEvent.CLICK,n._bind("_clickHandler"))}),e.svg.selectAll("g.xCursorArea").each(function(n){var s=i.select(this),r=e.dataAdapter.widget.chartItems.xCursors[n.id].graphWidgets,a=e.widget.chartItems.xCursors[n.id];for(var o in r)s.append("circle").attr("class","marker "+o+" breaseChartXAxisCursor "+n.id).classed("remove",e.widget.chartItems.xCursors[n.id].isHidden).attr("r",5).attr("cx",e.dataAdapter.xAxisAreas[a.axisWidget.elem.id].scale(a._getValue())).attr("cy",n.yValues[o]?n.yValues[o]:t.height)})}function u(e){var t=e.dataAdapter.getXAxisAreas(),n=e.dataAdapter.getYAxisAreas();
e.svg.selectAll("g.xAxisArea").each(function(t){var n=e.widget.chartItems.xAxis[t.id],s=i.svg.axis().scale(t.scale).orient(t.info.position).tickFormat(function(t){return R(e.dataAdapter.xAxisAreas[n.elem.id].info.format,t,e.dataAdapter.xAxisAreas[n.elem.id].info.type)});i.select(this).selectAll("g.xAxis").call(s),i.select(this).selectAll("text.xAxisDescription").text(n.getAxisLabel());var r=i.select(this).selectAll(".tick>text");ChartUtils.formatTickLabels(r,n.getAxisPosition(),n.getTickLabelDistance(),n.getTickLabelRotation())}),e.svg.selectAll("g.yAxisArea").each(function(t){var n=e.widget.chartItems.yAxis[t.id],s=i.svg.axis().scale(t.scale).orient(t.info.position).tickFormat(function(t){return R(e.dataAdapter.yAxisAreas[n.elem.id].info.format,t,e.dataAdapter.yAxisAreas[n.elem.id].info.type)});i.select(this).selectAll("g.yAxis").call(s),i.select(this).selectAll("text.yAxisDescription").text(n.getAxisLabel()+" "+n.currentUnitSymbol());var r=i.select(this).selectAll(".tick>text");ChartUtils.formatTickLabels(r,n.getAxisPosition(),n.getTickLabelDistance(),n.getTickLabelRotation())}),c(e,e.widget.settings.showGrid),D(e)}function c(e,t){var n=e.dataAdapter.getChartArea(),s=e.dataAdapter.getYAxisAreas(),r=null,a=null,o=null,l=e.dataAdapter.getXAxisAreas(),d=null,u=null,c=null,g,h;for(var p in s)"left"===s[p].info.position&&(r=s[p]),"right"===s[p].info.position&&(a=s[p]);o=r?r:a;for(p in l)"bottom"===l[p].info.position&&(u=l[p]),"top"===l[p].info.position&&(d=l[p]);c=u?u:d,t&&c&&o?(g=i.svg.axis().scale(c.scale).outerTickSize(0).innerTickSize(-n.height).orient("top"),h=i.svg.axis().scale(o.scale).outerTickSize(0).innerTickSize(-n.width).orient("left"),e.svg.selectAll("g.xGrid").call(g),e.svg.selectAll("g.yGrid").call(h)):(e.svg.selectAll("g.xGrid").selectAll("*").remove(),e.svg.selectAll("g.yGrid").selectAll("*").remove())}function g(e){e.svg.selectAll("g.xCursorArea").each(function(t){var i=e.widget.chartItems.xCursors[t.id],n=e.dataAdapter.xAxisAreas[i.axisWidget.elem.id].scale(i._getValue());e.svg.select("rect."+t.id).attr("transform","translate("+(n-e.dataAdapter.settings.cursorAreaWidth/2)+", 0)");var s=e.svg.select("line."+t.id).attr("transform","translate("+n+", 0)");for(var r in t.yValues){var a=e.svg.selectAll("circle.marker."+r+"."+t.id),o=e.dataAdapter.yAxisAreas[t.yValueAxes[r]].scale(t.yValues[r]);a.attr("cx",n).attr("cy",o?o:e.dataAdapter.getChartArea().height)}})}function h(e){e.mainZoomBehavior=p(e);var t="";for(t in e.dataAdapter.xAxisAreas)Object.prototype.hasOwnProperty.call(e.dataAdapter.xAxisAreas,t)&&(e.zoomBehaviorXAxes[t]=i.behavior.zoom());for(t in e.dataAdapter.yAxisAreas)Object.prototype.hasOwnProperty.call(e.dataAdapter.yAxisAreas,t)&&(e.zoomBehaviorYAxes[t]=i.behavior.zoom());e.svg.selectAll("g.chart").call(e.mainZoomBehavior)}function p(e){var t=e.widget.getMinZoomLevel()/100,n=e.widget.getMaxZoomLevel()/100,s=i.behavior.zoom().x(S(e)).y(T(e)).scaleExtent([t,n]).on("zoomstart",function(){i.event.sourceEvent.stopPropagation()}).on("zoom",function(){i.event.sourceEvent.stopPropagation(),y(e)}),r=s.scale();return e.scaleX=r,e.scaleY=r,e.scaleXY=r,e.previousMainScale=r,s}function m(e){e.mainZoomBehavior.scaleExtent([e.widget.getMinZoomLevel()/100,e.widget.getMaxZoomLevel()/100]),e.svg.selectAll("g.chart").call(e.mainZoomBehavior)}function f(e){var t=e.dataAdapter.getYAxisAreas(),i=e.dataAdapter.getXAxisAreas();e.svg.selectAll("g.xAxisArea").each(function(t){e.zoomBehaviorXAxes[t.id].x(i[t.id].scale)}),e.svg.selectAll("g.yAxisArea").each(function(i){e.zoomBehaviorYAxes[i.id].y(t[i.id].scale)}),b(e),y(e,!0)}function v(e,t){b(e);var i=e.mainZoomBehavior,n=i.translate();t===Enum.ChartZoomType.xy&&(e.savedX=null,e.savedY=null),t===Enum.ChartZoomType.x&&(e.savedX=null,e.savedY=n[1]),t===Enum.ChartZoomType.y&&(e.savedX=n[0],e.savedY=null),t===Enum.ChartZoomType.none&&(e.savedX=n[0],e.savedY=n[1])}function b(e){var t=e.mainZoomBehavior,i=t.translate(),n=i;null!==e.savedX&&(n[0]=e.savedX),null!==e.savedY&&(n[1]=e.savedY),t.translate(n)}function y(e,t){var i=new CustomEvent("Zoomed");e.widget.dispatchEvent(i);var n=e.mainZoomBehavior.scale()-e.previousMainScale,s=1+n/e.previousMainScale,r=e.scaleX*s,a=e.scaleY*s,o=Utils.getChromeScale(e.widget.elem),l=e.mainZoomBehavior.translate();e.widget.getInfiniteScroll()||(1>=r&&(r=1),1>=a&&(a=1),E(e,l,r,a,o));var d=e.widget.getZoomType();d===Enum.ChartZoomType.xy||t?(e.scaleX=r,e.scaleY=a,x(e,e.scaleX,l),I(e,e.scaleY,l)):d===Enum.ChartZoomType.x?(e.scaleX=r,x(e,e.scaleX,l)):d===Enum.ChartZoomType.y&&(e.scaleY=a,I(e,e.scaleY,l)),u(e),D(e),g(e),e.previousMainScale=e.mainZoomBehavior.scale()}function E(e,t,i,n,s){t[0]=w(e,i,t[0]),t[1]=C(e,n,t[1]),t.map(function(e){return e/s}),e.mainZoomBehavior.translate(t)}function x(e,t,i){var n="";for(n in e.zoomBehaviorXAxes)Object.prototype.hasOwnProperty.call(e.zoomBehaviorXAxes,n)&&e.zoomBehaviorXAxes[n].scale(t).translate(i)}function I(e,t,i){var n="";for(n in e.zoomBehaviorYAxes)Object.prototype.hasOwnProperty.call(e.zoomBehaviorYAxes,n)&&e.zoomBehaviorYAxes[n].scale(t).translate(i)}function w(e,t,i){for(var n=e.dataAdapter.chartArea.width,s=i,r=e.dataAdapter.graphs,a=5,o=0;o<r.length;o+=1){var l=r[o],d=l.xScale;if(l.coordinates.length>0){var u=n/((d.domain()[1]-d.domain()[0])*t),c=a,g=-((d.domain()[0]-d.domain()[1])*t+(d.range()[1]-(d.range()[1]-n*t/u)))*u-a;s>c?s=c:g>s&&(s=g)}}return s}function C(e,t,i){for(var n=e.dataAdapter.chartArea.height,s=i,r=e.dataAdapter.graphs,a=e.dataAdapter.getYAxesMinimum(),o=e.dataAdapter.getYAxesMaximum(),l=5,d=0;d<r.length;d+=1){var u=r[d],c=u.yScale;if(u.coordinates.length>0){var g=n/((c.domain()[1]-c.domain()[0])*t),h=((c.domain()[0]-c.domain()[1])*t+(o-a))*g*t+l,p=-((c.domain()[0]-c.domain()[1])*t+(o-(o-n*t/g)))*g-l;s>h?s=h:p>s&&(s=p)}}return s}function S(e){for(var t in e.dataAdapter.xAxisAreas)if(Object.prototype.hasOwnProperty.call(e.dataAdapter.xAxisAreas,t))return e.dataAdapter.xScales[t];return null}function T(e){for(var t in e.dataAdapter.yAxisAreas)if(Object.prototype.hasOwnProperty.call(e.dataAdapter.yAxisAreas,t))return e.dataAdapter.yScales[t];return null}function A(e){var t=e.svg.select("g.chart").selectAll("g.graph").data(e.dataAdapter.getGraphs()).enter().append("g").attr("clip-path","url("+document.location.pathname+document.location.search+"#"+e.clipPathId+")").attr("class","graph");t.each(function(t){var n=i.svg.area(),s=e.widget.chartItems.yValues[t.id];i.select(this).append("path").datum(t.coordinates).attr("id",t.id+"_breaseChartYValueList_area").attr("class","area").style("stroke","none").attr("pointer-events","none").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("d",n(t.coordinates));var r=i.svg.line(),a=i.select(this).append("path").attr("id",t.id+"_breaseChartYValueList").attr("class","graph").style("fill","none").classed("disabled",!s.isEnabled()).classed("remove",s.isHidden).attr("d",r(t.coordinates)),o=a[0][0];$(o).on(BreaseEvent.CLICK,s._bind("_clickHandler"))})}function D(e){var t=e.svg.select("g.chart").selectAll("g.graph").data(e.dataAdapter.getGraphs());t.each(function(t){var n=t.yScale,s=t.xScale,r=i.svg.area().interpolate(t.interpolationType).x(function(e){return s(e.x)}).y0(e.dataAdapter.chartArea.height).y1(function(e){return n(e.y)});i.select(this).selectAll("path.area").attr("d",r(t.coordinates));var a=i.svg.line().interpolate(t.interpolationType).x(function(e){return s(e.x)}).y(function(e){return n(e.y)});i.select(this).selectAll("path.graph").attr("d",a(t.coordinates))})}function _(e,t,i){var n=e.mainZoomBehavior,s=e.dataAdapter.getChartArea(),r=[s.width/2,s.height/2],a={x:n.translate()[0],y:n.translate()[1],s:n.scale()},o=[(r[0]-a.x)/a.s,(r[1]-a.y)/a.s],l={x:a.x+s.width*i.x,y:a.y+s.height*i.y,s:n.scale()*t},d;l.s<n.scaleExtent()[0]?l.s=n.scaleExtent()[0]:l.s>n.scaleExtent()[1]&&(l.s=n.scaleExtent()[1]),d=[o[0]*l.s+a.x,o[1]*l.s+a.y],l.x+=r[0]-d[0],l.y+=r[1]-d[1],n.scale(l.s),n.translate([l.x,l.y]),y(e)}function L(e){var t=i.behavior.drag().on("dragstart",function(t){var n=e.widget.chartItems.xCursors[t.id];i.event.sourceEvent.stopPropagation(),n._getActive()||n.axisWidget._setActiveCursor(t.id)}).on("drag",function(t){var n=Utils.getChromeScale(e.widget.elem),s=i.event.x/n+e.dataAdapter.getChartArea().x/n-e.dataAdapter.getChartArea().x,r=e.widget.chartItems.xCursors[t.id],a=r.axisWidget._xPositions(r.cursorType),o=e.dataAdapter.xAxisAreas[r.axisWidget.elem.id].scale.invert(s),l=r._getValue(),d,u=i.bisectLeft(a,o),c=a[Math.max(u-1,0)],h=a[Math.min.apply(Math,[u,a.length-1,e.dataAdapter.xAxisCursorAreas[r.elem.id].maxAvailableXPositionIndex])];d=0>+o-(+h+ +c)/2?c:h,d!==l&&(r._updateValue(d),g(e))}).on("dragend",function(e){});return t}function N(e,t){for(var i in e.graphWidgets)if(Object.prototype.hasOwnProperty.call(e.graphWidgets,i)){var n=e.graphWidgets[i].getIndexOfXCoordinate(t),s=e.graphWidgets[i].getNumberOfSamples();if(0>s||s>n&&n>=0)return!0}return!1}function P(e){var t=L(e);e.svg.selectAll("g.xCursorArea").each(function(n){e.widget.chartItems.xCursors[n.id].isEnabled()&&i.select(this).call(t)})}function O(e,t,i){var n=e.widget.chartItems.xCursors[t],s=n.axisWidget._xPositions(n.cursorType).map(function(e){return+e}).indexOf(+n._getValue()),r;r=s-i>=0?s-i:s,r!==s&&(e.widget.chartItems.xCursors[t]._updateValue(n.axisWidget._xPositions(n.cursorType)[r]),g(e))}function B(e,t,i){var n=e.widget.chartItems.xCursors[t],s=n.axisWidget._xPositions(n.cursorType).map(function(e){return+e}).indexOf(+n._getValue()),r;r=s+i<=e.dataAdapter.xAxisCursorAreas[n.elem.id].maxAvailableXPositionIndex?s+i:s,r!==s&&(e.widget.chartItems.xCursors[t]._updateValue(n.axisWidget._xPositions(n.cursorType)[r]),g(e))}function k(e,t){var i=e.svg.selectAll("g.xCursorArea").filter(function(e){return e.id===t?this:null});i.on(".drag",null)}function M(e,t){var i=e.svg.selectAll("g.xCursorArea").filter(function(e){return e.id===t?this:null}),n=L(e);i.call(n)}function R(e,t,n){var s;switch(n){case"dateTime":return Globalize.format(t,e);case"secondsAsNumber":return s=i.format("0.6f"),s(t);default:var r=0===e.decimalPlaces?e.minimumIntegerDigits:e.minimumIntegerDigits+e.decimalPlaces+1;return s=i.format("0"+(0>t?r+1:r)+"."+e.decimalPlaces+"f"),s(t)}}return r}),define("widgets/brease/common/libs/WebSocket",["require","brease/core/Class","brease/core/Utils"],function(e){"use strict";var t=e("brease/core/Class"),Utils=e("brease/core/Utils"),i=4194304,n={WARNING:0,CONNECTION_ATTEMPT_CONNECTED:1,DISCONNECTION_ATTEMPT_DISCONNECTED:2,SEND_MSG_DISCONNECTED:3,SOCKET_ERRORS:999,HOST_NOT_REACHEABLE:1e3,CONNECTION_CLOSED_CLIENT:1005,CONNECTION_CLOSED_SERVER:1006,CONNECTION_ERRORS:1999,WRONG_HOST:2e3,WRONG_PORT:2001,UNEXPECTED_ERROR_CONNECTION:2002,UNEXPECTED_ERROR_SOCKET:2003,CRITICAL_ERRORS:3e3,BUFFER_FULL:3001,BUFFER_NOT_ENOUGH_DATA:3002},s=t.extend(function d(){t.apply(this,arguments),this._resolver,this._rejecter,this.textDecoder=new TextDecoder,this.buffer=new ArrayBuffer(i),this.bufferView=new Uint8Array(this.buffer),this.bytesQueued=0,this.endIndex=0,this.beginIndex=0},null),r=s.prototype;r.getString=function(e){var t=this;return this.getBytesFromBuffer(e).then(function(e){return t.textDecoder.decode(e)})["catch"](function(){return Promise.reject(new Error("Connection closed"))})},r.getDataView=function(e){var t=this;return this.getBytesFromBuffer(e).then(function(e){return new DataView(e)})["catch"](function(){return Promise.reject(new Error("Connection closed"))})},r.getBytesFromBuffer=function(e){var t=this;return this.bytesQueued>=e?(this.queueingBytes=!1,Promise.resolve(l(e,t))):(this.queueingBytes=!0,this.byteToQueue=e,new Promise(function(e,i){t._resolver=e,t._rejecter=i}))},r.connect=function(e,t){this.onError=!1;var i=a(e,t);if(0===i)this.errorHandling(n.WRONG_HOST);else if(1===i)this.errorHandling(n.WRONG_PORT);else if(void 0===this.WSocket||this.WSocket.readyState===WebSocket.CLOSED||this.WSocket.readyState===WebSocket.CLOSING)try{this.WSocket=new WebSocket(i),this.WSocket.onmessage=this.socketReceivedMessage.bind(this),this.WSocket.onopen=this.socketOpened.bind(this),this.WSocket.onclose=this.socketClosed.bind(this),this.WSocket.onerror=this.socketError.bind(this)}catch(s){this.errorHandling(n.UNEXPECTED_ERROR_CONNECTION)}else this.errorHandling(n.CONNECTION_ATTEMPT_CONNECTED)},r.disconnect=function(){void 0!==this.WSocket?this.WSocket.readyState===WebSocket.OPEN||this.WSocket.readyState===WebSocket.CONNECTING?(this.WSocket.close(),this.WSocket.onmessage=function(e){},this.WSocket=void 0):this.errorHandling(n.UNEXPECTED_ERROR_CONNECTION):this.errorHandling(n.DISCONNECTION_ATTEMPT_DISCONNECTED)},r.sendMessage=function(e){void 0!==this.WSocket&&this.WSocket.readyState===WebSocket.OPEN&&this.WSocket.send(e)},r.dispose=function(){void 0!==this.WSocket&&(this.WSocket.onmessage=function(e){},this.WSocket.onopen=function(e){},this.WSocket.onclose=function(e){},this.WSocket.onerror=function(e){},this.disconnect()),this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,t.prototype.dispose.apply(this,arguments)},r.socketReceivedMessage=function(e){var t=this,i=new FileReader;i.onload=function(){void 0!==t.WSocket&&(o(i.result,t),t.onMessageRecived(),t.queueingBytes&&t.bytesQueued>=t.byteToQueue&&(t._resolver(l(t.byteToQueue,t)),t.queueingBytes=!1))},i.readAsArrayBuffer(e.data)},r.socketOpened=function(e){this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,this.onConnect(e)},r.socketClosed=function(e){this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,this.queueingBytes&&this._rejecter(),e.code!==n.CONNECTION_CLOSED_CLIENT?this.errorHandling(e.code):this.onError||this.onDisconnect()},r.socketError=function(){this.bytesQueued=0,this.endIndex=0,this.beginIndex=0,this.queueingBytes&&this._rejecter(),this.errorHandling(n.UNEXPECTED_ERROR_SOCKET)},r.errorHandling=function(e){e<=n.SOCKET_ERRORS?this.onWarning(e):this.onError||(this.onError=!0,e>=n.CRITICAL_ERRORS&&this.disconnect(),this.onConnectionFailed(e))},r.onMessageRecived=function(e){},r.onConnect=function(e){},r.onDisconnect=function(e){},r.onConnectionFailed=function(e){},r.onWarning=function(e){};function a(e,t){if(!Utils.isString(e))return 0;var i=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(e),n=/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/.test(e);return i||n?Utils.isNumeric(t)?0>t||t>65535?1:"ws://"+self.location.host+"/ws2tcp?host="+e+"&port="+t:1:0}function o(e,t){if(t.bytesQueued+e.byteLength>i)t.errorHandling(n.BUFFER_FULL);else{if(t.endIndex+e.byteLength<i+1)t.bufferView.set(new Uint8Array(e),t.endIndex),t.endIndex=t.endIndex+e.byteLength,t.endIndex===i&&(t.endIndex=0);else{var s=e.slice(0,i-t.endIndex),r=e.slice(i-t.endIndex);t.bufferView.set(new Uint8Array(s),t.endIndex),t.bufferView.set(new Uint8Array(r),0),t.endIndex=t.endIndex+e.byteLength-i}t.bytesQueued=t.bytesQueued+e.byteLength}}function l(e,t){if(!(e>t.bytesQueued)){var s;if(t.beginIndex+e<i+1)s=t.buffer.slice(t.beginIndex,e+t.beginIndex),t.beginIndex=t.beginIndex+e;else{var r=i-t.beginIndex,a=e-r,o=t.buffer.slice(t.beginIndex),l=t.buffer.slice(0,a),d;s=new ArrayBuffer(e),d=new Uint8Array(s),d.set(new Uint8Array(o)),d.set(new Uint8Array(l),r),t.beginIndex=a}return t.bytesQueued=t.bytesQueued-e,s}t.errorHandling(n.BUFFER_NOT_ENOUGH_DATA)}return s}),define("widgets/brease/common/libs/wfUtils/UtilsLocalize",["require","libs/d3/d3"],function(e){"use strict";var t=e("libs/d3/d3"),UtilsLocalize={};return UtilsLocalize.getTimeFormatD3=function(e){e=e||brease.culture.getCurrentCulture().key;var i;i=null===Globalize.findClosestCulture(e)?Globalize.cultures[Globalize.cultures["default"].name]:Globalize.cultures[e];var n=t.locale({dateTime:i.calendar.patterns.F,date:i.calendar.patterns.D,time:i.calendar.patterns.T,periods:[null===i.calendar.AM?"AM":i.calendar.AM[0],null===i.calendar.PM?"PM":i.calendar.PM[0]],days:i.calendar.days.names,shortDays:i.calendar.days.namesAbbr,months:i.calendar.months.names.slice(0,12),shortMonths:i.calendar.months.namesAbbr.slice(0,12)}),s=[[n.timeFormat.utc("%Y"),function(){return!0}],[n.timeFormat.utc("%B"),function(e){return e.getUTCMonth()}],[n.timeFormat.utc("%b %d"),function(e){return 1!==e.getUTCDate()}],[n.timeFormat.utc("%a %d"),function(e){return e.getUTCDay()&&1!==e.getUTCDate()}],[n.timeFormat.utc("%H:%M"),function(e){return e.getUTCHours()}],[n.timeFormat.utc("%H:%M"),function(e){return e.getUTCMinutes()}],[n.timeFormat.utc("%Ss"),function(e){return e.getUTCSeconds()}],[n.timeFormat.utc("%Lms"),function(e){return e.getUTCMilliseconds()}]],r=function(e){return function(t){for(var i=e.length-1,n=e[i];!n[1](t);)i-=1,n=e[i];return n[0](t)}};return r(s)},UtilsLocalize}),define("widgets/brease/common/libs/wfUtils/Utils_FileTransfer",["require"],function(e){"use strict";var Utils_FileTransfer={};Utils_FileTransfer.transferFileToClient=function(e){this.widget=e,this.settings=t(e.settings),this.targetHostname=location.hostname,this.targetPort=location.port,this.executeHTTPTransfer()},Utils_FileTransfer.executeHTTPTransfer=function(){var e=document.createElement("a");e.download=this.settings.fileName,e.href=this.buildTransferUrl(),document.body.appendChild(e),e.click(),document.body.removeChild(e)},Utils_FileTransfer.buildTransferUrl=function(){return"http://"+this.targetHostname+":"+this.targetPort+"/FileDevice:"+this.settings.fileDeviceName+this.settings.filePath+this.settings.fileName},Utils_FileTransfer.executeFTPTransfer=function(e,t,i){var n="ftp://"+i.FTPUser+":"+i.FTPPass+"@"+this.targetHost+i.filePath+i.filename,s=i.filename,r=document.createElement("a");r.download=s,r.href=n,r.click()};function t(e){return/^\//.test(e.filePath)||(e.filePath="/"+e.filePath),/\/$/.test(e.filePath)||(e.filePath=e.filePath+"/"),e}return Utils_FileTransfer}),define("text!widgets/brease/DateTimePicker/DateTimePicker.html",[],function(){return'<div id="breaseDateTimePicker" data-brease-widget="widgets/brease/DateTimePicker">\r\n    <header></header>\r\n    <div class="dateTimePickerBody">\r\n        <section class="dateTimePickerHeadings">\r\n            <span class="actDate"></span>\r\n        </section>\r\n        <section class="dateTimePickerButtons">\r\n            <div class="dtfragment year"></div>\r\n            <div class="dtfragment month"></div>\r\n            <div class="dtfragment day"></div>\r\n            <div class="dtfragment hour"></div>\r\n            <div class="dtfragment minute"></div>\r\n            <div class="dtfragment second"></div>\r\n        </section>\r\n        <section class="dateTimePickerControl">\r\n            <button class="dateTimePickerReset"></button>\r\n            <button class="dateTimePickerEnter"></button>\r\n        </section>\r\n    </div>\r\n</div>\r\n'}),define("widgets/brease/Window/libs/Config",["brease/enum/Enum"],function(Enum){"use strict";return{html:"widgets/brease/Window/Window.html",modal:!0,arrow:{show:!1,width:12,position:Enum.Position.left},forceInteraction:!1,showCloseButton:!0,position:{horizontal:"center",vertical:"middle"},pointOfOrigin:Enum.PointOfOrigin.APP,headerHeight:42}}),define("widgets/brease/Window/Window",["brease/core/BaseWidget","widgets/brease/Window/libs/Config","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/decorators/LanguageDependency","brease/controller/PopUpManager"],function(e,t,BreaseEvent,Enum,Utils,i,n){"use strict";var s=t,r=e.extend(function Window(t,i,n,s){e.call(this,t,i,void 0!==n?n:!0,!0),s!==!0&&y(this),this.readyDeferred=$.Deferred()},s),a=r.prototype;a.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseWindow"),this.settings.stylePrefix=this.settings.stylePrefix||this.el.attr("data-brease-widget"),this.settings.className=this.settings.className||this.el.attr("data-brease-widget"),e.prototype.init.apply(this,arguments),this.arrow=this.el.find(".breaseWindowArrow"),this.closeButton=this.el.find(".breaseWindowClose"),this.header=this.el.find("> header"),this.dimensions={scale:1},this.instanceSettings=Utils.deepCopy(this.settings),this.debouncedHide=_.debounce(this._bind("hide"),10)},a.langChangeHandler=function(){this._setContent()},a.show=function(e,t){var i=this;this.closeDeferred=$.Deferred(),n.addWindow(i.elem.id,i.settings.windowType),this.refElement=t?t.jquery?t:$(t):void 0,this.settings=$.extend(!0,{},this.instanceSettings,e),void 0!==this.settings.header&&brease.language.isKey(this.settings.header.text)&&(this.settings.header.textkey=brease.language.parseKey(this.settings.header.text)),void 0!==this.settings.content&&brease.language.isKey(this.settings.content.text)&&(this.settings.content.textkey=brease.language.parseKey(this.settings.content.text));var s=n.getHighestZindex();this.el.css({display:"block","z-index":s+2}),this._setModal(s),void 0!==this.settings.cssClass&&this.el.addClass(this.settings.cssClass),this._setDimensions(),this._setCloseButton(),this._setContent(),this._setPosition(),this.setStyle(this.settings.style),E(),brease.bodyEl.on(BreaseEvent.CLICK,i._bind("_documentClickHandler")),this.dispatchEvent(new CustomEvent(BreaseEvent.WINDOW_SHOW,{detail:{id:this.elem.id},bubbles:!0})),this.header.on(BreaseEvent.MOUSE_DOWN,this._bind("_headerDownHandler")),this.el.on(BreaseEvent.MOUSE_DOWN,this._bind("_windowInFrontHandler"))},a.closeOnLostContentListener=function(){this.hide()},a.closeOnLostContent=function(e){this.opener=brease.pageController.getLoaderForElement(e),this.opener&&this.opener.addEventListener(BreaseEvent.FRAGMENT_HIDE,this._bind("closeOnLostContentListener"))},a.removeCloseOnLostContent=function(){this.opener&&(this.opener.removeEventListener(BreaseEvent.FRAGMENT_HIDE,this._bind("closeOnLostContentListener")),this.opener=void 0)},a.hide=function(){var e=this;this.el.css({display:"none"}),void 0!==this.settings.cssClass&&this.el.removeClass(this.settings.cssClass),brease.bodyEl.off(BreaseEvent.CLICK,e._bind("_documentClickHandler")),this.removeCloseOnLostContent(),this._removeModal(),n.removeWindow(e.elem.id),this.refElement=null,this.dispatchEvent(new CustomEvent(BreaseEvent.CLOSED,{detail:{id:this.elem.id},bubbles:!0})),this.closeDeferred&&this.closeDeferred.resolve(),this.header.off(BreaseEvent.MOUSE_DOWN,this._bind("_headerDownHandler")),this.el.off(BreaseEvent.MOUSE_DOWN,this._bind("_windowInFrontHandler")),this.closeButton.off("click",this._bind("_closeButtonClickhandler")),w.call(this),d=void 0},a._removeModal=function(){this.dimmer&&(this.dimmer.removeClass("active"),this.dimmer.hide(),E(),o(this))};function o(e){var t=e._bind(u);e.dimmer[0].removeEventListener("pointerdown",t,!0),e.dimmer[0].removeEventListener("pointerup",t,!0),e.dimmer[0].removeEventListener("touchstart",t,BreaseEvent.support.options?{capture:!0,passive:!0}:!0),e.dimmer[0].removeEventListener("touchend",t,!0),e.dimmer[0].removeEventListener("mousedown",t,!0),e.dimmer[0].removeEventListener("mouseup",t,!0),e.dimmer.off(BreaseEvent.CLICK,e._bind("_dimmerClickHandler"))}function l(e){var t=e._bind(u);e.dimmer[0].addEventListener("pointerdown",t,!0),e.dimmer[0].addEventListener("pointerup",t,!0),e.dimmer[0].addEventListener("touchstart",t,BreaseEvent.support.options?{capture:!0,passive:!0}:!0),e.dimmer[0].addEventListener("touchend",t,!0),e.dimmer[0].addEventListener("mousedown",t,!0),e.dimmer[0].addEventListener("mouseup",t,!0),e.dimmer.on(BreaseEvent.CLICK,e._bind("_dimmerClickHandler"))}var d;function u(e){var t=!0;"mouseup"===e.type&&d&&$.containsOrEquals(this.elem,d)&&(t=!1,d=void 0),t===!0&&(e.stopPropagation(),e.stopImmediatePropagation())}a._setArrow=function(e,t,i,n,s,r,a,o){var l=brease.pageController.getRootZoom();switch(this.arrow.length>0?this.arrow.show():this._addArrow(),this.el.removeClass("arrowRight arrowLeft arrowTop arrowBottom"),this.settings.arrow.position){case Enum.Position.right:this.el.addClass("arrowRight");break;case Enum.Position.left:this.el.addClass("arrowLeft");break;case Enum.Position.top:this.el.addClass("arrowTop");break;case Enum.Position.bottom:this.el.addClass("arrowBottom")}if(void 0!==this.arrow&&e===!0)if("middle"===this.settings.position.vertical){var d=Math.abs(r-t.top)-this.settings.arrow.width+n/2*l;0>d&&(d=0),d+2*this.settings.arrow.width>o&&(d=o-2*this.settings.arrow.width),this.arrow.css({top:d/this.dimensions.scale+"px",left:""})}else{var u=Math.abs(s-t.left)-this.settings.arrow.width+i/2;0>u&&(u=0),u+2*this.settings.arrow.width>a&&(u=a-2*this.settings.arrow.width),this.arrow.css({top:"",left:u+"px"})}},a._setDimensions=function(){if(void 0!==this.settings.width?this.el.css("width",this.settings.width+"px"):this.el.css("width","auto"),void 0!==this.settings.height){this.el.css("height",this.settings.height+"px");var e=parseInt(this.el.css("border-bottom"),10);this.el.find(".contentBox").css("height",this.settings.height-this.el.find("header").height()-(isNaN(e)?0:e))}else this.el.css("height","auto");this.dimensions.width=this.el.outerWidth(),this.dimensions.height=this.el.outerHeight(),this.settings.scale2fit&&c.call(this)};function c(){var e=n.getDimensions();if(this.dimensions.width>e.winWidth||this.dimensions.height>e.winHeight){var t=Math.min(e.winWidth/this.dimensions.width,e.winHeight/this.dimensions.height);this.el.css({transform:"scale("+t+","+t+")","transform-origin":"0 0"}),this.dimensions.scale=t}else this.el.css({transform:"none"}),this.dimensions.scale=1}a._setCloseButton=function(){this.settings.showCloseButton===!0?this.closeButton.length>0?(this.closeButton.show(),g.call(this)):this._addCloseButton():this.closeButton.hide()},a._setContent=function(){var e=this.settings.header?this.settings.header.textkey?brease.language.getTextByKey(this.settings.header.textkey):this.settings.header.text:"";void 0===this.headerEl&&(this.headerEl=this.el.find("header > div")),this.headerEl.text(e);var t=this.settings.content?this.settings.content.textkey?brease.language.getTextByKey(this.settings.content.textkey):this.settings.content.text:"";this.el.find(".content").text(t)},a._setPosition=function(){var e=0,t,i=this.elem.getBoundingClientRect(),s=i.width,r=i.height,a=f(this.settings.pointOfOrigin,this.refElement),o=n.getDimensions(),l=v(this.settings.pointOfOrigin,this.refElement,o.appWidth),d=b(this.settings.pointOfOrigin,this.refElement,o.appHeight),u=this.settings.pointOfOrigin===Enum.PointOfOrigin.ELEMENT&&void 0!==this.refElement;t=h(this.settings,s,r,a,l,d,u),t=m(t,s,r),e=this._getOffset(),this.el.css({display:"block",position:"fixed",left:Math.round(t.x+e)+"px",top:Math.round(t.y+e)+"px",margin:0,"margin-left":"0","margin-top":"0"}),this.settings.arrow.show===!1?this.arrow.hide():this._setArrow(u,a,l,d,t.x+e,t.y+e,s,r)},a._getOffset=function(){return 0},a._addArrow=function(){this.arrow=$("<i/>").addClass("breaseWindowArrow"),this.el.append(this.arrow)},a._addCloseButton=function(){this.closeButton=$("<a/>").addClass("breaseWindowClose"),this.el.find("header").append(this.closeButton),g.call(this)};function g(){var e=this;e._addCloseListenerTimeout=window.setTimeout(function(){e.closeButton.on("click",e._bind("_closeButtonClickhandler"))},0)}a._closeButtonClickhandler=function(e){this._handleEvent(e,!0),this.debouncedHide()},a._setModal=function(e){this.settings.modal===!0&&(void 0===this.dimmer&&(this.dimmer=$("<div/>").attr("id",Utils.uniqueID("dimmer")).addClass("breaseModalDimmer").appendTo(document.body)),this.dimmer.css({"z-index":e+1,display:"block"}),l(this),I.call(this))},a._documentClickHandler=function(e){var t=n.overlays(this.elem.id),i=t.length,s=!1;if(i>0)for(var r=0;i>r;r+=1)$.containsOrEquals(document.getElementById(t[r]),e.target)!==!1&&(s=!0);var a=parseFloat(this.el.css("z-index")),o=parseFloat($(e.target).css("z-index")),l=this.refElement?$.containsOrEquals(this.refElement[0],e.target):!1;o=isNaN(o)?0:o,s!==!0&&$.containsOrEquals(this.elem,e.target)===!1&&!l&&a>o&&this.settings.forceInteraction!==!0&&this.debouncedHide()},a._clickHandler=function(e){e.stopPropagation()},a._dimmerClickHandler=function(e){this.settings.forceInteraction!==!0&&"none"!==this.el.css("display")&&this.debouncedHide(),e.stopPropagation()},a._windowInFrontHandler=function(e){-1!==e.type.indexOf("mousedown")&&(d=e.target);var t=n.getHighestZindex(),i=parseInt(this.el.css("z-index"),10);t>i&&(this.el.css({display:"block","z-index":t+2}),this.dimmer&&this.dimmer.css({"z-index":t+1}))},a._headerDownHandler=function(e){e.target!==this.closeButton[0]&&(brease.bodyEl.on(BreaseEvent.MOUSE_MOVE,this._bind("_headerMoveHandler")),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this._bind("_headerUpHandler")),this.startCursor={left:e.pageX,top:e.pageY},this.startOffset=this.el.offset())},a._headerMoveHandler=function(e){var t={left:this.startOffset.left+(e.pageX-this.startCursor.left),top:this.startOffset.top+(e.pageY-this.startCursor.top)},i=document.body.scrollTop,n=document.body.scrollLeft;e.pageX<0+n||e.pageY<0+i||e.pageX>window.innerWidth+n||e.pageY>window.innerHeight+i||this.el.offset(t)},a._headerUpHandler=function(){brease.bodyEl.off(BreaseEvent.MOUSE_MOVE,this._bind("_headerMoveHandler")),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind("_headerUpHandler"))},a.dispose=function(){brease.bodyEl.off(BreaseEvent.CLICK,this._bind("_documentClickHandler")),this.closeButton.off("click",this._bind("_closeButtonClickhandler")),this.dimmer&&this.dimmer.remove(),this.closeDeferred=null,window.clearTimeout(this._addCloseListenerTimeout),e.prototype.dispose.apply(this,arguments)},a.isReady=function(){return this.readyDeferred.promise()},a.onClose=function(){return this.closeDeferred.promise()},a.readyHandler=function(){this.settings.parentContentId=brease.settings.globalContent,brease.uiController.addWidget(this),this.readyDeferred.resolve(this),this._dispatchReady()};function h(e,t,i,n,s,r,a){var o={x:0,y:0},l=brease.pageController.getRootZoom();if(a===!0){switch(e.position.horizontal){case Enum.Position.left:o.x=n.left-t;break;case Enum.Position.right:o.x=n.left+l*s;break;default:o.x=n.left+s/2-t/2}switch(e.position.vertical){case Enum.Position.top:o.y=n.top-i;break;case Enum.Position.bottom:o.y=n.top+r;break;default:o.y=n.top+l*(r/2)-40}o=p(o,e)}else{if(_.isNumber(e.position.horizontal))o.x=l*(n.left+e.position.horizontal);else switch(e.position.horizontal){case Enum.Position.left:o.x=n.left;break;case Enum.Position.right:o.x=n.left+s-t;break;default:o.x=n.left+(s-t)/2}if(_.isNumber(e.position.vertical))o.y=l*(n.top+e.position.vertical);else switch(e.position.vertical){case Enum.Position.top:o.y=n.top;break;case Enum.Position.bottom:o.y=n.top+r-i;break;default:o.y=n.top+(r-i)/2}}return o}function p(e,t){switch(t.arrow.position){case Enum.Position.top:e.y+=t.arrow.width,e.y+=void 0!==t.position.offset?t.position.offset:0;break;case Enum.Position.bottom:e.y-=t.arrow.width,e.y-=void 0!==t.position.offset?t.position.offset:0;break;case Enum.Position.right:e.x-=t.arrow.width,e.x-=void 0!==t.position.offset?t.position.offset:0;break;default:e.x+=t.arrow.width,e.x+=void 0!==t.position.offset?t.position.offset:0}return e}function m(e,t,i){var s=n.getDimensions(),r=Math.min(v(Enum.PointOfOrigin.APP,void 0,s.appWidth),s.winWidth),a=Math.min(b(Enum.PointOfOrigin.APP,void 0,s.appHeight),s.winHeight);return e.x+t>r&&(e.x=r-t),e.x<0&&(e.x=0),e.y+i>a&&(e.y=a-i),e.y<0&&(e.y=0),e}function f(e,t){return void 0!==t&&e!==Enum.PointOfOrigin.APP?t.offset():{top:0,left:0}}function v(e,t,i){return void 0!==t&&e!==Enum.PointOfOrigin.APP?t.outerWidth():i>100?i:window.innerWidth}function b(e,t,i){return void 0!==t&&e!==Enum.PointOfOrigin.APP?t.outerHeight():i>100?i:window.innerHeight}function y(e){require(["text!"+e.settings.html],function(t){var i=e.settings.id||Utils.uniqueID("window");t=t.replace("WIDGETID",i),e.deferredInit.call(e,document.body,t),e.headerEl=e.el.find("header > div"),e.readyHandler(),brease.uiController.parse(e.elem)})}function E(){for(var e,t=0,i,n,s=$(".breaseModalDimmer:visible"),r=0;r<s.length;r+=1)i=$(s[r]),i.removeClass("active"),e=i.css("z-index"),e>t&&(t=e,n=i);n&&n.addClass("active")}var x;function I(){
this.dimmer.on("mousewheel DOMMouseScroll",C),x||(x={x:brease.bodyEl.css("overflow-x"),y:brease.bodyEl.css("overflow-y")}),document.body.style.overflow="hidden"}function w(){0===$(".breaseModalDimmer:visible").length&&this.dimmer&&(this.dimmer.off("mousewheel DOMMouseScroll",C),brease.bodyEl.css("overflow-x",x.x),brease.bodyEl.css("overflow-y",x.y))}function C(e){e.preventDefault()}return i.decorate(r,!0)}),define("widgets/brease/DateTimePicker/libs/SliderWheel",["brease/core/Class","brease/events/BreaseEvent"],function(e,BreaseEvent){"use strict";var SliderWheel=e.extend(function SliderWheel(t,i,n){e.call(this),this.widget=t,this.elem=i,this.settings=n,this.initialize()},null),t=SliderWheel.prototype;t.initialize=function(){var e=$('<div class="marker">'),t=$('<div class="marker">');this.fragment=$("<div>").addClass("fragment"),this.data=[],this.drawSlider(),this.elem.append([e,t,this.fragment]),this.fragment.on(BreaseEvent.MOUSE_DOWN,this._bind("_onMouseDown")),this._setIndex(0)},t.drawSlider=function(){var e=0,t,n;if(void 0!==this.settings.range){for(var s=this.settings.range.start;s<=this.settings.range.end;s+=this.settings.range.offset)t=void 0!==this.settings.format?i(s,this.settings.format):s,n=$('<button data-index="'+e+'" data-value="'+s+'">'+t+"</button>"),this.fragment.append(n),this.data[e]={value:s,text:t},e+=1;this.offset=0,this.max=80,this.min=-40*(e-3)}else if(void 0!==this.settings.data){for(var r in this.settings.data)n=$('<button data-index="'+e+'" data-value="'+this.settings.data[r].value+'">'+this.settings.data[r].text+"</button>"),this.fragment.append(n),this.data[e]={value:this.settings.data[r].value,text:this.settings.data[r].text},e+=1;this.offset=0,this.max=80,this.min=-40*(e-3)}},t.update=function(e){for(var t=0;t<e.length;t+=1){var i=e[t];this.fragment.find("[data-value="+i.value+"]").html(i.text)}},t._onClick=function(e){e.originalEvent.preventDefault();var t=$(e.target).attr("data-index");void 0!==t&&this._setIndex(t)},t._onMouseDown=function(e){var t=e.currentTarget;this.oldOffset=this.offset,e.originalEvent.preventDefault(),e.originalEvent.touches?this.pageY=e.originalEvent.touches[0].pageY-this.offset:this.pageY=e.pageY-this.offset,this.fragment.removeClass("transition"),$(document).on(BreaseEvent.MOUSE_MOVE,this._bind("_onMouseMove")),$(document).on(BreaseEvent.MOUSE_UP,this._bind("_onMouseUp"))},t._onMouseMove=function(e){var t,i;t=e.originalEvent.touches?e.originalEvent.touches[0].pageY:e.pageY,i=t-this.pageY,i>=this.min&&i<=this.max&&(this.offset=t-this.pageY),this.fragment.css("top",this.offset)},t._onMouseUp=function(e){if($(document).off(BreaseEvent.MOUSE_MOVE,this._bind("_onMouseMove")),$(document).off(BreaseEvent.MOUSE_UP,this._bind("_onMouseUp")),this.offset!==this.oldOffset){var t=Math.round(this.offset/-40+2);this._setIndex(t)}else this._onClick(e)},t._setIndex=function(e){this.index=e;var t=-40*e+80,i=this.data[e].value;this.fragment.addClass("transition"),this.fragment.css("top",t),this.offset=t,this.widget[this.settings.onChange].call(this.widget,i)},t.getValue=function(){return this.data[this.index].value},t.setValue=function(e){var t=this.fragment.find("button[data-value='"+e+"']"),i;t&&(i=t.attr("data-index")),this._setIndex(i)},t.show=function(){this.elem.show()},t.hide=function(){this.elem.hide()};function i(e,t){var i=e+"";return i.length<t?(i="000000000"+i,i.substr(i.length-t)):i}return SliderWheel}),define("widgets/brease/DateTimePicker/DateTimePicker",["widgets/brease/Window/Window","widgets/brease/DateTimePicker/libs/SliderWheel","brease/events/BreaseEvent","brease/helper/DateFormatter","brease/decorators/CultureDependency"],function(e,SliderWheel,BreaseEvent,t,i){"use strict";var n={html:"widgets/brease/DateTimePicker/DateTimePicker.html",stylePrefix:"widgets_brease_DateTimePicker",dateTimeFormat:"S",modal:!0,scale2fit:!0},s=e.extend(function DateTimePicker(t,i,n,s){if(s===!0)e.call(this,null,null,!0,!0);else{if(void 0!==E)return E;e.call(this,null,null,!0,!0),a(this)}},n),r=s.prototype;function a(e){require(["text!"+e.settings.html],function(t){e.deferredInit.call(e,document.body,t),e.readyHandler()})}r.init=function(){var t=this;this.el.prependTo(document.body),this.settings.omitClass!==!0&&this.addInitialClass("breaseDateTimePicker"),this.settings.windowType="DateTimePicker",e.prototype.init.call(this,!0),this.value=new Date(1970,0,1,0,0,0,0),this.error=!1,this.DateTimePickerYear=new SliderWheel(this,this.el.find(".dtfragment.year"),{range:{start:1900,end:2100,offset:1},onChange:"_setYear"}),this.DateTimePickerMonth=new SliderWheel(t,t.el.find(".dtfragment.month"),{data:p(),onChange:"_setMonth"}),this.DateTimePickerDay=new SliderWheel(this,this.el.find(".dtfragment.day"),{range:{start:1,end:31,offset:1},format:2,onChange:"_setDay"}),this.DateTimePickerHour=new SliderWheel(this,this.el.find(".dtfragment.hour"),{range:{start:0,end:23,offset:1},format:2,onChange:"_setHour"}),this.DateTimePickerMinute=new SliderWheel(this,this.el.find(".dtfragment.minute"),{range:{start:0,end:59,offset:1},format:2,onChange:"_setMinute"}),this.DateTimePickerSecond=new SliderWheel(this,this.el.find(".dtfragment.second"),{range:{start:0,end:59,offset:1},format:2,onChange:"_setSecond"}),this.DateTimePickerString=this.el.find(".actDate"),this.btnEnter=this.el.find(".dateTimePickerEnter").on(BreaseEvent.CLICK,this._bind("_submitValue")).on(BreaseEvent.MOUSE_DOWN,this._bind(o)),this.btnReset=this.el.find(".dateTimePickerReset").on(BreaseEvent.CLICK,this._bind("_resetValue")).on(BreaseEvent.MOUSE_DOWN,this._bind(d)),c(this)};function o(){this.btnEnter.addClass("active"),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this._bind(l))}function l(){brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),this.btnEnter.removeClass("active")}function d(){this.btnReset.addClass("active"),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this._bind(u))}function u(){brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(u)),this.btnReset.removeClass("active")}function c(e){e.btnReset.html(brease.language.getSystemTextByKey("BR/IAT/brease.common.reset")),e.btnEnter.html(brease.language.getSystemTextByKey("BR/IAT/brease.common.enter"))}r.langChangeHandler=function(){c(this),e.prototype.langChangeHandler.apply(this,arguments)},r.cultureChangeHandler=function(){this.DateTimePickerMonth.update(p()),b.call(this,this.value)},r.setValue=function(e){void 0!==e&&""!==e&&(this.value=new Date(e.valueOf()),this.oldValue=new Date(e.valueOf()),b.call(this,this.value))},r.getValue=function(){return this.value},r.show=function(t,i){t=y(t),e.prototype.show.apply(this,arguments),this.closeOnLostContent(i),this._setTimeComponents(),this.setValue(this.settings.time)},r.dispose=function(){this.el.find("#breaseDateTimePickerButtons").off(),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind(u)),e.prototype.dispose.apply(this,arguments)},r._submitValue=function(e){this._handleEvent(e,!0),this.dispatchEvent(new CustomEvent(BreaseEvent.SUBMIT,{detail:{value:this.getValue()}})),this.hide()},r._setTimeComponents=function(){var e;1===this.settings.dateTimeFormat.length?(e=t.getFormat4Pattern(this.settings.dateTimeFormat),void 0===e&&(console.iatWarn('invalid pattern "'+this.settings.dateTimeFormat+'" in dateTimeFormat -> take default pattern "'+n.dateTimeFormat+'"'),this.settings.dateTimeFormat=n.dateTimeFormat,e=t.getFormat4Pattern(this.settings.dateTimeFormat))):e=this.settings.dateTimeFormat,-1!==e.indexOf("y")?this.DateTimePickerYear.show():this.DateTimePickerYear.hide(),-1!==e.indexOf("M")?this.DateTimePickerMonth.show():this.DateTimePickerMonth.hide(),-1!==e.indexOf("d")?this.DateTimePickerDay.show():this.DateTimePickerDay.hide(),-1!==e.indexOf("H")||-1!==e.indexOf("h")?this.DateTimePickerHour.show():this.DateTimePickerHour.hide(),-1!==e.indexOf("m")?this.DateTimePickerMinute.show():this.DateTimePickerMinute.hide(),-1!==e.indexOf("s")?this.DateTimePickerSecond.show():this.DateTimePickerSecond.hide(),this._setPosition()},r._resetValue=function(){this.setValue(this.oldValue)},r._setHour=function(e){this.value.setHours(e)},r._setMinute=function(e){this.value.setMinutes(e)},r._setSecond=function(e){this.value.setSeconds(e)},r._setYear=function(e){this.value.setYear(e),m.call(this)},r._setMonth=function(e){this.value.setMonth(e),m.call(this)},r._setDay=function(e){this.value.setDate(e),m.call(this)};var g=[31,28,31,30,31,30,31,31,30,31,30,31],h=[{value:0,text:"January"},{value:1,text:"February"},{value:2,text:"March"},{value:3,text:"April"},{value:4,text:"May"},{value:5,text:"June"},{value:6,text:"July"},{value:7,text:"August"},{value:8,text:"September"},{value:9,text:"October"},{value:10,text:"November"},{value:11,text:"December"}];function p(){for(var e=h,t=brease.culture.getCurrentCulture().culture,i=t.calendar.months.names,n=0;n<e.length;n+=1)e[n].text=i[n];return e}function m(){if(this.DateTimePickerDay&&this.check){var e=this.value.getDate(),t=this.DateTimePickerDay.getValue();if(e!==t){var i=f(this.DateTimePickerMonth.getValue(),this.DateTimePickerYear.getValue());this.DateTimePickerDay.setValue(i),this.value.setDate(i),this.value.setMonth(this.DateTimePickerMonth.getValue())}}}function f(e,t){return 1!==e?g[e]:v(t)?29:28}function v(e){return e%4===0&&e%100!==0||e%400===0}function b(e){var i=this;this.check=!1,this.DateTimePickerYear.setValue(e.getFullYear()),this.DateTimePickerMonth.setValue(e.getMonth()),this.DateTimePickerDay.setValue(e.getDate()),this.DateTimePickerHour.setValue(e.getHours()),this.DateTimePickerMinute.setValue(e.getMinutes()),this.DateTimePickerSecond.setValue(e.getSeconds()),t.format(this.value,this.settings.dateTimeFormat,function(e){i.DateTimePickerString.text(e)}),this.check=!0}function y(e){if(e.position){var t=e.position;e.arrow=e.arrow||{},"left"===t.horizontal?(t.vertical="middle",e.arrow.position="right",e.arrow.show=!0):"right"===t.horizontal?(t.vertical="middle",e.arrow.position="left",e.arrow.show=!0):"top"===t.vertical?(t.horizontal="center",e.arrow.position="bottom",e.arrow.show=!0):"bottom"===t.vertical?(t.horizontal="center",e.arrow.position="top",e.arrow.show=!0):(t.vertical="middle",t.horizontal="center",e.arrow.show=!1)}return e}var E=new s;return i.decorate(s,!0)}),define("widgets/brease/Window/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.Window",parents:["*"],children:[],inheritance:["widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("widgets/brease/DateTimePicker/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.DateTimePicker",parents:["*"],children:[],inheritance:["widgets.brease.DateTimePicker","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("widgets/brease/DialogWindow/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.DialogWindow",parents:["*"],children:[],inheritance:["widgets.brease.DialogWindow","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/DialogWindow/DialogWindow.html",[],function(){return'<div id="{{ID}}" data-brease-widget="widgets/brease/DialogWindow">\r\n    <header class="breaseDialogWindowHeader">\r\n        <div class="innerHeader">\r\n            <div class="imageDiv"><img src="" class="dummyImage" alt="" /></div>\r\n            <div class="textDiv"></div>\r\n        </div>\r\n        <a class="breaseWindowClose"></a>\r\n    </header>\r\n    <div id="{{ID}}_breaseDialogContent" class="breaseDialogWindowContentBox contentBox"></div>\r\n</div>'}),define("widgets/brease/DialogWindow/DialogWindow",["widgets/brease/Window/Window","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils"],function(e,BreaseEvent,Enum,Utils){"use strict";var t={modal:!0,arrow:{show:!1},forceInteraction:!0,showCloseButton:!0,position:{horizontal:"center",vertical:"middle"},pointOfOrigin:Enum.PointOfOrigin.CONTAINER,html:"widgets/brease/DialogWindow/DialogWindow.html",stylePrefix:"system_brease_Dialog",width:400,height:200},i=e.extend(function DialogWindow(t,i,n,s){s===!0?e.call(this,null,null,!0,!0):(e.call(this,null,i,!0,!0),r(this))},t),n=i.prototype,s=0;function r(e){require(["text!"+e.settings.html],function t(i){var n="DialogWindow"+(s+=1);i=i.replace(/\{\{ID\}\}/g,n),e.deferredInit.call(e,document.body,i),e.headerEl=e.el.find("header .textDiv"),e.imgEl=e.el.find("header img.dummyImage"),e.$imageDiv=e.el.find("header .imageDiv"),e.innerHeader=e.el.find(".innerHeader"),e.readyHandler()})}n.init=function(){this.addInitialClass("breaseDialogWindow"),this.contentBox=this.el.find(".contentBox"),this.settings.windowType="DialogWindow",e.prototype.init.call(this,!0)},n._setDimensions=function(){if(this.contentBox.children().length>0){var t=d(this.contentBox);this.contentBox.css({height:t.height,width:t.width}),this.settings.width=void 0,this.settings.height=void 0}else this.settings.height=this.defaultSettings.height,this.settings.width=this.defaultSettings.width;var i=brease.pageController.getDialogById(this.settings.id);if(i){var n=brease.pageController.getLayoutById(i.layout);this.innerHeader.css("max-width",n.width+"px")}e.prototype._setDimensions.call(this)},n.show=function(t,i){var n=brease.pageController.loadDialog(t.id,this.contentBox[0]);void 0!==t.headerText&&(t.header={text:t.headerText}),void 0===t.headerText&&void 0!==n&&void 0!==n.displayName&&(t.header={text:n.displayName});var s=1;if(void 0===n){this.el.find(".contentBox").css("width","auto");var r=brease.language.getSystemTextByKey("BR/IAT/brease.error.DIALOG_NOT_FOUND");brease.textFormatter.format(r,[t.id]).then(this._bind(o))}else s=l(this.el,n.visuId);return t.zoomFactor=s,this.el.attr("data-brease-dialogId",t.id),n&&n.style&&(t.style=n.style),e.prototype.show.call(this,t,i),this._setDimensions(),document.body.addEventListener(BreaseEvent.THEME_CHANGED,this._bind("_themeChangeHandler")),void 0!==n};function a(e){var t=e.css("background-image");return void 0!==t&&null!==t&&"none"!==t?t.match(/url\([^\)]+\)/gi)[0].split(/[()'"]+/)[1]:void 0}n._themeChangeHandler=function(){this._setImage()},n._setImage=function(){var e=a(this.$imageDiv);void 0!==e?(this.imgEl.attr("src",e),this.$imageDiv.css("display","inline-block")):this.$imageDiv.css("display","none");var t=Math.floor(this.el.find("header").outerWidth()-this.headerEl.outerWidth()-this.closeButton.outerWidth()-20);this.$imageDiv.css("max-width",t+"px")},n._setContent=function(){e.prototype._setContent.apply(this,arguments),this._setImage()};function o(e){this.contentBox.append($('<div class="errorText" >'+e+"</div>"))}function l(e,t){var i=brease.pageController.getVisuById(t),n=1;if(i&&i.containerId){var s=brease.pageController.getPageById(brease.pageController.getCurrentPage(i.containerId));if(s){var r=document.querySelector('[data-brease-layoutid="'+s.layout+'"]');n=Utils.getScaleFactor(r)}}return e.css({transform:"scale("+n+","+n+")","transform-origin":"0 0"}),n}n.hide=function(){brease.pageController.emptyContainer(this.contentBox[0]),document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("_themeChangeHandler")),e.prototype.hide.call(this)},n.dispose=function(){document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("_themeChangeHandler")),e.prototype.dispose.apply(this,arguments)};function d(e){var t={width:0,height:0},i=e.find("> div");if(i.length>0)for(var n,s,r=0;r<i.length;r+=1)s=$(i[r]),n=s.position(),t.width=Math.max(t.width,n.left+s.width()),t.height=Math.max(t.height,n.top+s.height());return t}return i}),define("widgets/brease/DropDownBoxLegacy/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.DropDownBoxLegacy",parents:["*"],children:[],inheritance:["widgets.brease.DropDownBoxLegacy","brease.core.BaseWidget"],actions:{Close:{method:"close"},Open:{method:"open"},setCropToParent:{method:"setCropToParent",parameter:{cropToParent:{name:"cropToParent",index:0,type:"brease.enum.CropToParent"}}},SetDataProvider:{method:"setDataProvider",parameter:{value:{name:"value",index:0,type:"ItemCollection"},omitPrompt:{name:"omitPrompt",index:1,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFitHeight2Items:{method:"setFitHeight2Items",parameter:{fitHeight2Items:{name:"fitHeight2Items",index:0,type:"Boolean"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},setImagePath:{method:"setImagePath",parameter:{imagePath:{name:"imagePath",index:0,type:"String"}}},setItemHeight:{method:"setItemHeight",parameter:{itemHeight:{name:"itemHeight",index:0,type:"Integer"}}},setListPosition:{method:"setListPosition",parameter:{listPosition:{name:"listPosition",index:0,type:"brease.enum.Position"}}},setListWidth:{method:"setListWidth",parameter:{listWidth:{name:"listWidth",index:0,type:"Integer"}}},setMaxVisibleEntries:{method:"setMaxVisibleEntries",parameter:{maxVisibleEntries:{name:"maxVisibleEntries",index:0,type:"Integer"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetSelectedIndex:{method:"setSelectedIndex",parameter:{index:{name:"index",index:0,type:"Number"},omitPrompt:{name:"omitPrompt",index:1,type:"Boolean"}}},SetSelectedValue:{method:"setSelectedValue",parameter:{value:{name:"value",index:0,type:"String"},omitPrompt:{name:"omitPrompt",index:1,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/DropDownBoxLegacy/DropDownBoxLegacy.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/DropDownBoxLegacy"></div>\r\n'}),define("widgets/brease/DropDownBoxLegacy/DropDownBoxLegacy",["require","brease/core/BaseWidget","brease/enum/Enum","brease/events/BreaseEvent","brease/core/Utils","brease/controller/PopUpManager"],function(e){"use strict";var t=e("brease/core/BaseWidget"),Enum=e("brease/enum/Enum"),BreaseEvent=e("brease/events/BreaseEvent"),Utils=e("brease/core/Utils"),i=e("brease/controller/PopUpManager"),n={width:100,height:30,imageAlign:Enum.ImageAlign.left,promptType:Enum.PromptType.all,maxVisibleEntries:4,noSelectionPolicy:Enum.NoSelectionPolicy.selectFirst,listPosition:Enum.Position.right,cancelButtonChangeEvents:!0,ellipsis:!1,wordWrap:!1,multiLine:!1,fitHeight2Items:!0,itemHeight:40,selectedIndex:0,listWidth:150,imagePath:"",cropToParent:"none"},s=t.extend(function DropDownBoxLegacy(){t.apply(this,arguments)},n),r=s.prototype;r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseDropDownBoxLegacy"),t.prototype.init.call(this,!0),this.setDataProvider(this.settings.dataProvider||[]),this.buttonId=Utils.uniqueID(this.elem.id+"_ddButton"),this.listId=Utils.uniqueID(this.elem.id+"_ddList");var e=this.elem.id+"_breaseDropDownListWrapper";this.listWrapper=$('<div id="'+e+'" class="breaseDropDownListWrapper"></div>').css({width:this.settings.listWidth||this.settings.width}),this.arrow=$('<div class="arrow" />'),this.listWrapper.append(this.arrow),o(this),this._onWidgetsReady=u.bind(this),d(this),this.setStyle(this.settings.style),this.setSelectedIndex(this.settings.selectedIndex)},r.setStyle=function(e){this.listWrapper&&this.listWrapper.removeClass(this.settings.stylePrefix+"_style_"+this.settings.style),t.prototype.setStyle.call(this,e),this.listWrapper&&this.listWrapper.addClass(this.settings.stylePrefix+"_style_"+this.settings.style)},r.setSelectedIndex=function(e,t){this.oldSelectedIndex=this.settings.selectedIndex;var i=this.settings.dataProvider?this.settings.dataProvider.length:0;i>0&&(this.settings.selectedIndex=Number.isInteger(e)&&i>e?e:this.settings.selectedIndex,this.settings.selectedIndex=this.settings.selectedIndex<i?this.settings.selectedIndex:0,g(this,this.settings.selectedIndex,t))},r.getSelectedIndex=function(){return this.settings.selectedIndex},r.setEditable=function(e,t){if(void 0!==t&&void 0!==t.refAttribute){var i=t.refAttribute;("selectedIndex"===i||"selectedValue"===i)&&(this.settings.editable=e,this._internalEnable())}},r.enable=function(){t.prototype.enable.call(this),void 0!==this.buttonId&&brease.callWidget(this.buttonId,"enable"),void 0!==this.listId&&brease.callWidget(this.listId,"enable")},r.disable=function(){t.prototype.disable.call(this),void 0!==this.buttonId&&(brease.callWidget(this.buttonId,"toggle",!1),brease.callWidget(this.buttonId,"disable"))},r.setVisible=function(e){e===!1&&void 0!==this.buttonId&&brease.callWidget(this.buttonId,"toggle",!1),t.prototype.setVisible.apply(this,arguments)},r.setSelectedValue=function(e,t){if(this.settings.selectedValue||0===this.settings.selectedValue)this.settings.selectedValue=e,h(this,t);else{this.settings.selectedValue="";var i=p(this);this.settings.selectedIndex!==i&&c(this,this.settings.selectedValue,t)}},r.getSelectedValue=function(){return void 0===this.list||void 0===this.button?-1!==p(this)?this.settings.dataProvider[this.settings.selectedIndex].value:"":void 0!==this.list?brease.callWidget(this.listId,"getSelectedValue"):""},r.getSelectedItem=function(){var e;return this.settings.dataProvider&&this.settings.selectedIndex>-1&&(e=this.settings.dataProvider[this.settings.selectedIndex]),e},r.setDataProvider=function(e,t){if(Array.isArray(e)){var i=[];e.map(function(e){if("string"==typeof e)try{return i.push(JSON.parse(e))}catch(t){return}else"object"==typeof e&&i.push(e)});var n=this.settings.dataProvider?this.settings.dataProvider.length:0;if(this.settings.dataProvider=i,this.listId){var s,r;r=this.settings.maxVisibleEntries<=0?this.settings.dataProvider.length:this.settings.dataProvider.length<this.settings.maxVisibleEntries?this.settings.dataProvider.length:this.settings.maxVisibleEntries,s=this.settings.itemHeight*r,n<this.settings.dataProvider.length?(brease.callWidget(this.listId,"_setHeight",s),brease.callWidget(this.listId,"setDataProvider",i)):(h(this,t),brease.callWidget(this.listId,"_setHeight",s),brease.callWidget(this.listId,"setDataProvider",i))}this.settings.selectedValue&&h(this,t),void 0!==this.settings.selectedIndex&&this.setSelectedIndex(this.settings.selectedIndex),this._updateButtonText()}},r.getDataProvider=function(){return this.settings.dataProvider},r.setImageAlign=function(e){this.settings.imageAlign=e,brease.config.editMode&&brease.callWidget(this.buttonId,"setImageAlign",e)},r.getImageAlign=function(){return this.settings.imageAlign},r.setImagePath=function(e){this.settings.imagePath=e,this.imagePathChange()},r.getImagePath=function(){return this.settings.imagePath},r.setMaxVisibleEntries=function(e){this.settings.maxVisibleEntries=e},r.getMaxVisibleEntries=function(){return this.settings.maxVisibleEntries},r.setListPosition=function(e){this.settings.listPosition=e},r.getListPosition=function(){return this.settings.listPosition},r.setListWidth=function(e){this.settings.listWidth=e},r.getListWidth=function(){return this.settings.listWidth},r.setItemHeight=function(e){this.settings.itemHeight=e,this.settings.itemHeight>0&&(this.settings.itemHeight=this.settings.itemHeight-1),brease.callWidget(this.listId,"setItemHeight",e)},r.getItemHeight=function(){return this.settings.itemHeight},r.setEllipsis=function(e){var t;this.settings.ellipsis=e,t=this.settings.ellipsis===!0?!0:!1,brease.callWidget(this.listId,"setEllipsis",t),brease.callWidget(this.buttonId,"setEllipsis",t)},r.getEllipsis=function(){return this.settings.ellipsis},r.setFitHeight2Items=function(e){var t;this.settings.fitHeight2Items=e,t=this.settings.fitHeight2Items?!0:!1,brease.callWidget(this.listId,"setFitHeight2Items",t)},r.getFitHeight2Items=function(){return this.settings.fitHeight2Items},r.setWordWrap=function(e){this.settings.wordWrap=e},r.getWordWrap=function(){return this.settings.wordWrap},r.setMultiLine=function(e){this.settings.multiLine=e},r.getMultiLine=function(){return this.settings.multiLine},r.setCropToParent=function(e){this.settings.cropToParent=e},r.getCropToParent=function(){return this.settings.cropToParent},r._updateButtonText=function(){var e=this;if(this.buttonId&&void 0!==e.settings.selectedIndex&&void 0!==e.settings.dataProvider){var t=e.settings.dataProvider[e.settings.selectedIndex];void 0!==t?brease.language.isKey(t.text)?brease.callWidget(e.buttonId,"setTextKey",brease.language.parseKey(t.text)):brease.callWidget(e.buttonId,"setText",t.text):brease.callWidget(e.buttonId,"setText","")}},r._setPrompt=function(){var e=this;if(this.button)if(void 0!==e.settings.selectedIndex&&-1!==e.settings.selectedIndex&&void 0!==e.settings.dataProvider){var t=e.settings.dataProvider[e.settings.selectedIndex];void 0!==t&&void 0===e.settings.promptText&&e.settings.promptType!==Enum.PromptType.image&&(brease.language.isKey(t.text)?brease.callWidget(e.buttonId,"setTextKey",brease.language.parseKey(t.text)):brease.callWidget(e.buttonId,"setText",t.text))}else e.settings.noSelectionPolicy===Enum.NoSelectionPolicy.showPrompt&&void 0===e.settings.promptText&&(void 0!==e.settings.prompt&&""!==e.settings.prompt?brease.language.isKey(e.settings.prompt)?brease.callWidget(e.buttonId,"setText",brease.language.getTextByKey(brease.language.parseKey(e.settings.prompt))):brease.callWidget(e.buttonId,"setText",e.settings.prompt):brease.callWidget(e.buttonId,"setText",""))},r._outsideClickHandler=function(e){var t=this;$.contains(t.elem,e.target)||$.contains(t.listWrapper[0],e.target)||t.isScrolling||(t._handleEvent(e),brease.bodyEl.off(BreaseEvent.MOUSE_UP,t._bind("_outsideClickHandler")),brease.callWidget(t.buttonId,"toggle")),t.isScrolling=!1},r._onScrollStart=function(e){this.isScrolling=!0},r._onScrollEnd=function(e){this.isScrolling=!1},r._onButtonChange=function(e){var t=this;this.settings.dataProvider&&this.settings.dataProvider.length>0&&(this.settings.cancelButtonChangeEvents===!0&&(e.stopImmediatePropagation(),e.stopPropagation()),e.detail.checked===!0?(this.settings.dataProvider&&this.settings.dataProvider.length>0&&(l(this),this._positionWrapper(this)),brease.bodyEl.on(BreaseEvent.MOUSE_UP,t._bind("_outsideClickHandler"))):this._closeList())},r._closeList=function(){brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind("_outsideClickHandler")),this.position&&this.el.append(this.listWrapper.css({top:this.position.top,right:this.position.right,bottom:this.position.bottom,left:this.position.left,transform:"initial","transform-origin":"init"}).hide())},r._onListChange=function(e){void 0!==e.detail&&null!==e.detail?(this.setSelectedIndex(e.detail.selectedIndex),e.detail.toggle!==!1&&brease.callWidget(this.buttonId,"toggle")):brease.callWidget(this.buttonId,"toggle")},r.submitChange=function(){this.dispatchEvent(new CustomEvent(BreaseEvent.CHANGE,{detail:{selectedIndex:this.settings.selectedIndex,selectedValue:this.settings.selectedValue,selectedItem:this.settings.dataProvider[this.settings.selectedIndex]}}));var e=this,t={selectedIndex:this.settings.selectedIndex,selectedValue:this.settings.selectedValue};setTimeout(function(){e&&e.el&&e.sendValueChange(t)},0);var i=this.createEvent("SelectedIndexChanged",{selectedIndex:this.settings.selectedIndex,selectedValue:this.settings.selectedValue});i.dispatch()},r.suspend=function(){$("#"+this.listId).is(":visible")&&this._closeList(),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind("_outsideClickHandler")),t.prototype.suspend.apply(this,arguments)},r.wake=function(){$("#"+this.listId).is(":visible")===!1&&brease.callWidget(this.buttonId,"getValue")===!0&&brease.callWidget(this.buttonId,"toggle"),t.prototype.wake.apply(this,arguments)},r.dispose=function(){this.button&&this.button[0].removeEventListener(BreaseEvent.CHANGE,this._bind("_onButtonChange")),this.list&&(this.list[0].removeEventListener(BreaseEvent.CHANGE,this._bind("_onListChange")),this.list[0].removeEventListener(BreaseEvent.SCROLL_START,this._bind("_onScrollStart")),this.list[0].removeEventListener(BreaseEvent.SCROLL_END,this._bind("_onScrollEnd"))),brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind("_outsideClickHandler")),$("#"+this.listId).is(":visible")&&this._closeList(),this.button=null,this.list=null,t.prototype.dispose.apply(this,arguments)},r._positionWrapper=function(e){var t,i,n;e.position={top:e.listWrapper.css("top"),right:e.listWrapper.css("right"),bottom:e.listWrapper.css("bottom"),left:e.listWrapper.css("left")},e.listWrapper.show(),e.listWrapper.css({visibility:"visible"}),t=e.listWrapper.offset(),this.scaleFactor=Utils.getScaleFactor(this.elem),i=a(e),e.listWrapper.css({transform:"scale("+this.scaleFactor+","+this.scaleFactor+")","transform-origin":"0px 0px 0px"}),brease.bodyEl.append(this.listWrapper.css(i)),brease.callWidget(this.listId,"_refreshScroller")},r.imagePathChange=function(){brease.callWidget(this.listId,"imagePathChange",this.settings.imagePath)},r.close=function(){var e=this.el.find("#"+this.listId);e.length<1&&brease.callWidget(this.buttonId,"toggle")},r.open=function(){var e=this.el.find("#"+this.listId);e.length>0&&brease.callWidget(this.buttonId,"toggle")};function a(e){var t=e.listWrapper.offset(),n={position:"absolute",bottom:"auto",right:"auto","z-index":i.getHighestZindex()+1},s=e.listWrapper.width()*e.scaleFactor,r=e.listWrapper.height()*e.scaleFactor,a=$(document).innerWidth(),o=$(document).innerHeight(),l=e.el.offset(),d=e.el.width()*e.scaleFactor,u=e.el.height()*e.scaleFactor,c=$("#"+e.listId),g=c.height()*e.scaleFactor,h=parseInt(c.css("borderWidth")),p=$("#"+e.elem.id).parent().innerHeight(),m=$("#"+e.elem.id).parent().offset(),f=brease.bodyEl.find("#appContainer").height(),v=$("#"+e.elem.id).offset(),b=!1,y=!1;if(e.settings.fitHeight2Items&&"height"!==e.settings.cropToParent&&v.top+e.settings.dataProvider.length*e.settings.itemHeight+2*h>o&&(e.setFitHeight2Items(!1),b=!0),"height"===e.settings.cropToParent&&(e.setFitHeight2Items(!1),y=!0),"right"===e.settings.listPosition)t.top+r>o?(n.top=l.top-r+u,e.arrow.css({bottom:u/2-16*e.scaleFactor/2+"px",top:"auto"})):(n.top=l.top,e.arrow.css("top",u/2-16*e.scaleFactor/2+"px")),n.left=t.left-8,(y||b)&&(n.top+g+2*h>=p+m.top?c.css("height",p+m.top-n.top-2*h):c.css("height",g));else if("left"===e.settings.listPosition)t.top+r>o?(n.top=l.top-r+u,e.arrow.css({bottom:u/2-16*e.scaleFactor/2+"px",top:"auto"})):(n.top=l.top,e.arrow.css("top",u/2-16*e.scaleFactor/2+"px")),n.left=t.left,c.css("right",2*h+"px"),(y||b)&&(n.top+g+2*h>=p+m.top?c.css("height",p+m.top-n.top-2*h):c.css("height",g));else if("bottom"===e.settings.listPosition)t.left<0||(s-d)/2>t.left?(n.left=l.left,
e.arrow.css("left",d/2+"px")):t.left+s>a?(n.left=l.left+d-s,e.arrow.css({right:d/2-8*e.scaleFactor+"px",left:"auto"})):n.left=t.left-(s-d)/2,n.top=t.top-8,(y||b)&&(t.top+g+2*h>=p+m.top?c.css("height",p+m.top-t.top-2*h):c.css("height",g));else if("top"===e.settings.listPosition){if(t.left<0||(s-d)/2>t.left?(n.left=l.left,e.arrow.css("left",d/2+"px")):t.left+s>a?(n.left=l.left+d-s,e.arrow.css({right:d/2-8*e.scaleFactor+"px",left:"auto"})):n.left=t.left-(s-d)/2,n.top=t.top,y||b){var E=$("#"+e.elem.id).offset().top;E-8-g-2*h<=m.top?c.css("height",E-8-m.top-2*h):c.css("height",g)}}else"center"===e.settings.listPosition?(t.left<0||(s-d)/2>t.left?n.left=l.left:t.left+s>a?n.left=l.left+d-s:n.left=t.left-(s-d)/2,n.top=t.top-u,(y||b)&&(n.top+g+2*h>=p+m.top?c.css("height",p+m.top-n.top-2*h):c.css("height",g))):"middle"===e.settings.listPosition&&(t.left<0||(s-d)/2>t.left?n.left=l.left:t.left+s>a?n.left=l.left+d-s:n.left=t.left-(s-d)/2,n.top=t.top-u/2-g/2,(y||b)&&(n.top+g+2*h>=p+m.top?c.css("height",p+m.top-n.top-2*h):c.css("height",g)));return n}function o(e){var t=e.settings.listPosition;switch(t){case Enum.Position.top:e.listWrapper.addClass("list-top");break;case Enum.Position.right:e.listWrapper.addClass("list-right");break;case Enum.Position.bottom:e.listWrapper.addClass("list-bottom");break;case Enum.Position.left:e.listWrapper.addClass("list-left");break;case Enum.Position.center:e.listWrapper.addClass("list-center");break;case Enum.Position.middle:e.listWrapper.addClass("list-middle")}}function l(e){var t=e.settings.listPosition,i=e.listWrapper.width(),n=e.listWrapper.height(),s=$(document).innerWidth(),r=$(document).innerHeight();e.listWrapper.css("visibility","hidden"),e.listWrapper.show();var a=e.listWrapper.offset();switch(t){case Enum.Position.right:e.listWrapper.offset().left+i>s&&(e.settings.listPosition=Enum.Position.left,e.listWrapper.removeClass("list-right"),e.listWrapper.addClass("list-left"));break;case Enum.Position.left:e.listWrapper.offset().left-i<0&&(e.settings.listPosition=Enum.Position.right,e.listWrapper.removeClass("list-left"),e.listWrapper.addClass("list-right"));break;case Enum.Position.top:e.listWrapper.offset().top-n<0&&(e.settings.listPosition=Enum.Position.bottom,e.listWrapper.removeClass("list-top"),e.listWrapper.addClass("list-bottom"));break;case Enum.Position.bottom:e.listWrapper.offset().top+n>r&&(e.settings.listPosition=Enum.Position.top,e.listWrapper.removeClass("list-bottom"),e.listWrapper.addClass("list-top"));break;case Enum.Position.middle:e.listWrapper.offset().top-n/2<0&&(e.settings.listPosition=Enum.Position.center,e.listWrapper.removeClass("list-middle"),e.listWrapper.addClass("list-center"));break;case Enum.Position.center:e.listWrapper.offset().top+n>r&&(e.settings.listPosition=Enum.Position.top,e.listWrapper.removeClass("list-center"),e.listWrapper.addClass("list-top"))}}function d(e){e.elem.addEventListener(BreaseEvent.WIDGET_READY,e._onWidgetsReady);var t=$.extend(!0,{},e.settings),i;i=t.fitItems2Height?t.dataProvider.length:t.dataProvider.length<t.maxVisibleEntries?t.dataProvider.length:t.maxVisibleEntries,t.top=0,t.left=0,brease.uiController.createWidgets(e.elem,[{className:"ToggleButton",id:e.buttonId,options:t,HTMLAttributes:{style:"width:100%; height:100%;"}},{className:"ListBoxLegacy",id:e.listId,options:{imageAlign:t.imageAlign,textAlign:t.textAlign,ellipsis:t.ellipsis,deferedSelection:t.deferedSelection,enable:t.enable,forcedEnabled:t.forcedEnabled,forcedDisabled:t.forcedDisabled,dataProvider:t.dataProvider,itemHeight:t.itemHeight,wordWrap:t.wordWrap,multiLine:t.multiLine,fitHeight2Items:t.fitHeight2Items,height:t.itemHeight*i,displaySettings:t.displaySettings},HTMLAttributes:{style:"display:none; width:"+(void 0!==t.listWidth?t.listWidth:t.width)+"px;"}}],!0,e.settings.parentContentId)}function u(e){e.target.id===this.buttonId&&(this.button=$(e.target)),e.target.id===this.listId&&(this.list=$(e.target)),this.button&&this.list&&(this.elem.removeEventListener(BreaseEvent.WIDGET_READY,this._onWidgetsReady),this.listWrapper.append(this.list.show()),void 0!==this.settings.selectedIndex?(brease.callWidget(this.listId,"setDataProvider",this.settings.dataProvider),brease.callWidget(this.listId,"setSelectedIndex",this.settings.selectedIndex),brease.callWidget(this.elem.id,"setDataProvider",this.settings.dataProvider)):this.settings.noSelectionPolicy===Enum.NoSelectionPolicy.selectFirst&&(this.settings.selectedIndex=0,brease.callWidget(this.listId,"setSelectedIndex",this.settings.selectedIndex)),void 0!==this.settings.promptImage&&brease.callWidget(this.buttonId,"setImage",this.settings.promptImage),void 0!==this.settings.promptText&&(brease.language.isKey(this.settings.promptText)?brease.callWidget(this.buttonId,"setTextKey",brease.language.parseKey(this.settings.promptText)):this.settings.promptText&&brease.callWidget(this.buttonId,"setText",this.settings.promptText)),this._setPrompt(),this.button[0].addEventListener(BreaseEvent.CHANGE,this._bind("_onButtonChange")),this.list[0].addEventListener(BreaseEvent.CHANGE,this._bind("_onListChange")),this.list[0].addEventListener(BreaseEvent.SCROLL_START,this._bind("_onScrollStart")),this.list[0].addEventListener(BreaseEvent.SCROLL_END,this._bind("_onScrollEnd")),this.el.append(this.listWrapper),this.imagePathChange(),this._dispatchReady())}function c(e,t,i){if(e.settings.dataProvider&&e.settings.dataProvider.length>0){for(var n=0;n<e.settings.dataProvider.length;n+=1)if(e.settings.dataProvider[n].value===t){e.settings.selectedIndex=n;break}void 0!==e.list&&brease.callWidget(e.listId,"setSelectedIndex",e.settings.selectedIndex),i!==!0&&e._setPrompt(),e.oldSelectedIndex!==e.settings.selectedIndex&&e.submitChange()}}function g(e,t,i){if(e.settings.dataProvider&&e.settings.dataProvider.length>0){for(var n=0;n<e.settings.dataProvider.length;n+=1)if(n===t){e.settings.selectedValue=e.settings.dataProvider[n].value;break}void 0!==e.list&&brease.callWidget(e.listId,"setSelectedIndex",e.settings.selectedIndex),i!==!0&&e._setPrompt(),e.oldSelectedIndex!==e.settings.selectedIndex&&e.submitChange()}}function h(e,t){if(!(e.settings.dataProvider.length<=0)){for(var i,n=0;n<e.settings.dataProvider.length;n+=1){if(e.settings.dataProvider[n].value===e.settings.selectedValue){c(e,e.settings.selectedValue,t),i=!0;break}i=!1}i||(e.settings.selectedIndex=0,g(e,e.settings.selectedIndex,t))}}function p(e){if(e.settings.dataProvider)for(var t=0;t<e.settings.dataProvider.length;t+=1)if(e.settings.dataProvider[t].value===e.settings.selectedValue)return t;return-1}return s}),define("widgets/brease/FragmentLoader/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.FragmentLoader",parents:["*"],children:[],inheritance:["widgets.brease.FragmentLoader","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/FragmentLoader/FragmentLoader.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/FragmentLoader"></div>\r\n'}),define("widgets/brease/FragmentLoader/FragmentLoader",["require","brease/core/BaseWidget","brease/enum/Enum","brease/events/BreaseEvent","brease/controller/BindingController","brease/core/Utils"],function(e){"use strict";var t=e("brease/core/BaseWidget"),Enum=e("brease/enum/Enum"),BreaseEvent=e("brease/events/BreaseEvent"),i=brease.uiController,n=e("brease/controller/BindingController"),Utils=e("brease/core/Utils"),s={loadPolicy:Enum.LoadPolicy.ONDEMAND,cachePolicy:Enum.CachePolicy.NO_CACHE,omitClass:!0,initialHide:!1},r=t.extend(function FragmentLoader(){t.apply(this,arguments)},s),a=r.prototype;a.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseFragmentLoader"),this.isLoaded=!1,this.loadQueue=[],this.timer=null,this.settings.url&&this.settings.loadPolicy===Enum.LoadPolicy.IMMEDIATE&&this.load(this.settings.url,this.settings.contentId),t.prototype.init.call(this)},a.load=function(e,t,i){if(0===this.loadQueue.length||e!==this.loadQueue[0]){this.loadQueue.unshift(e);var n=this.settings.url,s=this.settings.contentId;this.settings.url=e,this.settings.contentId=t,this.loadFlag=!0,i===!0&&(this.settings.initialHide=!1),window.performanceMonitor.profile("loadContent - "+this.settings.contentId,0),this.isLoaded===!0?(brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_UNLOAD,{detail:{id:this.elem.id,contentId:s}})),l(this,n,s)):d.call(this),this.el.attr("data-brease-contentId",t)}},a.show=function(){this.isLoaded===!1?(this.settings.initialHide=!1,this.load(this.settings.url,this.settings.contentId)):(this.setVisible(!0),i.loadValuesForContent(this.settings.contentId||this.settings.url),this.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:this.settings.url}})))},a.hide=function(){brease.appElem.dispatchEvent(new CustomEvent(BreaseEvent.BEFORE_HIDE,{detail:{id:this.elem.id}}));var e=this;this.loadFlag=!1,this.settings.cachePolicy===Enum.CachePolicy.CACHE?n.deactivateContent(this.settings.contentId||this.settings.url):(i.dispose(e.elem,!1,e._bind("contentDisposedHandler")),this.isLoaded&&n.deactivateContent(this.settings.contentId||this.settings.url),this.isLoaded=!1),this.setVisible(!1),this.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_HIDE,{detail:{url:this.settings.url}}))},a.getIsLoaded=function(){return this.isLoaded},a.getContentId=function(){return this.settings.contentId||this.settings.url},a.getUrl=function(){return this.settings.url},a.dispose=function(){this.loadFlag=!1,i.dispose(this.elem,!1),this.isLoaded===!0&&n.deactivateContent(this.settings.contentId||this.settings.url),t.prototype.dispose.apply(this,arguments)},a.contentDisposedHandler=function(e){this.el.empty(),e&&e.call(this)},a.busyHandler=function(){this.el.html(brease.language.getTextByKey("BR/IAT/brease.common.pageloading"))},a._contentReadyHandler=function(){var e=this;window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,0),n.sendInitialValues(e.settings.contentId||e.settings.url,function(){e.elem&&(e.settings.initialHide!==!0&&e.loadFlag===!0?e.setVisible(!0):e.setVisible(!1),e.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_SHOW,{detail:{url:e.settings.url},bubbles:!0}))),window.performanceMonitor.profile("sendInitialValues - "+e.settings.contentId,1),window.performanceMonitor.profile("loadContent - "+e.settings.contentId,1)})},a._clickHandler=function(){};function o(e){var t=$.Deferred(),n=this,s=function(){e.removeEventListener(BreaseEvent.CONTENT_PARSED,s),window.performanceMonitor.profile("parseContent - "+n.settings.contentId,1),t.resolve()};return e.addEventListener(BreaseEvent.CONTENT_PARSED,s),window.performanceMonitor.profile("parseContent - "+this.settings.contentId,0),i.parse(e),t.promise()}function l(e,t,s){e.isLoaded=!1,n.deactivateContent(s||t),i.dispose(e.elem,!1,function(){e.contentDisposedHandler.call(e,d)}),e.setVisible(!1)}function d(){var t=this;t.timer&&window.clearTimeout(t.timer),t.timer=window.setTimeout(t._bind("busyHandler"),1e3),window.performanceMonitor.profile("loadContentHTML - "+t.settings.contentId,0),e(["text!"+t.settings.url],t._bind("_loadSuccess"),t._bind("_loadFail"))}return a._loadSuccess=function(e){var t=this;t.settings.url===t.loadQueue[0]&&(t.timer&&window.clearTimeout(t.timer),t.loadQueue.length=0,t.el.html(Utils.parseTemplate(e)),t.el.find("script").remove(),t.dispatchEvent(new CustomEvent(BreaseEvent.FRAGMENT_LOADED,{detail:{url:t.settings.url}})),window.performanceMonitor.profile("loadContentHTML - "+t.settings.contentId,1),t.isLoaded=!0,$.when(n.activateContent(t.settings.contentId||t.settings.url),o.call(t,t.elem)).then(t._bind("_contentReadyHandler")))},a._loadFail=function(e){var t=this;t.timer&&window.clearTimeout(t.timer),t.isLoaded=!1,t.elem&&(t.dispatchEvent(new CustomEvent(BreaseEvent.LOAD_ERROR,{detail:{url:t.settings.url}})),t.el.html("ERROR: could not load fragment with url="+t.settings.url),t.setVisible(!0)),console.iatWarn("WARNING: could not load fragment in FragmentLoader["+(t.elem?t.elem.id:"")+"]:"+e.message)},r}),define("widgets/brease/GroupBox/designer/ClassInfo",["brease/core/designer/ContainerWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.GroupBox",parents:["*"],children:["*"],inheritance:["widgets.brease.GroupBox","brease.core.ContainerWidget","brease.core.BaseWidget"],actions:{setAlignment:{method:"setAlignment",parameter:{alignment:{name:"alignment",index:0,type:"brease.enum.Direction"}}},setChildPositioning:{method:"setChildPositioning",parameter:{childPositioning:{name:"childPositioning",index:0,type:"brease.enum.ChildPositioning"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFloat:{method:"setFloat",parameter:{"float":{name:"float",index:0,type:"brease.enum.Floating"}}},setImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImagePosition"}}},setMaxHeight:{method:"setMaxHeight",parameter:{maxHeight:{name:"maxHeight",index:0,type:"Integer"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/GroupBox/GroupBox.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/GroupBox">CONTENT</div>'}),define("widgets/brease/GroupBox/GroupBox",["require","brease/core/ContainerWidget","brease/events/BreaseEvent","brease/decorators/LanguageDependency","brease/enum/Enum","brease/core/Types","brease/core/Utils","brease/helper/Scroller","widgets/brease/common/libs/wfUtils/UtilsImage","widgets/brease/GroupBox/libs/EditorHandles"],function(e){"use strict";var t=e("brease/core/ContainerWidget"),BreaseEvent=e("brease/events/BreaseEvent"),i=e("brease/decorators/LanguageDependency"),Enum=e("brease/enum/Enum"),Types=e("brease/core/Types"),Utils=e("brease/core/Utils"),Scroller=e("brease/helper/Scroller"),UtilsImage=e("widgets/brease/common/libs/wfUtils/UtilsImage"),n={alignment:Enum.Direction.vertical,borderTop:!0,borderBottom:!0,borderLeft:!0,borderRight:!0,childPositioning:Enum.ChildPositioning.absolute,imageAlign:Enum.ImagePosition.left,"float":"left",maxHeight:0},s=t.extend(function GroupBox(){t.apply(this,arguments)},n),r=s.prototype;s["static"].multitouch=!0,r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseGroupBox"),t.prototype.init.call(this),brease.config.editMode!==!0&&this.el.on(BreaseEvent.WIDGET_READY,this._bind("_widgetReadyHandler")).on("VisibleChanged",this._bind("_visibleChangeHandler")).on("SizeChanged",this._bind("_sizeChangeHandler")).on(BreaseEvent.MOUSE_DOWN,this._bind("_downHandler")),void 0!==this.settings.text&&brease.language.isKey(this.settings.text)===!0&&(this.settings.textkey=brease.language.parseKey(this.settings.text),this.setLangDependency(!0)),(void 0!==this.settings.text||void 0!==this.settings.image)&&(a(this),u(this)),this.settings.childPositioning===Enum.ChildPositioning.relative&&(g(this),this.container.on("VisibleChanged",this._bind("_scrollUpdateHandler"))),h(this),p(this),d(this),brease.config.editMode&&this.createEditorHandles(),this.el.addClass("initialized"),this._refreshScroller()},r.createEditorHandles=function(){var EditorHandles=e("widgets/brease/GroupBox/libs/EditorHandles"),t=new EditorHandles(this);this.getHandles=function(){return t.getHandles()}},r.langChangeHandler=function(){void 0!==this.settings.textkey&&this.setText(brease.language.getTextByKey(this.settings.textkey))},r.setText=function(e){this.settings.text=e;var t=this.el.children(".header");t.length?c(this,e):a(this),d(this)},r.getText=function(){return this.settings.text},r.setChildPositioning=function(e){this.settings.childPositioning=e,h(this)},r.getChildPositioning=function(){return this.settings.childPositioning},r.setEllipsis=function(e){this.settings.ellipsis=e,e===!0&&this.header?this.header.addClass("ellipsis"):e===!1&&this.header&&this.header.removeClass("ellipsis")},r.getEllipsis=function(){return this.settings.ellipsis},r.setImage=function(e){this.settings.image=e,o(this)},r.getImage=function(){return this.settings.image},r.setImageAlign=function(e){this.settings.imageAlign=e,l(this)},r.getImageAlign=function(){return this.settings.imageAlign},r.setAlignment=function(e){this.settings.alignment=e,g(this)},r.getAlignment=function(){return this.settings.alignment},r.setFloat=function(e){this.settings["float"]=e,this.settings.childPositioning===Enum.ChildPositioning.relative&&p(this)},r.getFloat=function(){return this.settings["float"]},r.setTextKey=function(e){void 0!==e&&(this.settings.textkey=e,this.setLangDependency(!0),this.langChangeHandler())},r.setMaxHeight=function(e){this.settings.maxHeight=e},r.getMaxHeight=function(){return this.settings.maxHeight},r.resize=function(){var e=this.el.find(".header"),t=this.el.outerHeight(),i=this.el.innerHeight(),n=Types.parseValue(this.settings.height,"Integer"),s=t-i,r;this.settings.maxHeight>n&&(0!==e.length?(r=I(this)+x(this,e),i>r&&r>n-s?this.el.css("height",r+s+"px"):i>r&&n-s>=r?this.el.css("height",n+"px"):r>=i&&r<this.settings.maxHeight-s?this.el.css("height",r+s+"px"):r>=i&&r>=this.settings.maxHeight-s&&this.el.css("height",this.settings.maxHeight+"px")):(r=I(this),i>r&&r>n-s?this.el.css("height",r+s+"px"):i>r&&n-s>=r?this.el.css("height",n+"px"):r>=i&&r<this.settings.maxHeight-s?this.el.css("height",r+s+"px"):r>=i&&r>=this.settings.maxHeight-s&&this.el.css("height",this.settings.maxHeight+"px")),this.sizeChanged())},r.sizeChanged=function(e){var t=this.createEvent("SizeChanged");t.dispatch()},r._downHandler=function(e){if(!(this.isDisabled||brease.config.editMode||this.isActive)){this.isActive=!0,this.pointerId=Utils.getPointerId(e),$(document).on(BreaseEvent.MOUSE_UP,this._bind("_upHandler"));var t=this.createEvent("MouseDown");t.dispatch()}},r._upHandler=function(e){if(!this.isDisabled&&!brease.config.editMode&&Utils.getPointerId(e)===this.pointerId){this.isActive=!1,$(document).off(BreaseEvent.MOUSE_UP,this._bind("_upHandler"));var t=this.createEvent("MouseUp");t.dispatch()}},r._scrollUpdateHandler=function(e){this._handleEvent(e),void 0!==this.scroller?this._refreshScroller():g(this)},r._refreshScroller=function(){var e=this;this.scroller&&(this.refreshTimeOut=window.setTimeout(function(){return null===e.scroller||void 0===e.scroller?!1:(e.scroller.refresh(),void 0)},100))},r._widgetReadyHandler=function(e){e.target.id===this.elem.id&&this.settings.childPositioning===Enum.ChildPositioning.relative&&this.scrollWrapper&&this.resize()},r._sizeChangeHandler=function(e){e.target.id!==this.elem.id&&this.resize()},r._visibleChangeHandler=function(e){var t=this,i="#"+this.elem.id+"> .container > .scrollWrapper";$(i).children().each(function(){return $(this).attr("id")===e.target.id?(t.resize(),!1):void 0})},r.widgetAddedHandler=function(e){m(document.getElementById(e.detail.widgetId),this.settings["float"]),this.scrollWrapper||this.settings.childPositioning!==Enum.ChildPositioning.relative?this.scrollWrapper&&this.settings.childPositioning===Enum.ChildPositioning.relative&&b(this):g(this)},r.widgetRemovedHandler=function(e){E(this)},r.wake=function(){t.prototype.wake.apply(this,arguments)},r.suspend=function(){$(window).off("mouseup",this._bind("_enableScroll")),t.prototype.suspend.apply(this,arguments)},r.dispose=function(){$(window).off("mouseup",this._bind("_enableScroll")),this.container.off(),this.scroller&&(this.scroller.destroy(),this.scroller=null,window.clearTimeout(this.refreshTimeOut),this.refreshTimeOut=null),t.prototype.dispose.call(this)};function a(e){var t=$('<div class="header"></div>'),i,n;if(e.settings.ellipsis===!0&&t.addClass("ellipsis"),void 0!==e.settings.text&&0!==e.settings.text.length){var s=void 0!==e.settings.textkey?brease.language.getTextByKey(e.settings.textkey):e.settings.text;i=$("<span></span>").text(s)}void 0!==e.settings.image&&(UtilsImage.isStylable(e.settings.image)?(n=$("<svg />"),n.hide(),UtilsImage.getInlineSvg(e.settings.image).then(function(e){n.replaceWith(e),n=e,n.show(),n.addClass("imgur")})):n=$('<img src="'+e.settings.image+'"/>')),e.settings.imageAlign===Enum.ImagePosition.left?t.addClass("image-left").append(n).append(i):t.addClass("image-right").append(i).append(n),e.header=$(t).prependTo(e.el),e.textEl=e.header.find("span")}function o(e){var t=e.el.children(".header");if(e.el.children(".header").children("svg").remove(),e.el.children(".header").children("img").remove(),t.length){var i;UtilsImage.isStylable(e.settings.image)?(i=$("<svg />"),i.hide(),UtilsImage.getInlineSvg(e.settings.image).then(function(e){i.replaceWith(e),i=e,i.show(),i.addClass("imgur")})):(i=$("<img src='"+e.settings.image+"'>"),i.addClass("imgur")),e.settings.imageAlign===Enum.ImagePosition.right?t.append(i):t.prepend(i)}else a(e);d(e)}function l(e){var t=e.el.children(".header"),i;i=UtilsImage.isStylable(e.settings.image)?t.children("svg"):t.children("img"),(void 0!==e.settings.imageAlign||""!==e.settings.imageAlign)&&("right"===e.settings.imageAlign&&(t.removeClass("image-left"),t.addClass("image-right"),i.appendTo(t)),"left"===e.settings.imageAlign&&(t.removeClass("image-right"),t.addClass("image-left"),i.prependTo(t)))}function d(e){var t=e.el.children(".header");""!==e.settings.image&&void 0!==e.settings.image||""!==e.settings.text&&void 0!==e.settings.text||(e.el.children(".header").remove(),e.header=null),u(e)}function u(e){e.header?e.container.css("top",e.header.outerHeight()+"px"):e.container.css("top","0px")}function c(e,t){var i=e.el.children(".header").children("span"),n=e.el.children(".header");0===t.length?e.textEl.remove():i.length?e.textEl.text(t):(e.textEl=$("<span>"+(void 0!==e.settings.textkey?brease.language.getTextByKey(e.settings.textkey):e.settings.text)+"</span>"),"left"===e.settings.imageAlign?n.append(e.textEl):"right"===e.settings.imageAlign&&n.prepend(e.textEl),i.text(t))}function g(e){e.el.removeClass("vertical","horizontal");var t;"horizontal"===e.settings.alignment?(e.el.addClass("horizontal"),t={mouseWheel:!0,tap:!0,scrollY:!1,scrollX:!0}):"vertical"===e.settings.alignment&&(e.el.addClass("vertical"),t={mouseWheel:!0,tap:!0,scrollY:!0,scrollX:!1}),e.container.off("VisibleChanged",e._bind("_scrollUpdateHandler")),e.settings.childPositioning===Enum.ChildPositioning.relative?(e.container.on("VisibleChanged",e._bind("_scrollUpdateHandler")),e.scrollWrapper?e.scrollWrapper&&(brease.config.editMode&&y(e,t),b(e)):(f(e,t),e.el.addClass("autoScroll"))):e.el.removeClass("autoScroll")}function h(e){var t=e,i="";e.settings.childPositioning===Enum.ChildPositioning.relative?(e.el.children(".container").children().hasClass("scrollWrapper")||g(e),i="#"+e.elem.id+" > div > div > [data-brease-widget]",$(i).each(function(){$("#"+this.id).css("position","relative"),void 0!==t.settings["float"]&&m(document.getElementById(this.id),t.settings["float"])}),g(e)):e.settings.childPositioning===Enum.ChildPositioning.absolute&&(e.el.children(".container").children().hasClass("scrollWrapper")&&v(e),g(e),i="#"+e.elem.id+" > div > [data-brease-widget]",$(i).each(function(){$("#"+this.id).css("position","absolute"),void 0!==t.settings["float"]&&m(document.getElementById(this.id),"")}))}function p(e){e.settings.childPositioning===Enum.ChildPositioning.relative&&void 0!==e.settings["float"]&&e.el.children(".container").children(".scrollWrapper").children().each(function(){m(this,e.settings["float"])})}function m(e,t){$(e).css("float",t)}function f(e,t){var i;i=e.container.children().detach(),e.scrollWrapper=$("<div/>").addClass("scrollWrapper"),e.scrollWrapper.append(i),e.container.append(e.scrollWrapper),void 0===e.scroller&&(e.scroller=Scroller.addScrollbars(e.container[0],t)),e.el.on("mousedown wheel",e._bind("_disableScroll")),e._refreshScroller()}function v(e){var t;t=e.container.children().children(".breaseWidget").detach(),e.el.find("scrollWrapper").removeClass("scrollWrapper"),e.container.children().remove(),e.container.append(t),e.scroller=void 0,e.scrollWrapper=void 0}function b(e){var t;t=e.container.children(".breaseWidget").detach(),e.scrollWrapper.append(t),e._refreshScroller()}function y(e,t){e.scroller.destroy(),e.scroller=void 0,e.scroller=Scroller.addScrollbars(e.container[0],t)}function E(e){e._refreshScroller()}r._disableScroll=function(e){var t=this;return $(window).on("mouseup",t._bind("_enableScroll")),Utils.isFunction(e.target.className.includes)&&e.target.className.includes("header")?(t.el.parents("[data-brease-widget*=GroupBox]").parents("[data-brease-widget*=GroupBox]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.disable()}),void 0):(t.el.parents("[data-brease-widget*=GroupBox]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.disable()}),"wheel"===e.originalEvent.type&&setTimeout(function(){t.el.parents("[data-brease-widget*=GroupBox]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.enable()})},50),void 0)},r._enableScroll=function(e){var t=this;$(window).off("mouseup",t._bind("_enableScroll")),t.el.parents().find("[data-brease-widget*=GroupBox]").map(function(){var e=brease.callWidget(this.id,"widget");void 0!==e.scroller&&e.scroller.enable()})};function x(e,t){return t.outerHeight()}function I(e){var t,i,n="#"+e.elem.id+"> .container > .scrollWrapper",s=0;return $(n).children().each(function(){$(this).hasClass("remove")!==!0&&(i=$(this).position(),t=i.top+$(this).outerHeight(!0),t>s&&(s=t))}),s}return i.decorate(s,!1)}),define("widgets/brease/Image/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.Image",parents:["*"],children:[],inheritance:["widgets.brease.Image","brease.core.BaseWidget"],actions:{SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setSizeMode:{method:"setSizeMode",parameter:{sizeMode:{name:"sizeMode",index:0,type:"brease.enum.SizeMode"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/Image/Image.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/Image"></div>\r\n'}),define("widgets/brease/Image/Image",["require","brease/core/BaseWidget","brease/enum/Enum","brease/core/Types"],function(e){"use strict";var t=e("brease/core/BaseWidget"),Enum=e("brease/enum/Enum"),Types=e("brease/core/Types"),i={image:void 0,sizeMode:Enum.SizeMode.CONTAIN},n=t.extend(function Image(){t.apply(this,arguments)},i),s=n.prototype;return s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseImage"),brease.config.editMode===!0&&this.addInitialClass("iatd-outline"),this.settings.sizeMode=Types.parseValue(this.settings.sizeMode,"Enum",{IAT_Enum:Enum.SizeMode,"default":i.sizeMode}),this._showImage(),t.prototype.init.call(this)},s.setImage=function(e){this.settings.image=e,this._showImage()},s.getImage=function(){return this.settings.image},s.setSizeMode=function(e){this.settings.sizeMode=Types.parseValue(e,"Enum",{IAT_Enum:Enum.SizeMode,"default":i.sizeMode}),this._showImage()},s.getSizeMode=function(){return this.settings.sizeMode},s._showImage=function(){if(void 0!==this.settings.image&&this.el.css({"background-image":"url("+this.settings.image+")","background-repeat":"no-repeat","background-size":Enum.SizeMode.convertToCSS(this.settings.sizeMode)}),brease.config.editMode===!0){var e=this;""!==this.settings.image&&(this.imageEl=$('<img src="'+this.settings.image+'"/>'),this.imageEl.error(function(){0===e.el.children().length&&e.imageEl.appendTo(e.el)}),this.imageEl.load(function(){$("#"+e.elem.id+" img").remove()}))}},n}),define("widgets/brease/KeyBoard/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.KeyBoard",parents:["*"],children:[],inheritance:["widgets.brease.KeyBoard","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/KeyBoard/KeyBoard.html",[],function(){return'<div id="breaseKeyBoard" data-brease-widget="widgets/brease/KeyBoard">\r\n    layouts in assets folder\r\n</div>\r\n'}),define("widgets/brease/KeyBoard/KeyBoard",["widgets/brease/Window/Window","brease/events/BreaseEvent","brease/core/Utils","brease/controller/PopUpManager"],function(e,BreaseEvent,Utils,t){"use strict";var i={layout:{"default":"widgets/brease/KeyBoard/assets/KeyBoardEn.html",ar:"widgets/brease/KeyBoard/assets/KeyBoardAr.html",bg:"widgets/brease/KeyBoard/assets/KeyBoardBg.html",cs:"widgets/brease/KeyBoard/assets/KeyBoardCs.html",da:"widgets/brease/KeyBoard/assets/KeyBoardDa.html",de:"widgets/brease/KeyBoard/assets/KeyBoardDe.html",en:"widgets/brease/KeyBoard/assets/KeyBoardEn.html",es:"widgets/brease/KeyBoard/assets/KeyBoardEs.html",fi:"widgets/brease/KeyBoard/assets/KeyBoardFi.html",fr:"widgets/brease/KeyBoard/assets/KeyBoardFr.html",hu:"widgets/brease/KeyBoard/assets/KeyBoardHu.html",it:"widgets/brease/KeyBoard/assets/KeyBoardIt.html",ko:"widgets/brease/KeyBoard/assets/KeyBoardKo.html",nl:"widgets/brease/KeyBoard/assets/KeyBoardNl.html",no:"widgets/brease/KeyBoard/assets/KeyBoardNo.html",pl:"widgets/brease/KeyBoard/assets/KeyBoardPl.html",pt:"widgets/brease/KeyBoard/assets/KeyBoardPt.html",ru:"widgets/brease/KeyBoard/assets/KeyBoardRu.html",sk:"widgets/brease/KeyBoard/assets/KeyBoardSk.html",sl:"widgets/brease/KeyBoard/assets/KeyBoardSl.html",sv:"widgets/brease/KeyBoard/assets/KeyBoardSv.html",ro:"widgets/brease/KeyBoard/assets/KeyBoardRo.html",hr:"widgets/brease/KeyBoard/assets/KeyBoardHr.html",zh:"widgets/brease/KeyBoard/assets/KeyBoardZh.html"},modal:!0,showCloseButton:!0,showShiftValues:!0,forceInteraction:!1,plugin:{zh:"widgets/brease/KeyBoard/libs/external/PluginPinyin",ko:"widgets/brease/KeyBoard/libs/external/PluginHangul",ja:"widgets/brease/KeyBoard/libs/external/PluginWanaKana"},stylePrefix:"widgets_brease_KeyBoard",scale2fit:!0},n=1,s,r=e.extend(function KeyBoard(t,i,n,r){if(r===!0)e.call(this,null,i||null,!0,!0),c(this);else{if(void 0!==s)return this.output&&s.setValue(""),s.settings=$.extend(!0,{},s.settings,i),s;e.call(this,null,i||null,!0,!0),c(this),s=this}},i),a=r.prototype;a.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseKeyBoard"),this.settings.windowType="KeyBoard",e.prototype.init.call(this,!0),this.value="",this.output=this.el.find("input"),this.clear=this.el.find(".keyBoardBtnClear"),this.valueButtons=this.el.find("button[data-value]"),this.actionButtons=this.el.find("button[data-action]"),this.shift=this.el.find("[data-action=shift]"),
this.special=this.el.find("[data-action=special]"),this.eventsAttached!==!0&&d.call(this),brease.config.mobile===!1&&this.output[0].removeAttribute("readonly"),this.loadPlugin()},a.getCursor=function(){return w.call(this)},a.setCursor=function(e){I.call(this,e)},a.setValue=function(e,t){this.value=e||"",""!==this.value?this.clear.show():this.clear.hide(),t!==!0&&(this.output.val(this.value),this.output[0].setSelectionRange(this.value.length,this.value.length),this.output.focus())},a.showPlugin=function(e){void 0!==this.plugin&&(e===!0?this.plugin.onDelete(this.value,w.call(this)):this.plugin.onInput(this.value,w.call(this)))},a.getValue=function(){return this.value},a.show=function(t,i){this._setLayout(),e.prototype.show.call(this,t,i),this.closeOnLostContent(i),void 0!==this.plugin&&this.plugin.show(),void 0!==t.type&&this.output.attr("type",t.type),void 0!==t.maxLength?this.output.attr("maxlength",parseInt(t.maxLength,10)):this.output.removeAttr("maxlength"),this.setValue(this.settings.text),void 0!==this.settings.restrict?this.settings.regexp=new RegExp(this.settings.restrict):this.settings.regexp=void 0},a.hide=function(){1!==n&&y.call(this,1),e.prototype.hide.call(this),void 0!==this.plugin&&this.plugin.hide(),this.el.removeClass("keyBoardSm keyBoardMd keyBoardFull")},a.langChangeHandler=function(){this.loadLayout()},a.loadPlugin=function(){var e=this.settings.plugin[brease.language.getCurrentLanguage()],t=this;void 0!==e?(void 0!==this.plugin&&this.plugin.dispose(),require([e],function(e){t.plugin=e,t.plugin.init(t),t.dispatchEvent(new CustomEvent(BreaseEvent.PLUGIN_LOADED,{bubbles:!0}))})):this.plugin=void 0},a.loadLayout=function(){var e=brease.language.getCurrentLanguage(),t=this.settings.layout[e];if(void 0===t&&(t=this.settings.layout["default"]),void 0!==t&&t!==this.settings.html)this.settings.html=t,g(this);else{var i=this;window.setTimeout(function(){i._dispatchReady()},0)}},a.dispose=function(){this.plugin&&this.plugin.dispose(),e.prototype.dispose.apply(this,arguments)},a._onValueButtonClick=function(e){this._handleEvent(e,!0);var t=$(e.currentTarget),i;switch(e.stopImmediatePropagation(),n){case 1:i=t.attr("data-value");break;case 2:i=t.attr("data-shift-value");break;case 3:i=t.attr("data-special-value")}if(!(void 0!==this.settings.maxLength&&this.getValue().length>=this.settings.maxLength)){if(void 0!==this.settings.regexp)for(var s=this.getValue()+i,r=s.length-1;r>=0;r-=1)if(this.settings.regexp.test(s[r])!==!0)return;h.call(this,i,w.call(this))}};function o(e){e.stopImmediatePropagation(),this.activeButton&&Utils.removeClass(this.activeButton,"active"),this.activeButton=e.target,Utils.addClass(this.activeButton,"active"),brease.docEl.on(BreaseEvent.MOUSE_UP,this._bind(l))}function l(){brease.docEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),Utils.removeClass(this.activeButton,"active"),this.activeButton=void 0}a._setLayout=function(){var e=t.getDimensions(),i=Math.min(e.appWidth,e.winWidth);i>=1e3?this.el.addClass("keyBoardFull"):640>=i?this.el.addClass("keyBoardSm"):this.el.addClass("keyBoardMd")},a._onActionButtonClick=function(e){this._handleEvent(e,!0);var t=$(e.currentTarget),i=t.attr("data-action");switch(i){case"delete":p.call(this,w.call(this)-1);break;case"enter":f.call(this);break;case"left":E.call(this);break;case"right":x.call(this);break;case"shift":v.call(this);break;case"close":this.hide();break;case"special":b.call(this);break;default:console.iatWarn(r.name+" action not supported!")}},a._keyUpHandler=function(e){if(13===e.which)f.call(this);else{var t=this.output.val(),i=this.getValue();if(t!==i){var n="",s=w.call(this),r=t.length-i.length;if(r>0){for(var a=0,o=t.length;o>a;a+=1)this.settings.regexp.test(t[a])===!0&&(n+=t[a]);this.setValue(n),I.call(this,s-(t.length-n.length))}else this.setValue(t,!0);this.showPlugin(8===e.which)}}},a._onClear=function(e){this._handleEvent(e,!0),this.setValue("")},a.postProcessHTML=function(e){return e=e.replace('<i class="icon-left"></i>','<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="20px" viewBox="0 0 12 20" enable-background="new 0 0 12 20" xml:space="preserve"><path d="M0,8.569L12,0v3.931L3.336,10L12,16.069V20L0,11.431V8.569z"/></svg>'),e=e.replace('<i class="icon-right"></i>','<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="12px" height="20px" viewBox="0 0 12 20" enable-background="new 0 0 12 20" xml:space="preserve"><path d="M12,11.431L0,20v-3.931L8.664,10L0,3.931V0l12,8.569V11.431z"/></svg>'),e};function d(){this.clear.on(BreaseEvent.CLICK,this._bind("_onClear")),this.valueButtons.on(BreaseEvent.CLICK,this._bind("_onValueButtonClick")),this.valueButtons.on(BreaseEvent.MOUSE_DOWN,this._bind(o)),this.actionButtons.on(BreaseEvent.CLICK,this._bind("_onActionButtonClick")).on(BreaseEvent.MOUSE_DOWN,this._bind(o)),this.output.on("keyup",this._bind("_keyUpHandler")),this.eventsAttached=!0}function u(){this.clear.off(),this.valueButtons.off(),this.actionButtons.off(),this.output.off(),this.eventsAttached=!1}function c(e){var t=brease.language.getCurrentLanguage(),i=e.settings.layout[t];void 0===i&&(i=e.settings.layout["default"]),e.settings.html=i,require(["text!"+e.settings.html],function(t){t=e.postProcessHTML(t),e.deferredInit.call(e,document.body,t),y.call(e,1),e.readyHandler()})}function g(e){u.call(e),e.el.remove(),require(["text!"+e.settings.html],function(t){t=e.postProcessHTML(t),e.el=$(t).prependTo(document.body),e.elem=e.el[0],window.setTimeout(function(){e._dispatchReady()},0),e.init.call(e),y.call(e,1)})}function h(e,t){this.value=this.value.slice(0,t)+e+this.value.slice(t),this.cursor=t+1,this.setValue(this.value),I.call(this,t+=1),this.showPlugin(),2===n&&y.call(this,1)}function p(e){var t=this.value.substr(0,e)+this.value.substr(e+1);this.cursor=e,this.setValue(t),I.call(this,e),this.plugin&&this.plugin.onDelete(this.value,w.call(this))}function m(e){return e.replace(/[\u00A0]/g," ")}function f(){this.dispatchEvent(new CustomEvent(BreaseEvent.SUBMIT,{detail:m(this.getValue())})),this.output.trigger("blur"),this.hide()}function v(){2!==n?y.call(this,2):y.call(this,1)}function b(){3!==n?y.call(this,3):y.call(this,1)}function y(e){var t,i,s,r,a,o;switch(e){case 1:t="value",s="shift-value",this.shift.removeClass("selected"),this.special.removeClass("selected");break;case 2:t="shift-value",s="special-value",this.shift.addClass("selected"),this.special.removeClass("selected");break;case 3:t="special-value",s="shift-value",this.special.addClass("selected"),this.shift.removeClass("selected")}for(var l=0;l<this.valueButtons.length;l+=1)o=this.valueButtons.eq(l),i=o.data(t),r=o.data(s),a=(void 0!==i?i:"")+(this.settings.showShiftValues===!0&&"value"===t?"<sub>"+(void 0!==r?r:"")+"</sub>":""),o.html(a);n=e}function E(){this.cursor=this.output.get(0).selectionStart=this.output.get(0).selectionEnd-=1,this.output.focus()}function x(){this.cursor=this.output[0].selectionStart=this.output[0].selectionEnd+=1,this.output.focus()}function I(e){this.cursor=this.output.get(0).selectionStart=this.output.get(0).selectionEnd=e}function w(){return this.output.get(0).selectionStart}return r}),define("widgets/brease/KeyBoard/libs/PluginProto",["require","brease/core/Class"],function(e){"use strict";var t=e("brease/core/Class"),i=t.extend(function s(){t.call(this)}),n=i.prototype;return n.init=function(e){this.keyboard=e},n.show=function(){},n.hide=function(){},n.onInput=function(){},n.onDelete=function(){},n.dispose=function(){},new i}),define("widgets/brease/Label/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.Label",parents:["*"],children:[],inheritance:["widgets.brease.Label","brease.core.BaseWidget"],actions:{setAutoScroll:{method:"setAutoScroll",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/Label/Label.html",[],function(){return'<label id="WIDGETID" data-brease-widget="widgets/brease/Label">CONTENT</label>\r\n'}),define("widgets/brease/Label/Label",["brease/core/BaseWidget","brease/decorators/LanguageDependency","brease/decorators/VisibilityDependency","brease/enum/Enum","brease/core/Types","brease/helper/Scroller","brease/events/BreaseEvent","widgets/brease/Label/libs/EditorHandles"],function(e,t,i,Enum,Types,Scroller,BreaseEvent,EditorHandles){"use strict";var n={ellipsis:!1,wordWrap:!1,multiLine:!1,breakWord:!1,text:"",autoScroll:!1},s=e.extend(function Label(){e.apply(this,arguments)},n),r=s.prototype;r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseLabel"),this.settings.arrow===Enum.Position.left&&this.addInitialClass("arrow-left"),o(this),this.scroller=null,this.settings.ellipsis=Types.parseValue(this.settings.ellipsis,"Boolean"),this.settings.multiLine=Types.parseValue(this.settings.multiLine,"Boolean"),this.settings.wordWrap=Types.parseValue(this.settings.wordWrap,"Boolean"),l(this),e.prototype.init.call(this),brease.config.editMode&&this.createEditorHandles(),document.body.addEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler"))},r.wake=function(){e.prototype.wake.apply(this,arguments),document.body.addEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler"))},r.suspend=function(){document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler")),e.prototype.suspend.apply(this,arguments)},r.createEditorHandles=function(){var e=new EditorHandles(this);this.getHandles=function(){return e.getHandles()},this.designer.getSelectionDecoratables=function(){return e.getSelectionDecoratables()}},r._dispatchReady=function(){e.prototype._dispatchReady.call(this),this.setText(this.settings.text),this.addScroller()},r.themeChangeHandler=function(){this.refreshScroller()},r.langChangeHandler=function(e){(void 0===e||void 0===e.detail||void 0===e.detail.textkey||e.detail.textkey===this.settings.textkey)&&null!==this.settings.textkey&&this.updateText(brease.language.getTextByKey(this.settings.textkey))},r.addScroller=function(){!this.scroller&&this.settings.ellipsis===!1&&this.settings.autoScroll&&(this.scroller=a(this),this.setVisibilityDependency(!0)),this.refreshScroller()},r.destroyScroller=function(){d(this),this.scroller&&(this.scroller.destroy(),this.scroller=null)},r.refreshScroller=function(){this.scroller&&this.scroller.refresh(),d(this)},r.setText=function(e){void 0!==e&&(brease.language.isKey(e)===!1?(this.updateText(e),this.removeTextKey()):this.setTextKey(brease.language.parseKey(e))),this.refreshScroller()},r.getText=function(){return this.settings.text},r.updateText=function(e){if(null!==e){this.settings.text=Types.parseValue(e,"String");var t=_.escape(e),i=t;this.settings.multiLine&&(i=t.replace(/\\n/g,"<br />")),this.textEl.html(i)}},r.setTextKey=function(e){void 0!==e&&(this.settings.textkey=e,this.updateText(brease.language.getTextByKey(this.settings.textkey)),this.setLangDependency(!0))},r.removeTextKey=function(){this.settings.textkey=null,this.setLangDependency(!1)},r.getTextKey=function(){return this.settings.textkey},r.setEllipsis=function(e){this.settings.ellipsis=Types.parseValue(e,"Boolean"),l(this),this.settings.ellipsis?this.destroyScroller():this.addScroller()},r.getEllipsis=function(){return this.settings.ellipsis},r.setWordWrap=function(e){this.settings.wordWrap=Types.parseValue(this.settings.wordWrap,"Boolean"),this.settings.wordWrap=e,l(this),this.refreshScroller()},r.getWordWrap=function(){return this.settings.wordWrap},r.setBreakWord=function(e){this.settings.breakWord=e,l(this),this.refreshScroller()},r.getBreakWord=function(){return this.settings.breakWord},r.setMultiLine=function(e){this.settings.multiLine=Types.parseValue(this.settings.multiLine,"Boolean"),this.settings.multiLine=e,l(this),this.updateText(this.settings.text),this.refreshScroller()},r.getMultiLine=function(){return this.settings.multiLine},r.setAutoScroll=function(e){this.settings.autoScroll=e,e?this.addScroller():this.destroyScroller()},r.getAutoScroll=function(){return this.settings.autoScroll},r.dispose=function(){document.body.removeEventListener(BreaseEvent.THEME_CHANGED,this._bind("themeChangeHandler")),this.destroyScroller(),e.prototype.dispose.apply(this,arguments)};function a(e){var t={mouseWheel:!0,scrollX:!0,scrollY:!0};return brease.config.editMode&&(t.disableMouse=!0,t.disableTouch=!0),Scroller.addScrollbars(e.elem,t)}function o(e){e.textEl=$("<span></span>"),e.elem.textContent?(e.settings.text=e.elem.textContent,e.el.contents().wrap(e.textEl)):e.el.html(e.textEl)}function l(e){e.settings.ellipsis===!0?e.el.addClass("ellipsis"):e.el.removeClass("ellipsis"),e.settings.multiLine===!0?(e.el.addClass("multiLine"),e.settings.wordWrap===!0?(e.el.addClass("wordWrap"),e.el.removeClass("multiLine")):e.el.removeClass("wordWrap"),e.settings.breakWord===!0?(e.el.addClass("breakWord"),e.el.removeClass("multiLine")):e.el.removeClass("breakWord")):(e.el.removeClass("breakWord"),e.el.removeClass("wordWrap"),e.el.removeClass("multiLine"))}function d(e){e.settings.ellipsis===!1&&e.settings.autoScroll&&e.scroller&&e.scroller.hasVerticalScroll?e.el.addClass("scrollable"):e.el.removeClass("scrollable")}return i.decorate(t.decorate(s,!1),!1)}),define("widgets/brease/LanguageSelector/designer/ClassInfo",["widgets/brease/DropDownBoxLegacy/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.LanguageSelector",parents:["*"],children:[],inheritance:["widgets.brease.LanguageSelector","widgets.brease.DropDownBoxLegacy","brease.core.BaseWidget"],actions:{Close:{method:"close"},Open:{method:"open"},setCropToParent:{method:"setCropToParent",parameter:{cropToParent:{name:"cropToParent",index:0,type:"brease.enum.CropToParent"}}},setDataProvider:{method:"setDataProvider",parameter:{dataProvider:{name:"dataProvider",index:0,type:"ItemCollection"},omitPrompt:{name:"omitPrompt",index:1,type:"Boolean"}}},setDisplaySettings:{method:"setDisplaySettings",parameter:{displaySettings:{name:"displaySettings",index:0,type:"brease.enum.DropDownDisplaySettings"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFitHeight2Items:{method:"setFitHeight2Items",parameter:{fitHeight2Items:{name:"fitHeight2Items",index:0,type:"Boolean"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},SetImagePath:{method:"setImagePath",parameter:{imagePath:{name:"imagePath",index:0,type:"String"}}},setItemHeight:{method:"setItemHeight",parameter:{itemHeight:{name:"itemHeight",index:0,type:"Integer"}}},setListPosition:{method:"setListPosition",parameter:{listPosition:{name:"listPosition",index:0,type:"brease.enum.Position"}}},setListWidth:{method:"setListWidth",parameter:{listWidth:{name:"listWidth",index:0,type:"Integer"}}},setMaxVisibleEntries:{method:"setMaxVisibleEntries",parameter:{maxVisibleEntries:{name:"maxVisibleEntries",index:0,type:"Integer"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetSelectedIndex:{method:"setSelectedIndex",parameter:{index:{name:"index",index:0,type:"Number"},omitPrompt:{name:"omitPrompt",index:1,type:"Boolean"}}},SetSelectedValue:{method:"setSelectedValue",parameter:{value:{name:"value",index:0,type:"String"},omitPrompt:{name:"omitPrompt",index:1,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/LanguageSelector/LanguageSelector.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/LanguageSelector"></div>\r\n'}),define("widgets/brease/LanguageSelector/LanguageSelector",["require","widgets/brease/DropDownBoxLegacy/DropDownBoxLegacy","brease/enum/Enum","brease/decorators/LanguageDependency","brease/events/BreaseEvent"],function(e){"use strict";var t=e("widgets/brease/DropDownBoxLegacy/DropDownBoxLegacy"),Enum=e("brease/enum/Enum"),i=e("brease/decorators/LanguageDependency"),BreaseEvent=e("brease/events/BreaseEvent"),n={imagePath:"widgets/brease/LanguageSelector/assets/img/",imageAlign:"right",promptType:"text",listWidth:150,displaySettings:"default"},s=t.extend(function LanguageSelector(){t.apply(this,arguments)},n),r=s.prototype;return r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseLanguageSelector"),this.languages=brease.language.getLanguages().languages,this.setImagePath(this.settings.imagePath),t.prototype.init.call(this)},r.setDataProvider=function(e,i){t.prototype.setDataProvider.call(this,e,i),this._setPrompt()},r.setImagePath=function(e){this.settings.imagePath=e,/\/$/.test(this.settings.imagePath)||""===this.settings.imagePath||(this.settings.imagePath=this.settings.imagePath+"/"),this.imagePathChange()},r.getImagePath=function(){return this.settings.imagePath},r.langChangeHandler=function(){var e=brease.language.getCurrentLanguage();this.getSelectedValue()!==e&&this.setSelectedValue(e)},r._onListChange=function(e,i){null!==e.detail?void 0!==e.detail?(t.prototype._onListChange.call(this,e),brease.language.switchLanguage(e.detail.value)):brease.language.switchLanguage(i):brease.callWidget(this.buttonId,"toggle")},r.setSelectedIndex=function(e,i){t.prototype.setSelectedIndex.call(this,e,i);var n={};e<=this.settings.dataProvider.length-1&&e>=0&&this._onListChange(n,this.settings.dataProvider[e].value)},r.setSelectedValue=function(e,i){t.prototype.setSelectedValue.call(this,e,i);var n={};this._onListChange(n,e)},r.imagePathChange=function(){var e=[],t=-1,i=-1;this.currentLanguage=brease.language.getCurrentLanguage();for(var n in this.languages)e.push({value:n,text:this.languages[n].description,image:this.settings.imagePath+n+".png",index:void 0!==this.languages[n].index?this.languages[n].index:0}),t+=1,this.currentLanguage===n&&(i=t,this.settings.selectedValue=n);e.sort(function(e,t){return e.index-t.index}),this.settings.selectedIndex=i,this.settings.dataProvider=e,this.setDataProvider(e)},r.setDisplaySettings=function(e){this.settings.displaySettings=e,this._setPrompt()},r.getDisplaySettings=function(){return this.settings.displaySettings},r._setPrompt=function(){var e=this;if(this.button)if(void 0!==e.settings.selectedIndex&&-1!==e.settings.selectedIndex&&void 0!==e.settings.dataProvider){var t=e.settings.dataProvider[e.settings.selectedIndex];void 0!==t&&((e.settings.displaySettings===Enum.DropDownDisplaySettings["default"]||e.settings.displaySettings===Enum.DropDownDisplaySettings.text||e.settings.displaySettings===Enum.DropDownDisplaySettings.imageAndText)&&(brease.callWidget(e.buttonId,"setImage",""),brease.language.isKey(t.text)?brease.callWidget(e.buttonId,"setTextKey",brease.language.parseKey(t.text)):brease.callWidget(e.buttonId,"setText",t.text)),e.settings.displaySettings===Enum.DropDownDisplaySettings.imageAndText&&e.getImagePath()&&brease.callWidget(e.buttonId,"setImage",e.getImagePath()+t.value+".png"),e.settings.displaySettings===Enum.DropDownDisplaySettings.image&&e.getImagePath()&&(brease.callWidget(e.buttonId,"setText",""),brease.callWidget(e.buttonId,"setImage",e.getImagePath()+t.value+".png")))}else e.settings.noSelectionPolicy===Enum.NoSelectionPolicy.showPrompt&&void 0===e.settings.promptText&&(void 0!==e.settings.prompt&&""!==e.settings.prompt?brease.language.isKey(e.settings.prompt)?brease.callWidget(e.buttonId,"setText",brease.language.getTextByKey(brease.language.parseKey(e.settings.prompt))):brease.callWidget(e.buttonId,"setText",e.settings.prompt):brease.callWidget(e.buttonId,"setText",""))},i.decorate(s,!0)}),define("widgets/brease/ListBoxLegacy/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.ListBoxLegacy",parents:["*"],children:[],inheritance:["widgets.brease.ListBoxLegacy","brease.core.BaseWidget"],actions:{SetDataProvider:{method:"setDataProvider",parameter:{provider:{name:"provider",index:0,type:"ItemCollection"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFitHeight2Items:{method:"setFitHeight2Items",parameter:{fitHeight2Items:{name:"fitHeight2Items",index:0,type:"Boolean"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},setImagePath:{method:"setImagePath",parameter:{imagePath:{name:"imagePath",index:0,type:"String"}}},setItemHeight:{method:"setItemHeight",parameter:{itemHeight:{name:"itemHeight",index:0,type:"Integer"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetSelectedIndex:{method:"setSelectedIndex",parameter:{index:{name:"index",index:0,type:"Integer"}}},SetSelectedValue:{method:"setSelectedValue",parameter:{value:{name:"value",index:0,type:"String"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/ListBoxLegacy/ListBoxLegacy.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/ListBoxLegacy"></div>\r\n'}),define("widgets/brease/ListBoxLegacy/ListBoxLegacy",["require","brease/core/BaseWidget","brease/decorators/LanguageDependency","brease/decorators/VisibilityDependency","brease/enum/Enum","brease/core/Types","brease/helper/Scroller","brease/events/BreaseEvent","widgets/brease/ListBoxLegacy/libs/EditorHandles"],function(e){"use strict";var t=e("brease/core/BaseWidget"),i=e("brease/decorators/LanguageDependency"),n=e("brease/decorators/VisibilityDependency"),Enum=e("brease/enum/Enum"),Types=e("brease/core/Types"),Scroller=e("brease/helper/Scroller"),BreaseEvent=e("brease/events/BreaseEvent"),s={deferedSelection:!1,itemHeight:40,autoFit:!1,ellipsis:!1,wordWrap:!1,multiLine:!1,fitHeight2Items:!1,selectedIndex:0,imageAlign:Enum.ImageAlign.left,imagePath:""},r=t.extend(function ListBoxLegacy(){t.apply(this,arguments)},s),a=r.prototype;a.init=function(){l(this),this.list=$("<ul></ul"),this.el.append(this.list),t.prototype.init.call(this),this.setDataProvider(this.settings.dataProvider||[]),void 0!==this.settings.itemHeight&&this.setItemHeight(this.settings.itemHeight),void 0!==this.settings.imagePath&&""!==this.settings.imagePath&&this.imagePathChange(this.settings.imagePath),void 0!==this.settings.selectedIndex&&this.setSelectedIndex(this.settings.selectedIndex),void 0!==this.settings.selectedValue&&this.setSelectedValue(this.settings.selectedValue),brease.config.editMode&&c(this),this.list.on(BreaseEvent.CLICK,this._bind("_listClickHandler")),this.list.on(BreaseEvent.MOUSE_DOWN,this._bind("_listMouseDownHandler")),this.list.on("mousewheel",this._bind("_mouseWheelHandler"))},a.langChangeHandler=function(){for(var e=this.el.find("span[data-textkey]"),t=0;t<e.length;t+=1)$(e[t]).text(brease.language.getTextByKey($(e[t]).data("textkey")))},a.setDataProvider=function(e){var t;if(Array.isArray(e)){var i=[];e.map(function(e){if("string"==typeof e)try{return i.push(JSON.parse(e))}catch(t){return}else"object"==typeof e&&i.push(e)}),this.settings.dataProvider=i}this.list.html(o(this.settings.dataProvider,this.settings)),void 0!==this.settings.selectedIndex&&this.setSelectedIndex(this.settings.selectedIndex),this.langChangeHandler(),d(this)},a.getDataProvider=function(){return this.settings.dataProvider},a.setSelectedValue=function(e){var t=this.settings.dataProvider,i=0,n=0,s=-1;if(t)for(i=0,n=t.length;n>i;i+=1)if(t[i].value===e){s=i;break}s>-1&&this.setSelectedIndex(s)},a.getSelectedValue=function(){return this.currentSelected?this.settings.dataProvider[this.settings.selectedIndex].value:void 0},a.setSelectedIndex=function(e){this.settings.selectedIndex=e;var t=$(this.el.find("li")[e]);t&&t.length>0&&(this.currentSelected&&this.currentSelected.removeClass("selected"),t.addClass("selected"),this.currentSelected=t,this._refreshScroller()),void 0!==this.settings.dataProvider&&this.settings.dataProvider.length>0&&void 0!==this.settings.dataProvider[this.settings.selectedIndex].value&&this.sendValueChange({selectedIndex:this.getSelectedIndex(),selectedValue:this.getSelectedValue()})},a.getSelectedIndex=function(){return this.settings.selectedIndex},a.setMultiLine=function(e){this.settings.multiLine=e,l(this)},a.getMultiLine=function(){return this.settings.multiLine},a.setEllipsis=function(e){this.settings.ellipsis=e,l(this)},a.getEllipsis=function(){return this.settings.ellipsis},a.setWordWrap=function(e){this.settings.wordWrap=e,l(this)},a.getWordWrap=function(){return this.settings.wordWrap},a.setFitHeight2Items=function(e){this.settings.fitHeight2Items=e,this.list.html(o(this.settings.dataProvider,this.settings)),this.setSelectedIndex(this.settings.selectedIndex),d(this)},a.getFitHeight2Items=function(){return this.settings.fitHeight2Items},a.setItemHeight=function(e){this.settings.itemHeight=e,this.settings.itemHeight>0&&(this.settings.itemHeight=this.settings.itemHeight-1),d(this)},a.getItemHeight=function(){return this.settings.itemHeight},a.setImageAlign=function(e){this.settings.imageAlign=e,this.list.html(o(this.settings.dataProvider,this.settings)),this.setSelectedIndex(this.settings.selectedIndex)},a.getImageAlign=function(){return this.settings.imageAlign},a.setImagePath=function(e){this.settings.imagePath=e,this.imagePathChange(e)},a.getImagePath=function(){return this.settings.imagePath},a.setVisible=function(e){t.prototype.setVisible.call(this,e),d(this)},a._listScrollStartHandler=function(e){this.isScrolling=!0,this.dispatchEvent(new CustomEvent(BreaseEvent.SCROLL_START))},a._listScrollEndHandler=function(e){this.isWheeling&&(this.isWheeling=!1,this.isScrolling=!1),this.dispatchEvent(new CustomEvent(BreaseEvent.SCROLL_END))},a._listMouseDownHandler=function(e){brease.bodyEl.on(BreaseEvent.MOUSE_UP,this._bind("_listMouseUpHandler"))},a._mouseWheelHandler=function(e){this.isWheeling=!0},a._listMouseUpHandler=function(e){brease.bodyEl.off(BreaseEvent.MOUSE_UP,this._bind("_listMouseUpHandler")),$.contains(this.elem,e.target)||(this.isScrolling=!1)},a._listClickHandler=function(e){this._handleEvent(e,!0);var i=$("#"+this.elem.id+" ul li");if(!this.isDisabled){var n=$(e.target).closest("li");if(!(n.length<1)){if(this.settings.deferedSelection&&!n.is(this.currentSelected))return this.currentSelected.removeClass("selected"),n.addClass("selected"),this.currentSelected=n,this.settings.selectedIndex=i.index(n),void 0;if(!this.settings.deferedSelection&&n.is(this.currentSelected))return this.dispatchEvent(new CustomEvent(BreaseEvent.CHANGE)),void 0;if(this.currentSelected&&this.currentSelected.removeClass("selected"),n.addClass("selected"),this.currentSelected=n,-1!==i.index(n)){this.settings.selectedIndex=i.index(n);var s=this.settings.dataProvider[i.index(n)],r={value:s.value,text:s.isKey?brease.language.getTextByKey(s.key):s.text,image:s.image,selectedIndex:this.getSelectedIndex()};this.dispatchEvent(new CustomEvent(BreaseEvent.CHANGE,{detail:r})),this.sendValueChange({selectedIndex:this.getSelectedIndex(),selectedValue:this.getSelectedValue()});var a=this.createEvent("SelectedIndexChanged",{selectedIndex:this.getSelectedIndex(),selectedValue:this.getSelectedValue()});a.dispatch(),t.prototype._clickHandler.call(this,e)}}}},a._refreshScroller=function(){var e=this,t;if(this.el){var i=$(this.el.find("li")[this.settings.selectedIndex]);i&&i.length>0&&(this.currentSelected&&this.currentSelected.removeClass("selected"),i.addClass("selected"),this.currentSelected=i),e.scroller&&(e.scroller.refresh(),t=document.querySelector("#"+e.elem.id+" ul li.selected"),e.scroller.scrollToElement(t))}},a.imagePathChange=function(e){var t=[];for(var i in this.settings.dataProvider)""===e?t.push({value:this.settings.dataProvider[i].value,text:this.settings.dataProvider[i].text,image:""}):t.push({value:this.settings.dataProvider[i].value,text:this.settings.dataProvider[i].text,image:e+i+".png"});this.settings.dataProvider=t,this.setDataProvider(t)},a.dispose=function(){window.clearTimeout(this.refreshTimeOut),this.scroller&&u(this),t.prototype.dispose.call(this,arguments)};function o(e,t){for(var i="",n=0;n<e.length;n+=1){var s=e[n];s.isKey=brease.language.isKey(s.text),s.isKey&&(s.key=brease.language.parseKey(s.text)),i+="<li ",t.itemHeight&&(i+='style="height:'+t.itemHeight+'px; " '),t.displaySettings!==Enum.DropDownDisplaySettings.text&&t.displaySettings!==Enum.DropDownDisplaySettings.image&&s.image&&t.imageAlign===Enum.ImageAlign.left&&(i+='class="image-left" '),t.displaySettings!==Enum.DropDownDisplaySettings.text&&t.displaySettings!==Enum.DropDownDisplaySettings.image&&s.image&&t.imageAlign===Enum.ImageAlign.right&&(i+='class="image-right" '),t.displaySettings===Enum.DropDownDisplaySettings.image&&(i+='class="image-only" '),i+='data-brease-value="'+s.value+'">',t.displaySettings!==Enum.DropDownDisplaySettings.text&&s.image&&t.imageAlign===Enum.ImageAlign.left&&(i+='<img src="'+s.image+'" />'),t.displaySettings!==Enum.DropDownDisplaySettings.image&&(i+="<span",s.isKey&&(i+=' data-textkey="'+s.key+'" '),i+=">",s.text&&(i+=s.isKey?brease.language.getTextByKey(s.key):s.text),i+="</span>"),t.displaySettings!==Enum.DropDownDisplaySettings.text&&s.image&&t.imageAlign===Enum.ImageAlign.right&&(i+='<img src="'+s.image+'" />'),i+="</li>",n<e.length-1&&(i+="<div/>")}return i}function l(e){e.settings.omitClass!==!0&&e.el.addClass("breaseListBoxLegacy"),e.settings.ellipsis===!0?e.el.addClass("ellipsis"):e.el.removeClass("ellipsis"),e.settings.wordWrap===!0?e.settings.wordWrap=Types.parseValue(e.settings.wordWrap,"Boolean"):e.settings.wordWrap=!1,e.settings.multiLine===!0?e.settings.wordWrap===!0?(e.el.addClass("wordWrap"),e.el.removeClass("multiLine")):(e.el.addClass("multiLine"),e.el.removeClass("wordWrap")):(e.el.removeClass("wordWrap"),e.el.removeClass("multiLine"))}function d(e){var t=e.settings.dataProvider.length,i=parseInt(e.el.css("border-top-width")),n=parseInt(e.el.css("border-bottom-width")),s,r=parseInt($("#"+e.elem.id+" ul div").css("height"));$("#"+e.elem.id+" ul li").css("height",e.settings.itemHeight),e.settings.fitHeight2Items===!0?(e._cssUpdates.height=e.settings.itemHeight*t+r*(t-1)+"px",void 0!==e.scroller&&u(e)):(e._cssUpdates["max-height"]="",e._cssUpdates.height=e.settings.height+"px",null!==e.scroller&&void 0!==e.scroller||void 0===e.elem||e.scrollerInit||(e.refreshTimeOut=window.setTimeout(function(e){
e.scroller=Scroller.addScrollbars("#"+e.elem.id,{mouseWheel:!0}),e.scroller.on(BreaseEvent.SCROLL_START,e._bind("_listScrollStartHandler")),e.scroller.on(BreaseEvent.SCROLL_END,e._bind("_listScrollEndHandler")),e.scrollerInit=!1,e.setVisibilityDependency(!0)},500,e),e.scrollerInit=!0),e.scroller&&(e.scroller.refresh(),s=document.querySelector("#"+e.elem.id+" ul li.selected"),s&&e.scroller.scrollToElement(s))),e._invalidate()}function u(e){e.scroller.off(BreaseEvent.SCROLL_START,e._bind("_listScrollStartHandler")),e.scroller.off(BreaseEvent.SCROLL_END,e._bind("_listScrollEndHandler")),e.scroller.destroy(),e.scroller=void 0}a._editorResize=function(){d(this)},a._setHeight=function(e){this.settings.height=e,this.el.css("height",this.settings.height),this._editorResize()},a._setWidth=function(e){this.settings.width=e,this.el.css("width",this.settings.width),this._editorResize()};function c(t){var EditorHandles=e("widgets/brease/ListBoxLegacy/libs/EditorHandles");t.editorHandles=new EditorHandles(t),t.getHandles=function(){return t.editorHandles.getHandles()},t.designer.getSelectionDecoratables=function(){return t.editorHandles.getSelectionDecoratables()}}return n.decorate(i.decorate(r,!0),!1)}),define("widgets/brease/MessageBox/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.MessageBox",parents:["*"],children:[],inheritance:["widgets.brease.MessageBox","widgets.brease.Window","brease.core.BaseWidget"],actions:{setContent:{method:"setContent"},setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setIcon:{method:"setIcon"},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("widgets/brease/MessageBox/libs/Buttons",["brease/core/Utils"],function(Utils){"use strict";var e={};return Utils.defineProperty(e,"btnOk",{state:"OK",textkey:"BR/IAT/brease.common.ok"}),Utils.defineProperty(e,"btnYes",{state:"YES",textkey:"BR/IAT/brease.common.yes"}),Utils.defineProperty(e,"btnNo",{state:"NO",textkey:"BR/IAT/brease.common.no"}),Utils.defineProperty(e,"btnAbort",{state:"ABORT",textkey:"BR/IAT/brease.common.abort"}),Utils.defineProperty(e,"btnRetry",{state:"RETRY",textkey:"BR/IAT/brease.common.retry"}),Utils.defineProperty(e,"btnIgnore",{state:"IGNORE",textkey:"BR/IAT/brease.common.ignore"}),Utils.defineProperty(e,"btnCancel",{state:"CANCEL",textkey:"BR/IAT/brease.common.cancel"}),e}),define("widgets/brease/MessageBox/libs/ButtonManager",["brease/core/Class","brease/events/BreaseEvent","brease/enum/Enum","widgets/brease/MessageBox/libs/Buttons"],function(e,BreaseEvent,Enum,t){"use strict";var ButtonManager=e.extend(function(t,i){e.call(this),this.init(t,i)},null),i=ButtonManager.prototype;i.init=function(e,i){this.widget=e,this.btnCallback=i,e.el.find(".messageBoxFooter").delegate(".messageBoxButton",BreaseEvent.CLICK,this._bind("btnClickHandler")),e.el.find(".messageBoxFooter").delegate(".messageBoxButton",BreaseEvent.MOUSE_DOWN,this._bind("btnDownHandler")),this.arElem={};for(var n in t)this.arElem[n]={el:$("#"+e.elem.id+"_messageBox_"+n)},this.arElem[n].textEl=this.arElem[n].el.find("span");this.setTexts()},i.setTexts=function(){for(var e in t)this.arElem[e].textEl.text(brease.language.getTextByKey(t[e].textkey))},i.setButtons=function(e){var i;switch(e){case Enum.MessageBoxType.AbortRetryIgnore:i=Enum.MessageBoxState.ABORT|Enum.MessageBoxState.RETRY|Enum.MessageBoxState.IGNORE;break;case Enum.MessageBoxType.OK:i=Enum.MessageBoxState.OK;break;case Enum.MessageBoxType.OKCancel:i=Enum.MessageBoxState.OK|Enum.MessageBoxState.CANCEL;break;case Enum.MessageBoxType.RetryCancel:i=Enum.MessageBoxState.RETRY|Enum.MessageBoxState.CANCEL;break;case Enum.MessageBoxType.YesNo:i=Enum.MessageBoxState.YES|Enum.MessageBoxState.NO;break;case Enum.MessageBoxType.YesNoCancel:i=Enum.MessageBoxState.YES|Enum.MessageBoxState.NO|Enum.MessageBoxState.CANCEL}for(var n in t)this.arElem[n].el.showByFlag(i&Enum.MessageBoxState[t[n].state])},i.btnDownHandler=function(e){var t=e.currentTarget.getAttribute("data-key");t&&(this.arElem[t].el.addClass("active"),this.activeButton=t),n.on(BreaseEvent.MOUSE_UP,this._bind("btnUpHandler"))},i.btnUpHandler=function(e){s(e),n.off(BreaseEvent.MOUSE_UP,this._bind("btnUpHandler")),this.arElem[this.activeButton].el.removeClass("active"),this.activeButton=""},i.btnClickHandler=function(e){var i=e.currentTarget.getAttribute("data-key");i&&this.btnCallback.call(this.widget,Enum.MessageBoxState[t[i].state])};var n=$(document);function s(e){e.originalEvent.preventDefault(),e.stopImmediatePropagation()}return ButtonManager}),define("text!widgets/brease/MessageBox/MessageBox.html",[],function(){return'<div id="{{ID}}" data-brease-widget="widgets/brease/MessageBox">\r\n\r\n    <header class="breaseMessageBoxHeader"><div></div></header>\r\n    <div class="contentBox breaseMessageBoxContentBox">\r\n        <div class="icon"></div>\r\n        <div class="content"></div>\r\n    </div>\r\n    <div class="messageBoxQuestion"></div>\r\n    <div class="messageBoxFooter">\r\n        <div id="{{ID}}_messageBox_btnOk" data-key="btnOk" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnYes" data-key="btnYes" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnNo" data-key="btnNo" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnAbort" data-key="btnAbort" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnRetry" data-key="btnRetry" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnIgnore" data-key="btnIgnore" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n        <div id="{{ID}}_messageBox_btnCancel" data-key="btnCancel" class="messageBoxButton breaseButton widgets_brease_Button_style_default"><span class="up"></span></div>\r\n    </div>\r\n</div>'}),define("widgets/brease/MessageBox/MessageBox",["widgets/brease/Window/Window","widgets/brease/MessageBox/libs/ButtonManager","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/controller/PopUpManager"],function(e,ButtonManager,BreaseEvent,Enum,Utils,t){"use strict";var i={modal:!0,arrow:{show:!1},forceInteraction:!0,showCloseButton:!1,position:{horizontal:"center",vertical:"middle"},html:"widgets/brease/MessageBox/MessageBox.html",icon:Enum.MessageBoxIcon.NONE,stylePrefix:"system_brease_MessageBox",width:500},n=e.extend(function MessageBox(t,i,n,s){s===!0?e.call(this,null,null,!0,!0):(e.call(this,null,null,!0,!0),a(this))},i),s=n.prototype,r=0;function a(e){require(["text!"+e.settings.html],function(t){var i="MessageBox"+(r+=1);t=t.replace(/\{\{ID\}\}/g,i),e.deferredInit.call(e,document.body,t),e.readyHandler(),brease.uiController.parse(e.elem,!1,brease.settings.globalContent)})}s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseMessageBox"),this.settings.windowType="MessageBox",e.prototype.init.call(this,!0),this.buttonManager=new ButtonManager(this,o)},s._setDimensions=function(){e.prototype._setDimensions.call(this),void 0!==this.settings.height&&this.el.find(".contentBox").css("height",this.settings.height-42-this.el.find(".messageBoxFooter").outerHeight())},s._getOffset=function(){var e=t.getNumberOfWindowsOfType(this.settings.windowType);return 20*(e-1)},s.show=function(t){return this.deferred=$.Deferred(),void 0!==this.settings.question&&brease.language.isKey(this.settings.question.text)&&(this.settings.question.textkey=brease.language.parseKey(this.settings.question.text)),e.prototype.show.call(this,t),this.buttonManager.setButtons(this.settings.type),this.setIcon(),this._setDimensions(),this.deferred.promise()},s.hide=function(){e.prototype.hide.call(this)},s._setContent=function(){e.prototype._setContent.call(this),void 0!==this.settings.question?this.el.find(".messageBoxQuestion").html(this.settings.question.textkey?brease.language.getTextByKey(this.settings.question.textkey):this.settings.question.text).show():this.el.find(".messageBoxQuestion").html("").hide()},s.langChangeHandler=function(){e.prototype.langChangeHandler.apply(this,arguments),this.buttonManager.setTexts()},s.setIcon=function(){var e=this.settings.icon,t=this.el.find(".icon");switch(t.removeClass("asterisk error exclamation information question stop warning hand none"),e){case Enum.MessageBoxIcon.ASTERISK:t.addClass("asterisk");break;case Enum.MessageBoxIcon.ERROR:t.addClass("error");break;case Enum.MessageBoxIcon.EXCLAMATION:t.addClass("exclamation");break;case Enum.MessageBoxIcon.INFORMATION:t.addClass("information");break;case Enum.MessageBoxIcon.QUESTION:t.addClass("question");break;case Enum.MessageBoxIcon.STOP:t.addClass("stop");break;case Enum.MessageBoxIcon.WARNING:t.addClass("warning");break;case Enum.MessageBoxIcon.HAND:t.addClass("hand");break;default:t.addClass("none")}};function o(e){this.deferred.resolve(e),this.hide()}return n}),define("widgets/brease/MomentaryPushButton/designer/ClassInfo",["widgets/brease/Button/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.MomentaryPushButton",parents:["*"],children:[],inheritance:["widgets.brease.MomentaryPushButton","widgets.brease.Button","brease.core.BaseWidget"],actions:{RemoveImage:{method:"removeImage"},RemoveMouseDownText:{method:"removeMouseDownText"},RemoveText:{method:"removeText"},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},SetMouseDownImage:{method:"setMouseDownImage",parameter:{mouseDownImage:{name:"mouseDownImage",index:0,type:"ImagePath"}}},SetMouseDownText:{method:"setMouseDownText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setMouseDownTextKey:{method:"setMouseDownTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/MomentaryPushButton/MomentaryPushButton.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/MomentaryPushButton">CONTENT</div>\r\n'}),define("widgets/brease/MomentaryPushButton/MomentaryPushButton",["require","widgets/brease/Button/Button","brease/events/BreaseEvent"],function(e){"use strict";var t=e("widgets/brease/Button/Button"),BreaseEvent=e("brease/events/BreaseEvent"),i={value:0},n=t.extend(function MomentaryPushButton(){t.apply(this,arguments)},i),s=n.prototype;n.setValue=1,n.resetValue=0,s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseMomentaryPushButton"),t.prototype.init.call(this)},s.getValue=function(){return this.settings.value},s.setEditable=function(e,t){if(void 0!==t&&void 0!==t.refAttribute){var i=t.refAttribute;"value"===i&&(this.settings.editable=e,this._internalEnable())}},s._downHandler=function(e){this.isDisabled||brease.config.editMode||this.isActive||(this.settings.value=n.setValue,this.sendValueChange({value:n.setValue}),this.timer=window.setInterval(this._bind("_continuousSend"),200),t.prototype._downHandler.apply(this,arguments))},s._upHandler=function(e){t.prototype._upHandler.apply(this,arguments),this.isActive||(window.clearInterval(this.timer),this.settings.value=n.resetValue,this.sendValueChange({value:n.resetValue}))},s._continuousSend=function(){this.sendValueChange({value:n.setValue})},s.dispose=function(){r(this),t.prototype.dispose.apply(this,arguments)},s.suspend=function(){r(this),t.prototype.suspend.apply(this,arguments)},s.updateVisibility=function(){t.prototype.updateVisibility.apply(this,arguments),this.isHidden&&this.isActive&&r(this)},s._enableHandler=function(e){t.prototype._enableHandler.apply(this,arguments),!e&&this.isActive&&r(this)};function r(e){window.clearInterval(e.timer),e.isActive=!1,e.el.removeClass("active"),void 0!==e.settings.mouseDownImage&&void 0!==e.settings.image&&e.setImage(e.settings.image,!0),void 0!==e.settings.mouseDownImage&&void 0===e.settings.image&&e.setImage("",!1),$(document).off(BreaseEvent.MOUSE_UP,e._bind("_upHandler")),e.settings.value=n.resetValue,e.sendValueChange({value:n.resetValue})}return n}),define("widgets/brease/ToggleButton/designer/ClassInfo",["widgets/brease/Button/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.ToggleButton",parents:["*"],children:[],inheritance:["widgets.brease.ToggleButton","widgets.brease.Button","brease.core.BaseWidget"],actions:{RemoveImage:{method:"removeImage"},RemoveMouseDownText:{method:"removeMouseDownText"},RemoveText:{method:"removeText"},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},SetMouseDownImage:{method:"setMouseDownImage",parameter:{mouseDownImage:{name:"mouseDownImage",index:0,type:"ImagePath"}}},SetMouseDownText:{method:"setMouseDownText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setMouseDownTextKey:{method:"setMouseDownTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"Integer"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("widgets/brease/NavigationButton/designer/ClassInfo",["widgets/brease/ToggleButton/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.NavigationButton",parents:["*"],children:[],inheritance:["widgets.brease.NavigationButton","widgets.brease.ToggleButton","widgets.brease.Button","brease.core.BaseWidget"],actions:{RemoveImage:{method:"removeImage"},RemoveMouseDownText:{method:"removeMouseDownText"},RemoveText:{method:"removeText"},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},setIsToggle:{method:"setIsToggle",parameter:{isToggle:{name:"isToggle",index:0,type:"Boolean"}}},SetMouseDownImage:{method:"setMouseDownImage",parameter:{mouseDownImage:{name:"mouseDownImage",index:0,type:"ImagePath"}}},SetMouseDownText:{method:"setMouseDownText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setMouseDownTextKey:{method:"setMouseDownTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},setPageId:{method:"setPageId",parameter:{pageId:{name:"pageId",index:0,type:"PageReference"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"Integer"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/NavigationButton/NavigationButton.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/NavigationButton">CONTENT</div>\r\n'}),define("widgets/brease/NavigationButton/NavigationButton",["require","widgets/brease/ToggleButton/ToggleButton","brease/events/BreaseEvent"],function(e){"use strict";var t=e("widgets/brease/ToggleButton/ToggleButton"),BreaseEvent=e("brease/events/BreaseEvent"),i={isToggle:!0},n=t.extend(function NavigationButton(){t.apply(this,arguments)},i),s=n.prototype;return s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseNavigationButton"),t.prototype.init.call(this);var e=brease.pageController.getVisu4Page(this.settings.pageId),i=brease.pageController.getVisuById(e);if(i){var n=brease.pageController.getCurrentPage(i.containerId);n===this.settings.pageId?this.toggle.call(this,t.values.checked,!0,!0):this.toggle.call(this,t.values.unchecked,!0,!0)}brease.appElem.addEventListener(BreaseEvent.PAGE_LOADED,this._bind("_pageLoadedHandler"))},s.setPageId=function(e){this.settings.pageId=e},s.getPageId=function(){return this.settings.pageId},s.setIsToggle=function(e){this.settings.isToggle=e},s.getIsToggle=function(){return this.settings.isToggle},s.toggle=function(e,i,n){if(this.settings.isToggle===!0&&(this.settings.value===t.values.unchecked||i&&n)&&t.prototype.toggle.apply(this,arguments),n!==!0&&(this.settings.value===t.values.checked||this.settings.isToggle===!1))try{var s=brease.pageController.getVisuById(brease.pageController.getVisu4Page(this.settings.pageId)),r=document.getElementById(s.containerId);brease.pageController.loadPage(this.settings.pageId,r,!0)}catch(a){t.prototype.toggle.call(this,t.values.unchecked)}},s._pageLoadedHandler=function(e){var i=brease.pageController.getVisuById(brease.pageController.getVisu4Page(e.detail.pageId));void 0!==i&&null!==this.el&&e.detail.containerId===i.containerId&&(e.detail.pageId===this.settings.pageId?this.toggle.call(this,t.values.checked,!0,!0):this.toggle.call(this,t.values.unchecked,!0,!0))},s.wake=function(){brease.appElem.addEventListener(BreaseEvent.PAGE_LOADED,this._bind("_pageLoadedHandler")),t.prototype.wake.apply(this,arguments)},s.suspend=function(){brease.appElem.removeEventListener(BreaseEvent.PAGE_LOADED,this._bind("_pageLoadedHandler")),t.prototype.suspend.apply(this,arguments)},s.dispose=function(){brease.appElem.removeEventListener(BreaseEvent.PAGE_LOADED,this._bind("_pageLoadedHandler")),t.prototype.dispose.apply(this,arguments)},n}),define("widgets/brease/NumericInput/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.NumericInput",parents:["*"],children:[],inheritance:["widgets.brease.NumericInput","brease.core.BaseWidget"],actions:{setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFormat:{method:"setFormat",parameter:{format:{name:"format",index:0,type:"brease.config.MeasurementSystemFormat"}}},setKeyboard:{method:"setKeyboard",parameter:{keyboard:{name:"keyboard",index:0,type:"Boolean"}}},setLimitViolationPolicy:{method:"setLimitViolationPolicy",parameter:{limitViolationPolicy:{name:"limitViolationPolicy",index:0,type:"brease.enum.LimitViolationPolicy"}}},setMaxValue:{method:"setMaxValue",parameter:{maxValue:{name:"maxValue",index:0,type:"Number"}}},setMinValue:{method:"setMinValue",parameter:{minValue:{name:"minValue",index:0,type:"Number"}}},setNode:{method:"setNode",parameter:{node:{name:"node",index:0,type:"brease.datatype.Node"}}},setNumPadStyle:{method:"setNumPadStyle",parameter:{numPadStyle:{name:"numPadStyle",index:0,type:"String"}}},setNumpadPosition:{method:"setNumpadPosition",parameter:{numpadPosition:{name:"numpadPosition",index:0,type:"brease.enum.Position"}}},setReadonly:{method:"setReadonly",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setShowUnit:{method:"setShowUnit",parameter:{showUnit:{name:"showUnit",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setSubmitOnChange:{method:"setSubmitOnChange",parameter:{submitOnChange:{name:"submitOnChange",index:0,type:"Boolean"}}},setUnit:{method:"setUnit",parameter:{unit:{name:"unit",index:0,type:"brease.config.MeasurementSystemUnit"}}},setUnitAlign:{method:"setUnitAlign",parameter:{unitAlign:{name:"unitAlign",index:0,type:"brease.enum.ImageAlign"}}},setUnitWidth:{method:"setUnitWidth",parameter:{value:{name:"value",index:0,type:"Size"}}},setUseDigitGrouping:{method:"setUseDigitGrouping",parameter:{useDigitGrouping:{name:"useDigitGrouping",index:0,type:"Boolean"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"Number"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SubmitChange:{method:"submitChange"}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("widgets/brease/NumericInput/libs/Config",["brease/enum/Enum"],function(Enum){"use strict";var config={numpadPosition:Enum.Position.right,submitOnChange:!0,value:0,maxValue:100,minValue:0,format:{"default":{decimalPlaces:1,minimumIntegerDigits:1}},useDigitGrouping:!0,unitAlign:Enum.ImageAlign.left,showUnit:!0,keyboard:!0,ellipsis:!1,limitViolationPolicy:Enum.LimitViolationPolicy.NO_SUBMIT,unit:null,node:null,numPadStyle:"default",unitWidth:"0"};return config}),define("text!widgets/brease/NumericInput/NumericInput.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/NumericInput"></div>\r\n'}),define("widgets/brease/NumPad/libs/NumPadSlider",["brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils"],function(BreaseEvent,Enum,Utils){"use strict";var e={init:function(e){return this.thumb=e.el.find(".numpadSlider_thumb"),this.track=e.el.find(".numpadSlider_track"),this.outputVal=e.el.find(".numpadSlider_output span"),this.settings={error:!1,width:this.track.outerWidth(),thumbWidth:this.thumb.outerWidth(),zoomFactor:this.getZoomFactor()},this.changeHandler=e._onSliderChanged.bind(e),this.thumb.on(BreaseEvent.MOUSE_DOWN,this.onMouseDown.bind(this)),this.track.on(BreaseEvent.CLICK,this.trackClickHandler.bind(this)),this.bound_onMouseMove=this.onMouseMove.bind(this),this.bound_onMouseUp=this.onMouseUp.bind(this),this},update:function(){this.settings.zoomFactor=this.getZoomFactor()},setSettings:function(e,t,i,n,s,r,a){this.settings.minValue=e,this.settings.maxValue=t,this.settings.smallChange=i,this.settings.largeChange=n,this.settings.numberFormat=s,this.settings.useDigitGrouping=r,this.settings.separators=a},setValue:function(e,i){if(void 0!==e&&(this.value=e,null!==this.value)){var n=Math.round(e/this.settings.smallChange)*this.settings.smallChange,s;n=t(n,this.settings.minValue,this.settings.maxValue),s=this.valToPos(n),n>=this.settings.minValue&&n<=this.settings.maxValue&&(this.value=n,this.setPosition(s),this.setOutput(),i!==!0&&this.changeHandler({detail:{value:this.value}}))}},setValueAsString:function(e){this.outputVal.text(e)},setOutput:function(){null===this.value?this.outputVal.text(brease.settings.noValueString):this.outputVal.text(brease.formatter.formatNumber(this.value,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators))},setError:function(e){var t=e!==this.settings.error;this.settings.error=e,t&&(e?this.outputVal.addClass("error"):this.outputVal.removeClass("error"))},onMouseDown:function(e){this.mouseMove=!0,n.call(this,e),brease.bodyEl.on(BreaseEvent.MOUSE_MOVE,this.bound_onMouseMove),brease.bodyEl.on(BreaseEvent.MOUSE_UP,this.bound_onMouseUp)},onMouseMove:function(e){i.call(this,e)},onMouseUp:function(e){this.mouseMove=!1,brease.bodyEl.off(BreaseEvent.MOUSE_MOVE),brease.bodyEl.off(BreaseEvent.MOUSE_UP),i.call(this,e)},getZoomFactor:function(){var e=brease.bodyEl.css("zoom");return void 0===e||"normal"===e||"auto"===e?1:parseFloat(e)},trackClickHandler:function(e){var i=this.value;if(!this.mouseMove){var n=this.calcOffset(e),s=this.calcStep(n,i);s=t(s,this.settings.minValue,this.settings.maxValue),this.setValue(s)}this.mouseMove=!1},calcOffset:function(e){var t=this.thumb.offset().left,i=Utils.getOffsetOfEvent(e).x/this.settings.zoomFactor;return i-t-this.settings.thumbWidth/2},calcStep:function(e,t){var i;return e>0?i=t+this.settings.largeChange:0>e&&(i=t-this.settings.largeChange),i},posToVal:function(e){var i=this.settings.width*this.settings.zoomFactor,n=e*(this.settings.maxValue/i-this.settings.minValue/i)+this.settings.minValue;return t(n,this.settings.minValue,this.settings.maxValue)},valToPos:function(e){var i;return e=t(e,this.settings.minValue,this.settings.maxValue),i=this.settings.maxValue===-this.settings.minValue?this.settings.width/this.settings.maxValue/2*e-this.rangeToPixels(this.settings.minValue):this.settings.width*e/(this.settings.maxValue-this.settings.minValue)-this.rangeToPixels(this.settings.minValue),i},rangeToPixels:function(e){var t;return t=this.settings.maxValue===-this.settings.minValue?e/2/this.settings.maxValue*this.settings.width:e*this.settings.width/(this.settings.maxValue-this.settings.minValue),t},setPosition:function(e){this.thumb.css("left",e-this.settings.thumbWidth/2)}};function t(e,t,i){return t>e&&(e=t),e>i&&(e=i),e}function i(e){var t=Utils.getOffsetOfEvent(e).x,i=t-this.thumbOffset*this.settings.zoomFactor,n=this.posToVal(i);this.setValue(n)}function n(e){this.thumbOffset=this.track.offset().left}return e}),define("widgets/brease/NumPad/NumPad",["widgets/brease/Window/Window","brease/events/BreaseEvent","brease/enum/Enum","brease/core/Utils","brease/config/NumberFormat","widgets/brease/NumPad/libs/NumPadSlider"],function(e,BreaseEvent,Enum,Utils,NumberFormat,t){"use strict";var i={html:"widgets/brease/NumPad/NumPad.html",stylePrefix:"widgets_brease_NumPad",limitViolationPolicy:Enum.LimitViolationPolicy.NO_SUBMIT,format:{"default":{decimalPlaces:1,minimumIntegerDigits:1}},width:354,arrow:{show:!0,position:"left",width:12},positionOffset:5,modal:!0,showCloseButton:!0,scale2fit:!0,precision:6},n,s=e.extend(function NumPad(t,i,s,r){if(r===!0)e.call(this,null,null,!0,!0),a(this);else{if(void 0!==n)return n;e.call(this,null,null,!0,!0),a(this),n=this}},i),r=s.prototype;r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseNumPad"),this.settings.windowType="NumPad",e.prototype.init.call(this,!0),this.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),this.settings.numberFormat=NumberFormat.getFormat(this.settings.format,this.settings.mms),this.settings.separators=brease.user.getSeparators(),this.minEl=this.el.find(".minValue"),this.maxEl=this.el.find(".maxValue"),this.buttons={sign:this.el.find('button[data-action="sign"]'),comma:this.el.find('button[data-action="comma"]'),"delete":this.el.find('button[data-action="delete"]'),enter:this.el.find('button[data-action="enter"]')},this.error=!1,this.numRegExp=new RegExp("[0-9]")},r.show=function(t,i){t=b(t),e.prototype.show.call(this,t,i),this.closeOnLostContent(i),this.settings.mms=brease.measurementSystem.getCurrentMeasurementSystem(),this.settings.numberFormat=NumberFormat.getFormat(this.settings.format,this.settings.mms),this.settings.separators=brease.user.getSeparators(),this.settings.smallChange=this.settings.numberFormat.decimalPlaces>0?1/Math.pow(10,this.settings.numberFormat.decimalPlaces):1,void 0!==this.settings.minValue&&void 0!==this.settings.maxValue?(this.settings.largeChange=Math.pow(10,Math.round(Math.log10(this.settings.maxValue/10-this.settings.minValue/10))),c.call(this)):this.settings.largeChange=10*this.settings.smallChange;var n=g.call(this,this.settings.minValue);this.minEl.html(d.call(this,n));var s=h.call(this,this.settings.maxValue);this.maxEl.html(d.call(this,s)),this.slider.setSettings(n,s,this.settings.smallChange,this.settings.largeChange,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators),this.slider.update(),this.setValue(this.settings.value),this.outputIsInitialized=!1,this.buttons.comma.html(this.settings.separators.dsp),brease.bodyEl.on("keydown",this._bind("_keyDownHandler")),brease.bodyEl.on("keypress",this._bind("_keyUpHandler"))},r.hide=function(){brease.bodyEl.off("keypress",this._bind("_keyUpHandler")),brease.bodyEl.off("keydown",this._bind("_keyDownHandler")),e.prototype.hide.call(this)},r.setValue=function(e){m.call(this,e),this.slider.setValue(this.getValue(),!0)},r.setValueAsString=function(e,t,i){e=0===e.indexOf("0")&&1!==e.indexOf(this.settings.separators.dsp)?e.substring(1):e,e=""!==e&&"-"!==e?e:"-"===e?"-0":"0";var n=brease.formatter.parseFloat(e,this.settings.separators);isNaN(n)?(this.strValue=t?t:this.strValue,this.value=brease.formatter.parseFloat(this.strValue,this.settings.separators)):(this.strValue=e,this.value=""!==this.strValue?brease.formatter.parseFloat(this.strValue,this.settings.separators):0,this.slider.setValue(this.value,!0),this.slider.setValueAsString(this.strValue),"-"===this.strValue.substring(0,1)?f(this,!0):f(this,!1),u.call(this,this.value)),i!==!0&&(this.outputIsInitialized=!0)},r.getValue=function(){return this.value},r._buttonClickHandler=function(e){this._handleEvent(e,!0);var t=$(e.currentTarget),i=""+t.attr("data-action"),n=t.attr("data-value"),s=this.strValue,r;switch(i){case"delete":this.setValueAsString(s.substring(0,s.length-1),s),this.outputIsInitialized=!0;break;case"comma":this.outputIsInitialized===!1&&(s="0"),-1===s.indexOf(this.settings.separators.dsp)&&(this.setValueAsString(s+this.settings.separators.dsp,s),this.outputIsInitialized=!0);break;case"sign":var a=!0;this.negativeSign?(r=s.replace("-",""),a=!1):(r="-"+s,a=!0),f(this,a),this.setValueAsString(r,s,!0);break;case"enter":v.call(this),this.outputIsInitialized=!0;break;case"value":if(this.outputIsInitialized===!1)this.setValueAsString(("-"===s.substring(0,1)?"-":"")+n,s),
this.outputIsInitialized=!0;else{r=s+n;var o=r.indexOf(this.settings.separators.dsp),l=-1!==o?r.substring(o+1):"";l.length<=this.settings.numberFormat.decimalPlaces&&(this.setValueAsString(s+n,s),this.outputIsInitialized=!0)}}},r._keyDownHandler=function(e){8===e.keyCode&&(e.preventDefault(),this._keyUpHandler(e))},r._keyUpHandler=function(e){var t=String.fromCharCode(e.keyCode||e.charCode);this.numRegExp.test(t)?this.el.find('button[data-value="'+t+'"]').triggerHandler({type:BreaseEvent.CLICK}):","===t?this.buttons.comma.triggerHandler({type:BreaseEvent.CLICK}):"-"===t||"+"===t?this.buttons.sign.triggerHandler({type:BreaseEvent.CLICK}):8===e.keyCode?this.buttons["delete"].triggerHandler({type:BreaseEvent.CLICK}):13===e.keyCode&&this.buttons.enter.triggerHandler({type:BreaseEvent.CLICK})},r._onSliderChanged=function(e){this.getValue()!==e.detail.value&&(this.outputIsInitialized=!1,m.call(this,e.detail.value))};function a(e){require(["text!"+e.settings.html],function(i){e.deferredInit.call(e,document.body,i,!0),e.slider=t.init(e),e.el.find(".breaseNumPadButtons button").on(BreaseEvent.CLICK,e._bind("_buttonClickHandler")).on(BreaseEvent.MOUSE_DOWN,e._bind(o)),e.readyHandler()})}function o(e){this.activeButton&&Utils.removeClass(this.activeButton,"active"),this.activeButton=e.target,Utils.addClass(this.activeButton,"active"),brease.docEl.on(BreaseEvent.MOUSE_UP,this._bind(l))}function l(){brease.docEl.off(BreaseEvent.MOUSE_UP,this._bind(l)),Utils.removeClass(this.activeButton,"active"),this.activeButton=void 0}function d(e){return isNaN(e)?brease.settings.noValueString:brease.formatter.formatNumber(e,this.settings.numberFormat,this.settings.useDigitGrouping,this.settings.separators)}function u(e){return e<this.settings.minValue?this.error=!0:e>this.settings.maxValue?this.error=!0:this.error=!1,this.slider.setError(this.error),e}function c(){this.settings.minValue=brease.formatter.roundToSignificant(this.settings.minValue,this.settings.precision),this.settings.maxValue=brease.formatter.roundToSignificant(this.settings.maxValue,this.settings.precision)}function g(e){return p.call(this,e,"min")}function h(e){return p.call(this,e,"max")}function p(e,t){var i=Math.abs(e),n=Math.max(1,Math.pow(10,this.settings.numberFormat.decimalPlaces)),s=brease.formatter.roundToFormat(e,this.settings.numberFormat.decimalPlaces);return"max"===t&&s>e&&i>1/n&&(s-=1/n),"min"===t&&e>s&&i>1/n&&(s+=1/n),s}function m(e){this.value=u.call(this,e),this.strValue=d.call(this,this.value),this.value>=0?f(this,!1):f(this,!0)}function f(e,t){t!==e.negativeSign&&(e.negativeSign=t,t===!0?e.buttons.sign.addClass("active"):e.buttons.sign.removeClass("active"))}function v(){var e=!1,t=!1,i=this.getValue();if(i>=this.settings.minValue&&i<=this.settings.maxValue)e=!0,t=!0;else switch(this.settings.limitViolationPolicy){case Enum.LimitViolationPolicy.NO_SUBMIT:e=!1,t=!1;break;case Enum.LimitViolationPolicy.NO_SUBMIT_AND_CLOSE:e=!1,t=!0;break;case Enum.LimitViolationPolicy.SUBMIT_ALL:e=!0,t=!0;break;case Enum.LimitViolationPolicy.SET_TO_LIMIT:Math.abs(i-this.settings.maxValue)<Math.abs(i-this.settings.minValue)?this.setValue(this.settings.maxValue):this.setValue(this.settings.minValue),e=!1,t=!1;break;case Enum.LimitViolationPolicy.SET_TO_LIMIT_AND_SUBMIT:Math.abs(i-this.settings.maxValue)<Math.abs(i-this.settings.minValue)?this.setValue(this.settings.maxValue):this.setValue(this.settings.minValue),e=!0,t=!0}e===!0&&this.dispatchEvent(new CustomEvent(BreaseEvent.SUBMIT,{detail:{value:this.getValue()}})),t===!0&&this.hide()}function b(e){if(e.arrow=e.arrow||{},e.position){var t=e.position;"left"===t.horizontal?(e.position.vertical="middle",e.arrow.position="right",e.arrow.show=!0):"right"===t.horizontal?(e.position.vertical="middle",e.arrow.position="left",e.arrow.show=!0):"top"===t.vertical?(e.position.horizontal="center",e.arrow.position="bottom",e.arrow.show=!0):"bottom"===t.vertical?(e.position.horizontal="center",e.arrow.position="top",e.arrow.show=!0):(e.position.vertical="middle",e.position.horizontal="center",e.arrow.show=!1)}else e.position={vertical:"middle",horizontal:"center"},e.arrow.show=!1;return e}return s}),define("widgets/brease/NumericInput/NumericInput",["brease/core/BaseWidget","brease/decorators/LanguageDependency","brease/decorators/MeasurementSystemDependency","brease/enum/Enum","brease/core/Types","brease/datatype/Node","widgets/brease/NumPad/NumPad","brease/events/BreaseEvent","brease/config/NumberFormat","widgets/brease/NumericInput/libs/Config","brease/core/Utils","widgets/brease/common/libs/BoxLayout"],function(e,t,i,Enum,Types,Node,NumPad,BreaseEvent,NumberFormat,Config,Utils,BoxLayout){"use strict";var n="unit",s=Config,r=e.extend(function NumericInput(){e.apply(this,arguments)},s),a=r.prototype;a.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseNumericInput");var t=brease.user.getSeparators();this.measurementSystemChangePromise=null,this.unitChangePromise=null,this.nodeChangeResolve=null,this.numPadReadyResolve=null,this.settings.tabIndex=1,this.settings.regexp=new RegExp("^\\s*(\\+|-)?((\\d+(\\"+t.dsp+"\\d+)?)|(\\d+(\\"+t.dsp+")?))\\s*$"),this.settings.unitSymbol="",this.settings.nodeObject=g(this,this.settings.node),this.settings.unitObject=C(this,this.settings.unit),this.settings.formatObject=C(this,this.settings.format),this.settings.readonly=Types.parseValue(this.settings.readonly,"Boolean",{"default":!1}),l(this),d(this),v(this),T(this),S(this),e.prototype.init.call(this)},a.setNode=function(e){if(Utils.isObject(e)){if(this.settings.nodeObject){var t=I(this,e.value);this.settings.nodeObject.setValue(t),this.settings.nodeObject.setMinValue(e.minValue),this.settings.nodeObject.setMaxValue(e.maxValue),this.settings.nodeObject.setUnit(e.unit)}else this.settings.nodeObject=g(this,e);var i=w(this);this.settings.nodeObject.unit&&i&&this.settings.nodeObject.unit!==i?this.sendNodeChange({attribute:"node",nodeAttribute:"unit",value:i}):this.nodeChangeResolve&&this.nodeChangeResolve()}else this.settings.nodeObject=null;h(this)},a.getNode=function(){return this.settings.nodeObject?this.settings.nodeObject:new Node(this.getValue(),w(this),this.getMinValue(),this.getMaxValue())},a.setValue=function(e){"boolean"==typeof e&&(e=Number(e));var t=I(this,e),i=this.settings.nodeObject;i?i.setValue(t):this.settings.value=t,h(this)},a.getValue=function(){return this.settings.nodeObject?null!==this.settings.nodeObject.getValue()?this.settings.nodeObject.getValue():brease.settings.noValueString:this.settings.value},a.setMinValue=function(e){var t=this.settings.nodeObject;t?t.setMinValue(e):this.settings.minValue=e},a.getMinValue=function(){return this.settings.nodeObject?this.settings.nodeObject.getMinValue():this.settings.minValue},a.setMaxValue=function(e){var t=this.settings.nodeObject;t?t.setMaxValue(e):this.settings.maxValue=e},a.getMaxValue=function(){return this.settings.nodeObject?this.settings.nodeObject.getMaxValue():this.settings.maxValue},a.setEllipsis=function(e){this.settings.ellipsis=Types.parseValue(e,"Boolean",{"default":!1}),f(this)},a.getEllipsis=function(){return this.settings.ellipsis},a.setFormat=function(e){e&&(this.settings.format=e,this.settings.formatObject=C(this,e),h(this)),S(this)},a.getFormat=function(){return this.settings.format},a.setKeyboard=function(e){if(this.settings.keyboard=e,e){c(this);var t=this;A(this).then(function(){t.numPadReadyResolve=null})}else N(this),u(this)},a.getKeyboard=function(){return this.settings.keyboard},a.setLimitViolationPolicy=function(e){this.settings.limitViolationPolicy=e},a.getLimitViolationPolicy=function(){return this.settings.limitViolationPolicy},a.setNumPadStyle=function(e){this.settings.numPadStyle=e},a.getNumPadStyle=function(){return this.settings.numPadStyle},a.setNumpadPosition=function(e){this.settings.numpadPosition=e},a.getNumpadPosition=function(){return this.settings.numpadPosition},a.setShowUnit=function(e){this.settings.showUnit=e,m(this)},a.getShowUnit=function(){return this.settings.showUnit},a.setSubmitOnChange=function(e){this.settings.submitOnChange=e},a.getSubmitOnChange=function(){return this.settings.submitOnChange},a.setUnit=function(e){this.settings.unit=e,this.settings.unitObject=C(this,e),S(this);var t=this;t.unitChangePromise=P(this),t.unitChangePromise.then(function(){t.unitChangePromise=null})},a.getUnit=function(){return this.settings.unit},a.setUnitAlign=function(e){this.settings.unitAlign=e,v(this),b(this)},a.getUnitAlign=function(){return this.settings.unitAlign},a.setUnitWidth=function(e){this.settings.unitWidth=e,b(this)},a.getUnitWidth=function(){return this.settings.unitWidth},a.setUseDigitGrouping=function(e){this.settings.useDigitGrouping=e,h(this)},a.getUseDigitGrouping=function(){return this.settings.useDigitGrouping},a.setReadonly=function(e){this.settings.readonly=e,e?(this.inputEl.off("focusin",this._bind("_onFocusIn")),this.inputEl.off("focusout",this._bind("_onFocusOut")),N(this)):this.setKeyboard(this.getKeyboard())},a.getReadonly=function(){return this.settings.readonly},a.submitChange=function(){var e=this.settings.nodeObject?this.settings.nodeObject:new Node(this.getValue(),w(this),this.getMinValue(),this.getMaxValue());this.sendValueChange({value:this.getValue(),node:e});var t=this.createEvent("ValueChanged",{value:this.getValue()});t.dispatch()};function o(e){e.dispatchEvent(new CustomEvent(BreaseEvent.CHANGE,{detail:{value:e.getValue()}}))}a.setEditable=function(e,t){if(void 0!==t&&void 0!==t.refAttribute){var i=t.refAttribute;("value"===i||"node"===i)&&(this.settings.editable=e,this._internalEnable())}},a.disable=function(){(this.getKeyboard()===!1||this.getReadonly())&&this.inputEl.attr("tabindex",-1),e.prototype.disable.apply(this,arguments)},a.enable=function(){this.getKeyboard()===!1&&this.getReadonly()===!1&&this.inputEl.attr("tabindex",this.settings.tabIndex),e.prototype.enable.apply(this,arguments)},a._clickHandler=function(t){this._handleEvent(t),this.isDisabled||this.getReadonly()||!this.getKeyboard()||brease.config.editMode===!0||this._showNumPad(this),e.prototype._clickHandler.call(this,t)},a.dispose=function(){N(this),this.inputEl.off(),this.inputEl.off("change",this._bind("_inputChangeHandler")),$(document).off(BreaseEvent.CLICK,this._bind("_documentClickHandler")),e.prototype.dispose.apply(this,arguments)},a.langChangeHandler=function(e){T(this)},a.measurementSystemChangeHandler=function(){var e=this;e.measurementSystemChangePromise=P(this),e.measurementSystemChangePromise.then(function(){e.measurementSystemChangePromise=null})},a.isMeasurementSystemChangeDone=function(){return this.measurementSystemChangePromise?!1:!0},a.isUnitChangeDone=function(){return this.unitChangePromise?!1:!0},a.writeUnit=function(e){this.settings.unitSymbol=e,p(this)},a.showValue=function(){h(this)},a.showUnit=function(){T(this)},a.processMeasurementSystemUpdate=function(){this.measurementSystemChangeHandler()},a.resetValue=function(){this.setValue(this.settings.nodeObject.getValue())},a._onFocusIn=function(e){this.isDisabled===!0?this.inputEl.blur():($(document).on(BreaseEvent.CLICK,this._bind("_documentClickHandler")),this.inputEl[0].focus(),this.inputEl[0].addEventListener("keypress",this._bind("_onKeyPress")),this.inputEl[0].addEventListener("keyup",this._bind("_onKeyUp")),this.el.addClass("active"))},a._onFocusOut=function(e){var t=brease.formatter.parseFloat(this.inputEl.val(),brease.user.getSeparators());t=y(this,t,this.getValue()),this.setValue(t),o(this),(this.getSubmitOnChange()===!0||this.forceSend===!0)&&this.submitChange(),this.forceSend=!1,this.removeFocus()},a._onKeyUp=function(e){var t=new RegExp("\\"+brease.user.getSeparators().gsp,"g"),i=this.inputEl.val().replace(t,"");""!==i&&"-"!==i&&"+"!==i&&void 0!==this.settings.regexp&&this.settings.regexp.test(i)===!1&&this.inputEl.val(this.oldValue)},a._onKeyPress=function(e){var t=e.keyCode||e.which;return 13===t?(this.forceSend=!0,this.inputEl.blur(),void 0):(this.oldValue=this.inputEl.val(),void 0)},a._documentClickHandler=function(e){$.containsOrEquals(this.elem,e.target)===!1&&this.inputEl.blur()},a.removeFocus=function(){this.inputEl[0].removeEventListener("keypress",this._bind("_onKeyPress")),this.inputEl[0].removeEventListener("keyup",this._bind("_onKeyUp")),$(document).off(BreaseEvent.CLICK,this._bind("_documentClickHandler")),this.el.removeClass("active")},a._showNumPad=function(){D(this)&&(this._generateNumPadSettings(),_(this),this.numPad.show(this.numPadSettings,this.elem),this.el.addClass("active"))},a._hideNumPad=function(){D(this)&&this.numpad.hide()},a._generateNumPadSettings=function(){this.numPadSettings={minValue:this.getMinValue(),maxValue:this.getMaxValue(),value:this.getValue(),useDigitGrouping:this.getUseDigitGrouping(),limitViolationPolicy:this.getLimitViolationPolicy(),position:{horizontal:this.getNumpadPosition(),vertical:this.getNumpadPosition()},pointOfOrigin:"element",arrow:{position:"left"===this.getNumpadPosition()?"right":"left"},header:this.settings.header,format:this.settings.formatObject},this.settings.numPadStyle&&(this.numPadSettings.style=this.settings.numPadStyle)},a.numPadReadyHandler=function(e){"breaseNumPad"===e.target.id&&(document.body.removeEventListener(BreaseEvent.WIDGET_READY,this._bind("numPadReadyHandler")),this.numPadReadyResolve&&this.numPadReadyResolve())},a._onNumPadClose=function(){L(this),this.el.removeClass("active")},a._onNumPadSubmit=function(e){this.setValue(e.detail.value),o(this),this.getSubmitOnChange()&&this.submitChange()},a._inputChangeHandler=function(e){e.stopPropagation()},a._createInputEl=function(){var e={value:"",type:"text",autocomplete:"off",tabindex:this.getKeyboard()===!1&&this.getReadonly()===!1?this.settings.tabIndex:-1};(this.getKeyboard()||this.getReadonly())&&(e.readonly="readonly");var t=$("<input/>").attr(e);return this.getKeyboard()!==!0&&t.addClass("keyboard"),t},a._createUnitEl=function(){return $("<span></span>").addClass("breaseNumericInput_unit")};function l(e){e.inputEl=e._createInputEl(),e.unitEl=e._createUnitEl(),e.inputBox=BoxLayout.createBox(),e.inputBox.classList.add("box-input"),e.unitBox=BoxLayout.createBox(),e.unitBox.classList.add("box-unit"),e.inputBox.appendChild(e.inputEl.get(0)),e.unitBox.appendChild(e.unitEl.get(0)),e.boxContainer=BoxLayout.createBoxContainer(),e.boxContainer.appendChild(e.inputBox),e.boxContainer.appendChild(e.unitBox),e.setShowUnit(e.getShowUnit()),e.setEllipsis(e.getEllipsis()),e.setKeyboard(e.getKeyboard()),e.elem.appendChild(e.boxContainer)}function d(e){e.inputEl.on("change",e._bind("_inputChangeHandler"))}function u(e){e.inputEl.on("focusin",e._bind("_onFocusIn")),e.inputEl.on("focusout",e._bind("_onFocusOut"))}function c(e){e.inputEl.off("focusin",e._bind("_onFocusIn")),e.inputEl.off("focusout",e._bind("_onFocusOut"))}function g(e,t){if(t){var i=I(e,t.value);return new Node(i,t.unit,t.minValue,t.maxValue,t.id)}return null}function h(e){var t=e.getValue(),i=x(e);void 0!==i.decimalPlaces&&Utils.isNumeric(t)?e.inputEl.val(brease.formatter.formatNumber(t,i,e.getUseDigitGrouping(),brease.user.getSeparators())):e.inputEl.val(brease.settings.noValueString)}function p(e){brease.config.editMode&&!$.isEmptyObject(e.settings.unitObject)?e.unitEl.text(n):e.unitEl.text(e.settings.unitSymbol||""),b(e)}function m(e){e.settings.showUnit===!1?e.unitBox.style.display="none":e.unitBox.style.display="flex",b(e)}function f(e){e.settings.ellipsis?e.el.addClass("ellipsis"):e.el.removeClass("ellipsis")}function v(e){switch(e.el.removeClass("unitAlign-left"),e.el.removeClass("unitAlign-right"),e.el.removeClass("unitAlign-top"),e.el.removeClass("unitAlign-bottom"),e.settings.unitAlign){case Enum.ImageAlign.right:BoxLayout.setOrientation(e.boxContainer,Enum.Orientation.LTR),e.el.addClass("unitAlign-right");break;case Enum.ImageAlign.top:BoxLayout.setOrientation(e.boxContainer,Enum.Orientation.BTT),e.el.addClass("unitAlign-top");break;case Enum.ImageAlign.bottom:BoxLayout.setOrientation(e.boxContainer,Enum.Orientation.TTB),e.el.addClass("unitAlign-bottom");break;default:BoxLayout.setOrientation(e.boxContainer,Enum.Orientation.RTL),e.el.addClass("unitAlign-left")}}function b(e){var t=e.getUnitWidth();if(!E(e,t))return e.inputBox.style.width="",e.unitBox.style.flex="",void 0;var i="",n="",s=t;if(void 0!==t&&""!==t){if(isNaN(t)){if(t.endsWith("%")){var r=t.substring(0,t.length-1);isNaN(r)||(i=100-parseFloat(r),0>i&&(i=0),i+="%")}}else s=t+"px";n="0 0 "+s}e.inputBox.style.width=i,e.unitBox.style.flex=n}function y(e,t,i){if(isNaN(t)&&(t=i),t>e.getMaxValue()||t<e.getMinValue())switch(e.getLimitViolationPolicy()){case Enum.LimitViolationPolicy.SET_TO_LIMIT:case Enum.LimitViolationPolicy.SET_TO_LIMIT_AND_SUBMIT:t>e.getMaxValue()&&(t=e.getMaxValue()),t<e.getMinValue()&&(t=e.getMinValue());break;case Enum.LimitViolationPolicy.SUBMIT_ALL:break;default:t=i}return t}function E(e,t){return e.getShowUnit()===!1||!e.unitEl.text()||e.getUnitAlign()===Enum.ImageAlign.top||e.getUnitAlign()===Enum.ImageAlign.bottom||0>=t?!1:!0}function x(e){var t=null,i=brease.measurementSystem.getCurrentMeasurementSystem();return t=e.settings.formatObject?NumberFormat.getFormat(e.settings.formatObject,i):NumberFormat.getFormat({},i),t}function I(e,t){var i=x(e),n=t;return n=Utils.isNumeric(t)?Math.roundTo(t,i.decimalPlaces):brease.settings.noValueString,n}function w(e){var t=e.settings.unitObject;return t?t[brease.measurementSystem.getCurrentMeasurementSystem()]:null}function C(e,t){if(Utils.isObject(t)||null===t)return t;if(brease.language.isKey(t))try{var i=brease.language.parseKey(t);return JSON.parse(brease.language.getTextByKey(i).replace(/\'/g,'"'))}catch(n){console.iatWarn(e.elem.id+': String "'+t+'" is invalid!')}else if(Utils.isString(t))try{return JSON.parse(t.replace(/\'/g,'"'))}catch(n){console.iatWarn(e.elem.id+': String "'+t+'" is invalid!')}return null}function S(e){brease.language.isKey(e.getUnit())||brease.language.isKey(e.getFormat())?e.setLangDependency(!0):e.setLangDependency(!1)}function T(e){B(e).then(function(){p(e),h(e)})}function A(e){e.numPad||(e.numPad=new NumPad);var t=new Promise(function(t,i){e.numPadReadyResolve=t,D(e)?e.numPadReadyResolve():document.body.addEventListener(BreaseEvent.WIDGET_READY,e._bind("numPadReadyHandler"))});return t}function D(e){return e.numPad&&e.numPad.state===Enum.WidgetState.READY?!0:!1}function _(e){e.numPad.addEventListener(BreaseEvent.CLOSED,e._bind("_onNumPadClose")),e.numPad.addEventListener(BreaseEvent.SUBMIT,e._bind("_onNumPadSubmit"))}function L(e){e.numPad.removeEventListener(BreaseEvent.CLOSED,e._bind("_onNumPadClose")),e.numPad.removeEventListener(BreaseEvent.SUBMIT,e._bind("_onNumPadSubmit"))}function N(e){e.numPad&&e.numPad.elem&&(L(e),e.numPad=null)}function P(e){var t=B(e),i=O(e),n=[t,i];return Promise.all(n).then(function(i){e.nodeChangeResolve=null,t=null,p(e),h(e)})}function O(e){return new Promise(function(t,i){e.nodeChangeResolve=t;var n=e.settings.nodeObject,s=w(e);n&&n.getUnit()&&s&&n.getUnit()!==s?(e.settings.nodeObject.unit=s,e.sendNodeChange({attribute:"node",nodeAttribute:"unit",value:s})):t()})}function B(e){return new Promise(function(t,i){var n=w(e);n?brease.language.pipeAsyncUnitSymbol(n,function(i){e.settings.unitSymbol=i,t(i)}):(e.settings.unitSymbol="",t(""))})}return i.decorate(t.decorate(r,!1),!0)}),define("widgets/brease/NumericOutput/designer/ClassInfo",["widgets/brease/NumericInput/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.NumericOutput",parents:["*"],children:[],inheritance:["widgets.brease.NumericOutput","widgets.brease.NumericInput","brease.core.BaseWidget"],actions:{setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setFormat:{method:"setFormat",parameter:{format:{name:"format",index:0,type:"brease.config.MeasurementSystemFormat"}}},setKeyboard:{method:"setKeyboard",parameter:{keyboard:{name:"keyboard",index:0,type:"Boolean"}}},setLimitViolationPolicy:{method:"setLimitViolationPolicy",parameter:{limitViolationPolicy:{name:"limitViolationPolicy",index:0,type:"brease.enum.LimitViolationPolicy"}}},setMaxValue:{method:"setMaxValue",parameter:{maxValue:{name:"maxValue",index:0,type:"Number"}}},setMinValue:{method:"setMinValue",parameter:{minValue:{name:"minValue",index:0,type:"Number"}}},setNode:{method:"setNode",parameter:{node:{name:"node",index:0,type:"brease.datatype.Node"}}},setNumPadStyle:{method:"setNumPadStyle",parameter:{numPadStyle:{name:"numPadStyle",index:0,type:"String"}}},setNumpadPosition:{method:"setNumpadPosition",parameter:{numpadPosition:{name:"numpadPosition",index:0,type:"brease.enum.Position"}}},setReadonly:{method:"setReadonly",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setShowUnit:{method:"setShowUnit",parameter:{showUnit:{name:"showUnit",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setSubmitOnChange:{method:"setSubmitOnChange",parameter:{submitOnChange:{name:"submitOnChange",index:0,type:"Boolean"}}},setUnit:{method:"setUnit",parameter:{unit:{name:"unit",index:0,type:"brease.config.MeasurementSystemUnit"}}},setUnitAlign:{method:"setUnitAlign",parameter:{unitAlign:{name:"unitAlign",index:0,type:"brease.enum.ImageAlign"}}},setUnitWidth:{method:"setUnitWidth",parameter:{value:{name:"value",index:0,type:"Size"}}},setUseDigitGrouping:{method:"setUseDigitGrouping",parameter:{useDigitGrouping:{name:"useDigitGrouping",index:0,type:"Boolean"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"Number"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("widgets/brease/NumericOutput/libs/config",["brease/enum/Enum"],function(Enum){"use strict";var config={value:0,maxValue:100,minValue:0,format:{"default":{decimalPlaces:1,minimumIntegerDigits:1}},useDigitGrouping:!1,unitAlign:Enum.ImageAlign.left,showUnit:!0,ellipsis:!1,unit:null,node:null,unitWidth:"0"};return config}),define("text!widgets/brease/NumericOutput/NumericOutput.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/NumericOutput"></div>\r\n'}),define("widgets/brease/NumericOutput/libs/Config",["brease/enum/Enum"],function(Enum){"use strict";var config={value:0,maxValue:100,minValue:0,format:{"default":{decimalPlaces:1,minimumIntegerDigits:1}},useDigitGrouping:!1,unitAlign:Enum.ImageAlign.left,showUnit:!0,ellipsis:!1,unit:null,node:null,unitWidth:"0"};return config}),define("widgets/brease/NumericOutput/NumericOutput",["widgets/brease/NumericInput/NumericInput","brease/decorators/LanguageDependency","brease/decorators/MeasurementSystemDependency","brease/enum/Enum","brease/core/Types","brease/datatype/Node","brease/events/BreaseEvent","brease/config/NumberFormat","widgets/brease/NumericOutput/libs/Config","brease/core/Utils","widgets/brease/common/libs/BoxLayout"],function(e,t,i,Enum,Types,Node,BreaseEvent,NumberFormat,Config,Utils,BoxLayout){"use strict";var n=Config,s=e.extend(function NumericOutput(){e.apply(this,arguments)},n),r=s.prototype;return r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseNumericOutput"),this.settings.omitClass=!0,this.settings.readonly=!0,e.prototype.init.call(this)},r._createUnitEl=function(){return $("<span></span>").addClass("breaseNumericOutput_unit")},i.decorate(t.decorate(s,!1),!0)}),define("widgets/brease/NumPad/designer/ClassInfo",["widgets/brease/Window/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.NumPad",parents:["*"],children:[],inheritance:["widgets.brease.NumPad","widgets.brease.Window","brease.core.BaseWidget"],actions:{setEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/NumPad/NumPad.html",[],function(){return'<div id="breaseNumPad" data-brease-widget="widgets/brease/NumPad">\r\n    <header class="numpadHeader">\r\n        <div></div>\r\n    </header>\r\n    <div>\r\n        <div class="numpad">\r\n            <section class="breaseNumPadTop">\r\n                <div class="minValueBox">\r\n                    <label>min</label>\r\n                    <div class="minValue">0</div>\r\n                </div>\r\n                <div class="breaseNumpadSlider">\r\n                    <div class="numpadSlider_track"><div class="numpadSlider_track_inner">&nbsp;</div></div>\r\n                    <div class="numpadSlider_thumb">\r\n                        <div class="numpadSlider_knob"></div>\r\n                        <div class="numpadSlider_output"><span></span></div>\r\n                    </div>\r\n                </div>\r\n                <div class="maxValueBox">\r\n                    <label>max</label>\r\n                    <div class="maxValue">0</div>\r\n                </div>\r\n            </section>\r\n            <section class="breaseNumPadButtons">\r\n                <button data-action="value" data-value="7">7</button>\r\n                <button data-action="value" data-value="8">8</button>\r\n                <button data-action="value" data-value="9">9</button>\r\n                <button data-action="delete">&#8592;</button>\r\n                <button data-action="value" data-value="4">4</button>\r\n                <button data-action="value" data-value="5">5</button>\r\n                <button data-action="value" data-value="6">6</button>\r\n                <button data-action="sign">+/-</button>\r\n                <button data-action="value" data-value="1">1</button>\r\n                <button data-action="value" data-value="2">2</button>\r\n                <button data-action="value" data-value="3">3</button>\r\n                <button data-action="value" data-value="0">0</button>\r\n                <button data-action="comma">.</button>\r\n                <button class="breaseNumPadEnter" data-action="enter">&#8626;</button>\r\n                <div class="clearfix"></div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("widgets/brease/PDFViewer/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.PDFViewer",parents:["*"],children:[],inheritance:["widgets.brease.PDFViewer","brease.core.BaseWidget"],actions:{GoToPage:{method:"goToPage",parameter:{value:{name:"value",index:0,type:"UInteger"}}},setDocumentZoom:{method:"setDocumentZoom",parameter:{documentZoom:{name:"documentZoom",index:0,type:"String"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setShowToolbar:{method:"setShowToolbar",parameter:{showToolbar:{name:"showToolbar",index:0,type:"Boolean"}}},SetSrc:{method:"setSrc",parameter:{value:{name:"value",index:0,type:"String"}}},setStartPage:{method:"setStartPage",parameter:{startPage:{name:"startPage",index:0,type:"UNumber"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},setUsePlugin:{method:"setUsePlugin",parameter:{usePlugin:{name:"usePlugin",index:0,type:"Boolean"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/PDFViewer/PDFViewer.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/PDFViewer"></div>\r\n'}),define("widgets/brease/PDFViewer/PDFViewer",["require","brease/core/BaseWidget","brease/events/BreaseEvent","libs/pdfobject","brease/config","brease/controller/PopUpManager","brease/decorators/LanguageDependency","widgets/brease/NumPad/NumPad","brease/core/Utils"],function(e){"use strict";var t=e("brease/core/BaseWidget"),BreaseEvent=e("brease/events/BreaseEvent"),i=e("libs/pdfobject"),config=e("brease/config"),n=e("brease/controller/PopUpManager"),s=e("brease/decorators/LanguageDependency"),NumPad=e("widgets/brease/NumPad/NumPad"),Utils=e("brease/core/Utils"),r={usePlugin:!0,startPage:0,documentZoom:"auto",showToolbar:!1},a=t.extend(function PDFViewer(){t.apply(this,arguments)},r),o=a.prototype;o.init=function(){var e=this;this.pdfOpenParams={page:"",nameddest:"",zoom:"",toolbar:""},this.inlineOpenParams,this.pdfUrlOptions,this.url,this.numPad=new NumPad,this.jsViewerPath="widgets/brease/PDFViewer/assets/jsviewer/web/viewer_br.html",this.settings.omitClass!==!0&&this.addInitialClass("breasePDFViewer"),t.prototype.init.call(this),d(this),brease.config.editMode?I(this):(c(this),this.isFullscreen=!1)},o.load=function(e){this.settings.src=e,h(this)},o.getSrc=function(){return this.settings.src},o.setSrc=function(e,t){t!==!0&&(this.settings.srckey=null),brease.language.isKey(e)===!0?this.setSrcKey(brease.language.parseKey(e)):this.load(e)},o.setStartPage=function(e){this.settings.startPage=e},o.getStartPage=function(){return this.settings.startPage},o.setDocumentZoom=function(e){this.settings.documentZoom=e},o.getDocumentZoom=function(){return this.settings.documentZoom},o.setShowToolbar=function(e){this.settings.showToolbar=e},o.getShowToolbar=function(){return this.settings.showToolbar},o.setUsePlugin=function(e){this.settings.usePlugin=e},o.getUsePlugin=function(){return this.settings.usePlugin},o.goToPage=function(e){var t=Number(e);Number.isInteger(t)&&(this.settings.goToPage=t,h(this))},o.setSrcKey=function(e){void 0!==e&&(this.settings.srckey=e,this.setLangDependency(!0),this.langChangeHandler())},o.langChangeHandler=function(e){void 0!==this.settings.srckey&&this.load(brease.language.getTextByKey(this.settings.srckey))},o._onNumPadSubmit=function(e){this.numPad.removeEventListener(BreaseEvent.SUBMIT,this._bind("_onNumPadSubmit")),this.goToPage(e.detail.value)},o.suspend=function(){u(this),this.settings.goToPage=void 0,t.prototype.suspend.apply(this,arguments)},o.wake=function(){d(this),t.prototype.wake.apply(this,arguments)},o._numPadHandler=function(e){this.el&&this.elem&&this.numPad.addEventListener(BreaseEvent.SUBMIT,this._bind("_onNumPadSubmit"));var t=parseInt(e.detail.value),i=parseInt(e.detail.minValue),n=parseInt(e.detail.maxValue),s={minValue:i,maxValue:n,value:t,pointOfOrigin:"element",format:{"default":{decimalPlaces:0,minimumIntegerDigits:1}}};this.numPad.show(s,this.elem)},o._fullScreenHandler=function(e){this.elem&&E(this)},o.dispose=function(){window.clearTimeout(this.embedTimout),l(this),u(this),this.settings.goToPage=void 0,t.prototype.dispose.apply(this,arguments)};function l(e){e.numPad&&e.numPad.elem&&e.numPad.removeEventListener(BreaseEvent.SUBMIT,e._bind("_onNumPadSubmit"))}function d(e){document.addEventListener("openNumPad.PDFViewer",e._bind("_numPadHandler")),document.addEventListener("requestFullscreen.PDFViewer",e._bind("_fullScreenHandler"))}function u(e){document.removeEventListener("openNumPad.PDFViewer",e._bind("_numPadHandler")),document.removeEventListener("requestFullscreen.PDFViewer",e._bind("_fullScreenHandler"))}function c(e){void 0!==e.settings.src&&(brease.language.isKey(e.settings.src)===!1?e.setSrc(e.settings.src):e.setSrcKey(brease.language.parseKey(e.settings.src)))}function g(e){brease.config.editMode!==!0&&(p(e),e.settings.src?e.settings.usePlugin===!1?(e.pdfObject=f(e),e.pdfObject===!1&&e.el.html('<p style="width:80%; padding:2%;text-align:center;font-weight:bold;margin:auto;display:block;border:1px solid red;">no plugin available to display pdf documents</p>').css({"background-color":"#ffffff",width:e.settings.width+"px",height:e.settings.height+"px"})):v(e):config.warn===!0&&console.iatWarn('No PDF source given at widget PDFViewer[id="'+e.elem.id+'"]'));
}function h(e){var t;brease.config.editMode!==!0&&(void 0!==e.settings.src?(e.inlineOpenParams=y(e.settings.src),e.settings.usePlugin===!1?(t=void 0!==e.inlineOpenParams?b(e.settings.src,!0):b(e.settings.src,!1),p(e),void 0!==e.settings.goToPage&&(e.pdfOpenParams.page=e.settings.goToPage),e.pdfObject=f(e,t),e.pdfObject===!1&&e.el.html('<p style="width:80%; padding:2%;text-align:center;font-weight:bold;margin:auto;display:block;border:1px solid red;">no plugin available to display pdf documents</p>').css({"background-color":"#ffffff",width:e.settings.width+"px",height:e.settings.height+"px"})):(void 0===e.pdfFrame&&v(e),t=b(e.settings.src,!1),void 0!==e.inlineOpenParams?(void 0!==e.settings.goToPage&&(t=/page=/.test(t)===!0?t.replace(/page=\w*/,"page="+e.settings.goToPage):t.replace(/#/,"#page="+e.settings.goToPage+"&")),e.pdfFrame.attr("src",e.jsViewerPath+"?file="+t+"&widgetId="+e.elem.id)):(m(e),void 0!==e.settings.goToPage&&(e.pdfUrlOptions=e.pdfUrlOptions.replace(/page=\w*/,"page="+e.settings.goToPage)),e.pdfFrame.attr("src",e.jsViewerPath+"?file="+t+"&widgetId="+e.elem.id+e.pdfUrlOptions)))):config.warn===!0&&console.iatWarn('No PDF source given at widget PDFViewer[id="'+e.elem.id+'"]'))}function p(e){var t=e.settings,i=e.pdfOpenParams,n=e.inlineOpenParams;void 0!==n?(i.page=void 0===n.page?"":n.page,i.zoom=void 0===n.zoom?"":n.zoom,i.nameddest=void 0===n.nameddest?"":n.nameddest,i.toolbar=n.showToolbar===!0?1:0):(i.page=void 0===t.startPage||0===t.startPage?"":t.startPage,i.zoom=void 0===t.documentZoom||"auto"===t.documentZoom?"":t.documentZoom,i.nameddest=void 0===t.namedDest?"":t.namedDest,i.toolbar=t.showToolbar===!0?1:0)}function m(e){var t=e.settings,i="";i=""===t.startPage||void 0===t.startPage||0===t.startPage?"#page=":"#page="+t.startPage,i=""===t.namedDest||void 0===t.namedDest?i:i+"&nameddest="+t.namedDest,i=""===t.documentZoom||void 0===t.documentZoom?i+"&zoom=":i+"&zoom="+t.documentZoom,i=t.showToolbar===!0?i+"&toolbar=1":i+"&toolbar=0",e.pdfUrlOptions=i}function f(e,t){var n=e.settings.width,s=e.settings.height;return new i({url:t,width:n+"px",height:s+"px",pdfOpenParams:e.pdfOpenParams}).embed(e.elem.id)}function v(e){var t=e.jsViewerPath;e.pdfFrame=$('<iframe id="PDFViewerFrame_'+e.elem.id+'" src="'+t+"?file=&widgetId="+e.elem.id+e.pdfUrlOptions+'" style="display: block;border:none; margin:0; padding:0;width:100%;height:100%"></iframe>'),e.el.html(e.pdfFrame)}function b(e,t){var i,n={};if("/"!==e.substring(0,1)&&"http"!==e.substring(0,4)){var s=$("base").attr("href");e=s+e}return t&&(e=e.replace(/#(.*)/,"")),e}function y(e){var t=[],i,n;if(/#/.test(e)===!0){for(i="",t=e.match(/#(.*)/).pop().split(/\&/),n=0;n<=t.length-1;n+=1)i+=t[n].replace(/(.*?)=(.*)/,'{"$1":"$2"}');i=i.replace(/}{/g,","),i=JSON.parse(i)}return i}function E(e){if(e.isFullscreen===!1){var t=n.getHighestZindex();brease.bodyEl.addClass("fullscreenPDFViewer"),e.pdfFrame.css({"z-index":t+1,position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"}).appendTo(document.body),e.isFullscreen=!0}else brease.bodyEl.removeClass("fullscreenPDFViewer"),e.pdfFrame.css({"z-index":0,position:"relative",top:"0px",left:"0px",width:x(e.settings.width),height:x(e.settings.height)}).appendTo(e.el),e.isFullscreen=!1}function x(e){return e+="",-1!==e.indexOf("%")?e:e+"px"}function I(e){e.el.addClass("iatd-outline"),e.el.css("background-image",'url("widgets/brease/PDFViewer/assets/PDF.svg")')}return s.decorate(a,!1)}),define("widgets/brease/PushButton/designer/ClassInfo",["widgets/brease/Button/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.PushButton",parents:["*"],children:[],inheritance:["widgets.brease.PushButton","widgets.brease.Button","brease.core.BaseWidget"],actions:{RemoveImage:{method:"removeImage"},RemoveMouseDownText:{method:"removeMouseDownText"},RemoveText:{method:"removeText"},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},SetImage:{method:"setImage",parameter:{image:{name:"image",index:0,type:"ImagePath"}}},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},SetMouseDownImage:{method:"setMouseDownImage",parameter:{mouseDownImage:{name:"mouseDownImage",index:0,type:"ImagePath"}}},SetMouseDownText:{method:"setMouseDownText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setMouseDownTextKey:{method:"setMouseDownTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/PushButton/PushButton.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/PushButton">CONTENT</div>\r\n'}),define("widgets/brease/PushButton/PushButton",["require","widgets/brease/Button/Button"],function(e){"use strict";var t=e("widgets/brease/Button/Button"),i={},n=t.extend(function PushButton(){t.apply(this,arguments)},i),s=n.prototype;return n.sendValue=1,s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breasePushButton"),t.prototype.init.call(this)},s.setEditable=function(e,t){if(void 0!==t&&void 0!==t.refAttribute){var i=t.refAttribute;"value"===i&&(this.settings.editable=e,this._internalEnable())}},s._clickHandler=function(e){this.isDisabled||(t.prototype._clickHandler.call(this,e),this.sendValueChange({value:n.sendValue}))},n}),define("widgets/brease/RadioButton/designer/ClassInfo",["widgets/brease/ToggleButton/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.RadioButton",parents:["*"],children:[],inheritance:["widgets.brease.RadioButton","widgets.brease.ToggleButton","widgets.brease.Button","brease.core.BaseWidget"],actions:{RemoveMouseDownText:{method:"removeMouseDownText"},RemoveText:{method:"removeText"},setBoxSize:{method:"setBoxSize",parameter:{boxSize:{name:"boxSize",index:0,type:"Integer"}}},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setCheckedBoxImage:{method:"setCheckedBoxImage",parameter:{checkedBoxImage:{name:"checkedBoxImage",index:0,type:"String"}}},setDisabledCheckedBoxImage:{method:"setDisabledCheckedBoxImage",parameter:{disabledCheckedBoxImage:{name:"disabledCheckedBoxImage",index:0,type:"String"}}},setDisabledUncheckedBoxImage:{method:"setDisabledUncheckedBoxImage",parameter:{disabledUncheckedBoxImage:{name:"disabledUncheckedBoxImage",index:0,type:"String"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setImage:{method:"setImage"},setImageAlign:{method:"setImageAlign",parameter:{imageAlign:{name:"imageAlign",index:0,type:"brease.enum.ImageAlign"}}},SetMouseDownImage:{method:"setMouseDownImage",parameter:{mouseDownImage:{name:"mouseDownImage",index:0,type:"ImagePath"}}},SetMouseDownText:{method:"setMouseDownText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setMouseDownTextKey:{method:"setMouseDownTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"},keepKey:{name:"keepKey",index:1,type:"Boolean"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},setUncheckedBoxImage:{method:"setUncheckedBoxImage",parameter:{uncheckedBoxImage:{name:"uncheckedBoxImage",index:0,type:"String"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"Integer"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/RadioButton/RadioButton.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/RadioButton"></div>\r\n'}),define("widgets/brease/RadioButton/RadioButton",["require","widgets/brease/ToggleButton/ToggleButton","brease/enum/Enum","brease/events/BreaseEvent","brease/core/Types","widgets/brease/common/libs/wfUtils/UtilsImage"],function(e){"use strict";var t=e("widgets/brease/ToggleButton/ToggleButton"),Enum=e("brease/enum/Enum"),BreaseEvent=e("brease/events/BreaseEvent"),Types=e("brease/core/Types"),UtilsImage=e("widgets/brease/common/libs/wfUtils/UtilsImage"),i={height:30,boxSize:25,textAlign:"left",imageAlign:"left",checkedBoxImage:"",uncheckedBoxImage:"",disabledCheckedBoxImage:"",disabledUncheckedBoxImage:""},n=t.extend(function RadioButton(){t.apply(this,arguments)},i),s=n.prototype;s.init=function(){this.group=this.el.data("brease-group"),this.settings.omitClass!==!0&&this.addInitialClass("breaseRadioButton"),o(this),t.prototype.init.call(this),a(this)},s.setBoxSize=function(e){this.settings.boxSize=e,r(this)},s.getBoxSize=function(){return this.settings.boxSize},s.setCheckedBoxImage=function(e){this.settings.checkedBoxImage=e,a(this)},s.getCheckedBoxImage=function(){return this.settings.checkedBoxImage},s.setUncheckedBoxImage=function(e){this.settings.uncheckedBoxImage=e,a(this)},s.getUncheckedBoxImage=function(){return this.settings.uncheckedBoxImage},s.setDisabledCheckedBoxImage=function(e){this.settings.disabledCheckedBoxImage=e,a(this)},s.getDisabledCheckedBoxImage=function(){return this.settings.disabledCheckedBoxImage},s.setDisabledUncheckedBoxImage=function(e){this.settings.disabledUncheckedBoxImage=e,a(this)},s.getDisabledUncheckedBoxImage=function(){return this.settings.disabledUncheckedBoxImage},s.setImage=function(){},s.removeImage=function(){},s.setImageAlign=function(e){this.settings.imageAlign=e,this.setClasses(),l(this)},s.toggle=function(e,i,n,s){var r=$("[data-brease-group="+this.group+"].checked"),o,l=r.attr("id"),d=r.attr("id");t.prototype.toggle.call(this,e,i),n!==!0&&r.length>0&&l!==this.elem.id&&this.settings.value===t.values.checked&&brease.callWidget(l,"toggle",t.values.unchecked,!1),o=$("[data-brease-group="+this.group+"].checked"),l=o.attr("id"),s!==!0&&l!==d&&this.dispatchEvent(new CustomEvent(BreaseEvent.GROUP_CHANGE,{bubbles:!0,cancelable:!0,detail:{checkedId:o.attr("id")}})),a(this)},s.setEnable=function(e){t.prototype.setEnable.apply(this,arguments),a(this)},s.getCheckedId=function(){var e=$("[data-brease-group="+this.group+"].checked");return e.length>0?e.attr("id"):null},s._clickHandler=function(e){this.isDisabled||this.isChecked()===!1&&t.prototype._clickHandler.call(this,e)},s.setClasses=function(){var e;if(void 0===this.imgEl&&void 0===this.radiobutton&&void 0===this.radiobutton||void 0===this.textEl||""===this.settings.text)this.el.removeClass("image-left image-right image-top image-bottom");else{switch(this.settings.imageAlign){case Enum.ImageAlign.left:e="image-left";break;case Enum.ImageAlign.right:e="image-right";break;case Enum.ImageAlign.top:e="image-top";break;case Enum.ImageAlign.bottom:e="image-bottom"}this.el.removeClass("image-left image-right image-top image-bottom"),this.el.addClass(e)}};function r(e){e.imgEl.height(parseInt(e.settings.boxSize,10)).width(parseInt(e.settings.boxSize,10)).css("font-size",e.settings.boxSize+"px").css("line-height",e.settings.boxSize+"px"),e.svgEl.height(parseInt(e.settings.boxSize,10)).width(parseInt(e.settings.boxSize,10)).css("font-size",e.settings.boxSize+"px").css("line-height",e.settings.boxSize+"px"),e.radiobutton.height(parseInt(e.settings.boxSize,10)).width(parseInt(e.settings.boxSize,10)).css("font-size",e.settings.boxSize+"px").css("line-height",e.settings.boxSize+"px")}function a(e){var t=e.getCheckedBoxImage(),i=e.getUncheckedBoxImage(),n=e.getDisabledCheckedBoxImage(),s=e.getDisabledUncheckedBoxImage();e.isEnabled()?e.getValue()?(e.el.addClass("checked"),void 0!==t&&""!==t?UtilsImage.isStylable(t)?UtilsImage.getInlineSvg(t).then(function(t){e.svgEl.replaceWith(t),e.svgEl=t,r(e),e.svgEl.show(),e.imgEl.hide(),e.radiobutton.hide()}):(e.imgEl.attr("src",t),e.svgEl.hide(),e.imgEl.show(),e.radiobutton.hide()):(e.svgEl.hide(),e.imgEl.hide(),e.radiobutton.show())):(e.el.removeClass("checked"),void 0!==i&&""!==i?UtilsImage.isStylable(i)?UtilsImage.getInlineSvg(i).then(function(t){e.svgEl.replaceWith(t),e.svgEl=t,r(e),e.svgEl.show(),e.imgEl.hide(),e.radiobutton.hide()}):(e.imgEl.attr("src",i),e.svgEl.hide(),e.imgEl.show(),e.radiobutton.hide()):(e.svgEl.hide(),e.imgEl.hide(),e.radiobutton.show())):e.getValue()?(e.el.addClass("checked"),void 0!==n&&""!==n?UtilsImage.isStylable(n)?UtilsImage.getInlineSvg(n).then(function(t){e.svgEl.replaceWith(t),e.svgEl=t,r(e),e.svgEl.show(),e.imgEl.hide(),e.radiobutton.hide()}):(e.imgEl.attr("src",n),e.svgEl.hide(),e.imgEl.show(),e.radiobutton.hide()):(e.svgEl.hide(),e.imgEl.hide(),e.radiobutton.show())):(e.el.removeClass("checked"),void 0!==s&&""!==s?UtilsImage.isStylable(s)?UtilsImage.getInlineSvg(s).then(function(t){e.svgEl.replaceWith(t),e.svgEl=t,r(e),e.svgEl.show(),e.imgEl.hide(),e.radiobutton.hide()}):(e.imgEl.attr("src",s),e.svgEl.hide(),e.imgEl.show(),e.radiobutton.hide()):(e.svgEl.hide(),e.imgEl.hide(),e.radiobutton.show()))}function o(e){e.imgEl=$("<img/>").hide(),e.svgEl=$("<svg/>").hide(),e.radiobutton=$('<div class="radiobutton"></div>').hide(),l(e),r(e)}function l(e){void 0!==e.radiobutton&&void 0!==e.imgEl&&void 0!==e.svgEl&&(e.settings.imageAlign===Enum.ImageAlign.left||e.settings.imageAlign===Enum.ImageAlign.top?(e.el.prepend(e.radiobutton),e.el.prepend(e.imgEl),e.el.prepend(e.svgEl)):(e.el.append(e.radiobutton),e.el.append(e.imgEl),e.el.append(e.svgEl)))}return n}),define("widgets/brease/RadioButtonGroup/designer/ClassInfo",["widgets/brease/ButtonBar/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.RadioButtonGroup",parents:["*"],children:["widgets.brease.RadioButton"],inheritance:["widgets.brease.RadioButtonGroup","widgets.brease.ButtonBar","brease.core.ContainerWidget","brease.core.BaseWidget"],actions:{setAlignment:{method:"setAlignment",parameter:{alignment:{name:"alignment",index:0,type:"String"}}},setAutoScroll:{method:"setAutoScroll",parameter:{autoScroll:{name:"autoScroll",index:0,type:"Boolean"}}},setChildPositioning:{method:"setChildPositioning",parameter:{childPositioning:{name:"childPositioning",index:0,type:"String"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setSelectedId:{method:"setSelectedId",parameter:{id:{name:"id",index:0,type:"Object"}}},SetSelectedIndex:{method:"setSelectedIndex",parameter:{index:{name:"index",index:0,type:"Integer"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/RadioButtonGroup/RadioButtonGroup.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/RadioButtonGroup">CONTENT</div>\r\n'}),define("widgets/brease/RadioButtonGroup/RadioButtonGroup",["require","widgets/brease/ButtonBar/ButtonBar"],function(e){"use strict";var t=e("widgets/brease/ButtonBar/ButtonBar"),i={},n=t.extend(function ButtonBar(){t.apply(this,arguments)},i),s=n.prototype;return s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseRadioButtonGroup"),brease.config.editMode===!0&&this.addInitialClass("iatd-outline"),t.prototype.init.call(this)},n}),define("widgets/brease/TextOutput/designer/ClassInfo",["widgets/brease/Label/designer/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.TextOutput",parents:["*"],children:[],inheritance:["widgets.brease.TextOutput","widgets.brease.Label","brease.core.BaseWidget"],actions:{setAutoScroll:{method:"setAutoScroll",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setBreakWord:{method:"setBreakWord",parameter:{breakWord:{name:"breakWord",index:0,type:"Boolean"}}},setEllipsis:{method:"setEllipsis",parameter:{ellipsis:{name:"ellipsis",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setMultiLine:{method:"setMultiLine",parameter:{multiLine:{name:"multiLine",index:0,type:"Boolean"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetText:{method:"setText",parameter:{text:{name:"text",index:0,type:"String"}}},setTextKey:{method:"setTextKey",parameter:{key:{name:"key",index:0,type:"String"}}},SetValue:{method:"setValue",parameter:{value:{name:"value",index:0,type:"String"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setWordWrap:{method:"setWordWrap",parameter:{wordWrap:{name:"wordWrap",index:0,type:"Boolean"}}}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/TextOutput/TextOutput.html",[],function(){return'<label id="WIDGETID" data-brease-widget="widgets/brease/TextOutput">CONTENT</label>\r\n'}),define("widgets/brease/TextOutput/TextOutput",["require","widgets/brease/Label/Label"],function(e){"use strict";var t=e("widgets/brease/Label/Label"),i={value:"default"},n=t.extend(function TextOutput(){t.apply(this,arguments)},i),s=n.prototype;return s.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseTextOutput"),this.settings.text=this.settings.value,t.prototype.init.call(this)},s.setValue=function(e){void 0!==e&&(brease.language.isKey(e)===!1?(this.settings.value=this.settings.text=e,this.setText(this.settings.text),this.removeTextKey()):this.setTextKey(brease.language.parseKey(e)))},s.getValue=function(){return this.settings.value},n}),define("text!widgets/brease/ToggleButton/ToggleButton.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/ToggleButton">CONTENT</div>\r\n'}),define("widgets/brease/VideoPlayer/designer/ClassInfo",["brease/core/designer/BaseWidget/ClassInfo"],function(e,t){"use strict";var i={meta:{className:"widgets.brease.VideoPlayer",parents:["*"],children:[],inheritance:["widgets.brease.VideoPlayer","brease.core.BaseWidget"],actions:{setAutoplay:{method:"setAutoplay",parameter:{autoplay:{name:"autoplay",index:0,type:"Boolean"}}},setControls:{method:"setControls",parameter:{controls:{name:"controls",index:0,type:"Boolean"}}},SetEnable:{method:"setEnable",parameter:{value:{name:"value",index:0,type:"Boolean"}}},setLoop:{method:"setLoop",parameter:{loop:{name:"loop",index:0,type:"Boolean"}}},setMuted:{method:"setMuted",parameter:{muted:{name:"muted",index:0,type:"Boolean"}}},setPoster:{method:"setPoster",parameter:{poster:{name:"poster",index:0,type:"String"}}},setPreload:{method:"setPreload",parameter:{preload:{name:"preload",index:0,type:"brease.enum.VideoPlayerPreload"}}},SetSrc:{method:"setSrc",parameter:{value:{name:"value",index:0,type:"String"}}},SetStyle:{method:"setStyle",parameter:{value:{name:"value",index:0,type:"StyleReference"}}},SetVisible:{method:"setVisible",parameter:{value:{name:"value",index:0,type:"Boolean"}}},StartVideo:{method:"startVideo"},StopVideo:{method:"stopVideo"}}}};return e.classExtension&&(i.classExtension=e.classExtension),t&&(i.classExtension=t),i}),define("text!widgets/brease/VideoPlayer/VideoPlayer.html",[],function(){return'<video id="WIDGETID" data-brease-widget="widgets/brease/VideoPlayer"></video>\r\n'}),define("widgets/brease/VideoPlayer/VideoPlayer",["require","brease/core/BaseWidget","brease/core/Types","brease/decorators/LanguageDependency"],function(e){"use strict";var t=e("brease/core/BaseWidget"),Types=e("brease/core/Types"),i=e("brease/decorators/LanguageDependency"),n={controls:!0,autoplay:!1,loop:!1,poster:"",muted:!1,preload:"none"},s=t.extend(function VideoPlayer(){t.apply(this,arguments)},n),r=s.prototype;r.init=function(){this.settings.omitClass!==!0&&this.addInitialClass("breaseVideoPlayer"),t.prototype.init.call(this),brease.config.editMode?d(this):(a(this),o(this),l(this))},r.setSrc=function(e,t){var i={};t!==!0&&(this.settings.srckey=null),brease.language.isKey(e)===!0?this.setSrcKey(brease.language.parseKey(e)):this.settings.src=e,brease.config.editMode||(i.src=this.settings.src,this.el.attr(i))},r.getSrc=function(){return this.settings.src},r.setControls=function(e){this.settings.controls=e,this.settings.controls=Types.parseValue(this.settings.controls,"Boolean",{"default":this.defaultSettings.controls});var t={controls:this.settings.controls};this.el.attr(t)},r.getControls=function(){return this.settings.controls},r.setAutoplay=function(e){this.settings.autoplay=e,this.settings.autoplay=Types.parseValue(this.settings.autoplay,"Boolean",{"default":this.defaultSettings.autoplay});var t={autoplay:this.settings.autoplay};this.el.attr(t)},r.getAutoplay=function(){return this.settings.autoplay},r.setLoop=function(e){this.settings.loop=e,this.settings.loop=Types.parseValue(this.settings.loop,"Boolean",{"default":this.defaultSettings.loop});var t={loop:this.settings.loop};this.el.attr(t)},r.getLoop=function(){return this.settings.loop},r.setPoster=function(e){if(this.settings.poster=e,brease.config.editMode)return d(this),void 0;var t={};void 0!==this.settings.poster&&(t.poster=this.settings.poster),this.el.attr(t)},r.getPoster=function(){return this.settings.poster},r.setMuted=function(e){this.settings.muted=e},r.getMuted=function(){return this.settings.muted},r.setPreload=function(e){this.settings.preload=e},r.getPreload=function(){return this.settings.preload},r.startVideo=function(){this.elem.play()},r.stopVideo=function(){this.elem.pause()},r.setSrcKey=function(e){void 0!==e&&(this.settings.srckey=e,this.setLangDependency(!0),this.langChangeHandler())},r.getSrcKey=function(){return this.settings.srckey},r.langChangeHandler=function(e){void 0!==this.settings.srckey&&this.setSrc(brease.language.getTextByKey(this.settings.srckey),!0)},r.disable=function(){t.prototype.disable.call(this);var e={};e.controls=!1,this.el.attr(e)},r.enable=function(){t.prototype.enable.call(this);var e={};this.settings.controls?e.controls=!0:e.controls=!1,this.el.attr(e)},r._canPlayHandler=function(){var e={};void 0!==this.settings.poster&&(e.poster=this.settings.poster),this.el.attr(e)},r._errorHandler=function(e){console.log("["+s.name+"]"+this.elem.id+":",this.elem.error),this.el.attr("poster","widgets/brease/VideoPlayer/assets/error.png")},r._videoPlayingHandler=function(){var e=this.createEvent("VideoStarted");e.dispatch()},r._videoPausingHandler=function(){var e=this.createEvent("VideoPaused");e.dispatch()},r.dispose=function(){this.el.off("error",this._bind("_errorHandler")),this.el.off("canplay",this._bind("_canPlayHandler")),t.prototype.dispose.apply(this,arguments)};function a(e){void 0!==e.settings.src&&(brease.language.isKey(e.settings.src)===!1?e.setSrc(e.settings.src):e.setSrcKey(brease.language.parseKey(e.settings.src),!1))}function o(e){e.el.on("error",e._bind("_errorHandler")),e.el.on("canplay",e._bind("_canPlayHandler")),e.el.on("play",e._bind("_videoPlayingHandler")),e.el.on("pause",e._bind("_videoPausingHandler"))}function l(e){var t;t=e.isDisabled?!1:Types.parseValue(e.settings.controls,"Boolean",{"default":e.defaultSettings.controls}),e.settings.autoplay=Types.parseValue(e.settings.autoplay,"Boolean",{"default":e.defaultSettings.autoplay}),e.settings.loop=Types.parseValue(e.settings.loop,"Boolean",{"default":e.defaultSettings.loop}),e.settings.muted=Types.parseValue(e.settings.muted,"Boolean",{"default":e.defaultSettings.muted}),e.settings.preload=Types.parseValue(e.settings.preload,"brease.enum.VideoPlayerPreload",{"default":e.defaultSettings.preload}),e.settings.poster=Types.parseValue(e.settings.poster,"String",{"default":e.defaultSettings.poster});var i={src:e.settings.src,controls:t,autoplay:e.settings.autoplay,loop:e.settings.loop,preload:e.settings.preload,poster:e.settings.poster};e.settings.muted&&(i.muted=e.settings.muted),e.el.attr(i)}function d(e){void 0!==e.settings.poster&&""!==e.settings.poster?e.el.css("background-image","url("+e.settings.poster+")").css("background-repeat","no-repeat").css("background-position","50% 50%"):e.el.css("background-image",'url("widgets/brease/VideoPlayer/assets/Video.svg")').css("background-repeat","no-repeat").css("background-position","50% 50%")}return i.decorate(s,!1)}),define("text!widgets/brease/Window/Window.html",[],function(){return'<div id="WIDGETID" data-brease-widget="widgets/brease/Window">\r\n    <header>\r\n        <div></div>\r\n    </header>\r\n    <div class="contentBox">\r\n        <div class="content"></div>\r\n    </div>\r\n</div>\r\n'}),require.config({waitSeconds:30,paths:{text:"libs/require_plugins/text",css:"libs/require_plugins/css","css-build":"libs/require_plugins/css-build",requireLib:"libs/require",globalize:"libs/globalize",hammer:"libs/hammer.min",mappView:"../mappView"},shim:{jquery:{exports:"jquery"},"libs/lodash":{exports:"_"},"libs/pdfobject":{exports:"PDFObject"},"libs/jquery/jquery.extensions":["jquery"],"libs/jquery/jquery.mobile.virtualMouse":["jquery"],"libs/jquery/jquery-ui-1.10.3.custom":["jquery"],"libs/jquery/jquery-ui-1.10.4.custom":["jquery"]}}),void 0===window.performanceMonitor&&(window.performanceMonitor={profile:function(){}}),define("require_config",function(){});